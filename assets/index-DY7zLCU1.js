(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function UE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var rM={exports:{}},Kg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jT;function OU(){if(jT)return Kg;jT=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var c in i)c!=="key"&&(s[c]=i[c])}else s=i;return i=s.ref,{$$typeof:r,type:n,key:l,ref:i!==void 0?i:null,props:s}}return Kg.Fragment=e,Kg.jsx=t,Kg.jsxs=t,Kg}var KT;function NU(){return KT||(KT=1,rM.exports=OU()),rM.exports}var Oe=NU(),oM={exports:{}},Tn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT;function LU(){if(ZT)return Tn;ZT=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.iterator;function y(P){return P===null||typeof P!="object"?null:(P=_&&P[_]||P["@@iterator"],typeof P=="function"?P:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,T={};function b(P,ue,Ce){this.props=P,this.context=ue,this.refs=T,this.updater=Ce||x}b.prototype.isReactComponent={},b.prototype.setState=function(P,ue){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,ue,"setState")},b.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function E(){}E.prototype=b.prototype;function w(P,ue,Ce){this.props=P,this.context=ue,this.refs=T,this.updater=Ce||x}var D=w.prototype=new E;D.constructor=w,M(D,b.prototype),D.isPureReactComponent=!0;var B=Array.isArray,I={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function F(P,ue,Ce,Xe,re,Ne){return Ce=Ne.ref,{$$typeof:r,type:P,key:ue,ref:Ce!==void 0?Ce:null,props:Ne}}function H(P,ue){return F(P.type,ue,void 0,void 0,void 0,P.props)}function U(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function N(P){var ue={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(Ce){return ue[Ce]})}var Y=/\/+/g;function ee(P,ue){return typeof P=="object"&&P!==null&&P.key!=null?N(""+P.key):ue.toString(36)}function $(){}function ae(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then($,$):(P.status="pending",P.then(function(ue){P.status==="pending"&&(P.status="fulfilled",P.value=ue)},function(ue){P.status==="pending"&&(P.status="rejected",P.reason=ue)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function me(P,ue,Ce,Xe,re){var Ne=typeof P;(Ne==="undefined"||Ne==="boolean")&&(P=null);var Be=!1;if(P===null)Be=!0;else switch(Ne){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(P.$$typeof){case r:case e:Be=!0;break;case g:return Be=P._init,me(Be(P._payload),ue,Ce,Xe,re)}}if(Be)return re=re(P),Be=Xe===""?"."+ee(P,0):Xe,B(re)?(Ce="",Be!=null&&(Ce=Be.replace(Y,"$&/")+"/"),me(re,ue,Ce,"",function(wt){return wt})):re!=null&&(U(re)&&(re=H(re,Ce+(re.key==null||P&&P.key===re.key?"":(""+re.key).replace(Y,"$&/")+"/")+Be)),ue.push(re)),1;Be=0;var Ve=Xe===""?".":Xe+":";if(B(P))for(var tt=0;tt<P.length;tt++)Xe=P[tt],Ne=Ve+ee(Xe,tt),Be+=me(Xe,ue,Ce,Ne,re);else if(tt=y(P),typeof tt=="function")for(P=tt.call(P),tt=0;!(Xe=P.next()).done;)Xe=Xe.value,Ne=Ve+ee(Xe,tt++),Be+=me(Xe,ue,Ce,Ne,re);else if(Ne==="object"){if(typeof P.then=="function")return me(ae(P),ue,Ce,Xe,re);throw ue=String(P),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return Be}function Q(P,ue,Ce){if(P==null)return P;var Xe=[],re=0;return me(P,Xe,"","",function(Ne){return ue.call(Ce,Ne,re++)}),Xe}function he(P){if(P._status===-1){var ue=P._result;ue=ue(),ue.then(function(Ce){(P._status===0||P._status===-1)&&(P._status=1,P._result=Ce)},function(Ce){(P._status===0||P._status===-1)&&(P._status=2,P._result=Ce)}),P._status===-1&&(P._status=0,P._result=ue)}if(P._status===1)return P._result.default;throw P._result}var oe=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function be(){}return Tn.Children={map:Q,forEach:function(P,ue,Ce){Q(P,function(){ue.apply(this,arguments)},Ce)},count:function(P){var ue=0;return Q(P,function(){ue++}),ue},toArray:function(P){return Q(P,function(ue){return ue})||[]},only:function(P){if(!U(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Tn.Component=b,Tn.Fragment=t,Tn.Profiler=i,Tn.PureComponent=w,Tn.StrictMode=n,Tn.Suspense=h,Tn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Tn.act=function(){throw Error("act(...) is not supported in production builds of React.")},Tn.cache=function(P){return function(){return P.apply(null,arguments)}},Tn.cloneElement=function(P,ue,Ce){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var Xe=M({},P.props),re=P.key,Ne=void 0;if(ue!=null)for(Be in ue.ref!==void 0&&(Ne=void 0),ue.key!==void 0&&(re=""+ue.key),ue)!L.call(ue,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&ue.ref===void 0||(Xe[Be]=ue[Be]);var Be=arguments.length-2;if(Be===1)Xe.children=Ce;else if(1<Be){for(var Ve=Array(Be),tt=0;tt<Be;tt++)Ve[tt]=arguments[tt+2];Xe.children=Ve}return F(P.type,re,void 0,void 0,Ne,Xe)},Tn.createContext=function(P){return P={$$typeof:l,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:s,_context:P},P},Tn.createElement=function(P,ue,Ce){var Xe,re={},Ne=null;if(ue!=null)for(Xe in ue.key!==void 0&&(Ne=""+ue.key),ue)L.call(ue,Xe)&&Xe!=="key"&&Xe!=="__self"&&Xe!=="__source"&&(re[Xe]=ue[Xe]);var Be=arguments.length-2;if(Be===1)re.children=Ce;else if(1<Be){for(var Ve=Array(Be),tt=0;tt<Be;tt++)Ve[tt]=arguments[tt+2];re.children=Ve}if(P&&P.defaultProps)for(Xe in Be=P.defaultProps,Be)re[Xe]===void 0&&(re[Xe]=Be[Xe]);return F(P,Ne,void 0,void 0,null,re)},Tn.createRef=function(){return{current:null}},Tn.forwardRef=function(P){return{$$typeof:c,render:P}},Tn.isValidElement=U,Tn.lazy=function(P){return{$$typeof:g,_payload:{_status:-1,_result:P},_init:he}},Tn.memo=function(P,ue){return{$$typeof:p,type:P,compare:ue===void 0?null:ue}},Tn.startTransition=function(P){var ue=I.T,Ce={};I.T=Ce;try{var Xe=P(),re=I.S;re!==null&&re(Ce,Xe),typeof Xe=="object"&&Xe!==null&&typeof Xe.then=="function"&&Xe.then(be,oe)}catch(Ne){oe(Ne)}finally{I.T=ue}},Tn.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Tn.use=function(P){return I.H.use(P)},Tn.useActionState=function(P,ue,Ce){return I.H.useActionState(P,ue,Ce)},Tn.useCallback=function(P,ue){return I.H.useCallback(P,ue)},Tn.useContext=function(P){return I.H.useContext(P)},Tn.useDebugValue=function(){},Tn.useDeferredValue=function(P,ue){return I.H.useDeferredValue(P,ue)},Tn.useEffect=function(P,ue){return I.H.useEffect(P,ue)},Tn.useId=function(){return I.H.useId()},Tn.useImperativeHandle=function(P,ue,Ce){return I.H.useImperativeHandle(P,ue,Ce)},Tn.useInsertionEffect=function(P,ue){return I.H.useInsertionEffect(P,ue)},Tn.useLayoutEffect=function(P,ue){return I.H.useLayoutEffect(P,ue)},Tn.useMemo=function(P,ue){return I.H.useMemo(P,ue)},Tn.useOptimistic=function(P,ue){return I.H.useOptimistic(P,ue)},Tn.useReducer=function(P,ue,Ce){return I.H.useReducer(P,ue,Ce)},Tn.useRef=function(P){return I.H.useRef(P)},Tn.useState=function(P){return I.H.useState(P)},Tn.useSyncExternalStore=function(P,ue,Ce){return I.H.useSyncExternalStore(P,ue,Ce)},Tn.useTransition=function(){return I.H.useTransition()},Tn.version="19.0.0",Tn}var QT;function Um(){return QT||(QT=1,oM.exports=LU()),oM.exports}var pt=Um();const IU=UE(pt);var lM={exports:{}},Zg={},cM={exports:{}},uM={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $T;function PU(){return $T||($T=1,function(r){function e(Q,he){var oe=Q.length;Q.push(he);e:for(;0<oe;){var be=oe-1>>>1,P=Q[be];if(0<i(P,he))Q[be]=he,Q[oe]=P,oe=be;else break e}}function t(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var he=Q[0],oe=Q.pop();if(oe!==he){Q[0]=oe;e:for(var be=0,P=Q.length,ue=P>>>1;be<ue;){var Ce=2*(be+1)-1,Xe=Q[Ce],re=Ce+1,Ne=Q[re];if(0>i(Xe,oe))re<P&&0>i(Ne,Xe)?(Q[be]=Ne,Q[re]=oe,be=re):(Q[be]=Xe,Q[Ce]=oe,be=Ce);else if(re<P&&0>i(Ne,oe))Q[be]=Ne,Q[re]=oe,be=re;else break e}}return he}function i(Q,he){var oe=Q.sortIndex-he.sortIndex;return oe!==0?oe:Q.id-he.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();r.unstable_now=function(){return l.now()-c}}var h=[],p=[],g=1,_=null,y=3,x=!1,M=!1,T=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function D(Q){for(var he=t(p);he!==null;){if(he.callback===null)n(p);else if(he.startTime<=Q)n(p),he.sortIndex=he.expirationTime,e(h,he);else break;he=t(p)}}function B(Q){if(T=!1,D(Q),!M)if(t(h)!==null)M=!0,ae();else{var he=t(p);he!==null&&me(B,he.startTime-Q)}}var I=!1,L=-1,F=5,H=-1;function U(){return!(r.unstable_now()-H<F)}function N(){if(I){var Q=r.unstable_now();H=Q;var he=!0;try{e:{M=!1,T&&(T=!1,E(L),L=-1),x=!0;var oe=y;try{t:{for(D(Q),_=t(h);_!==null&&!(_.expirationTime>Q&&U());){var be=_.callback;if(typeof be=="function"){_.callback=null,y=_.priorityLevel;var P=be(_.expirationTime<=Q);if(Q=r.unstable_now(),typeof P=="function"){_.callback=P,D(Q),he=!0;break t}_===t(h)&&n(h),D(Q)}else n(h);_=t(h)}if(_!==null)he=!0;else{var ue=t(p);ue!==null&&me(B,ue.startTime-Q),he=!1}}break e}finally{_=null,y=oe,x=!1}he=void 0}}finally{he?Y():I=!1}}}var Y;if(typeof w=="function")Y=function(){w(N)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,$=ee.port2;ee.port1.onmessage=N,Y=function(){$.postMessage(null)}}else Y=function(){b(N,0)};function ae(){I||(I=!0,Y())}function me(Q,he){L=b(function(){Q(r.unstable_now())},he)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_continueExecution=function(){M||x||(M=!0,ae())},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(Q){switch(y){case 1:case 2:case 3:var he=3;break;default:he=y}var oe=y;y=he;try{return Q()}finally{y=oe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Q,he){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var oe=y;y=Q;try{return he()}finally{y=oe}},r.unstable_scheduleCallback=function(Q,he,oe){var be=r.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?be+oe:be):oe=be,Q){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=oe+P,Q={id:g++,callback:he,priorityLevel:Q,startTime:oe,expirationTime:P,sortIndex:-1},oe>be?(Q.sortIndex=oe,e(p,Q),t(h)===null&&Q===t(p)&&(T?(E(L),L=-1):T=!0,me(B,oe-be))):(Q.sortIndex=P,e(h,Q),M||x||(M=!0,ae())),Q},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(Q){var he=y;return function(){var oe=y;y=he;try{return Q.apply(this,arguments)}finally{y=oe}}}}(uM)),uM}var eC;function OE(){return eC||(eC=1,cM.exports=PU()),cM.exports}var fM={exports:{}},ys={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tC;function FU(){if(tC)return ys;tC=1;var r=Um();function e(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(h,p,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:_==null?null:""+_,children:h,containerInfo:p,implementation:g}}var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ys.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ys.createPortal=function(h,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return s(h,p,null,g)},ys.flushSync=function(h){var p=l.T,g=n.p;try{if(l.T=null,n.p=2,h)return h()}finally{l.T=p,n.p=g,n.d.f()}},ys.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(h,p))},ys.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},ys.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var g=p.as,_=c(g,p.crossOrigin),y=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?n.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:y,fetchPriority:x}):g==="script"&&n.d.X(h,{crossOrigin:_,integrity:y,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ys.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=c(p.as,p.crossOrigin);n.d.M(h,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(h)},ys.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,_=c(g,p.crossOrigin);n.d.L(h,g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ys.preloadModule=function(h,p){if(typeof h=="string")if(p){var g=c(p.as,p.crossOrigin);n.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(h)},ys.requestFormReset=function(h){n.d.r(h)},ys.unstable_batchedUpdates=function(h,p){return h(p)},ys.useFormState=function(h,p,g){return l.H.useFormState(h,p,g)},ys.useFormStatus=function(){return l.H.useHostTransitionStatus()},ys.version="19.0.0",ys}var nC;function zU(){if(nC)return fM.exports;nC=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),fM.exports=FU(),fM.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iC;function HU(){if(iC)return Zg;iC=1;var r=OE(),e=Um(),t=zU();function n(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}var s=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),x=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),B=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function L(a){return a===null||typeof a!="object"?null:(a=I&&a[I]||a["@@iterator"],typeof a=="function"?a:null)}var F=Symbol.for("react.client.reference");function H(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===F?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case h:return"Fragment";case c:return"Portal";case g:return"Profiler";case p:return"StrictMode";case T:return"Suspense";case b:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case x:return(a.displayName||"Context")+".Provider";case y:return(a._context.displayName||"Context")+".Consumer";case M:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case E:return o=a.displayName||null,o!==null?o:H(a.type)||"Memo";case w:o=a._payload,a=a._init;try{return H(a(o))}catch{}}return null}var U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N=Object.assign,Y,ee;function $(a){if(Y===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);Y=o&&o[1]||"",ee=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Y+a+ee}var ae=!1;function me(a,o){if(!a||ae)return"";ae=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var ot=function(){throw Error()};if(Object.defineProperty(ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ot,[])}catch(We){var Pe=We}Reflect.construct(a,[],ot)}else{try{ot.call()}catch(We){Pe=We}a.call(ot.prototype)}}else{try{throw Error()}catch(We){Pe=We}(ot=a())&&typeof ot.catch=="function"&&ot.catch(function(){})}}catch(We){if(We&&Pe&&typeof We.stack=="string")return[We.stack,Pe.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=m.DetermineComponentFrameRoot(),z=C[0],q=C[1];if(z&&q){var ie=z.split(`
`),ve=q.split(`
`);for(A=m=0;m<ie.length&&!ie[m].includes("DetermineComponentFrameRoot");)m++;for(;A<ve.length&&!ve[A].includes("DetermineComponentFrameRoot");)A++;if(m===ie.length||A===ve.length)for(m=ie.length-1,A=ve.length-1;1<=m&&0<=A&&ie[m]!==ve[A];)A--;for(;1<=m&&0<=A;m--,A--)if(ie[m]!==ve[A]){if(m!==1||A!==1)do if(m--,A--,0>A||ie[m]!==ve[A]){var Qe=`
`+ie[m].replace(" at new "," at ");return a.displayName&&Qe.includes("<anonymous>")&&(Qe=Qe.replace("<anonymous>",a.displayName)),Qe}while(1<=m&&0<=A);break}}}finally{ae=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?$(d):""}function Q(a){switch(a.tag){case 26:case 27:case 5:return $(a.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 15:return a=me(a.type,!1),a;case 11:return a=me(a.type.render,!1),a;case 1:return a=me(a.type,!0),a;default:return""}}function he(a){try{var o="";do o+=Q(a),a=a.return;while(a);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function oe(a){var o=a,d=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(d=o.return),a=o.return;while(a)}return o.tag===3?d:null}function be(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function P(a){if(oe(a)!==a)throw Error(n(188))}function ue(a){var o=a.alternate;if(!o){if(o=oe(a),o===null)throw Error(n(188));return o!==a?null:a}for(var d=a,m=o;;){var A=d.return;if(A===null)break;var C=A.alternate;if(C===null){if(m=A.return,m!==null){d=m;continue}break}if(A.child===C.child){for(C=A.child;C;){if(C===d)return P(A),a;if(C===m)return P(A),o;C=C.sibling}throw Error(n(188))}if(d.return!==m.return)d=A,m=C;else{for(var z=!1,q=A.child;q;){if(q===d){z=!0,d=A,m=C;break}if(q===m){z=!0,m=A,d=C;break}q=q.sibling}if(!z){for(q=C.child;q;){if(q===d){z=!0,d=C,m=A;break}if(q===m){z=!0,m=C,d=A;break}q=q.sibling}if(!z)throw Error(n(189))}}if(d.alternate!==m)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?a:o}function Ce(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=Ce(a),o!==null)return o;a=a.sibling}return null}var Xe=Array.isArray,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne={pending:!1,data:null,method:null,action:null},Be=[],Ve=-1;function tt(a){return{current:a}}function wt(a){0>Ve||(a.current=Be[Ve],Be[Ve]=null,Ve--)}function ht(a,o){Ve++,Be[Ve]=a.current,a.current=o}var Pt=tt(null),Je=tt(null),De=tt(null),j=tt(null);function Mt(a,o){switch(ht(De,o),ht(Je,a),ht(Pt,null),a=o.nodeType,a){case 9:case 11:o=(o=o.documentElement)&&(o=o.namespaceURI)?ET(o):0;break;default:if(a=a===8?o.parentNode:o,o=a.tagName,a=a.namespaceURI)a=ET(a),o=bT(a,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}wt(Pt),ht(Pt,o)}function $e(){wt(Pt),wt(Je),wt(De)}function pe(a){a.memoizedState!==null&&ht(j,a);var o=Pt.current,d=bT(o,a.type);o!==d&&(ht(Je,a),ht(Pt,d))}function at(a){Je.current===a&&(wt(Pt),wt(Je)),j.current===a&&(wt(j),Yg._currentValue=Ne)}var Lt=Object.prototype.hasOwnProperty,ut=r.unstable_scheduleCallback,W=r.unstable_cancelCallback,k=r.unstable_shouldYield,xe=r.unstable_requestPaint,ze=r.unstable_now,Ye=r.unstable_getCurrentPriorityLevel,ke=r.unstable_ImmediatePriority,_t=r.unstable_UserBlockingPriority,lt=r.unstable_NormalPriority,yt=r.unstable_LowPriority,$t=r.unstable_IdlePriority,st=r.log,vt=r.unstable_setDisableYieldValue,Nt=null,mt=null;function Et(a){if(mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(Nt,a,void 0,(a.current.flags&128)===128)}catch{}}function le(a){if(typeof st=="function"&&vt(a),mt&&typeof mt.setStrictMode=="function")try{mt.setStrictMode(Nt,a)}catch{}}var Re=Math.clz32?Math.clz32:Me,rt=Math.log,ne=Math.LN2;function Me(a){return a>>>=0,a===0?32:31-(rt(a)/ne|0)|0}var Te=128,Ge=4194304;function dt(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function xt(a,o){var d=a.pendingLanes;if(d===0)return 0;var m=0,A=a.suspendedLanes,C=a.pingedLanes,z=a.warmLanes;a=a.finishedLanes!==0;var q=d&134217727;return q!==0?(d=q&~A,d!==0?m=dt(d):(C&=q,C!==0?m=dt(C):a||(z=q&~z,z!==0&&(m=dt(z))))):(q=d&~A,q!==0?m=dt(q):C!==0?m=dt(C):a||(z=d&~z,z!==0&&(m=dt(z)))),m===0?0:o!==0&&o!==m&&(o&A)===0&&(A=m&-m,z=o&-o,A>=z||A===32&&(z&4194176)!==0)?o:m}function Ft(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function rn(a,o){switch(a){case 1:case 2:case 4:case 8:return o+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bn(){var a=Te;return Te<<=1,(Te&4194176)===0&&(Te=128),a}function St(){var a=Ge;return Ge<<=1,(Ge&62914560)===0&&(Ge=4194304),a}function Dt(a){for(var o=[],d=0;31>d;d++)o.push(a);return o}function Zt(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function bt(a,o,d,m,A,C){var z=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var q=a.entanglements,ie=a.expirationTimes,ve=a.hiddenUpdates;for(d=z&~d;0<d;){var Qe=31-Re(d),ot=1<<Qe;q[Qe]=0,ie[Qe]=-1;var Pe=ve[Qe];if(Pe!==null)for(ve[Qe]=null,Qe=0;Qe<Pe.length;Qe++){var We=Pe[Qe];We!==null&&(We.lane&=-536870913)}d&=~ot}m!==0&&en(a,m,0),C!==0&&A===0&&a.tag!==0&&(a.suspendedLanes|=C&~(z&~o))}function en(a,o,d){a.pendingLanes|=o,a.suspendedLanes&=~o;var m=31-Re(o);a.entangledLanes|=o,a.entanglements[m]=a.entanglements[m]|1073741824|d&4194218}function It(a,o){var d=a.entangledLanes|=o;for(a=a.entanglements;d;){var m=31-Re(d),A=1<<m;A&o|a[m]&o&&(a[m]|=o),d&=~A}}function qt(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Zn(){var a=re.p;return a!==0?a:(a=window.event,a===void 0?32:kT(a.type))}function tn(a,o){var d=re.p;try{return re.p=a,o()}finally{re.p=d}}var Rt=Math.random().toString(36).slice(2),gn="__reactFiber$"+Rt,Ht="__reactProps$"+Rt,G="__reactContainer$"+Rt,X="__reactEvents$"+Rt,ce="__reactListeners$"+Rt,ye="__reactHandles$"+Rt,Ie="__reactResources$"+Rt,Le="__reactMarker$"+Rt;function nt(a){delete a[gn],delete a[Ht],delete a[X],delete a[ce],delete a[ye]}function qe(a){var o=a[gn];if(o)return o;for(var d=a.parentNode;d;){if(o=d[G]||d[gn]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(a=RT(a);a!==null;){if(d=a[gn])return d;a=RT(a)}return o}a=d,d=a.parentNode}return null}function V(a){if(a=a[gn]||a[G]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function K(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(n(33))}function se(a){var o=a[Ie];return o||(o=a[Ie]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function te(a){a[Le]=!0}var de=new Set,Ae={};function He(a,o){je(a,o),je(a+"Capture",o)}function je(a,o){for(Ae[a]=o,a=0;a<o.length;a++)de.add(o[a])}var Ke=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),At=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tt={},Ct={};function Wt(a){return Lt.call(Ct,a)?!0:Lt.call(Tt,a)?!1:At.test(a)?Ct[a]=!0:(Tt[a]=!0,!1)}function Vt(a,o,d){if(Wt(o))if(d===null)a.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+d)}}function Dn(a,o,d){if(d===null)a.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+d)}}function Yt(a,o,d,m){if(m===null)a.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(o,d,""+m)}}function zt(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Gt(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function vi(a){var o=Gt(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),m=""+a[o];if(!a.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var A=d.get,C=d.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return A.call(this)},set:function(z){m=""+z,C.call(this,z)}}),Object.defineProperty(a,o,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(z){m=""+z},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function on(a){a._valueTracker||(a._valueTracker=vi(a))}function mn(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var d=o.getValue(),m="";return a&&(m=Gt(a)?a.checked?"true":"false":a.value),a=m,a!==d?(o.setValue(a),!0):!1}function ni(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var xn=/[\n"\\]/g;function ln(a){return a.replace(xn,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function vn(a,o,d,m,A,C,z,q){a.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?a.type=z:a.removeAttribute("type"),o!=null?z==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+zt(o)):a.value!==""+zt(o)&&(a.value=""+zt(o)):z!=="submit"&&z!=="reset"||a.removeAttribute("value"),o!=null?Qn(a,z,zt(o)):d!=null?Qn(a,z,zt(d)):m!=null&&a.removeAttribute("value"),A==null&&C!=null&&(a.defaultChecked=!!C),A!=null&&(a.checked=A&&typeof A!="function"&&typeof A!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?a.name=""+zt(q):a.removeAttribute("name")}function bi(a,o,d,m,A,C,z,q){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),o!=null||d!=null){if(!(C!=="submit"&&C!=="reset"||o!=null))return;d=d!=null?""+zt(d):"",o=o!=null?""+zt(o):d,q||o===a.value||(a.value=o),a.defaultValue=o}m=m??A,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=q?a.checked:!!m,a.defaultChecked=!!m,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(a.name=z)}function Qn(a,o,d){o==="number"&&ni(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function $n(a,o,d,m){if(a=a.options,o){o={};for(var A=0;A<d.length;A++)o["$"+d[A]]=!0;for(d=0;d<a.length;d++)A=o.hasOwnProperty("$"+a[d].value),a[d].selected!==A&&(a[d].selected=A),A&&m&&(a[d].defaultSelected=!0)}else{for(d=""+zt(d),o=null,A=0;A<a.length;A++){if(a[A].value===d){a[A].selected=!0,m&&(a[A].defaultSelected=!0);return}o!==null||a[A].disabled||(o=a[A])}o!==null&&(o.selected=!0)}}function pa(a,o,d){if(o!=null&&(o=""+zt(o),o!==a.value&&(a.value=o),d==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=d!=null?""+zt(d):""}function Mr(a,o,d,m){if(o==null){if(m!=null){if(d!=null)throw Error(n(92));if(Xe(m)){if(1<m.length)throw Error(n(93));m=m[0]}d=m}d==null&&(d=""),o=d}d=zt(o),a.defaultValue=d,m=a.textContent,m===d&&m!==""&&m!==null&&(a.value=m)}function Ja(a,o){if(o){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=o;return}}a.textContent=o}var Od=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lf(a,o,d){var m=o.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":m?a.setProperty(o,d):typeof d!="number"||d===0||Od.has(o)?o==="float"?a.cssFloat=d:a[o]=(""+d).trim():a[o]=d+"px"}function zm(a,o,d){if(o!=null&&typeof o!="object")throw Error(n(62));if(a=a.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var A in o)m=o[A],o.hasOwnProperty(A)&&d[A]!==m&&Lf(a,A,m)}else for(var C in o)o.hasOwnProperty(C)&&Lf(a,C,o[C])}function If(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pf(a){return Lv.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Nd=null;function Ff(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var vc=null,_c=null;function Ld(a){var o=V(a);if(o&&(a=o.stateNode)){var d=a[Ht]||null;e:switch(a=o.stateNode,o.type){case"input":if(vn(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),o=d.name,d.type==="radio"&&o!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+ln(""+o)+'"][type="radio"]'),o=0;o<d.length;o++){var m=d[o];if(m!==a&&m.form===a.form){var A=m[Ht]||null;if(!A)throw Error(n(90));vn(m,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(o=0;o<d.length;o++)m=d[o],m.form===a.form&&mn(m)}break e;case"textarea":pa(a,d.value,d.defaultValue);break e;case"select":o=d.value,o!=null&&$n(a,!!d.multiple,o,!1)}}}var Id=!1;function Hm(a,o,d){if(Id)return a(o,d);Id=!0;try{var m=a(o);return m}finally{if(Id=!1,(vc!==null||_c!==null)&&(Hc(),vc&&(o=vc,a=_c,_c=vc=null,Ld(o),a)))for(o=0;o<a.length;o++)Ld(a[o])}}function pu(a,o){var d=a.stateNode;if(d===null)return null;var m=d[Ht]||null;if(m===null)return null;d=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(n(231,o,typeof d));return d}var zf=!1;if(Ke)try{var mu={};Object.defineProperty(mu,"passive",{get:function(){zf=!0}}),window.addEventListener("test",mu,mu),window.removeEventListener("test",mu,mu)}catch{zf=!1}var bo=null,Gm=null,Pd=null;function Vm(){if(Pd)return Pd;var a,o=Gm,d=o.length,m,A="value"in bo?bo.value:bo.textContent,C=A.length;for(a=0;a<d&&o[a]===A[a];a++);var z=d-a;for(m=1;m<=z&&o[d-m]===A[C-m];m++);return Pd=A.slice(a,1<m?1-m:void 0)}function vl(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function gu(){return!0}function Hf(){return!1}function Wa(a){function o(d,m,A,C,z){this._reactName=d,this._targetInst=A,this.type=m,this.nativeEvent=C,this.target=z,this.currentTarget=null;for(var q in a)a.hasOwnProperty(q)&&(d=a[q],this[q]=d?d(C):C[q]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?gu:Hf,this.isPropagationStopped=Hf,this}return N(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=gu)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=gu)},persist:function(){},isPersistent:gu}),o}var _l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vu=Wa(_l),_u=N({},_l,{view:0,detail:0}),Iv=Wa(_u),To,yu,xu,Au=N({},_u,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==xu&&(xu&&a.type==="mousemove"?(To=a.screenX-xu.screenX,yu=a.screenY-xu.screenY):yu=To=0,xu=a),To)},movementY:function(a){return"movementY"in a?a.movementY:yu}}),km=Wa(Au),Pv=N({},Au,{dataTransfer:0}),bS=Wa(Pv),Sa=N({},_u,{relatedTarget:0}),Fd=Wa(Sa),Fv=N({},_l,{animationName:0,elapsedTime:0,pseudoElement:0}),zv=Wa(Fv),Hv=N({},_l,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Gv=Wa(Hv),Gf=N({},_l,{data:0}),zd=Wa(Gf),Vv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xm(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=Xv[a])?!!o[a]:!1}function Vf(){return Xm}var Yv=N({},_u,{key:function(a){if(a.key){var o=Vv[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=vl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?kv[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(a){return a.type==="keypress"?vl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?vl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Ym=Wa(Yv),qm=N({},Au,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hd=Wa(qm),qv=N({},_u,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),Jm=Wa(qv),Jv=N({},_l,{propertyName:0,elapsedTime:0,pseudoElement:0}),Co=Wa(Jv),Wm=N({},Au,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),TS=Wa(Wm),Wv=N({},_l,{newState:0,oldState:0}),yl=Wa(Wv),Ro=[9,13,27,32],kf=Ke&&"CompositionEvent"in window,yc=null;Ke&&"documentMode"in document&&(yc=document.documentMode);var Xf=Ke&&"TextEvent"in window&&!yc,Yf=Ke&&(!kf||yc&&8<yc&&11>=yc),xl=" ",Ma=!1;function qf(a,o){switch(a){case"keyup":return Ro.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jm(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Al=!1;function Jf(a,o){switch(a){case"compositionend":return jm(o);case"keypress":return o.which!==32?null:(Ma=!0,xl);case"textInput":return a=o.data,a===xl&&Ma?null:a;default:return null}}function Km(a,o){if(Al)return a==="compositionend"||!kf&&qf(a,o)?(a=Vm(),Pd=Gm=bo=null,Al=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Yf&&o.locale!=="ko"?null:o.data;default:return null}}var Gd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zm(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!Gd[a.type]:o==="textarea"}function cs(a,o,d,m){vc?_c?_c.push(m):_c=[m]:vc=m,o=W_(o,"onChange"),0<o.length&&(d=new vu("onChange","change",null,d,m),a.push({event:d,listeners:o}))}var Su=null,xc=null;function jv(a){yT(a,0)}function Wf(a){var o=K(a);if(mn(o))return a}function Vd(a,o){if(a==="change")return o}var kd=!1;if(Ke){var Xd;if(Ke){var Mu="oninput"in document;if(!Mu){var Eu=document.createElement("div");Eu.setAttribute("oninput","return;"),Mu=typeof Eu.oninput=="function"}Xd=Mu}else Xd=!1;kd=Xd&&(!document.documentMode||9<document.documentMode)}function Ti(){Su&&(Su.detachEvent("onpropertychange",Kv),xc=Su=null)}function Kv(a){if(a.propertyName==="value"&&Wf(xc)){var o=[];cs(o,xc,a,Ff(a)),Hm(jv,o)}}function CS(a,o,d){a==="focusin"?(Ti(),Su=o,xc=d,Su.attachEvent("onpropertychange",Kv)):a==="focusout"&&Ti()}function Zv(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Wf(xc)}function jf(a,o){if(a==="click")return Wf(o)}function Sl(a,o){if(a==="input"||a==="change")return Wf(o)}function Qv(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var us=typeof Object.is=="function"?Object.is:Qv;function Er(a,o){if(us(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var d=Object.keys(a),m=Object.keys(o);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var A=d[m];if(!Lt.call(o,A)||!us(a[A],o[A]))return!1}return!0}function fs(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Qm(a,o){var d=fs(a);a=0;for(var m;d;){if(d.nodeType===3){if(m=a+d.textContent.length,a<=o&&m>=o)return{node:d,offset:o-a};a=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=fs(d)}}function $m(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?$m(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function eg(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=ni(a.document);o instanceof a.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)a=o.contentWindow;else break;o=ni(a.document)}return o}function Kf(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}function tg(a,o){var d=eg(o);o=a.focusedElem;var m=a.selectionRange;if(d!==o&&o&&o.ownerDocument&&$m(o.ownerDocument.documentElement,o)){if(m!==null&&Kf(o)){if(a=m.start,d=m.end,d===void 0&&(d=a),"selectionStart"in o)o.selectionStart=a,o.selectionEnd=Math.min(d,o.value.length);else if(d=(a=o.ownerDocument||document)&&a.defaultView||window,d.getSelection){d=d.getSelection();var A=o.textContent.length,C=Math.min(m.start,A);m=m.end===void 0?C:Math.min(m.end,A),!d.extend&&C>m&&(A=m,m=C,C=A),A=Qm(o,C);var z=Qm(o,m);A&&z&&(d.rangeCount!==1||d.anchorNode!==A.node||d.anchorOffset!==A.offset||d.focusNode!==z.node||d.focusOffset!==z.offset)&&(a=a.createRange(),a.setStart(A.node,A.offset),d.removeAllRanges(),C>m?(d.addRange(a),d.extend(z.node,z.offset)):(a.setEnd(z.node,z.offset),d.addRange(a)))}}for(a=[],d=o;d=d.parentNode;)d.nodeType===1&&a.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<a.length;o++)d=a[o],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var Yd=Ke&&"documentMode"in document&&11>=document.documentMode,Ac=null,ng=null,bu=null,qd=!1;function Zs(a,o,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;qd||Ac==null||Ac!==ni(m)||(m=Ac,"selectionStart"in m&&Kf(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),bu&&Er(bu,m)||(bu=m,m=W_(ng,"onSelect"),0<m.length&&(o=new vu("onSelect","select",null,o,d),a.push({event:o,listeners:m}),o.target=Ac)))}function wo(a,o){var d={};return d[a.toLowerCase()]=o.toLowerCase(),d["Webkit"+a]="webkit"+o,d["Moz"+a]="moz"+o,d}var Sc={animationend:wo("Animation","AnimationEnd"),animationiteration:wo("Animation","AnimationIteration"),animationstart:wo("Animation","AnimationStart"),transitionrun:wo("Transition","TransitionRun"),transitionstart:wo("Transition","TransitionStart"),transitioncancel:wo("Transition","TransitionCancel"),transitionend:wo("Transition","TransitionEnd")},ig={},Jd={};Ke&&(Jd=document.createElement("div").style,"AnimationEvent"in window||(delete Sc.animationend.animation,delete Sc.animationiteration.animation,delete Sc.animationstart.animation),"TransitionEvent"in window||delete Sc.transitionend.transition);function Ki(a){if(ig[a])return ig[a];if(!Sc[a])return a;var o=Sc[a],d;for(d in o)if(o.hasOwnProperty(d)&&d in Jd)return ig[a]=o[d];return a}var ag=Ki("animationend"),hs=Ki("animationiteration"),sg=Ki("animationstart"),Bo=Ki("transitionrun"),Tu=Ki("transitionstart"),Ml=Ki("transitioncancel"),Wd=Ki("transitionend"),jd=new Map,Do="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Qs(a,o){jd.set(a,o),He(o,[a])}var Ea=[],Kr=0,Uo=0;function Zf(){for(var a=Kr,o=Uo=Kr=0;o<a;){var d=Ea[o];Ea[o++]=null;var m=Ea[o];Ea[o++]=null;var A=Ea[o];Ea[o++]=null;var C=Ea[o];if(Ea[o++]=null,m!==null&&A!==null){var z=m.pending;z===null?A.next=A:(A.next=z.next,z.next=A),m.pending=A}C!==0&&$f(d,A,C)}}function Qf(a,o,d,m){Ea[Kr++]=a,Ea[Kr++]=o,Ea[Kr++]=d,Ea[Kr++]=m,Uo|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function Mc(a,o,d,m){return Qf(a,o,d,m),eh(a)}function Oo(a,o){return Qf(a,null,null,o),eh(a)}function $f(a,o,d){a.lanes|=d;var m=a.alternate;m!==null&&(m.lanes|=d);for(var A=!1,C=a.return;C!==null;)C.childLanes|=d,m=C.alternate,m!==null&&(m.childLanes|=d),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(A=!0)),a=C,C=C.return;A&&o!==null&&a.tag===3&&(C=a.stateNode,A=31-Re(d),C=C.hiddenUpdates,a=C[A],a===null?C[A]=[o]:a.push(o),o.lane=d|536870912)}function eh(a){if(50<lr)throw lr=0,el=null,Error(n(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var El={},Kd=new WeakMap;function ds(a,o){if(typeof a=="object"&&a!==null){var d=Kd.get(a);return d!==void 0?d:(o={value:a,source:o,stack:he(o)},Kd.set(a,o),o)}return{value:a,source:o,stack:he(o)}}var Ec=[],bl=0,Da=null,th=0,_i=[],Ds=0,No=null,Zr=1,Lo="";function ja(a,o){Ec[bl++]=th,Ec[bl++]=Da,Da=a,th=o}function rg(a,o,d){_i[Ds++]=Zr,_i[Ds++]=Lo,_i[Ds++]=No,No=a;var m=Zr;a=Lo;var A=32-Re(m)-1;m&=~(1<<A),d+=1;var C=32-Re(o)+A;if(30<C){var z=A-A%5;C=(m&(1<<z)-1).toString(32),m>>=z,A-=z,Zr=1<<32-Re(o)+A|d<<A|m,Lo=C+a}else Zr=1<<C|d<<A|m,Lo=a}function nh(a){a.return!==null&&(ja(a,1),rg(a,1,0))}function Tl(a){for(;a===Da;)Da=Ec[--bl],Ec[bl]=null,th=Ec[--bl],Ec[bl]=null;for(;a===No;)No=_i[--Ds],_i[Ds]=null,Lo=_i[--Ds],_i[Ds]=null,Zr=_i[--Ds],_i[Ds]=null}var Ua=null,ma=null,Vn=!1,$s=null,er=!1,ih=Error(n(519));function bc(a){var o=Error(n(418,""));throw Qr(ds(o,a)),ih}function $v(a){var o=a.stateNode,d=a.type,m=a.memoizedProps;switch(o[gn]=a,o[Ht]=m,d){case"dialog":Xn("cancel",o),Xn("close",o);break;case"iframe":case"object":case"embed":Xn("load",o);break;case"video":case"audio":for(d=0;d<Hg.length;d++)Xn(Hg[d],o);break;case"source":Xn("error",o);break;case"img":case"image":case"link":Xn("error",o),Xn("load",o);break;case"details":Xn("toggle",o);break;case"input":Xn("invalid",o),bi(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),on(o);break;case"select":Xn("invalid",o);break;case"textarea":Xn("invalid",o),Mr(o,m.value,m.defaultValue,m.children),on(o)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||o.textContent===""+d||m.suppressHydrationWarning===!0||MT(o.textContent,d)?(m.popover!=null&&(Xn("beforetoggle",o),Xn("toggle",o)),m.onScroll!=null&&Xn("scroll",o),m.onScrollEnd!=null&&Xn("scrollend",o),m.onClick!=null&&(o.onclick=j_),o=!0):o=!1,o||bc(a)}function e_(a){for(Ua=a.return;Ua;)switch(Ua.tag){case 3:case 27:er=!0;return;case 5:case 13:er=!1;return;default:Ua=Ua.return}}function Cu(a){if(a!==Ua)return!1;if(!Vn)return e_(a),Vn=!0,!1;var o=!1,d;if((d=a.tag!==3&&a.tag!==27)&&((d=a.tag===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||JS(a.type,a.memoizedProps)),d=!d),d&&(o=!0),o&&ma&&bc(a),e_(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(d=a.data,d==="/$"){if(o===0){ma=nl(a.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++;a=a.nextSibling}ma=null}}else ma=Ua?nl(a.stateNode.nextSibling):null;return!0}function Ru(){ma=Ua=null,Vn=!1}function Qr(a){$s===null?$s=[a]:$s.push(a)}var Cl=Error(n(460)),og=Error(n(474)),Zd={then:function(){}};function t_(a){return a=a.status,a==="fulfilled"||a==="rejected"}function ah(){}function Rl(a,o,d){switch(d=a[d],d===void 0?a.push(o):d!==o&&(o.then(ah,ah),o=d),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,a===Cl?Error(n(483)):a;default:if(typeof o.status=="string")o.then(ah,ah);else{if(a=ci,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=o,a.status="pending",a.then(function(m){if(o.status==="pending"){var A=o;A.status="fulfilled",A.value=m}},function(m){if(o.status==="pending"){var A=o;A.status="rejected",A.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,a===Cl?Error(n(483)):a}throw wu=o,Cl}}var wu=null;function ii(){if(wu===null)throw Error(n(459));var a=wu;return wu=null,a}var wl=null,sh=0;function rh(a){var o=sh;return sh+=1,wl===null&&(wl=[]),Rl(wl,a,o)}function oh(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Qd(a,o){throw o.$$typeof===s?Error(n(525)):(a=Object.prototype.toString.call(o),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function n_(a){var o=a._init;return o(a._payload)}function i_(a){function o(Se,ge){if(a){var we=Se.deletions;we===null?(Se.deletions=[ge],Se.flags|=16):we.push(ge)}}function d(Se,ge){if(!a)return null;for(;ge!==null;)o(Se,ge),ge=ge.sibling;return null}function m(Se){for(var ge=new Map;Se!==null;)Se.key!==null?ge.set(Se.key,Se):ge.set(Se.index,Se),Se=Se.sibling;return ge}function A(Se,ge){return Se=$a(Se,ge),Se.index=0,Se.sibling=null,Se}function C(Se,ge,we){return Se.index=we,a?(we=Se.alternate,we!==null?(we=we.index,we<ge?(Se.flags|=33554434,ge):we):(Se.flags|=33554434,ge)):(Se.flags|=1048576,ge)}function z(Se){return a&&Se.alternate===null&&(Se.flags|=33554434),Se}function q(Se,ge,we,it){return ge===null||ge.tag!==6?(ge=ea(we,Se.mode,it),ge.return=Se,ge):(ge=A(ge,we),ge.return=Se,ge)}function ie(Se,ge,we,it){var Xt=we.type;return Xt===h?Qe(Se,ge,we.props.children,it,we.key):ge!==null&&(ge.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===w&&n_(Xt)===ge.type)?(ge=A(ge,we.props),oh(ge,we),ge.return=Se,ge):(ge=Xu(we.type,we.key,we.props,null,Se.mode,it),oh(ge,we),ge.return=Se,ge)}function ve(Se,ge,we,it){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==we.containerInfo||ge.stateNode.implementation!==we.implementation?(ge=yh(we,Se.mode,it),ge.return=Se,ge):(ge=A(ge,we.children||[]),ge.return=Se,ge)}function Qe(Se,ge,we,it,Xt){return ge===null||ge.tag!==7?(ge=Wl(we,Se.mode,it,Xt),ge.return=Se,ge):(ge=A(ge,we),ge.return=Se,ge)}function ot(Se,ge,we){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=ea(""+ge,Se.mode,we),ge.return=Se,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:return we=Xu(ge.type,ge.key,ge.props,null,Se.mode,we),oh(we,ge),we.return=Se,we;case c:return ge=yh(ge,Se.mode,we),ge.return=Se,ge;case w:var it=ge._init;return ge=it(ge._payload),ot(Se,ge,we)}if(Xe(ge)||L(ge))return ge=Wl(ge,Se.mode,we,null),ge.return=Se,ge;if(typeof ge.then=="function")return ot(Se,rh(ge),we);if(ge.$$typeof===x)return ot(Se,mp(Se,ge),we);Qd(Se,ge)}return null}function Pe(Se,ge,we,it){var Xt=ge!==null?ge.key:null;if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return Xt!==null?null:q(Se,ge,""+we,it);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case l:return we.key===Xt?ie(Se,ge,we,it):null;case c:return we.key===Xt?ve(Se,ge,we,it):null;case w:return Xt=we._init,we=Xt(we._payload),Pe(Se,ge,we,it)}if(Xe(we)||L(we))return Xt!==null?null:Qe(Se,ge,we,it,null);if(typeof we.then=="function")return Pe(Se,ge,rh(we),it);if(we.$$typeof===x)return Pe(Se,ge,mp(Se,we),it);Qd(Se,we)}return null}function We(Se,ge,we,it,Xt){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return Se=Se.get(we)||null,q(ge,Se,""+it,Xt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case l:return Se=Se.get(it.key===null?we:it.key)||null,ie(ge,Se,it,Xt);case c:return Se=Se.get(it.key===null?we:it.key)||null,ve(ge,Se,it,Xt);case w:var Pn=it._init;return it=Pn(it._payload),We(Se,ge,we,it,Xt)}if(Xe(it)||L(it))return Se=Se.get(we)||null,Qe(ge,Se,it,Xt,null);if(typeof it.then=="function")return We(Se,ge,we,rh(it),Xt);if(it.$$typeof===x)return We(Se,ge,we,mp(ge,it),Xt);Qd(ge,it)}return null}function Kt(Se,ge,we,it){for(var Xt=null,Pn=null,Qt=ge,fn=ge=0,za=null;Qt!==null&&fn<we.length;fn++){Qt.index>fn?(za=Qt,Qt=null):za=Qt.sibling;var ai=Pe(Se,Qt,we[fn],it);if(ai===null){Qt===null&&(Qt=za);break}a&&Qt&&ai.alternate===null&&o(Se,Qt),ge=C(ai,ge,fn),Pn===null?Xt=ai:Pn.sibling=ai,Pn=ai,Qt=za}if(fn===we.length)return d(Se,Qt),Vn&&ja(Se,fn),Xt;if(Qt===null){for(;fn<we.length;fn++)Qt=ot(Se,we[fn],it),Qt!==null&&(ge=C(Qt,ge,fn),Pn===null?Xt=Qt:Pn.sibling=Qt,Pn=Qt);return Vn&&ja(Se,fn),Xt}for(Qt=m(Qt);fn<we.length;fn++)za=We(Qt,Se,fn,we[fn],it),za!==null&&(a&&za.alternate!==null&&Qt.delete(za.key===null?fn:za.key),ge=C(za,ge,fn),Pn===null?Xt=za:Pn.sibling=za,Pn=za);return a&&Qt.forEach(function($u){return o(Se,$u)}),Vn&&ja(Se,fn),Xt}function _n(Se,ge,we,it){if(we==null)throw Error(n(151));for(var Xt=null,Pn=null,Qt=ge,fn=ge=0,za=null,ai=we.next();Qt!==null&&!ai.done;fn++,ai=we.next()){Qt.index>fn?(za=Qt,Qt=null):za=Qt.sibling;var $u=Pe(Se,Qt,ai.value,it);if($u===null){Qt===null&&(Qt=za);break}a&&Qt&&$u.alternate===null&&o(Se,Qt),ge=C($u,ge,fn),Pn===null?Xt=$u:Pn.sibling=$u,Pn=$u,Qt=za}if(ai.done)return d(Se,Qt),Vn&&ja(Se,fn),Xt;if(Qt===null){for(;!ai.done;fn++,ai=we.next())ai=ot(Se,ai.value,it),ai!==null&&(ge=C(ai,ge,fn),Pn===null?Xt=ai:Pn.sibling=ai,Pn=ai);return Vn&&ja(Se,fn),Xt}for(Qt=m(Qt);!ai.done;fn++,ai=we.next())ai=We(Qt,Se,fn,ai.value,it),ai!==null&&(a&&ai.alternate!==null&&Qt.delete(ai.key===null?fn:ai.key),ge=C(ai,ge,fn),Pn===null?Xt=ai:Pn.sibling=ai,Pn=ai);return a&&Qt.forEach(function(UU){return o(Se,UU)}),Vn&&ja(Se,fn),Xt}function ia(Se,ge,we,it){if(typeof we=="object"&&we!==null&&we.type===h&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case l:e:{for(var Xt=we.key;ge!==null;){if(ge.key===Xt){if(Xt=we.type,Xt===h){if(ge.tag===7){d(Se,ge.sibling),it=A(ge,we.props.children),it.return=Se,Se=it;break e}}else if(ge.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===w&&n_(Xt)===ge.type){d(Se,ge.sibling),it=A(ge,we.props),oh(it,we),it.return=Se,Se=it;break e}d(Se,ge);break}else o(Se,ge);ge=ge.sibling}we.type===h?(it=Wl(we.props.children,Se.mode,it,we.key),it.return=Se,Se=it):(it=Xu(we.type,we.key,we.props,null,Se.mode,it),oh(it,we),it.return=Se,Se=it)}return z(Se);case c:e:{for(Xt=we.key;ge!==null;){if(ge.key===Xt)if(ge.tag===4&&ge.stateNode.containerInfo===we.containerInfo&&ge.stateNode.implementation===we.implementation){d(Se,ge.sibling),it=A(ge,we.children||[]),it.return=Se,Se=it;break e}else{d(Se,ge);break}else o(Se,ge);ge=ge.sibling}it=yh(we,Se.mode,it),it.return=Se,Se=it}return z(Se);case w:return Xt=we._init,we=Xt(we._payload),ia(Se,ge,we,it)}if(Xe(we))return Kt(Se,ge,we,it);if(L(we)){if(Xt=L(we),typeof Xt!="function")throw Error(n(150));return we=Xt.call(we),_n(Se,ge,we,it)}if(typeof we.then=="function")return ia(Se,ge,rh(we),it);if(we.$$typeof===x)return ia(Se,ge,mp(Se,we),it);Qd(Se,we)}return typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint"?(we=""+we,ge!==null&&ge.tag===6?(d(Se,ge.sibling),it=A(ge,we),it.return=Se,Se=it):(d(Se,ge),it=ea(we,Se.mode,it),it.return=Se,Se=it),z(Se)):d(Se,ge)}return function(Se,ge,we,it){try{sh=0;var Xt=ia(Se,ge,we,it);return wl=null,Xt}catch(Qt){if(Qt===Cl)throw Qt;var Pn=Xi(29,Qt,null,Se.mode);return Pn.lanes=it,Pn.return=Se,Pn}finally{}}}var Io=i_(!0),Po=i_(!1),Tc=tt(null),Cc=tt(0);function Bl(a,o){a=$o,ht(Cc,a),ht(Tc,o),$o=a|o.baseLanes}function $d(){ht(Cc,$o),ht(Tc,Tc.current)}function lh(){$o=Cc.current,wt(Tc),wt(Cc)}var ps=tt(null),$r=null;function Fo(a){var o=a.alternate;ht(Zi,Zi.current&1),ht(ps,a),$r===null&&(o===null||Tc.current!==null||o.memoizedState!==null)&&($r=a)}function lg(a){if(a.tag===22){if(ht(Zi,Zi.current),ht(ps,a),$r===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&($r=a)}}else zo()}function zo(){ht(Zi,Zi.current),ht(ps,ps.current)}function eo(a){wt(ps),$r===a&&($r=null),wt(Zi)}var Zi=tt(0);function Bu(a){for(var o=a;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Un=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(d,m){a.push(m)}};this.abort=function(){o.aborted=!0,a.forEach(function(d){return d()})}},RS=r.unstable_scheduleCallback,Us=r.unstable_NormalPriority,Fi={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cg(){return{controller:new Un,data:new Map,refCount:0}}function Dl(a){a.refCount--,a.refCount===0&&RS(Us,function(){a.controller.abort()})}var to=null,Ul=0,Rc=0,Ol=null;function wS(a,o){if(to===null){var d=to=[];Ul=0,Rc=FS(),Ol={status:"pending",value:void 0,then:function(m){d.push(m)}}}return Ul++,o.then(ug,ug),o}function ug(){if(--Ul===0&&to!==null){Ol!==null&&(Ol.status="fulfilled");var a=to;to=null,Rc=0,Ol=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function Nl(a,o){var d=[],m={status:"pending",value:null,reason:null,then:function(A){d.push(A)}};return a.then(function(){m.status="fulfilled",m.value=o;for(var A=0;A<d.length;A++)(0,d[A])(o)},function(A){for(m.status="rejected",m.reason=A,A=0;A<d.length;A++)(0,d[A])(void 0)}),m}var ep=U.S;U.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&wS(a,o),ep!==null&&ep(a,o)};var Ho=tt(null);function ch(){var a=Ho.current;return a!==null?a:ci.pooledCache}function Du(a,o){o===null?ht(Ho,Ho.current):ht(Ho,o.pool)}function Go(){var a=ch();return a===null?null:{parent:Fi._currentValue,pool:a}}var Vo=0,En=null,si=null,Qi=null,un=!1,Ll=!1,Il=!1,Uu=0,Pl=0,Ou=null,BS=0;function Oi(){throw Error(n(321))}function wc(a,o){if(o===null)return!1;for(var d=0;d<o.length&&d<a.length;d++)if(!us(a[d],o[d]))return!1;return!0}function fg(a,o,d,m,A,C){return Vo=C,En=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,U.H=a===null||a.memoizedState===null?zl:Xo,Il=!1,C=d(m,A),Il=!1,Ll&&(C=s_(o,d,m,A)),a_(a),C}function a_(a){U.H=io;var o=si!==null&&si.next!==null;if(Vo=0,Qi=si=En=null,un=!1,Pl=0,Ou=null,o)throw Error(n(300));a===null||oa||(a=a.dependencies,a!==null&&Fu(a)&&(oa=!0))}function s_(a,o,d,m){En=a;var A=0;do{if(Ll&&(Ou=null),Pl=0,Ll=!1,25<=A)throw Error(n(301));if(A+=1,Qi=si=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}U.H=Uc,C=o(d,m)}while(Ll);return C}function DS(){var a=U.H,o=a.useState()[0];return o=typeof o.then=="function"?fh(o):o,a=a.useState()[0],(si!==null?si.memoizedState:null)!==a&&(En.flags|=1024),o}function hg(){var a=Uu!==0;return Uu=0,a}function uh(a,o,d){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~d}function tp(a){if(un){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}un=!1}Vo=0,Qi=si=En=null,Ll=!1,Pl=Uu=0,Ou=null}function ba(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qi===null?En.memoizedState=Qi=a:Qi=Qi.next=a,Qi}function zi(){if(si===null){var a=En.alternate;a=a!==null?a.memoizedState:null}else a=si.next;var o=Qi===null?En.memoizedState:Qi.next;if(o!==null)Qi=o,si=a;else{if(a===null)throw En.alternate===null?Error(n(467)):Error(n(310));si=a,a={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},Qi===null?En.memoizedState=Qi=a:Qi=Qi.next=a}return Qi}var np;np=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function fh(a){var o=Pl;return Pl+=1,Ou===null&&(Ou=[]),a=Rl(Ou,a,o),o=En,(Qi===null?o.memoizedState:Qi.next)===null&&(o=o.alternate,U.H=o===null||o.memoizedState===null?zl:Xo),a}function Nu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return fh(a);if(a.$$typeof===x)return Oa(a)}throw Error(n(438,String(a)))}function br(a){var o=null,d=En.updateQueue;if(d!==null&&(o=d.memoCache),o==null){var m=En.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(A){return A.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),d===null&&(d=np(),En.updateQueue=d),d.memoCache=o,d=o.data[o.index],d===void 0)for(d=o.data[o.index]=Array(a),m=0;m<a;m++)d[m]=B;return o.index++,d}function Ci(a,o){return typeof o=="function"?o(a):o}function Tr(a){var o=zi();return ms(o,si,a)}function ms(a,o,d){var m=a.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=d;var A=a.baseQueue,C=m.pending;if(C!==null){if(A!==null){var z=A.next;A.next=C.next,C.next=z}o.baseQueue=A=C,m.pending=null}if(C=a.baseState,A===null)a.memoizedState=C;else{o=A.next;var q=z=null,ie=null,ve=o,Qe=!1;do{var ot=ve.lane&-536870913;if(ot!==ve.lane?(nn&ot)===ot:(Vo&ot)===ot){var Pe=ve.revertLane;if(Pe===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),ot===Rc&&(Qe=!0);else if((Vo&Pe)===Pe){ve=ve.next,Pe===Rc&&(Qe=!0);continue}else ot={lane:0,revertLane:ve.revertLane,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},ie===null?(q=ie=ot,z=C):ie=ie.next=ot,En.lanes|=Pe,Or|=Pe;ot=ve.action,Il&&d(C,ot),C=ve.hasEagerState?ve.eagerState:d(C,ot)}else Pe={lane:ot,revertLane:ve.revertLane,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},ie===null?(q=ie=Pe,z=C):ie=ie.next=Pe,En.lanes|=ot,Or|=ot;ve=ve.next}while(ve!==null&&ve!==o);if(ie===null?z=C:ie.next=q,!us(C,a.memoizedState)&&(oa=!0,Qe&&(d=Ol,d!==null)))throw d;a.memoizedState=C,a.baseState=z,a.baseQueue=ie,m.lastRenderedState=C}return A===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function ip(a){var o=zi(),d=o.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=a;var m=d.dispatch,A=d.pending,C=o.memoizedState;if(A!==null){d.pending=null;var z=A=A.next;do C=a(C,z.action),z=z.next;while(z!==A);us(C,o.memoizedState)||(oa=!0),o.memoizedState=C,o.baseQueue===null&&(o.baseState=C),d.lastRenderedState=C}return[C,m]}function r_(a,o,d){var m=En,A=zi(),C=Vn;if(C){if(d===void 0)throw Error(n(407));d=d()}else d=o();var z=!us((si||A).memoizedState,d);if(z&&(A.memoizedState=d,oa=!0),A=A.queue,gg(o_.bind(null,m,A,a),[a]),A.getSnapshot!==o||z||Qi!==null&&Qi.memoizedState.tag&1){if(m.flags|=2048,no(9,Fl.bind(null,m,A,d,o),{destroy:void 0},null),ci===null)throw Error(n(349));C||(Vo&60)!==0||Ka(m,o,d)}return d}function Ka(a,o,d){a.flags|=16384,a={getSnapshot:o,value:d},o=En.updateQueue,o===null?(o=np(),En.updateQueue=o,o.stores=[a]):(d=o.stores,d===null?o.stores=[a]:d.push(a))}function Fl(a,o,d,m){o.value=d,o.getSnapshot=m,l_(o)&&c_(a)}function o_(a,o,d){return d(function(){l_(o)&&c_(a)})}function l_(a){var o=a.getSnapshot;a=a.value;try{var d=o();return!us(a,d)}catch{return!0}}function c_(a){var o=Oo(a,2);o!==null&&na(o,a,2)}function dg(a){var o=ba();if(typeof a=="function"){var d=a;if(a=d(),Il){le(!0);try{d()}finally{le(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:a},o}function pg(a,o,d,m){return a.baseState=d,ms(a,si,typeof m=="function"?m:Ci)}function US(a,o,d,m,A){if(lp(a))throw Error(n(485));if(a=o.action,a!==null){var C={payload:A,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){C.listeners.push(z)}};U.T!==null?d(!0):C.isTransition=!1,m(C),d=o.pending,d===null?(C.next=o.pending=C,mg(o,C)):(C.next=d.next,o.pending=d.next=C)}}function mg(a,o){var d=o.action,m=o.payload,A=a.state;if(o.isTransition){var C=U.T,z={};U.T=z;try{var q=d(A,m),ie=U.S;ie!==null&&ie(z,q),u_(a,o,q)}catch(ve){ko(a,o,ve)}finally{U.T=C}}else try{C=d(A,m),u_(a,o,C)}catch(ve){ko(a,o,ve)}}function u_(a,o,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){Bc(a,o,m)},function(m){return ko(a,o,m)}):Bc(a,o,d)}function Bc(a,o,d){o.status="fulfilled",o.value=d,f_(o),a.state=d,o=a.pending,o!==null&&(d=o.next,d===o?a.pending=null:(d=d.next,o.next=d,mg(a,d)))}function ko(a,o,d){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=d,f_(o),o=o.next;while(o!==m)}a.action=null}function f_(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function h_(a,o){return o}function d_(a,o){if(Vn){var d=ci.formState;if(d!==null){e:{var m=En;if(Vn){if(ma){t:{for(var A=ma,C=er;A.nodeType!==8;){if(!C){A=null;break t}if(A=nl(A.nextSibling),A===null){A=null;break t}}C=A.data,A=C==="F!"||C==="F"?A:null}if(A){ma=nl(A.nextSibling),m=A.data==="F!";break e}}bc(m)}m=!1}m&&(o=d[0])}}return d=ba(),d.memoizedState=d.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h_,lastRenderedState:o},d.queue=m,d=xg.bind(null,En,m),m.dispatch=d,m=dg(!1),C=hh.bind(null,En,!1,m.queue),m=ba(),A={state:o,dispatch:null,action:a,pending:null},m.queue=A,d=US.bind(null,En,A,C,d),A.dispatch=d,m.memoizedState=a,[o,d,!1]}function Lu(a){var o=zi();return p_(o,si,a)}function p_(a,o,d){o=ms(a,o,h_)[0],a=Tr(Ci)[0],o=typeof o=="object"&&o!==null&&typeof o.then=="function"?fh(o):o;var m=zi(),A=m.queue,C=A.dispatch;return d!==m.memoizedState&&(En.flags|=2048,no(9,OS.bind(null,A,d),{destroy:void 0},null)),[o,C,a]}function OS(a,o){a.action=o}function m_(a){var o=zi(),d=si;if(d!==null)return p_(o,d,a);zi(),o=o.memoizedState,d=zi();var m=d.queue.dispatch;return d.memoizedState=a,[o,m,!1]}function no(a,o,d,m){return a={tag:a,create:o,inst:d,deps:m,next:null},o=En.updateQueue,o===null&&(o=np(),En.updateQueue=o),d=o.lastEffect,d===null?o.lastEffect=a.next=a:(m=d.next,d.next=a,a.next=m,o.lastEffect=a),a}function g_(){return zi().memoizedState}function ap(a,o,d,m){var A=ba();En.flags|=a,A.memoizedState=no(1|o,d,{destroy:void 0},m===void 0?null:m)}function sp(a,o,d,m){var A=zi();m=m===void 0?null:m;var C=A.memoizedState.inst;si!==null&&m!==null&&wc(m,si.memoizedState.deps)?A.memoizedState=no(o,d,C,m):(En.flags|=a,A.memoizedState=no(1|o,d,C,m))}function v_(a,o){ap(8390656,8,a,o)}function gg(a,o){sp(2048,8,a,o)}function __(a,o){return sp(4,2,a,o)}function y_(a,o){return sp(4,4,a,o)}function x_(a,o){if(typeof o=="function"){a=a();var d=o(a);return function(){typeof d=="function"?d():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function A_(a,o,d){d=d!=null?d.concat([a]):null,sp(4,4,x_.bind(null,o,a),d)}function vg(){}function S_(a,o){var d=zi();o=o===void 0?null:o;var m=d.memoizedState;return o!==null&&wc(o,m[1])?m[0]:(d.memoizedState=[a,o],a)}function M_(a,o){var d=zi();o=o===void 0?null:o;var m=d.memoizedState;if(o!==null&&wc(o,m[1]))return m[0];if(m=a(),Il){le(!0);try{a()}finally{le(!1)}}return d.memoizedState=[m,o],m}function rp(a,o,d){return d===void 0||(Vo&1073741824)!==0?a.memoizedState=o:(a.memoizedState=d,a=Ps(),En.lanes|=a,Or|=a,d)}function E_(a,o,d,m){return us(d,o)?d:Tc.current!==null?(a=rp(a,d,m),us(a,o)||(oa=!0),a):(Vo&42)===0?(oa=!0,a.memoizedState=d):(a=Ps(),En.lanes|=a,Or|=a,o)}function b_(a,o,d,m,A){var C=re.p;re.p=C!==0&&8>C?C:8;var z=U.T,q={};U.T=q,hh(a,!1,o,d);try{var ie=A(),ve=U.S;if(ve!==null&&ve(q,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var Qe=Nl(ie,m);Dc(a,o,Qe,ts(a))}else Dc(a,o,m,ts(a))}catch(ot){Dc(a,o,{then:function(){},status:"rejected",reason:ot},ts())}finally{re.p=C,U.T=z}}function NS(){}function _g(a,o,d,m){if(a.tag!==5)throw Error(n(476));var A=T_(a).queue;b_(a,A,o,Ne,d===null?NS:function(){return C_(a),d(m)})}function T_(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:Ne,baseState:Ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:Ne},next:null};var d={};return o.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:d},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function C_(a){var o=T_(a).next.queue;Dc(a,o,{},ts())}function op(){return Oa(Yg)}function yg(){return zi().memoizedState}function R_(){return zi().memoizedState}function w_(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var d=ts();a=Ls(d);var m=Is(o,a,d);m!==null&&(na(m,o,d),Vl(m,o,d)),o={cache:cg()},a.payload=o;return}o=o.return}}function B_(a,o,d){var m=ts();d={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},lp(a)?D_(o,d):(d=Mc(a,o,d,m),d!==null&&(na(d,a,m),U_(d,o,m)))}function xg(a,o,d){var m=ts();Dc(a,o,d,m)}function Dc(a,o,d,m){var A={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(lp(a))D_(o,A);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=o.lastRenderedReducer,C!==null))try{var z=o.lastRenderedState,q=C(z,d);if(A.hasEagerState=!0,A.eagerState=q,us(q,z))return Qf(a,o,A,0),ci===null&&Zf(),!1}catch{}finally{}if(d=Mc(a,o,A,m),d!==null)return na(d,a,m),U_(d,o,m),!0}return!1}function hh(a,o,d,m){if(m={lane:2,revertLane:FS(),action:m,hasEagerState:!1,eagerState:null,next:null},lp(a)){if(o)throw Error(n(479))}else o=Mc(a,d,m,2),o!==null&&na(o,a,2)}function lp(a){var o=a.alternate;return a===En||o!==null&&o===En}function D_(a,o){Ll=un=!0;var d=a.pending;d===null?o.next=o:(o.next=d.next,d.next=o),a.pending=o}function U_(a,o,d){if((d&4194176)!==0){var m=o.lanes;m&=a.pendingLanes,d|=m,o.lanes=d,It(a,d)}}var io={readContext:Oa,use:Nu,useCallback:Oi,useContext:Oi,useEffect:Oi,useImperativeHandle:Oi,useLayoutEffect:Oi,useInsertionEffect:Oi,useMemo:Oi,useReducer:Oi,useRef:Oi,useState:Oi,useDebugValue:Oi,useDeferredValue:Oi,useTransition:Oi,useSyncExternalStore:Oi,useId:Oi};io.useCacheRefresh=Oi,io.useMemoCache=Oi,io.useHostTransitionStatus=Oi,io.useFormState=Oi,io.useActionState=Oi,io.useOptimistic=Oi;var zl={readContext:Oa,use:Nu,useCallback:function(a,o){return ba().memoizedState=[a,o===void 0?null:o],a},useContext:Oa,useEffect:v_,useImperativeHandle:function(a,o,d){d=d!=null?d.concat([a]):null,ap(4194308,4,x_.bind(null,o,a),d)},useLayoutEffect:function(a,o){return ap(4194308,4,a,o)},useInsertionEffect:function(a,o){ap(4,2,a,o)},useMemo:function(a,o){var d=ba();o=o===void 0?null:o;var m=a();if(Il){le(!0);try{a()}finally{le(!1)}}return d.memoizedState=[m,o],m},useReducer:function(a,o,d){var m=ba();if(d!==void 0){var A=d(o);if(Il){le(!0);try{d(o)}finally{le(!1)}}}else A=o;return m.memoizedState=m.baseState=A,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:A},m.queue=a,a=a.dispatch=B_.bind(null,En,a),[m.memoizedState,a]},useRef:function(a){var o=ba();return a={current:a},o.memoizedState=a},useState:function(a){a=dg(a);var o=a.queue,d=xg.bind(null,En,o);return o.dispatch=d,[a.memoizedState,d]},useDebugValue:vg,useDeferredValue:function(a,o){var d=ba();return rp(d,a,o)},useTransition:function(){var a=dg(!1);return a=b_.bind(null,En,a.queue,!0,!1),ba().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,d){var m=En,A=ba();if(Vn){if(d===void 0)throw Error(n(407));d=d()}else{if(d=o(),ci===null)throw Error(n(349));(nn&60)!==0||Ka(m,o,d)}A.memoizedState=d;var C={value:d,getSnapshot:o};return A.queue=C,v_(o_.bind(null,m,C,a),[a]),m.flags|=2048,no(9,Fl.bind(null,m,C,d,o),{destroy:void 0},null),d},useId:function(){var a=ba(),o=ci.identifierPrefix;if(Vn){var d=Lo,m=Zr;d=(m&~(1<<32-Re(m)-1)).toString(32)+d,o=":"+o+"R"+d,d=Uu++,0<d&&(o+="H"+d.toString(32)),o+=":"}else d=BS++,o=":"+o+"r"+d.toString(32)+":";return a.memoizedState=o},useCacheRefresh:function(){return ba().memoizedState=w_.bind(null,En)}};zl.useMemoCache=br,zl.useHostTransitionStatus=op,zl.useFormState=d_,zl.useActionState=d_,zl.useOptimistic=function(a){var o=ba();o.memoizedState=o.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=d,o=hh.bind(null,En,!0,d),d.dispatch=o,[a,o]};var Xo={readContext:Oa,use:Nu,useCallback:S_,useContext:Oa,useEffect:gg,useImperativeHandle:A_,useInsertionEffect:__,useLayoutEffect:y_,useMemo:M_,useReducer:Tr,useRef:g_,useState:function(){return Tr(Ci)},useDebugValue:vg,useDeferredValue:function(a,o){var d=zi();return E_(d,si.memoizedState,a,o)},useTransition:function(){var a=Tr(Ci)[0],o=zi().memoizedState;return[typeof a=="boolean"?a:fh(a),o]},useSyncExternalStore:r_,useId:yg};Xo.useCacheRefresh=R_,Xo.useMemoCache=br,Xo.useHostTransitionStatus=op,Xo.useFormState=Lu,Xo.useActionState=Lu,Xo.useOptimistic=function(a,o){var d=zi();return pg(d,si,a,o)};var Uc={readContext:Oa,use:Nu,useCallback:S_,useContext:Oa,useEffect:gg,useImperativeHandle:A_,useInsertionEffect:__,useLayoutEffect:y_,useMemo:M_,useReducer:ip,useRef:g_,useState:function(){return ip(Ci)},useDebugValue:vg,useDeferredValue:function(a,o){var d=zi();return si===null?rp(d,a,o):E_(d,si.memoizedState,a,o)},useTransition:function(){var a=ip(Ci)[0],o=zi().memoizedState;return[typeof a=="boolean"?a:fh(a),o]},useSyncExternalStore:r_,useId:yg};Uc.useCacheRefresh=R_,Uc.useMemoCache=br,Uc.useHostTransitionStatus=op,Uc.useFormState=m_,Uc.useActionState=m_,Uc.useOptimistic=function(a,o){var d=zi();return si!==null?pg(d,si,a,o):(d.baseState=a,[a,d.queue.dispatch])};function Ag(a,o,d,m){o=a.memoizedState,d=d(m,o),d=d==null?o:N({},o,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var Sg={isMounted:function(a){return(a=a._reactInternals)?oe(a)===a:!1},enqueueSetState:function(a,o,d){a=a._reactInternals;var m=ts(),A=Ls(m);A.payload=o,d!=null&&(A.callback=d),o=Is(a,A,m),o!==null&&(na(o,a,m),Vl(o,a,m))},enqueueReplaceState:function(a,o,d){a=a._reactInternals;var m=ts(),A=Ls(m);A.tag=1,A.payload=o,d!=null&&(A.callback=d),o=Is(a,A,m),o!==null&&(na(o,a,m),Vl(o,a,m))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var d=ts(),m=Ls(d);m.tag=2,o!=null&&(m.callback=o),o=Is(a,m,d),o!==null&&(na(o,a,d),Vl(o,a,d))}};function O_(a,o,d,m,A,C,z){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,C,z):o.prototype&&o.prototype.isPureReactComponent?!Er(d,m)||!Er(A,C):!0}function N_(a,o,d,m){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,m),o.state!==a&&Sg.enqueueReplaceState(o,o.state,null)}function Oc(a,o){var d=o;if("ref"in o){d={};for(var m in o)m!=="ref"&&(d[m]=o[m])}if(a=a.defaultProps){d===o&&(d=N({},d));for(var A in a)d[A]===void 0&&(d[A]=a[A])}return d}var cp=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function L_(a){cp(a)}function I_(a){console.error(a)}function P_(a){cp(a)}function up(a,o){try{var d=a.onUncaughtError;d(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function F_(a,o,d){try{var m=a.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Mg(a,o,d){return d=Ls(d),d.tag=3,d.payload={element:null},d.callback=function(){up(a,o)},d}function Eg(a){return a=Ls(a),a.tag=3,a}function z_(a,o,d,m){var A=d.type.getDerivedStateFromError;if(typeof A=="function"){var C=m.value;a.payload=function(){return A(C)},a.callback=function(){F_(o,d,m)}}var z=d.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(a.callback=function(){F_(o,d,m),typeof A!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var q=m.stack;this.componentDidCatch(m.value,{componentStack:q!==null?q:""})})}function LS(a,o,d,m,A){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=d.alternate,o!==null&&ph(o,d,A,!0),d=ps.current,d!==null){switch(d.tag){case 13:return $r===null?Sh():d.alternate===null&&Mi===0&&(Mi=3),d.flags&=-257,d.flags|=65536,d.lanes=A,m===Zd?d.flags|=16384:(o=d.updateQueue,o===null?d.updateQueue=new Set([m]):o.add(m),pn(a,m,A)),!1;case 22:return d.flags|=65536,m===Zd?d.flags|=16384:(o=d.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=o):(d=o.retryQueue,d===null?o.retryQueue=new Set([m]):d.add(m)),pn(a,m,A)),!1}throw Error(n(435,d.tag))}return pn(a,m,A),Sh(),!1}if(Vn)return o=ps.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=A,m!==ih&&(a=Error(n(422),{cause:m}),Qr(ds(a,d)))):(m!==ih&&(o=Error(n(423),{cause:m}),Qr(ds(o,d))),a=a.current.alternate,a.flags|=65536,A&=-A,a.lanes|=A,m=ds(m,d),A=Mg(a.stateNode,m,A),Hu(a,A),Mi!==4&&(Mi=2)),!1;var C=Error(n(520),{cause:m});if(C=ds(C,d),Ah===null?Ah=[C]:Ah.push(C),Mi!==4&&(Mi=2),o===null)return!0;m=ds(m,d),d=o;do{switch(d.tag){case 3:return d.flags|=65536,a=A&-A,d.lanes|=a,a=Mg(d.stateNode,m,a),Hu(d,a),!1;case 1:if(o=d.type,C=d.stateNode,(d.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ta===null||!ta.has(C))))return d.flags|=65536,A&=-A,d.lanes|=A,A=Eg(A),z_(A,a,d,m),Hu(d,A),!1}d=d.return}while(d!==null);return!1}var Os=Error(n(461)),oa=!1;function la(a,o,d,m){o.child=a===null?Po(o,null,d,m):Io(o,a.child,d,m)}function bg(a,o,d,m,A){d=d.render;var C=o.ref;if("ref"in m){var z={};for(var q in m)q!=="ref"&&(z[q]=m[q])}else z=m;return Lc(o),m=fg(a,o,d,z,C,A),q=hg(),a!==null&&!oa?(uh(a,o,A),Hi(a,o,A)):(Vn&&q&&nh(o),o.flags|=1,la(a,o,m,A),o.child)}function Tg(a,o,d,m,A){if(a===null){var C=d.type;return typeof C=="function"&&!Zo(C)&&C.defaultProps===void 0&&d.compare===null?(o.tag=15,o.type=C,Cg(a,o,C,m,A)):(a=Xu(d.type,null,m,o,o.mode,A),a.ref=o.ref,a.return=o,o.child=a)}if(C=a.child,!Ng(a,A)){var z=C.memoizedProps;if(d=d.compare,d=d!==null?d:Er,d(z,m)&&a.ref===o.ref)return Hi(a,o,A)}return o.flags|=1,a=$a(C,m),a.ref=o.ref,a.return=o,o.child=a}function Cg(a,o,d,m,A){if(a!==null){var C=a.memoizedProps;if(Er(C,m)&&a.ref===o.ref)if(oa=!1,o.pendingProps=m=C,Ng(a,A))(a.flags&131072)!==0&&(oa=!0);else return o.lanes=a.lanes,Hi(a,o,A)}return wg(a,o,d,m,A)}function H_(a,o,d){var m=o.pendingProps,A=m.children,C=(o.stateNode._pendingVisibility&2)!==0,z=a!==null?a.memoizedState:null;if(Iu(a,o),m.mode==="hidden"||C){if((o.flags&128)!==0){if(m=z!==null?z.baseLanes|d:d,a!==null){for(A=o.child=a.child,C=0;A!==null;)C=C|A.lanes|A.childLanes,A=A.sibling;o.childLanes=C&~m}else o.childLanes=0,o.child=null;return Rg(a,o,m,d)}if((d&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Du(o,z!==null?z.cachePool:null),z!==null?Bl(o,z):$d(),lg(o);else return o.lanes=o.childLanes=536870912,Rg(a,o,z!==null?z.baseLanes|d:d,d)}else z!==null?(Du(o,z.cachePool),Bl(o,z),zo(),o.memoizedState=null):(a!==null&&Du(o,null),$d(),zo());return la(a,o,A,d),o.child}function Rg(a,o,d,m){var A=ch();return A=A===null?null:{parent:Fi._currentValue,pool:A},o.memoizedState={baseLanes:d,cachePool:A},a!==null&&Du(o,null),$d(),lg(o),a!==null&&ph(a,o,m,!0),null}function Iu(a,o){var d=o.ref;if(d===null)a!==null&&a.ref!==null&&(o.flags|=2097664);else{if(typeof d!="function"&&typeof d!="object")throw Error(n(284));(a===null||a.ref!==d)&&(o.flags|=2097664)}}function wg(a,o,d,m,A){return Lc(o),d=fg(a,o,d,m,void 0,A),m=hg(),a!==null&&!oa?(uh(a,o,A),Hi(a,o,A)):(Vn&&m&&nh(o),o.flags|=1,la(a,o,d,A),o.child)}function G_(a,o,d,m,A,C){return Lc(o),o.updateQueue=null,d=s_(o,m,d,A),a_(a),m=hg(),a!==null&&!oa?(uh(a,o,C),Hi(a,o,C)):(Vn&&m&&nh(o),o.flags|=1,la(a,o,d,C),o.child)}function V_(a,o,d,m,A){if(Lc(o),o.stateNode===null){var C=El,z=d.contextType;typeof z=="object"&&z!==null&&(C=Oa(z)),C=new d(m,C),o.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Sg,o.stateNode=C,C._reactInternals=o,C=o.stateNode,C.props=m,C.state=o.memoizedState,C.refs={},Za(o),z=d.contextType,C.context=typeof z=="object"&&z!==null?Oa(z):El,C.state=o.memoizedState,z=d.getDerivedStateFromProps,typeof z=="function"&&(Ag(o,d,z,m),C.state=o.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(z=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),z!==C.state&&Sg.enqueueReplaceState(C,C.state,null),Rr(o,m,C,A),Na(),C.state=o.memoizedState),typeof C.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(a===null){C=o.stateNode;var q=o.memoizedProps,ie=Oc(d,q);C.props=ie;var ve=C.context,Qe=d.contextType;z=El,typeof Qe=="object"&&Qe!==null&&(z=Oa(Qe));var ot=d.getDerivedStateFromProps;Qe=typeof ot=="function"||typeof C.getSnapshotBeforeUpdate=="function",q=o.pendingProps!==q,Qe||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(q||ve!==z)&&N_(o,C,m,z),$i=!1;var Pe=o.memoizedState;C.state=Pe,Rr(o,m,C,A),Na(),ve=o.memoizedState,q||Pe!==ve||$i?(typeof ot=="function"&&(Ag(o,d,ot,m),ve=o.memoizedState),(ie=$i||O_(o,d,ie,m,Pe,ve,z))?(Qe||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(o.flags|=4194308)):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=ve),C.props=m,C.state=ve,C.context=z,m=ie):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{C=o.stateNode,gp(a,o),z=o.memoizedProps,Qe=Oc(d,z),C.props=Qe,ot=o.pendingProps,Pe=C.context,ve=d.contextType,ie=El,typeof ve=="object"&&ve!==null&&(ie=Oa(ve)),q=d.getDerivedStateFromProps,(ve=typeof q=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(z!==ot||Pe!==ie)&&N_(o,C,m,ie),$i=!1,Pe=o.memoizedState,C.state=Pe,Rr(o,m,C,A),Na();var We=o.memoizedState;z!==ot||Pe!==We||$i||a!==null&&a.dependencies!==null&&Fu(a.dependencies)?(typeof q=="function"&&(Ag(o,d,q,m),We=o.memoizedState),(Qe=$i||O_(o,d,Qe,m,Pe,We,ie)||a!==null&&a.dependencies!==null&&Fu(a.dependencies))?(ve||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(m,We,ie),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(m,We,ie)),typeof C.componentDidUpdate=="function"&&(o.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof C.componentDidUpdate!="function"||z===a.memoizedProps&&Pe===a.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||z===a.memoizedProps&&Pe===a.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=We),C.props=m,C.state=We,C.context=ie,m=Qe):(typeof C.componentDidUpdate!="function"||z===a.memoizedProps&&Pe===a.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||z===a.memoizedProps&&Pe===a.memoizedState||(o.flags|=1024),m=!1)}return C=m,Iu(a,o),m=(o.flags&128)!==0,C||m?(C=o.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:C.render(),o.flags|=1,a!==null&&m?(o.child=Io(o,a.child,null,A),o.child=Io(o,null,d,A)):la(a,o,d,A),o.memoizedState=C.state,a=o.child):a=Hi(a,o,A),a}function Bg(a,o,d,m){return Ru(),o.flags|=256,la(a,o,d,m),o.child}var Dg={dehydrated:null,treeContext:null,retryLane:0};function ga(a){return{baseLanes:a,cachePool:Go()}}function fp(a,o,d){return a=a!==null?a.childLanes&~d:0,o&&(a|=es),a}function k_(a,o,d){var m=o.pendingProps,A=!1,C=(o.flags&128)!==0,z;if((z=C)||(z=a!==null&&a.memoizedState===null?!1:(Zi.current&2)!==0),z&&(A=!0,o.flags&=-129),z=(o.flags&32)!==0,o.flags&=-33,a===null){if(Vn){if(A?Fo(o):zo(),Vn){var q=ma,ie;if(ie=q){e:{for(ie=q,q=er;ie.nodeType!==8;){if(!q){q=null;break e}if(ie=nl(ie.nextSibling),ie===null){q=null;break e}}q=ie}q!==null?(o.memoizedState={dehydrated:q,treeContext:No!==null?{id:Zr,overflow:Lo}:null,retryLane:536870912},ie=Xi(18,null,null,0),ie.stateNode=q,ie.return=o,o.child=ie,Ua=o,ma=null,ie=!0):ie=!1}ie||bc(o)}if(q=o.memoizedState,q!==null&&(q=q.dehydrated,q!==null))return q.data==="$!"?o.lanes=16:o.lanes=536870912,null;eo(o)}return q=m.children,m=m.fallback,A?(zo(),A=o.mode,q=Og({mode:"hidden",children:q},A),m=Wl(m,A,d,null),q.return=o,m.return=o,q.sibling=m,o.child=q,A=o.child,A.memoizedState=ga(d),A.childLanes=fp(a,z,d),o.memoizedState=Dg,m):(Fo(o),Ug(o,q))}if(ie=a.memoizedState,ie!==null&&(q=ie.dehydrated,q!==null)){if(C)o.flags&256?(Fo(o),o.flags&=-257,o=hp(a,o,d)):o.memoizedState!==null?(zo(),o.child=a.child,o.flags|=128,o=null):(zo(),A=m.fallback,q=o.mode,m=Og({mode:"visible",children:m.children},q),A=Wl(A,q,d,null),A.flags|=2,m.return=o,A.return=o,m.sibling=A,o.child=m,Io(o,a.child,null,d),m=o.child,m.memoizedState=ga(d),m.childLanes=fp(a,z,d),o.memoizedState=Dg,o=A);else if(Fo(o),q.data==="$!"){if(z=q.nextSibling&&q.nextSibling.dataset,z)var ve=z.dgst;z=ve,m=Error(n(419)),m.stack="",m.digest=z,Qr({value:m,source:null,stack:null}),o=hp(a,o,d)}else if(oa||ph(a,o,d,!1),z=(d&a.childLanes)!==0,oa||z){if(z=ci,z!==null){if(m=d&-d,(m&42)!==0)m=1;else switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=64;break;case 268435456:m=134217728;break;default:m=0}if(m=(m&(z.suspendedLanes|d))!==0?0:m,m!==0&&m!==ie.retryLane)throw ie.retryLane=m,Oo(a,m),na(z,a,m),Os}q.data==="$?"||Sh(),o=hp(a,o,d)}else q.data==="$?"?(o.flags|=128,o.child=a.child,o=Vc.bind(null,a),q._reactRetry=o,o=null):(a=ie.treeContext,ma=nl(q.nextSibling),Ua=o,Vn=!0,$s=null,er=!1,a!==null&&(_i[Ds++]=Zr,_i[Ds++]=Lo,_i[Ds++]=No,Zr=a.id,Lo=a.overflow,No=o),o=Ug(o,m.children),o.flags|=4096);return o}return A?(zo(),A=m.fallback,q=o.mode,ie=a.child,ve=ie.sibling,m=$a(ie,{mode:"hidden",children:m.children}),m.subtreeFlags=ie.subtreeFlags&31457280,ve!==null?A=$a(ve,A):(A=Wl(A,q,d,null),A.flags|=2),A.return=o,m.return=o,m.sibling=A,o.child=m,m=A,A=o.child,q=a.child.memoizedState,q===null?q=ga(d):(ie=q.cachePool,ie!==null?(ve=Fi._currentValue,ie=ie.parent!==ve?{parent:ve,pool:ve}:ie):ie=Go(),q={baseLanes:q.baseLanes|d,cachePool:ie}),A.memoizedState=q,A.childLanes=fp(a,z,d),o.memoizedState=Dg,m):(Fo(o),d=a.child,a=d.sibling,d=$a(d,{mode:"visible",children:m.children}),d.return=o,d.sibling=null,a!==null&&(z=o.deletions,z===null?(o.deletions=[a],o.flags|=16):z.push(a)),o.child=d,o.memoizedState=null,d)}function Ug(a,o){return o=Og({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Og(a,o){return Ig(a,o,0,null)}function hp(a,o,d){return Io(o,a.child,null,d),a=Ug(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function dp(a,o,d){a.lanes|=o;var m=a.alternate;m!==null&&(m.lanes|=o),Ns(a.return,o,d)}function Hl(a,o,d,m,A){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:A}:(C.isBackwards=o,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=d,C.tailMode=A)}function Nc(a,o,d){var m=o.pendingProps,A=m.revealOrder,C=m.tail;if(la(a,o,m.children,d),m=Zi.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&dp(a,d,o);else if(a.tag===19)dp(a,d,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(ht(Zi,m),A){case"forwards":for(d=o.child,A=null;d!==null;)a=d.alternate,a!==null&&Bu(a)===null&&(A=d),d=d.sibling;d=A,d===null?(A=o.child,o.child=null):(A=d.sibling,d.sibling=null),Hl(o,!1,A,d,C);break;case"backwards":for(d=null,A=o.child,o.child=null;A!==null;){if(a=A.alternate,a!==null&&Bu(a)===null){o.child=A;break}a=A.sibling,A.sibling=d,d=A,A=a}Hl(o,!0,d,null,C);break;case"together":Hl(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Hi(a,o,d){if(a!==null&&(o.dependencies=a.dependencies),Or|=o.lanes,(d&o.childLanes)===0)if(a!==null){if(ph(a,o,d,!1),(d&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(n(153));if(o.child!==null){for(a=o.child,d=$a(a,a.pendingProps),o.child=d,d.return=o;a.sibling!==null;)a=a.sibling,d=d.sibling=$a(a,a.pendingProps),d.return=o;d.sibling=null}return o.child}function Ng(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Fu(a)))}function IS(a,o,d){switch(o.tag){case 3:Mt(o,o.stateNode.containerInfo),Gl(o,Fi,a.memoizedState.cache),Ru();break;case 27:case 5:pe(o);break;case 4:Mt(o,o.stateNode.containerInfo);break;case 10:Gl(o,o.type,o.memoizedProps.value);break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(Fo(o),o.flags|=128,null):(d&o.child.childLanes)!==0?k_(a,o,d):(Fo(o),a=Hi(a,o,d),a!==null?a.sibling:null);Fo(o);break;case 19:var A=(a.flags&128)!==0;if(m=(d&o.childLanes)!==0,m||(ph(a,o,d,!1),m=(d&o.childLanes)!==0),A){if(m)return Nc(a,o,d);o.flags|=128}if(A=o.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ht(Zi,Zi.current),m)break;return null;case 22:case 23:return o.lanes=0,H_(a,o,d);case 24:Gl(o,Fi,a.memoizedState.cache)}return Hi(a,o,d)}function dh(a,o,d){if(a!==null)if(a.memoizedProps!==o.pendingProps)oa=!0;else{if(!Ng(a,d)&&(o.flags&128)===0)return oa=!1,IS(a,o,d);oa=(a.flags&131072)!==0}else oa=!1,Vn&&(o.flags&1048576)!==0&&rg(o,th,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var m=o.elementType,A=m._init;if(m=A(m._payload),o.type=m,typeof m=="function")Zo(m)?(a=Oc(m,a),o.tag=1,o=V_(null,o,m,a,d)):(o.tag=0,o=wg(null,o,m,a,d));else{if(m!=null){if(A=m.$$typeof,A===M){o.tag=11,o=bg(null,o,m,a,d);break e}else if(A===E){o.tag=14,o=Tg(null,o,m,a,d);break e}}throw o=H(m)||m,Error(n(306,o,""))}}return o;case 0:return wg(a,o,o.type,o.pendingProps,d);case 1:return m=o.type,A=Oc(m,o.pendingProps),V_(a,o,m,A,d);case 3:e:{if(Mt(o,o.stateNode.containerInfo),a===null)throw Error(n(387));var C=o.pendingProps;A=o.memoizedState,m=A.element,gp(a,o),Rr(o,C,null,d);var z=o.memoizedState;if(C=z.cache,Gl(o,Fi,C),C!==A.cache&&pp(o,[Fi],d,!0),Na(),C=z.element,A.isDehydrated)if(A={element:C,isDehydrated:!1,cache:z.cache},o.updateQueue.baseState=A,o.memoizedState=A,o.flags&256){o=Bg(a,o,C,d);break e}else if(C!==m){m=ds(Error(n(424)),o),Qr(m),o=Bg(a,o,C,d);break e}else for(ma=nl(o.stateNode.containerInfo.firstChild),Ua=o,Vn=!0,$s=null,er=!0,d=Po(o,null,C,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ru(),C===m){o=Hi(a,o,d);break e}la(a,o,C,d)}o=o.child}return o;case 26:return Iu(a,o),a===null?(d=UT(o.type,null,o.pendingProps,null))?o.memoizedState=d:Vn||(d=o.type,a=o.pendingProps,m=K_(De.current).createElement(d),m[gn]=o,m[Ht]=a,ns(m,d,a),te(m),o.stateNode=m):o.memoizedState=UT(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return pe(o),a===null&&Vn&&(m=o.stateNode=wT(o.type,o.pendingProps,De.current),Ua=o,er=!0,ma=nl(m.firstChild)),m=o.pendingProps.children,a!==null||Vn?la(a,o,m,d):o.child=Io(o,null,m,d),Iu(a,o),o.child;case 5:return a===null&&Vn&&((A=m=ma)&&(m=lU(m,o.type,o.pendingProps,er),m!==null?(o.stateNode=m,Ua=o,ma=nl(m.firstChild),er=!1,A=!0):A=!1),A||bc(o)),pe(o),A=o.type,C=o.pendingProps,z=a!==null?a.memoizedProps:null,m=C.children,JS(A,C)?m=null:z!==null&&JS(A,z)&&(o.flags|=32),o.memoizedState!==null&&(A=fg(a,o,DS,null,null,d),Yg._currentValue=A),Iu(a,o),la(a,o,m,d),o.child;case 6:return a===null&&Vn&&((a=d=ma)&&(d=cU(d,o.pendingProps,er),d!==null?(o.stateNode=d,Ua=o,ma=null,a=!0):a=!1),a||bc(o)),null;case 13:return k_(a,o,d);case 4:return Mt(o,o.stateNode.containerInfo),m=o.pendingProps,a===null?o.child=Io(o,null,m,d):la(a,o,m,d),o.child;case 11:return bg(a,o,o.type,o.pendingProps,d);case 7:return la(a,o,o.pendingProps,d),o.child;case 8:return la(a,o,o.pendingProps.children,d),o.child;case 12:return la(a,o,o.pendingProps.children,d),o.child;case 10:return m=o.pendingProps,Gl(o,o.type,m.value),la(a,o,m.children,d),o.child;case 9:return A=o.type._context,m=o.pendingProps.children,Lc(o),A=Oa(A),m=m(A),o.flags|=1,la(a,o,m,d),o.child;case 14:return Tg(a,o,o.type,o.pendingProps,d);case 15:return Cg(a,o,o.type,o.pendingProps,d);case 19:return Nc(a,o,d);case 22:return H_(a,o,d);case 24:return Lc(o),m=Oa(Fi),a===null?(A=ch(),A===null&&(A=ci,C=cg(),A.pooledCache=C,C.refCount++,C!==null&&(A.pooledCacheLanes|=d),A=C),o.memoizedState={parent:m,cache:A},Za(o),Gl(o,Fi,A)):((a.lanes&d)!==0&&(gp(a,o),Rr(o,null,null,d),Na()),A=a.memoizedState,C=o.memoizedState,A.parent!==m?(A={parent:m,cache:m},o.memoizedState=A,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=A),Gl(o,Fi,m)):(m=C.cache,Gl(o,Fi,m),m!==A.cache&&pp(o,[Fi],d,!0))),la(a,o,o.pendingProps.children,d),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}var Pu=tt(null),ao=null,Cr=null;function Gl(a,o,d){ht(Pu,o._currentValue),o._currentValue=d}function Yo(a){a._currentValue=Pu.current,wt(Pu)}function Ns(a,o,d){for(;a!==null;){var m=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),a===d)break;a=a.return}}function pp(a,o,d,m){var A=a.child;for(A!==null&&(A.return=a);A!==null;){var C=A.dependencies;if(C!==null){var z=A.child;C=C.firstContext;e:for(;C!==null;){var q=C;C=A;for(var ie=0;ie<o.length;ie++)if(q.context===o[ie]){C.lanes|=d,q=C.alternate,q!==null&&(q.lanes|=d),Ns(C.return,d,a),m||(z=null);break e}C=q.next}}else if(A.tag===18){if(z=A.return,z===null)throw Error(n(341));z.lanes|=d,C=z.alternate,C!==null&&(C.lanes|=d),Ns(z,d,a),z=null}else z=A.child;if(z!==null)z.return=A;else for(z=A;z!==null;){if(z===a){z=null;break}if(A=z.sibling,A!==null){A.return=z.return,z=A;break}z=z.return}A=z}}function ph(a,o,d,m){a=null;for(var A=o,C=!1;A!==null;){if(!C){if((A.flags&524288)!==0)C=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var z=A.alternate;if(z===null)throw Error(n(387));if(z=z.memoizedProps,z!==null){var q=A.type;us(A.pendingProps.value,z.value)||(a!==null?a.push(q):a=[q])}}else if(A===j.current){if(z=A.alternate,z===null)throw Error(n(387));z.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(a!==null?a.push(Yg):a=[Yg])}A=A.return}a!==null&&pp(o,a,d,m),o.flags|=262144}function Fu(a){for(a=a.firstContext;a!==null;){if(!us(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Lc(a){ao=a,Cr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Oa(a){return zu(ao,a)}function mp(a,o){return ao===null&&Lc(a),zu(a,o)}function zu(a,o){var d=o._currentValue;if(o={context:o,memoizedValue:d,next:null},Cr===null){if(a===null)throw Error(n(308));Cr=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Cr=Cr.next=o;return d}var $i=!1;function Za(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gp(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ls(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Is(a,o,d){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(dn&2)!==0){var A=m.pending;return A===null?o.next=o:(o.next=A.next,A.next=o),m.pending=o,o=eh(a),$f(a,null,d),o}return Qf(a,m,o,d),eh(a)}function Vl(a,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194176)!==0)){var m=o.lanes;m&=a.pendingLanes,d|=m,o.lanes=d,It(a,d)}}function Hu(a,o){var d=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var A=null,C=null;if(d=d.firstBaseUpdate,d!==null){do{var z={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};C===null?A=C=z:C=C.next=z,d=d.next}while(d!==null);C===null?A=C=o:C=C.next=o}else A=C=o;d={baseState:m.baseState,firstBaseUpdate:A,lastBaseUpdate:C,shared:m.shared,callbacks:m.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=o:a.next=o,d.lastBaseUpdate=o}var gs=!1;function Na(){if(gs){var a=Ol;if(a!==null)throw a}}function Rr(a,o,d,m){gs=!1;var A=a.updateQueue;$i=!1;var C=A.firstBaseUpdate,z=A.lastBaseUpdate,q=A.shared.pending;if(q!==null){A.shared.pending=null;var ie=q,ve=ie.next;ie.next=null,z===null?C=ve:z.next=ve,z=ie;var Qe=a.alternate;Qe!==null&&(Qe=Qe.updateQueue,q=Qe.lastBaseUpdate,q!==z&&(q===null?Qe.firstBaseUpdate=ve:q.next=ve,Qe.lastBaseUpdate=ie))}if(C!==null){var ot=A.baseState;z=0,Qe=ve=ie=null,q=C;do{var Pe=q.lane&-536870913,We=Pe!==q.lane;if(We?(nn&Pe)===Pe:(m&Pe)===Pe){Pe!==0&&Pe===Rc&&(gs=!0),Qe!==null&&(Qe=Qe.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var Kt=a,_n=q;Pe=o;var ia=d;switch(_n.tag){case 1:if(Kt=_n.payload,typeof Kt=="function"){ot=Kt.call(ia,ot,Pe);break e}ot=Kt;break e;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=_n.payload,Pe=typeof Kt=="function"?Kt.call(ia,ot,Pe):Kt,Pe==null)break e;ot=N({},ot,Pe);break e;case 2:$i=!0}}Pe=q.callback,Pe!==null&&(a.flags|=64,We&&(a.flags|=8192),We=A.callbacks,We===null?A.callbacks=[Pe]:We.push(Pe))}else We={lane:Pe,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Qe===null?(ve=Qe=We,ie=ot):Qe=Qe.next=We,z|=Pe;if(q=q.next,q===null){if(q=A.shared.pending,q===null)break;We=q,q=We.next,We.next=null,A.lastBaseUpdate=We,A.shared.pending=null}}while(!0);Qe===null&&(ie=ot),A.baseState=ie,A.firstBaseUpdate=ve,A.lastBaseUpdate=Qe,C===null&&(A.shared.lanes=0),Or|=z,a.lanes=z,a.memoizedState=ot}}function so(a,o){if(typeof a!="function")throw Error(n(191,a));a.call(o)}function ro(a,o){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)so(d[a],o)}function Gi(a,o){try{var d=o.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var A=m.next;d=A;do{if((d.tag&a)===a){m=void 0;var C=d.create,z=d.inst;m=C(),z.destroy=m}d=d.next}while(d!==A)}}catch(q){ft(o,o.return,q)}}function tr(a,o,d){try{var m=o.updateQueue,A=m!==null?m.lastEffect:null;if(A!==null){var C=A.next;m=C;do{if((m.tag&a)===a){var z=m.inst,q=z.destroy;if(q!==void 0){z.destroy=void 0,A=o;var ie=d;try{q()}catch(ve){ft(A,ie,ve)}}}m=m.next}while(m!==C)}}catch(ve){ft(o,o.return,ve)}}function qo(a){var o=a.updateQueue;if(o!==null){var d=a.stateNode;try{ro(o,d)}catch(m){ft(a,a.return,m)}}}function mh(a,o,d){d.props=Oc(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(m){ft(a,o,m)}}function Vi(a,o){try{var d=a.ref;if(d!==null){var m=a.stateNode;switch(a.tag){case 26:case 27:case 5:var A=m;break;default:A=m}typeof d=="function"?a.refCleanup=d(A):d.current=A}}catch(C){ft(a,o,C)}}function li(a,o){var d=a.ref,m=a.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(A){ft(a,o,A)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(A){ft(a,o,A)}else d.current=null}function kn(a){var o=a.type,d=a.memoizedProps,m=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(A){ft(a,a.return,A)}}function nr(a,o,d){try{var m=a.stateNode;iU(m,a.type,d,o),m[Ht]=o}catch(A){ft(a,a.return,A)}}function wr(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27||a.tag===4}function gh(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||wr(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==27&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function vs(a,o,d){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?d.nodeType===8?d.parentNode.insertBefore(a,o):d.insertBefore(a,o):(d.nodeType===8?(o=d.parentNode,o.insertBefore(a,d)):(o=d,o.appendChild(a)),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=j_));else if(m!==4&&m!==27&&(a=a.child,a!==null))for(vs(a,o,d),a=a.sibling;a!==null;)vs(a,o,d),a=a.sibling}function Jo(a,o,d){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?d.insertBefore(a,o):d.appendChild(a);else if(m!==4&&m!==27&&(a=a.child,a!==null))for(Jo(a,o,d),a=a.sibling;a!==null;)Jo(a,o,d),a=a.sibling}var Br=!1,Ai=!1,kl=!1,vp=typeof WeakSet=="function"?WeakSet:Set,ki=null,_p=!1;function Gu(a,o){if(a=a.containerInfo,YS=ny,a=eg(a),Kf(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var A=m.anchorOffset,C=m.focusNode;m=m.focusOffset;try{d.nodeType,C.nodeType}catch{d=null;break e}var z=0,q=-1,ie=-1,ve=0,Qe=0,ot=a,Pe=null;t:for(;;){for(var We;ot!==d||A!==0&&ot.nodeType!==3||(q=z+A),ot!==C||m!==0&&ot.nodeType!==3||(ie=z+m),ot.nodeType===3&&(z+=ot.nodeValue.length),(We=ot.firstChild)!==null;)Pe=ot,ot=We;for(;;){if(ot===a)break t;if(Pe===d&&++ve===A&&(q=z),Pe===C&&++Qe===m&&(ie=z),(We=ot.nextSibling)!==null)break;ot=Pe,Pe=ot.parentNode}ot=We}d=q===-1||ie===-1?null:{start:q,end:ie}}else d=null}d=d||{start:0,end:0}}else d=null;for(qS={focusedElem:a,selectionRange:d},ny=!1,ki=o;ki!==null;)if(o=ki,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,ki=a;else for(;ki!==null;){switch(o=ki,C=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,d=o,A=C.memoizedProps,C=C.memoizedState,m=d.stateNode;try{var Kt=Oc(d.type,A,d.elementType===d.type);a=m.getSnapshotBeforeUpdate(Kt,C),m.__reactInternalSnapshotBeforeUpdate=a}catch(_n){ft(d,d.return,_n)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,d=a.nodeType,d===9)KS(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":KS(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=o.sibling,a!==null){a.return=o.return,ki=a;break}ki=o.return}return Kt=_p,_p=!1,Kt}function Vu(a,o,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:oo(a,d),m&4&&Gi(5,d);break;case 1:if(oo(a,d),m&4)if(a=d.stateNode,o===null)try{a.componentDidMount()}catch(q){ft(d,d.return,q)}else{var A=Oc(d.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(A,o,a.__reactInternalSnapshotBeforeUpdate)}catch(q){ft(d,d.return,q)}}m&64&&qo(d),m&512&&Vi(d,d.return);break;case 3:if(oo(a,d),m&64&&(m=d.updateQueue,m!==null)){if(a=null,d.child!==null)switch(d.child.tag){case 27:case 5:a=d.child.stateNode;break;case 1:a=d.child.stateNode}try{ro(m,a)}catch(q){ft(d,d.return,q)}}break;case 26:oo(a,d),m&512&&Vi(d,d.return);break;case 27:case 5:oo(a,d),o===null&&m&4&&kn(d),m&512&&Vi(d,d.return);break;case 12:oo(a,d);break;case 13:oo(a,d),m&4&&X_(a,d);break;case 22:if(A=d.memoizedState!==null||Br,!A){o=o!==null&&o.memoizedState!==null||Ai;var C=Br,z=Ai;Br=A,(Ai=o)&&!z?Ur(a,d,(d.subtreeFlags&8772)!==0):oo(a,d),Br=C,Ai=z}m&512&&(d.memoizedProps.mode==="manual"?Vi(d,d.return):li(d,d.return));break;default:oo(a,d)}}function yp(a){var o=a.alternate;o!==null&&(a.alternate=null,yp(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&nt(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Si=null,va=!1;function La(a,o,d){for(d=d.child;d!==null;)xp(a,o,d),d=d.sibling}function xp(a,o,d){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(Nt,d)}catch{}switch(d.tag){case 26:Ai||li(d,o),La(a,o,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Ai||li(d,o);var m=Si,A=va;for(Si=d.stateNode,La(a,o,d),d=d.stateNode,o=d.attributes;o.length;)d.removeAttributeNode(o[0]);nt(d),Si=m,va=A;break;case 5:Ai||li(d,o);case 6:A=Si;var C=va;if(Si=null,La(a,o,d),Si=A,va=C,Si!==null)if(va)try{a=Si,m=d.stateNode,a.nodeType===8?a.parentNode.removeChild(m):a.removeChild(m)}catch(z){ft(d,o,z)}else try{Si.removeChild(d.stateNode)}catch(z){ft(d,o,z)}break;case 18:Si!==null&&(va?(o=Si,d=d.stateNode,o.nodeType===8?jS(o.parentNode,d):o.nodeType===1&&jS(o,d),jg(o)):jS(Si,d.stateNode));break;case 4:m=Si,A=va,Si=d.stateNode.containerInfo,va=!0,La(a,o,d),Si=m,va=A;break;case 0:case 11:case 14:case 15:Ai||tr(2,d,o),Ai||tr(4,d,o),La(a,o,d);break;case 1:Ai||(li(d,o),m=d.stateNode,typeof m.componentWillUnmount=="function"&&mh(d,o,m)),La(a,o,d);break;case 21:La(a,o,d);break;case 22:Ai||li(d,o),Ai=(m=Ai)||d.memoizedState!==null,La(a,o,d),Ai=m;break;default:La(a,o,d)}}function X_(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{jg(a)}catch(d){ft(o,o.return,d)}}function vh(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new vp),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new vp),o;default:throw Error(n(435,a.tag))}}function _h(a,o){var d=vh(a);o.forEach(function(m){var A=Ue.bind(null,a,m);d.has(m)||(d.add(m),m.then(A,A))})}function Qa(a,o){var d=o.deletions;if(d!==null)for(var m=0;m<d.length;m++){var A=d[m],C=a,z=o,q=z;e:for(;q!==null;){switch(q.tag){case 27:case 5:Si=q.stateNode,va=!1;break e;case 3:Si=q.stateNode.containerInfo,va=!0;break e;case 4:Si=q.stateNode.containerInfo,va=!0;break e}q=q.return}if(Si===null)throw Error(n(160));xp(C,z,A),Si=null,va=!1,C=A.alternate,C!==null&&(C.return=null),A.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Ic(o,a),o=o.sibling}var Ia=null;function Ic(a,o){var d=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Qa(o,a),Pa(a),m&4&&(tr(3,a,a.return),Gi(3,a),tr(5,a,a.return));break;case 1:Qa(o,a),Pa(a),m&512&&(Ai||d===null||li(d,d.return)),m&64&&Br&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var A=Ia;if(Qa(o,a),Pa(a),m&512&&(Ai||d===null||li(d,d.return)),m&4){var C=d!==null?d.memoizedState:null;if(m=a.memoizedState,d===null)if(m===null)if(a.stateNode===null){e:{m=a.type,d=a.memoizedProps,A=A.ownerDocument||A;t:switch(m){case"title":C=A.getElementsByTagName("title")[0],(!C||C[Le]||C[gn]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=A.createElement(m),A.head.insertBefore(C,A.querySelector("head > title"))),ns(C,m,d),C[gn]=a,te(C),m=C;break e;case"link":var z=LT("link","href",A).get(m+(d.href||""));if(z){for(var q=0;q<z.length;q++)if(C=z[q],C.getAttribute("href")===(d.href==null?null:d.href)&&C.getAttribute("rel")===(d.rel==null?null:d.rel)&&C.getAttribute("title")===(d.title==null?null:d.title)&&C.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){z.splice(q,1);break t}}C=A.createElement(m),ns(C,m,d),A.head.appendChild(C);break;case"meta":if(z=LT("meta","content",A).get(m+(d.content||""))){for(q=0;q<z.length;q++)if(C=z[q],C.getAttribute("content")===(d.content==null?null:""+d.content)&&C.getAttribute("name")===(d.name==null?null:d.name)&&C.getAttribute("property")===(d.property==null?null:d.property)&&C.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&C.getAttribute("charset")===(d.charSet==null?null:d.charSet)){z.splice(q,1);break t}}C=A.createElement(m),ns(C,m,d),A.head.appendChild(C);break;default:throw Error(n(468,m))}C[gn]=a,te(C),m=C}a.stateNode=m}else IT(A,a.type,a.stateNode);else a.stateNode=NT(A,m,a.memoizedProps);else C!==m?(C===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):C.count--,m===null?IT(A,a.type,a.stateNode):NT(A,m,a.memoizedProps)):m===null&&a.stateNode!==null&&nr(a,a.memoizedProps,d.memoizedProps)}break;case 27:if(m&4&&a.alternate===null){A=a.stateNode,C=a.memoizedProps;try{for(var ie=A.firstChild;ie;){var ve=ie.nextSibling,Qe=ie.nodeName;ie[Le]||Qe==="HEAD"||Qe==="BODY"||Qe==="SCRIPT"||Qe==="STYLE"||Qe==="LINK"&&ie.rel.toLowerCase()==="stylesheet"||A.removeChild(ie),ie=ve}for(var ot=a.type,Pe=A.attributes;Pe.length;)A.removeAttributeNode(Pe[0]);ns(A,ot,C),A[gn]=a,A[Ht]=C}catch(Kt){ft(a,a.return,Kt)}}case 5:if(Qa(o,a),Pa(a),m&512&&(Ai||d===null||li(d,d.return)),a.flags&32){A=a.stateNode;try{Ja(A,"")}catch(Kt){ft(a,a.return,Kt)}}m&4&&a.stateNode!=null&&(A=a.memoizedProps,nr(a,A,d!==null?d.memoizedProps:A)),m&1024&&(kl=!0);break;case 6:if(Qa(o,a),Pa(a),m&4){if(a.stateNode===null)throw Error(n(162));m=a.memoizedProps,d=a.stateNode;try{d.nodeValue=m}catch(Kt){ft(a,a.return,Kt)}}break;case 3:if($_=null,A=Ia,Ia=Z_(o.containerInfo),Qa(o,a),Ia=A,Pa(a),m&4&&d!==null&&d.memoizedState.isDehydrated)try{jg(o.containerInfo)}catch(Kt){ft(a,a.return,Kt)}kl&&(kl=!1,Xl(a));break;case 4:m=Ia,Ia=Z_(a.stateNode.containerInfo),Qa(o,a),Pa(a),Ia=m;break;case 12:Qa(o,a),Pa(a);break;case 13:Qa(o,a),Pa(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(bn=ze()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,_h(a,m)));break;case 22:if(m&512&&(Ai||d===null||li(d,d.return)),ie=a.memoizedState!==null,ve=d!==null&&d.memoizedState!==null,Qe=Br,ot=Ai,Br=Qe||ie,Ai=ot||ve,Qa(o,a),Ai=ot,Br=Qe,Pa(a),o=a.stateNode,o._current=a,o._visibility&=-3,o._visibility|=o._pendingVisibility&2,m&8192&&(o._visibility=ie?o._visibility&-2:o._visibility|1,ie&&(o=Br||Ai,d===null||ve||o||Dr(a)),a.memoizedProps===null||a.memoizedProps.mode!=="manual"))e:for(d=null,o=a;;){if(o.tag===5||o.tag===26||o.tag===27){if(d===null){ve=d=o;try{if(A=ve.stateNode,ie)C=A.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{z=ve.stateNode,q=ve.memoizedProps.style;var We=q!=null&&q.hasOwnProperty("display")?q.display:null;z.style.display=We==null||typeof We=="boolean"?"":(""+We).trim()}}catch(Kt){ft(ve,ve.return,Kt)}}}else if(o.tag===6){if(d===null){ve=o;try{ve.stateNode.nodeValue=ie?"":ve.memoizedProps}catch(Kt){ft(ve,ve.return,Kt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;d===o&&(d=null),o=o.return}d===o&&(d=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=a.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,_h(a,d))));break;case 19:Qa(o,a),Pa(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,_h(a,m)));break;case 21:break;default:Qa(o,a),Pa(a)}}function Pa(a){var o=a.flags;if(o&2){try{if(a.tag!==27){e:{for(var d=a.return;d!==null;){if(wr(d)){var m=d;break e}d=d.return}throw Error(n(160))}switch(m.tag){case 27:var A=m.stateNode,C=gh(a);Jo(a,C,A);break;case 5:var z=m.stateNode;m.flags&32&&(Ja(z,""),m.flags&=-33);var q=gh(a);Jo(a,q,z);break;case 3:case 4:var ie=m.stateNode.containerInfo,ve=gh(a);vs(a,ve,ie);break;default:throw Error(n(161))}}}catch(Qe){ft(a,a.return,Qe)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function Xl(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;Xl(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function oo(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Vu(a,o.alternate,o),o=o.sibling}function Dr(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:tr(4,o,o.return),Dr(o);break;case 1:li(o,o.return);var d=o.stateNode;typeof d.componentWillUnmount=="function"&&mh(o,o.return,d),Dr(o);break;case 26:case 27:case 5:li(o,o.return),Dr(o);break;case 22:li(o,o.return),o.memoizedState===null&&Dr(o);break;default:Dr(o)}a=a.sibling}}function Ur(a,o,d){for(d=d&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,A=a,C=o,z=C.flags;switch(C.tag){case 0:case 11:case 15:Ur(A,C,d),Gi(4,C);break;case 1:if(Ur(A,C,d),m=C,A=m.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(ve){ft(m,m.return,ve)}if(m=C,A=m.updateQueue,A!==null){var q=m.stateNode;try{var ie=A.shared.hiddenCallbacks;if(ie!==null)for(A.shared.hiddenCallbacks=null,A=0;A<ie.length;A++)so(ie[A],q)}catch(ve){ft(m,m.return,ve)}}d&&z&64&&qo(C),Vi(C,C.return);break;case 26:case 27:case 5:Ur(A,C,d),d&&m===null&&z&4&&kn(C),Vi(C,C.return);break;case 12:Ur(A,C,d);break;case 13:Ur(A,C,d),d&&z&4&&X_(A,C);break;case 22:C.memoizedState===null&&Ur(A,C,d),Vi(C,C.return);break;default:Ur(A,C,d)}o=o.sibling}}function _s(a,o){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&Dl(d))}function ir(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Dl(a))}function yi(a,o,d,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Wo(a,o,d,m),o=o.sibling}function Wo(a,o,d,m){var A=o.flags;switch(o.tag){case 0:case 11:case 15:yi(a,o,d,m),A&2048&&Gi(9,o);break;case 3:yi(a,o,d,m),A&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Dl(a)));break;case 12:if(A&2048){yi(a,o,d,m),a=o.stateNode;try{var C=o.memoizedProps,z=C.id,q=C.onPostCommit;typeof q=="function"&&q(z,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(ie){ft(o,o.return,ie)}}else yi(a,o,d,m);break;case 23:break;case 22:C=o.stateNode,o.memoizedState!==null?C._visibility&4?yi(a,o,d,m):Wn(a,o):C._visibility&4?yi(a,o,d,m):(C._visibility|=4,hn(a,o,d,m,(o.subtreeFlags&10256)!==0)),A&2048&&_s(o.alternate,o);break;case 24:yi(a,o,d,m),A&2048&&ir(o.alternate,o);break;default:yi(a,o,d,m)}}function hn(a,o,d,m,A){for(A=A&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var C=a,z=o,q=d,ie=m,ve=z.flags;switch(z.tag){case 0:case 11:case 15:hn(C,z,q,ie,A),Gi(8,z);break;case 23:break;case 22:var Qe=z.stateNode;z.memoizedState!==null?Qe._visibility&4?hn(C,z,q,ie,A):Wn(C,z):(Qe._visibility|=4,hn(C,z,q,ie,A)),A&&ve&2048&&_s(z.alternate,z);break;case 24:hn(C,z,q,ie,A),A&&ve&2048&&ir(z.alternate,z);break;default:hn(C,z,q,ie,A)}o=o.sibling}}function Wn(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var d=a,m=o,A=m.flags;switch(m.tag){case 22:Wn(d,m),A&2048&&_s(m.alternate,m);break;case 24:Wn(d,m),A&2048&&ir(m.alternate,m);break;default:Wn(d,m)}o=o.sibling}}var Ri=8192;function jo(a){if(a.subtreeFlags&Ri)for(a=a.child;a!==null;)Pc(a),a=a.sibling}function Pc(a){switch(a.tag){case 26:jo(a),a.flags&Ri&&a.memoizedState!==null&&SU(Ia,a.memoizedState,a.memoizedProps);break;case 5:jo(a);break;case 3:case 4:var o=Ia;Ia=Z_(a.stateNode.containerInfo),jo(a),Ia=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=Ri,Ri=16777216,jo(a),Ri=o):jo(a));break;default:jo(a)}}function Yl(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function ql(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var m=o[d];ki=m,Y_(m,a)}Yl(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ku(a),a=a.sibling}function ku(a){switch(a.tag){case 0:case 11:case 15:ql(a),a.flags&2048&&tr(9,a,a.return);break;case 3:ql(a);break;case 12:ql(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&4&&(a.return===null||a.return.tag!==13)?(o._visibility&=-5,Ko(a)):ql(a);break;default:ql(a)}}function Ko(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var m=o[d];ki=m,Y_(m,a)}Yl(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:tr(8,o,o.return),Ko(o);break;case 22:d=o.stateNode,d._visibility&4&&(d._visibility&=-5,Ko(o));break;default:Ko(o)}a=a.sibling}}function Y_(a,o){for(;ki!==null;){var d=ki;switch(d.tag){case 0:case 11:case 15:tr(8,d,o);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Dl(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,ki=m;else e:for(d=a;ki!==null;){m=ki;var A=m.sibling,C=m.return;if(yp(m),m===d){ki=null;break e}if(A!==null){A.return=C,ki=A;break e}ki=C}}}function Lg(a,o,d,m){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(a,o,d,m){return new Lg(a,o,d,m)}function Zo(a){return a=a.prototype,!(!a||!a.isReactComponent)}function $a(a,o){var d=a.alternate;return d===null?(d=Xi(a.tag,o,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=o,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&31457280,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,o=a.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function Jl(a,o){a.flags&=31457282;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,o=d.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Xu(a,o,d,m,A,C){var z=0;if(m=a,typeof a=="function")Zo(a)&&(z=1);else if(typeof a=="string")z=xU(a,d,Pt.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case h:return Wl(d.children,A,C,o);case p:z=8,A|=24;break;case g:return a=Xi(12,d,o,A|2),a.elementType=g,a.lanes=C,a;case T:return a=Xi(13,d,o,A),a.elementType=T,a.lanes=C,a;case b:return a=Xi(19,d,o,A),a.elementType=b,a.lanes=C,a;case D:return Ig(d,A,C,o);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case _:case x:z=10;break e;case y:z=9;break e;case M:z=11;break e;case E:z=14;break e;case w:z=16,m=null;break e}z=29,d=Error(n(130,a===null?"null":typeof a,"")),m=null}return o=Xi(z,d,o,A),o.elementType=a,o.type=m,o.lanes=C,o}function Wl(a,o,d,m){return a=Xi(7,a,m,o),a.lanes=d,a}function Ig(a,o,d,m){a=Xi(22,a,m,o),a.elementType=D,a.lanes=d;var A={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var C=A._current;if(C===null)throw Error(n(456));if((A._pendingVisibility&2)===0){var z=Oo(C,2);z!==null&&(A._pendingVisibility|=2,na(z,C,2))}},attach:function(){var C=A._current;if(C===null)throw Error(n(456));if((A._pendingVisibility&2)!==0){var z=Oo(C,2);z!==null&&(A._pendingVisibility&=-3,na(z,C,2))}}};return a.stateNode=A,a}function ea(a,o,d){return a=Xi(6,a,null,o),a.lanes=d,a}function yh(a,o,d){return o=Xi(4,a.children!==null?a.children:[],a.key,o),o.lanes=d,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}function ar(a){a.flags|=4}function jl(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!PT(o)){if(o=ps.current,o!==null&&((nn&4194176)===nn?$r!==null:(nn&62914560)!==nn&&(nn&536870912)===0||o!==$r))throw wu=Zd,og;a.flags|=8192}}function sr(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?St():536870912,a.lanes|=o,co|=o)}function xh(a,o){if(!Vn)switch(a.tailMode){case"hidden":o=a.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function Di(a){var o=a.alternate!==null&&a.alternate.child===a.child,d=0,m=0;if(o)for(var A=a.child;A!==null;)d|=A.lanes|A.childLanes,m|=A.subtreeFlags&31457280,m|=A.flags&31457280,A.return=a,A=A.sibling;else for(A=a.child;A!==null;)d|=A.lanes|A.childLanes,m|=A.subtreeFlags,m|=A.flags,A.return=a,A=A.sibling;return a.subtreeFlags|=m,a.childLanes=d,o}function PS(a,o,d){var m=o.pendingProps;switch(Tl(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Di(o),null;case 1:return Di(o),null;case 3:return d=o.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),Yo(Fi),$e(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(Cu(o)?ar(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,$s!==null&&(cr($s),$s=null))),Di(o),null;case 26:return d=o.memoizedState,a===null?(ar(o),d!==null?(Di(o),jl(o,d)):(Di(o),o.flags&=-16777217)):d?d!==a.memoizedState?(ar(o),Di(o),jl(o,d)):(Di(o),o.flags&=-16777217):(a.memoizedProps!==m&&ar(o),Di(o),o.flags&=-16777217),null;case 27:at(o),d=De.current;var A=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==m&&ar(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return Di(o),null}a=Pt.current,Cu(o)?$v(o):(a=wT(A,m,d),o.stateNode=a,ar(o))}return Di(o),null;case 5:if(at(o),d=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==m&&ar(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return Di(o),null}if(a=Pt.current,Cu(o))$v(o);else{switch(A=K_(De.current),a){case 1:a=A.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:a=A.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":a=A.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":a=A.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":a=A.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof m.is=="string"?A.createElement("select",{is:m.is}):A.createElement("select"),m.multiple?a.multiple=!0:m.size&&(a.size=m.size);break;default:a=typeof m.is=="string"?A.createElement(d,{is:m.is}):A.createElement(d)}}a[gn]=o,a[Ht]=m;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)a.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=a;e:switch(ns(a,d,m),d){case"button":case"input":case"select":case"textarea":a=!!m.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ar(o)}}return Di(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==m&&ar(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(n(166));if(a=De.current,Cu(o)){if(a=o.stateNode,d=o.memoizedProps,m=null,A=Ua,A!==null)switch(A.tag){case 27:case 5:m=A.memoizedProps}a[gn]=o,a=!!(a.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||MT(a.nodeValue,d)),a||bc(o)}else a=K_(a).createTextNode(m),a[gn]=o,o.stateNode=a}return Di(o),null;case 13:if(m=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(A=Cu(o),m!==null&&m.dehydrated!==null){if(a===null){if(!A)throw Error(n(318));if(A=o.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[gn]=o}else Ru(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Di(o),A=!1}else $s!==null&&(cr($s),$s=null),A=!0;if(!A)return o.flags&256?(eo(o),o):(eo(o),null)}if(eo(o),(o.flags&128)!==0)return o.lanes=d,o;if(d=m!==null,a=a!==null&&a.memoizedState!==null,d){m=o.child,A=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(A=m.alternate.memoizedState.cachePool.pool);var C=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),C!==A&&(m.flags|=2048)}return d!==a&&d&&(o.child.flags|=8192),sr(o,o.updateQueue),Di(o),null;case 4:return $e(),a===null&&VS(o.stateNode.containerInfo),Di(o),null;case 10:return Yo(o.type),Di(o),null;case 19:if(wt(Zi),A=o.memoizedState,A===null)return Di(o),null;if(m=(o.flags&128)!==0,C=A.rendering,C===null)if(m)xh(A,!1);else{if(Mi!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(C=Bu(a),C!==null){for(o.flags|=128,xh(A,!1),a=C.updateQueue,o.updateQueue=a,sr(o,a),o.subtreeFlags=0,a=d,d=o.child;d!==null;)Jl(d,a),d=d.sibling;return ht(Zi,Zi.current&1|2),o.child}a=a.sibling}A.tail!==null&&ze()>Nn&&(o.flags|=128,m=!0,xh(A,!1),o.lanes=4194304)}else{if(!m)if(a=Bu(C),a!==null){if(o.flags|=128,m=!0,a=a.updateQueue,o.updateQueue=a,sr(o,a),xh(A,!0),A.tail===null&&A.tailMode==="hidden"&&!C.alternate&&!Vn)return Di(o),null}else 2*ze()-A.renderingStartTime>Nn&&d!==536870912&&(o.flags|=128,m=!0,xh(A,!1),o.lanes=4194304);A.isBackwards?(C.sibling=o.child,o.child=C):(a=A.last,a!==null?a.sibling=C:o.child=C,A.last=C)}return A.tail!==null?(o=A.tail,A.rendering=o,A.tail=o.sibling,A.renderingStartTime=ze(),o.sibling=null,a=Zi.current,ht(Zi,m?a&1|2:a&1),o):(Di(o),null);case 22:case 23:return eo(o),lh(),m=o.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(d&536870912)!==0&&(o.flags&128)===0&&(Di(o),o.subtreeFlags&6&&(o.flags|=8192)):Di(o),d=o.updateQueue,d!==null&&sr(o,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==d&&(o.flags|=2048),a!==null&&wt(Ho),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Yo(Fi),Di(o),null;case 25:return null}throw Error(n(156,o.tag))}function Ni(a,o){switch(Tl(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Yo(Fi),$e(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return at(o),null;case 13:if(eo(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Ru()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return wt(Zi),null;case 4:return $e(),null;case 10:return Yo(o.type),null;case 22:case 23:return eo(o),lh(),a!==null&&wt(Ho),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Yo(Fi),null;case 25:return null;default:return null}}function Pg(a,o){switch(Tl(o),o.tag){case 3:Yo(Fi),$e();break;case 26:case 27:case 5:at(o);break;case 4:$e();break;case 13:eo(o);break;case 19:wt(Zi);break;case 10:Yo(o.type);break;case 22:case 23:eo(o),lh(),a!==null&&wt(Ho);break;case 24:Yo(Fi)}}var Fc={getCacheForType:function(a){var o=Oa(Fi),d=o.data.get(a);return d===void 0&&(d=a(),o.data.set(a,d)),d}},Qo=typeof WeakMap=="function"?WeakMap:Map,dn=0,ci=null,Rn=null,nn=0,pi=0,jn=null,Yi=!1,Fa=!1,Kl=!1,$o=0,Mi=0,Or=0,lo=0,Yu=0,es=0,co=0,Ah=null,On=null,ui=!1,bn=0,Nn=1/0,ri=null,ta=null,rr=!1,or=null,zc=0,Nr=0,wi=null,lr=0,el=null;function ts(){if((dn&2)!==0&&nn!==0)return nn&-nn;if(U.T!==null){var a=Rc;return a!==0?a:FS()}return Zn()}function Ps(){es===0&&(es=(nn&536870912)===0||Vn?Bn():536870912);var a=ps.current;return a!==null&&(a.flags|=32),es}function na(a,o,d){(a===ci&&pi===2||a.cancelPendingCommit!==null)&&(tl(a,0),Fs(a,nn,es,!1)),Zt(a,d),((dn&2)===0||a!==ci)&&(a===ci&&((dn&2)===0&&(lo|=d),Mi===4&&Fs(a,nn,es,!1)),mi(a))}function qu(a,o,d){if((dn&6)!==0)throw Error(n(327));var m=!d&&(o&60)===0&&(o&a.expiredLanes)===0||Ft(a,o),A=m?u(a,o):Gc(a,o,!0),C=m;do{if(A===0){Fa&&!m&&Fs(a,o,0,!1);break}else if(A===6)Fs(a,o,0,!Yi);else{if(d=a.current.alternate,C&&!Fg(d)){A=Gc(a,o,!1),C=!1;continue}if(A===2){if(C=o,a.errorRecoveryDisabledLanes&C)var z=0;else z=a.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){o=z;e:{var q=a;A=Ah;var ie=q.current.memoizedState.isDehydrated;if(ie&&(tl(q,z).flags|=256),z=Gc(q,z,!1),z!==2){if(Kl&&!ie){q.errorRecoveryDisabledLanes|=C,lo|=C,A=4;break e}C=On,On=A,C!==null&&cr(C)}A=z}if(C=!1,A!==2)continue}}if(A===1){tl(a,0),Fs(a,o,0,!0);break}e:{switch(m=a,A){case 0:case 1:throw Error(n(345));case 4:if((o&4194176)===o){Fs(m,o,es,!Yi);break e}break;case 2:On=null;break;case 3:case 5:break;default:throw Error(n(329))}if(m.finishedWork=d,m.finishedLanes=o,(o&62914560)===o&&(C=bn+300-ze(),10<C)){if(Fs(m,o,es,!Yi),xt(m,0)!==0)break e;m.timeoutHandle=TT(Ap.bind(null,m,d,On,ri,ui,o,es,lo,co,Yi,2,-0,0),C);break e}Ap(m,d,On,ri,ui,o,es,lo,co,Yi,0,-0,0)}}break}while(!0);mi(a)}function cr(a){On===null?On=a:On.push.apply(On,a)}function Ap(a,o,d,m,A,C,z,q,ie,ve,Qe,ot,Pe){var We=o.subtreeFlags;if((We&8192||(We&16785408)===16785408)&&(Xg={stylesheets:null,count:0,unsuspend:AU},Pc(o),o=MU(),o!==null)){a.cancelPendingCommit=o(fe.bind(null,a,d,m,A,z,q,ie,1,ot,Pe)),Fs(a,C,z,!ve);return}fe(a,d,m,A,z,q,ie,Qe,ot,Pe)}function Fg(a){for(var o=a;;){var d=o.tag;if((d===0||d===11||d===15)&&o.flags&16384&&(d=o.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var A=d[m],C=A.getSnapshot;A=A.value;try{if(!us(C(),A))return!1}catch{return!1}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Fs(a,o,d,m){o&=~Yu,o&=~lo,a.suspendedLanes|=o,a.pingedLanes&=~o,m&&(a.warmLanes|=o),m=a.expirationTimes;for(var A=o;0<A;){var C=31-Re(A),z=1<<C;m[C]=-1,A&=~z}d!==0&&en(a,d,o)}function Hc(){return(dn&6)===0?(In(0),!1):!0}function uo(){if(Rn!==null){if(pi===0)var a=Rn.return;else a=Rn,Cr=ao=null,tp(a),wl=null,sh=0,a=Rn;for(;a!==null;)Pg(a.alternate,a),a=a.return;Rn=null}}function tl(a,o){a.finishedWork=null,a.finishedLanes=0;var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,sU(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),uo(),ci=a,Rn=d=$a(a.current,null),nn=o,pi=0,jn=null,Yi=!1,Fa=Ft(a,o),Kl=!1,co=es=Yu=lo=Or=Mi=0,On=Ah=null,ui=!1,(o&8)!==0&&(o|=o&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=o;0<m;){var A=31-Re(m),C=1<<A;o|=a[A],m&=~C}return $o=o,Zf(),d}function Zl(a,o){En=null,U.H=io,o===Cl?(o=ii(),pi=3):o===og?(o=ii(),pi=4):pi=o===Os?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,jn=o,Rn===null&&(Mi=1,up(a,ds(o,a.current)))}function Ju(){var a=U.H;return U.H=io,a===null?io:a}function Sp(){var a=U.A;return U.A=Fc,a}function Sh(){Mi=4,Yi||(nn&4194176)!==nn&&ps.current!==null||(Fa=!0),(Or&134217727)===0&&(lo&134217727)===0||ci===null||Fs(ci,nn,es,!1)}function Gc(a,o,d){var m=dn;dn|=2;var A=Ju(),C=Sp();(ci!==a||nn!==o)&&(ri=null,tl(a,o)),o=!1;var z=Mi;e:do try{if(pi!==0&&Rn!==null){var q=Rn,ie=jn;switch(pi){case 8:uo(),z=6;break e;case 3:case 2:case 6:ps.current===null&&(o=!0);var ve=pi;if(pi=0,jn=null,R(a,q,ie,ve),d&&Fa){z=0;break e}break;default:ve=pi,pi=0,jn=null,R(a,q,ie,ve)}}zg(),z=Mi;break}catch(Qe){Zl(a,Qe)}while(!0);return o&&a.shellSuspendCounter++,Cr=ao=null,dn=m,U.H=A,U.A=C,Rn===null&&(ci=null,nn=0,Zf()),z}function zg(){for(;Rn!==null;)v(Rn)}function u(a,o){var d=dn;dn|=2;var m=Ju(),A=Sp();ci!==a||nn!==o?(ri=null,Nn=ze()+500,tl(a,o)):Fa=Ft(a,o);e:do try{if(pi!==0&&Rn!==null){o=Rn;var C=jn;t:switch(pi){case 1:pi=0,jn=null,R(a,o,C,1);break;case 2:if(t_(C)){pi=0,jn=null,S(o);break}o=function(){pi===2&&ci===a&&(pi=7),mi(a)},C.then(o,o);break e;case 3:pi=7;break e;case 4:pi=5;break e;case 7:t_(C)?(pi=0,jn=null,S(o)):(pi=0,jn=null,R(a,o,C,7));break;case 5:var z=null;switch(Rn.tag){case 26:z=Rn.memoizedState;case 5:case 27:var q=Rn;if(!z||PT(z)){pi=0,jn=null;var ie=q.sibling;if(ie!==null)Rn=ie;else{var ve=q.return;ve!==null?(Rn=ve,O(ve)):Rn=null}break t}}pi=0,jn=null,R(a,o,C,5);break;case 6:pi=0,jn=null,R(a,o,C,6);break;case 8:uo(),Mi=6;break e;default:throw Error(n(462))}}f();break}catch(Qe){Zl(a,Qe)}while(!0);return Cr=ao=null,U.H=m,U.A=A,dn=d,Rn!==null?0:(ci=null,nn=0,Zf(),Mi)}function f(){for(;Rn!==null&&!k();)v(Rn)}function v(a){var o=dh(a.alternate,a,$o);a.memoizedProps=a.pendingProps,o===null?O(a):Rn=o}function S(a){var o=a,d=o.alternate;switch(o.tag){case 15:case 0:o=G_(d,o,o.pendingProps,o.type,void 0,nn);break;case 11:o=G_(d,o,o.pendingProps,o.type.render,o.ref,nn);break;case 5:tp(o);default:Pg(d,o),o=Rn=Jl(o,$o),o=dh(d,o,$o)}a.memoizedProps=a.pendingProps,o===null?O(a):Rn=o}function R(a,o,d,m){Cr=ao=null,tp(o),wl=null,sh=0;var A=o.return;try{if(LS(a,A,o,d,nn)){Mi=1,up(a,ds(d,a.current)),Rn=null;return}}catch(C){if(A!==null)throw Rn=A,C;Mi=1,up(a,ds(d,a.current)),Rn=null;return}o.flags&32768?(Vn||m===1?a=!0:Fa||(nn&536870912)!==0?a=!1:(Yi=a=!0,(m===2||m===3||m===6)&&(m=ps.current,m!==null&&m.tag===13&&(m.flags|=16384))),J(o,a)):O(o)}function O(a){var o=a;do{if((o.flags&32768)!==0){J(o,Yi);return}a=o.return;var d=PS(o.alternate,o,$o);if(d!==null){Rn=d;return}if(o=o.sibling,o!==null){Rn=o;return}Rn=o=a}while(o!==null);Mi===0&&(Mi=5)}function J(a,o){do{var d=Ni(a.alternate,a);if(d!==null){d.flags&=32767,Rn=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!o&&(a=a.sibling,a!==null)){Rn=a;return}Rn=a=d}while(a!==null);Mi=6,Rn=null}function fe(a,o,d,m,A,C,z,q,ie,ve){var Qe=U.T,ot=re.p;try{re.p=2,U.T=null,Ee(a,o,d,m,ot,A,C,z,q,ie,ve)}finally{U.T=Qe,re.p=ot}}function Ee(a,o,d,m,A,C,z,q){do gt();while(or!==null);if((dn&6)!==0)throw Error(n(327));var ie=a.finishedWork;if(m=a.finishedLanes,ie===null)return null;if(a.finishedWork=null,a.finishedLanes=0,ie===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0,a.cancelPendingCommit=null;var ve=ie.lanes|ie.childLanes;if(ve|=Uo,bt(a,m,ve,C,z,q),a===ci&&(Rn=ci=null,nn=0),(ie.subtreeFlags&10256)===0&&(ie.flags&10256)===0||rr||(rr=!0,Nr=ve,wi=d,_e(lt,function(){return gt(),null})),d=(ie.flags&15990)!==0,(ie.subtreeFlags&15990)!==0||d?(d=U.T,U.T=null,C=re.p,re.p=2,z=dn,dn|=4,Gu(a,ie),Ic(ie,a),tg(qS,a.containerInfo),ny=!!YS,qS=YS=null,a.current=ie,Vu(a,ie.alternate,ie),xe(),dn=z,re.p=C,U.T=d):a.current=ie,rr?(rr=!1,or=a,zc=m):Ze(a,ve),ve=a.pendingLanes,ve===0&&(ta=null),Et(ie.stateNode),mi(a),o!==null)for(A=a.onRecoverableError,ie=0;ie<o.length;ie++)ve=o[ie],A(ve.value,{componentStack:ve.stack});return(zc&3)!==0&&gt(),ve=a.pendingLanes,(m&4194218)!==0&&(ve&42)!==0?a===el?lr++:(lr=0,el=a):lr=0,In(0),null}function Ze(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Dl(o)))}function gt(){if(or!==null){var a=or,o=Nr;Nr=0;var d=qt(zc),m=U.T,A=re.p;try{if(re.p=32>d?32:d,U.T=null,or===null)var C=!1;else{d=wi,wi=null;var z=or,q=zc;if(or=null,zc=0,(dn&6)!==0)throw Error(n(331));var ie=dn;if(dn|=4,ku(z.current),Wo(z,z.current,q,d),dn=ie,In(0,!1),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(Nt,z)}catch{}C=!0}return C}finally{re.p=A,U.T=m,Ze(a,o)}}return!1}function Ut(a,o,d){o=ds(d,o),o=Mg(a.stateNode,o,2),a=Is(a,o,2),a!==null&&(Zt(a,2),mi(a))}function ft(a,o,d){if(a.tag===3)Ut(a,a,d);else for(;o!==null;){if(o.tag===3){Ut(o,a,d);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ta===null||!ta.has(m))){a=ds(d,a),d=Eg(2),m=Is(o,d,2),m!==null&&(z_(d,m,o,a),Zt(m,2),mi(m));break}}o=o.return}}function pn(a,o,d){var m=a.pingCache;if(m===null){m=a.pingCache=new Qo;var A=new Set;m.set(o,A)}else A=m.get(o),A===void 0&&(A=new Set,m.set(o,A));A.has(d)||(Kl=!0,A.add(d),a=ur.bind(null,a,o,d),o.then(a,a))}function ur(a,o,d){var m=a.pingCache;m!==null&&m.delete(o),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,ci===a&&(nn&d)===d&&(Mi===4||Mi===3&&(nn&62914560)===nn&&300>ze()-bn?(dn&2)===0&&tl(a,0):Yu|=d,co===nn&&(co=0)),mi(a)}function Wu(a,o){o===0&&(o=St()),a=Oo(a,o),a!==null&&(Zt(a,o),mi(a))}function Vc(a){var o=a.memoizedState,d=0;o!==null&&(d=o.retryLane),Wu(a,d)}function Ue(a,o){var d=0;switch(a.tag){case 13:var m=a.stateNode,A=a.memoizedState;A!==null&&(d=A.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(o),Wu(a,d)}function _e(a,o){return ut(a,o)}var Fe=null,ct=null,jt=!1,fi=!1,cn=!1,wn=0;function mi(a){a!==ct&&a.next===null&&(ct===null?Fe=ct=a:ct=ct.next=a),fi=!0,jt||(jt=!0,K3(Ql))}function In(a,o){if(!cn&&fi){cn=!0;do for(var d=!1,m=Fe;m!==null;){if(a!==0){var A=m.pendingLanes;if(A===0)var C=0;else{var z=m.suspendedLanes,q=m.pingedLanes;C=(1<<31-Re(42|a)+1)-1,C&=A&~(z&~q),C=C&201326677?C&201326677|1:C?C|2:0}C!==0&&(d=!0,gT(m,C))}else C=nn,C=xt(m,m===ci?C:0),(C&3)===0||Ft(m,C)||(d=!0,gT(m,C));m=m.next}while(d);cn=!1}}function Ql(){fi=jt=!1;var a=0;wn!==0&&(aU()&&(a=wn),wn=0);for(var o=ze(),d=null,m=Fe;m!==null;){var A=m.next,C=q_(m,o);C===0?(m.next=null,d===null?Fe=A:d.next=A,A===null&&(ct=d)):(d=m,(a!==0||(C&3)!==0)&&(fi=!0)),m=A}In(a)}function q_(a,o){for(var d=a.suspendedLanes,m=a.pingedLanes,A=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var z=31-Re(C),q=1<<z,ie=A[z];ie===-1?((q&d)===0||(q&m)!==0)&&(A[z]=rn(q,o)):ie<=o&&(a.expiredLanes|=q),C&=~q}if(o=ci,d=nn,d=xt(a,a===o?d:0),m=a.callbackNode,d===0||a===o&&pi===2||a.cancelPendingCommit!==null)return m!==null&&m!==null&&W(m),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||Ft(a,d)){if(o=d&-d,o===a.callbackPriority)return o;switch(m!==null&&W(m),qt(d)){case 2:case 8:d=_t;break;case 32:d=lt;break;case 268435456:d=$t;break;default:d=lt}return m=mT.bind(null,a),d=ut(d,m),a.callbackPriority=o,a.callbackNode=d,o}return m!==null&&m!==null&&W(m),a.callbackPriority=2,a.callbackNode=null,2}function mT(a,o){var d=a.callbackNode;if(gt()&&a.callbackNode!==d)return null;var m=nn;return m=xt(a,a===ci?m:0),m===0?null:(qu(a,m,o),q_(a,ze()),a.callbackNode!=null&&a.callbackNode===d?mT.bind(null,a):null)}function gT(a,o){if(gt())return null;qu(a,o,!0)}function K3(a){rU(function(){(dn&6)!==0?ut(ke,a):a()})}function FS(){return wn===0&&(wn=Bn()),wn}function vT(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Pf(""+a)}function _T(a,o){var d=o.ownerDocument.createElement("input");return d.name=o.name,d.value=o.value,a.id&&d.setAttribute("form",a.id),o.parentNode.insertBefore(d,o),a=new FormData(a),d.parentNode.removeChild(d),a}function Z3(a,o,d,m,A){if(o==="submit"&&d&&d.stateNode===A){var C=vT((A[Ht]||null).action),z=m.submitter;z&&(o=(o=z[Ht]||null)?vT(o.formAction):z.getAttribute("formAction"),o!==null&&(C=o,z=null));var q=new vu("action","action",null,m,A);a.push({event:q,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(wn!==0){var ie=z?_T(A,z):new FormData(A);_g(d,{pending:!0,data:ie,method:A.method,action:C},null,ie)}}else typeof C=="function"&&(q.preventDefault(),ie=z?_T(A,z):new FormData(A),_g(d,{pending:!0,data:ie,method:A.method,action:C},C,ie))},currentTarget:A}]})}}for(var zS=0;zS<Do.length;zS++){var HS=Do[zS],Q3=HS.toLowerCase(),$3=HS[0].toUpperCase()+HS.slice(1);Qs(Q3,"on"+$3)}Qs(ag,"onAnimationEnd"),Qs(hs,"onAnimationIteration"),Qs(sg,"onAnimationStart"),Qs("dblclick","onDoubleClick"),Qs("focusin","onFocus"),Qs("focusout","onBlur"),Qs(Bo,"onTransitionRun"),Qs(Tu,"onTransitionStart"),Qs(Ml,"onTransitionCancel"),Qs(Wd,"onTransitionEnd"),je("onMouseEnter",["mouseout","mouseover"]),je("onMouseLeave",["mouseout","mouseover"]),je("onPointerEnter",["pointerout","pointerover"]),je("onPointerLeave",["pointerout","pointerover"]),He("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),He("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),He("onBeforeInput",["compositionend","keypress","textInput","paste"]),He("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),He("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),He("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hg));function yT(a,o){o=(o&4)!==0;for(var d=0;d<a.length;d++){var m=a[d],A=m.event;m=m.listeners;e:{var C=void 0;if(o)for(var z=m.length-1;0<=z;z--){var q=m[z],ie=q.instance,ve=q.currentTarget;if(q=q.listener,ie!==C&&A.isPropagationStopped())break e;C=q,A.currentTarget=ve;try{C(A)}catch(Qe){cp(Qe)}A.currentTarget=null,C=ie}else for(z=0;z<m.length;z++){if(q=m[z],ie=q.instance,ve=q.currentTarget,q=q.listener,ie!==C&&A.isPropagationStopped())break e;C=q,A.currentTarget=ve;try{C(A)}catch(Qe){cp(Qe)}A.currentTarget=null,C=ie}}}}function Xn(a,o){var d=o[X];d===void 0&&(d=o[X]=new Set);var m=a+"__bubble";d.has(m)||(xT(o,a,2,!1),d.add(m))}function GS(a,o,d){var m=0;o&&(m|=4),xT(d,a,m,o)}var J_="_reactListening"+Math.random().toString(36).slice(2);function VS(a){if(!a[J_]){a[J_]=!0,de.forEach(function(d){d!=="selectionchange"&&(eU.has(d)||GS(d,!1,a),GS(d,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[J_]||(o[J_]=!0,GS("selectionchange",!1,o))}}function xT(a,o,d,m){switch(kT(o)){case 2:var A=TU;break;case 8:A=CU;break;default:A=tM}d=A.bind(null,o,d,a),A=void 0,!zf||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(A=!0),m?A!==void 0?a.addEventListener(o,d,{capture:!0,passive:A}):a.addEventListener(o,d,!0):A!==void 0?a.addEventListener(o,d,{passive:A}):a.addEventListener(o,d,!1)}function kS(a,o,d,m,A){var C=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var z=m.tag;if(z===3||z===4){var q=m.stateNode.containerInfo;if(q===A||q.nodeType===8&&q.parentNode===A)break;if(z===4)for(z=m.return;z!==null;){var ie=z.tag;if((ie===3||ie===4)&&(ie=z.stateNode.containerInfo,ie===A||ie.nodeType===8&&ie.parentNode===A))return;z=z.return}for(;q!==null;){if(z=qe(q),z===null)return;if(ie=z.tag,ie===5||ie===6||ie===26||ie===27){m=C=z;continue e}q=q.parentNode}}m=m.return}Hm(function(){var ve=C,Qe=Ff(d),ot=[];e:{var Pe=jd.get(a);if(Pe!==void 0){var We=vu,Kt=a;switch(a){case"keypress":if(vl(d)===0)break e;case"keydown":case"keyup":We=Ym;break;case"focusin":Kt="focus",We=Fd;break;case"focusout":Kt="blur",We=Fd;break;case"beforeblur":case"afterblur":We=Fd;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":We=km;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":We=bS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":We=Jm;break;case ag:case hs:case sg:We=zv;break;case Wd:We=Co;break;case"scroll":case"scrollend":We=Iv;break;case"wheel":We=TS;break;case"copy":case"cut":case"paste":We=Gv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":We=Hd;break;case"toggle":case"beforetoggle":We=yl}var _n=(o&4)!==0,ia=!_n&&(a==="scroll"||a==="scrollend"),Se=_n?Pe!==null?Pe+"Capture":null:Pe;_n=[];for(var ge=ve,we;ge!==null;){var it=ge;if(we=it.stateNode,it=it.tag,it!==5&&it!==26&&it!==27||we===null||Se===null||(it=pu(ge,Se),it!=null&&_n.push(Gg(ge,it,we))),ia)break;ge=ge.return}0<_n.length&&(Pe=new We(Pe,Kt,null,d,Qe),ot.push({event:Pe,listeners:_n}))}}if((o&7)===0){e:{if(Pe=a==="mouseover"||a==="pointerover",We=a==="mouseout"||a==="pointerout",Pe&&d!==Nd&&(Kt=d.relatedTarget||d.fromElement)&&(qe(Kt)||Kt[G]))break e;if((We||Pe)&&(Pe=Qe.window===Qe?Qe:(Pe=Qe.ownerDocument)?Pe.defaultView||Pe.parentWindow:window,We?(Kt=d.relatedTarget||d.toElement,We=ve,Kt=Kt?qe(Kt):null,Kt!==null&&(ia=oe(Kt),_n=Kt.tag,Kt!==ia||_n!==5&&_n!==27&&_n!==6)&&(Kt=null)):(We=null,Kt=ve),We!==Kt)){if(_n=km,it="onMouseLeave",Se="onMouseEnter",ge="mouse",(a==="pointerout"||a==="pointerover")&&(_n=Hd,it="onPointerLeave",Se="onPointerEnter",ge="pointer"),ia=We==null?Pe:K(We),we=Kt==null?Pe:K(Kt),Pe=new _n(it,ge+"leave",We,d,Qe),Pe.target=ia,Pe.relatedTarget=we,it=null,qe(Qe)===ve&&(_n=new _n(Se,ge+"enter",Kt,d,Qe),_n.target=we,_n.relatedTarget=ia,it=_n),ia=it,We&&Kt)t:{for(_n=We,Se=Kt,ge=0,we=_n;we;we=Mp(we))ge++;for(we=0,it=Se;it;it=Mp(it))we++;for(;0<ge-we;)_n=Mp(_n),ge--;for(;0<we-ge;)Se=Mp(Se),we--;for(;ge--;){if(_n===Se||Se!==null&&_n===Se.alternate)break t;_n=Mp(_n),Se=Mp(Se)}_n=null}else _n=null;We!==null&&AT(ot,Pe,We,_n,!1),Kt!==null&&ia!==null&&AT(ot,ia,Kt,_n,!0)}}e:{if(Pe=ve?K(ve):window,We=Pe.nodeName&&Pe.nodeName.toLowerCase(),We==="select"||We==="input"&&Pe.type==="file")var Xt=Vd;else if(Zm(Pe))if(kd)Xt=Sl;else{Xt=Zv;var Pn=CS}else We=Pe.nodeName,!We||We.toLowerCase()!=="input"||Pe.type!=="checkbox"&&Pe.type!=="radio"?ve&&If(ve.elementType)&&(Xt=Vd):Xt=jf;if(Xt&&(Xt=Xt(a,ve))){cs(ot,Xt,d,Qe);break e}Pn&&Pn(a,Pe,ve),a==="focusout"&&ve&&Pe.type==="number"&&ve.memoizedProps.value!=null&&Qn(Pe,"number",Pe.value)}switch(Pn=ve?K(ve):window,a){case"focusin":(Zm(Pn)||Pn.contentEditable==="true")&&(Ac=Pn,ng=ve,bu=null);break;case"focusout":bu=ng=Ac=null;break;case"mousedown":qd=!0;break;case"contextmenu":case"mouseup":case"dragend":qd=!1,Zs(ot,d,Qe);break;case"selectionchange":if(Yd)break;case"keydown":case"keyup":Zs(ot,d,Qe)}var Qt;if(kf)e:{switch(a){case"compositionstart":var fn="onCompositionStart";break e;case"compositionend":fn="onCompositionEnd";break e;case"compositionupdate":fn="onCompositionUpdate";break e}fn=void 0}else Al?qf(a,d)&&(fn="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(fn="onCompositionStart");fn&&(Yf&&d.locale!=="ko"&&(Al||fn!=="onCompositionStart"?fn==="onCompositionEnd"&&Al&&(Qt=Vm()):(bo=Qe,Gm="value"in bo?bo.value:bo.textContent,Al=!0)),Pn=W_(ve,fn),0<Pn.length&&(fn=new zd(fn,a,null,d,Qe),ot.push({event:fn,listeners:Pn}),Qt?fn.data=Qt:(Qt=jm(d),Qt!==null&&(fn.data=Qt)))),(Qt=Xf?Jf(a,d):Km(a,d))&&(fn=W_(ve,"onBeforeInput"),0<fn.length&&(Pn=new zd("onBeforeInput","beforeinput",null,d,Qe),ot.push({event:Pn,listeners:fn}),Pn.data=Qt)),Z3(ot,a,ve,d,Qe)}yT(ot,o)})}function Gg(a,o,d){return{instance:a,listener:o,currentTarget:d}}function W_(a,o){for(var d=o+"Capture",m=[];a!==null;){var A=a,C=A.stateNode;A=A.tag,A!==5&&A!==26&&A!==27||C===null||(A=pu(a,d),A!=null&&m.unshift(Gg(a,A,C)),A=pu(a,o),A!=null&&m.push(Gg(a,A,C))),a=a.return}return m}function Mp(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function AT(a,o,d,m,A){for(var C=o._reactName,z=[];d!==null&&d!==m;){var q=d,ie=q.alternate,ve=q.stateNode;if(q=q.tag,ie!==null&&ie===m)break;q!==5&&q!==26&&q!==27||ve===null||(ie=ve,A?(ve=pu(d,C),ve!=null&&z.unshift(Gg(d,ve,ie))):A||(ve=pu(d,C),ve!=null&&z.push(Gg(d,ve,ie)))),d=d.return}z.length!==0&&a.push({event:o,listeners:z})}var tU=/\r\n?/g,nU=/\u0000|\uFFFD/g;function ST(a){return(typeof a=="string"?a:""+a).replace(tU,`
`).replace(nU,"")}function MT(a,o){return o=ST(o),ST(a)===o}function j_(){}function xi(a,o,d,m,A,C){switch(d){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Ja(a,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Ja(a,""+m);break;case"className":Dn(a,"class",m);break;case"tabIndex":Dn(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Dn(a,d,m);break;case"style":zm(a,m,C);break;case"data":if(o!=="object"){Dn(a,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||d!=="href")){a.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(d);break}m=Pf(""+m),a.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(d==="formAction"?(o!=="input"&&xi(a,o,"name",A.name,A,null),xi(a,o,"formEncType",A.formEncType,A,null),xi(a,o,"formMethod",A.formMethod,A,null),xi(a,o,"formTarget",A.formTarget,A,null)):(xi(a,o,"encType",A.encType,A,null),xi(a,o,"method",A.method,A,null),xi(a,o,"target",A.target,A,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(d);break}m=Pf(""+m),a.setAttribute(d,m);break;case"onClick":m!=null&&(a.onclick=j_);break;case"onScroll":m!=null&&Xn("scroll",a);break;case"onScrollEnd":m!=null&&Xn("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(d=m.__html,d!=null){if(A.children!=null)throw Error(n(60));a.innerHTML=d}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}d=Pf(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(d,""+m):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":m===!0?a.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(d,m):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(d,m):a.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(d):a.setAttribute(d,m);break;case"popover":Xn("beforetoggle",a),Xn("toggle",a),Vt(a,"popover",m);break;case"xlinkActuate":Yt(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Yt(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Yt(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Yt(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Yt(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Yt(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Yt(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Yt(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Yt(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Vt(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Nv.get(d)||d,Vt(a,d,m))}}function XS(a,o,d,m,A,C){switch(d){case"style":zm(a,m,C);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(d=m.__html,d!=null){if(A.children!=null)throw Error(n(60));a.innerHTML=d}}break;case"children":typeof m=="string"?Ja(a,m):(typeof m=="number"||typeof m=="bigint")&&Ja(a,""+m);break;case"onScroll":m!=null&&Xn("scroll",a);break;case"onScrollEnd":m!=null&&Xn("scrollend",a);break;case"onClick":m!=null&&(a.onclick=j_);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ae.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(A=d.endsWith("Capture"),o=d.slice(2,A?d.length-7:void 0),C=a[Ht]||null,C=C!=null?C[d]:null,typeof C=="function"&&a.removeEventListener(o,C,A),typeof m=="function")){typeof C!="function"&&C!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(o,m,A);break e}d in a?a[d]=m:m===!0?a.setAttribute(d,""):Vt(a,d,m)}}}function ns(a,o,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xn("error",a),Xn("load",a);var m=!1,A=!1,C;for(C in d)if(d.hasOwnProperty(C)){var z=d[C];if(z!=null)switch(C){case"src":m=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:xi(a,o,C,z,d,null)}}A&&xi(a,o,"srcSet",d.srcSet,d,null),m&&xi(a,o,"src",d.src,d,null);return;case"input":Xn("invalid",a);var q=C=z=A=null,ie=null,ve=null;for(m in d)if(d.hasOwnProperty(m)){var Qe=d[m];if(Qe!=null)switch(m){case"name":A=Qe;break;case"type":z=Qe;break;case"checked":ie=Qe;break;case"defaultChecked":ve=Qe;break;case"value":C=Qe;break;case"defaultValue":q=Qe;break;case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(n(137,o));break;default:xi(a,o,m,Qe,d,null)}}bi(a,C,q,ie,ve,z,A,!1),on(a);return;case"select":Xn("invalid",a),m=z=C=null;for(A in d)if(d.hasOwnProperty(A)&&(q=d[A],q!=null))switch(A){case"value":C=q;break;case"defaultValue":z=q;break;case"multiple":m=q;default:xi(a,o,A,q,d,null)}o=C,d=z,a.multiple=!!m,o!=null?$n(a,!!m,o,!1):d!=null&&$n(a,!!m,d,!0);return;case"textarea":Xn("invalid",a),C=A=m=null;for(z in d)if(d.hasOwnProperty(z)&&(q=d[z],q!=null))switch(z){case"value":m=q;break;case"defaultValue":A=q;break;case"children":C=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(91));break;default:xi(a,o,z,q,d,null)}Mr(a,m,A,C),on(a);return;case"option":for(ie in d)if(d.hasOwnProperty(ie)&&(m=d[ie],m!=null))switch(ie){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:xi(a,o,ie,m,d,null)}return;case"dialog":Xn("cancel",a),Xn("close",a);break;case"iframe":case"object":Xn("load",a);break;case"video":case"audio":for(m=0;m<Hg.length;m++)Xn(Hg[m],a);break;case"image":Xn("error",a),Xn("load",a);break;case"details":Xn("toggle",a);break;case"embed":case"source":case"link":Xn("error",a),Xn("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ve in d)if(d.hasOwnProperty(ve)&&(m=d[ve],m!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:xi(a,o,ve,m,d,null)}return;default:if(If(o)){for(Qe in d)d.hasOwnProperty(Qe)&&(m=d[Qe],m!==void 0&&XS(a,o,Qe,m,d,void 0));return}}for(q in d)d.hasOwnProperty(q)&&(m=d[q],m!=null&&xi(a,o,q,m,d,null))}function iU(a,o,d,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,C=null,z=null,q=null,ie=null,ve=null,Qe=null;for(We in d){var ot=d[We];if(d.hasOwnProperty(We)&&ot!=null)switch(We){case"checked":break;case"value":break;case"defaultValue":ie=ot;default:m.hasOwnProperty(We)||xi(a,o,We,null,m,ot)}}for(var Pe in m){var We=m[Pe];if(ot=d[Pe],m.hasOwnProperty(Pe)&&(We!=null||ot!=null))switch(Pe){case"type":C=We;break;case"name":A=We;break;case"checked":ve=We;break;case"defaultChecked":Qe=We;break;case"value":z=We;break;case"defaultValue":q=We;break;case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(n(137,o));break;default:We!==ot&&xi(a,o,Pe,We,m,ot)}}vn(a,z,q,ie,ve,Qe,C,A);return;case"select":We=z=q=Pe=null;for(C in d)if(ie=d[C],d.hasOwnProperty(C)&&ie!=null)switch(C){case"value":break;case"multiple":We=ie;default:m.hasOwnProperty(C)||xi(a,o,C,null,m,ie)}for(A in m)if(C=m[A],ie=d[A],m.hasOwnProperty(A)&&(C!=null||ie!=null))switch(A){case"value":Pe=C;break;case"defaultValue":q=C;break;case"multiple":z=C;default:C!==ie&&xi(a,o,A,C,m,ie)}o=q,d=z,m=We,Pe!=null?$n(a,!!d,Pe,!1):!!m!=!!d&&(o!=null?$n(a,!!d,o,!0):$n(a,!!d,d?[]:"",!1));return;case"textarea":We=Pe=null;for(q in d)if(A=d[q],d.hasOwnProperty(q)&&A!=null&&!m.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:xi(a,o,q,null,m,A)}for(z in m)if(A=m[z],C=d[z],m.hasOwnProperty(z)&&(A!=null||C!=null))switch(z){case"value":Pe=A;break;case"defaultValue":We=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:A!==C&&xi(a,o,z,A,m,C)}pa(a,Pe,We);return;case"option":for(var Kt in d)if(Pe=d[Kt],d.hasOwnProperty(Kt)&&Pe!=null&&!m.hasOwnProperty(Kt))switch(Kt){case"selected":a.selected=!1;break;default:xi(a,o,Kt,null,m,Pe)}for(ie in m)if(Pe=m[ie],We=d[ie],m.hasOwnProperty(ie)&&Pe!==We&&(Pe!=null||We!=null))switch(ie){case"selected":a.selected=Pe&&typeof Pe!="function"&&typeof Pe!="symbol";break;default:xi(a,o,ie,Pe,m,We)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _n in d)Pe=d[_n],d.hasOwnProperty(_n)&&Pe!=null&&!m.hasOwnProperty(_n)&&xi(a,o,_n,null,m,Pe);for(ve in m)if(Pe=m[ve],We=d[ve],m.hasOwnProperty(ve)&&Pe!==We&&(Pe!=null||We!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(n(137,o));break;default:xi(a,o,ve,Pe,m,We)}return;default:if(If(o)){for(var ia in d)Pe=d[ia],d.hasOwnProperty(ia)&&Pe!==void 0&&!m.hasOwnProperty(ia)&&XS(a,o,ia,void 0,m,Pe);for(Qe in m)Pe=m[Qe],We=d[Qe],!m.hasOwnProperty(Qe)||Pe===We||Pe===void 0&&We===void 0||XS(a,o,Qe,Pe,m,We);return}}for(var Se in d)Pe=d[Se],d.hasOwnProperty(Se)&&Pe!=null&&!m.hasOwnProperty(Se)&&xi(a,o,Se,null,m,Pe);for(ot in m)Pe=m[ot],We=d[ot],!m.hasOwnProperty(ot)||Pe===We||Pe==null&&We==null||xi(a,o,ot,Pe,m,We)}var YS=null,qS=null;function K_(a){return a.nodeType===9?a:a.ownerDocument}function ET(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bT(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function JS(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var WS=null;function aU(){var a=window.event;return a&&a.type==="popstate"?a===WS?!1:(WS=a,!0):(WS=null,!1)}var TT=typeof setTimeout=="function"?setTimeout:void 0,sU=typeof clearTimeout=="function"?clearTimeout:void 0,CT=typeof Promise=="function"?Promise:void 0,rU=typeof queueMicrotask=="function"?queueMicrotask:typeof CT<"u"?function(a){return CT.resolve(null).then(a).catch(oU)}:TT;function oU(a){setTimeout(function(){throw a})}function jS(a,o){var d=o,m=0;do{var A=d.nextSibling;if(a.removeChild(d),A&&A.nodeType===8)if(d=A.data,d==="/$"){if(m===0){a.removeChild(A),jg(o);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=A}while(d);jg(o)}function KS(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var d=o;switch(o=o.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":KS(d),nt(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function lU(a,o,d,m){for(;a.nodeType===1;){var A=d;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[Le])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==A.rel||a.getAttribute("href")!==(A.href==null?null:A.href)||a.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||a.getAttribute("title")!==(A.title==null?null:A.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(A.src==null?null:A.src)||a.getAttribute("type")!==(A.type==null?null:A.type)||a.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var C=A.name==null?null:""+A.name;if(A.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=nl(a.nextSibling),a===null)break}return null}function cU(a,o,d){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=nl(a.nextSibling),a===null))return null;return a}function nl(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}function RT(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return a;o--}else d==="/$"&&o++}a=a.previousSibling}return null}function wT(a,o,d){switch(o=K_(d),a){case"html":if(a=o.documentElement,!a)throw Error(n(452));return a;case"head":if(a=o.head,!a)throw Error(n(453));return a;case"body":if(a=o.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}var fo=new Map,BT=new Set;function Z_(a){return typeof a.getRootNode=="function"?a.getRootNode():a.ownerDocument}var kc=re.d;re.d={f:uU,r:fU,D:hU,C:dU,L:pU,m:mU,X:vU,S:gU,M:_U};function uU(){var a=kc.f(),o=Hc();return a||o}function fU(a){var o=V(a);o!==null&&o.tag===5&&o.type==="form"?C_(o):kc.r(a)}var Ep=typeof document>"u"?null:document;function DT(a,o,d){var m=Ep;if(m&&typeof o=="string"&&o){var A=ln(o);A='link[rel="'+a+'"][href="'+A+'"]',typeof d=="string"&&(A+='[crossorigin="'+d+'"]'),BT.has(A)||(BT.add(A),a={rel:a,crossOrigin:d,href:o},m.querySelector(A)===null&&(o=m.createElement("link"),ns(o,"link",a),te(o),m.head.appendChild(o)))}}function hU(a){kc.D(a),DT("dns-prefetch",a,null)}function dU(a,o){kc.C(a,o),DT("preconnect",a,o)}function pU(a,o,d){kc.L(a,o,d);var m=Ep;if(m&&a&&o){var A='link[rel="preload"][as="'+ln(o)+'"]';o==="image"&&d&&d.imageSrcSet?(A+='[imagesrcset="'+ln(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(A+='[imagesizes="'+ln(d.imageSizes)+'"]')):A+='[href="'+ln(a)+'"]';var C=A;switch(o){case"style":C=bp(a);break;case"script":C=Tp(a)}fo.has(C)||(a=N({rel:"preload",href:o==="image"&&d&&d.imageSrcSet?void 0:a,as:o},d),fo.set(C,a),m.querySelector(A)!==null||o==="style"&&m.querySelector(Vg(C))||o==="script"&&m.querySelector(kg(C))||(o=m.createElement("link"),ns(o,"link",a),te(o),m.head.appendChild(o)))}}function mU(a,o){kc.m(a,o);var d=Ep;if(d&&a){var m=o&&typeof o.as=="string"?o.as:"script",A='link[rel="modulepreload"][as="'+ln(m)+'"][href="'+ln(a)+'"]',C=A;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=Tp(a)}if(!fo.has(C)&&(a=N({rel:"modulepreload",href:a},o),fo.set(C,a),d.querySelector(A)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(kg(C)))return}m=d.createElement("link"),ns(m,"link",a),te(m),d.head.appendChild(m)}}}function gU(a,o,d){kc.S(a,o,d);var m=Ep;if(m&&a){var A=se(m).hoistableStyles,C=bp(a);o=o||"default";var z=A.get(C);if(!z){var q={loading:0,preload:null};if(z=m.querySelector(Vg(C)))q.loading=5;else{a=N({rel:"stylesheet",href:a,"data-precedence":o},d),(d=fo.get(C))&&ZS(a,d);var ie=z=m.createElement("link");te(ie),ns(ie,"link",a),ie._p=new Promise(function(ve,Qe){ie.onload=ve,ie.onerror=Qe}),ie.addEventListener("load",function(){q.loading|=1}),ie.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Q_(z,o,m)}z={type:"stylesheet",instance:z,count:1,state:q},A.set(C,z)}}}function vU(a,o){kc.X(a,o);var d=Ep;if(d&&a){var m=se(d).hoistableScripts,A=Tp(a),C=m.get(A);C||(C=d.querySelector(kg(A)),C||(a=N({src:a,async:!0},o),(o=fo.get(A))&&QS(a,o),C=d.createElement("script"),te(C),ns(C,"link",a),d.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},m.set(A,C))}}function _U(a,o){kc.M(a,o);var d=Ep;if(d&&a){var m=se(d).hoistableScripts,A=Tp(a),C=m.get(A);C||(C=d.querySelector(kg(A)),C||(a=N({src:a,async:!0,type:"module"},o),(o=fo.get(A))&&QS(a,o),C=d.createElement("script"),te(C),ns(C,"link",a),d.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},m.set(A,C))}}function UT(a,o,d,m){var A=(A=De.current)?Z_(A):null;if(!A)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(o=bp(d.href),d=se(A).hoistableStyles,m=d.get(o),m||(m={type:"style",instance:null,count:0,state:null},d.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=bp(d.href);var C=se(A).hoistableStyles,z=C.get(a);if(z||(A=A.ownerDocument||A,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,z),(C=A.querySelector(Vg(a)))&&!C._p&&(z.instance=C,z.state.loading=5),fo.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},fo.set(a,d),C||yU(A,a,d,z.state))),o&&m===null)throw Error(n(528,""));return z}if(o&&m!==null)throw Error(n(529,""));return null;case"script":return o=d.async,d=d.src,typeof d=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Tp(d),d=se(A).hoistableScripts,m=d.get(o),m||(m={type:"script",instance:null,count:0,state:null},d.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function bp(a){return'href="'+ln(a)+'"'}function Vg(a){return'link[rel="stylesheet"]['+a+"]"}function OT(a){return N({},a,{"data-precedence":a.precedence,precedence:null})}function yU(a,o,d,m){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=a.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),ns(o,"link",d),te(o),a.head.appendChild(o))}function Tp(a){return'[src="'+ln(a)+'"]'}function kg(a){return"script[async]"+a}function NT(a,o,d){if(o.count++,o.instance===null)switch(o.type){case"style":var m=a.querySelector('style[data-href~="'+ln(d.href)+'"]');if(m)return o.instance=m,te(m),m;var A=N({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),te(m),ns(m,"style",A),Q_(m,d.precedence,a),o.instance=m;case"stylesheet":A=bp(d.href);var C=a.querySelector(Vg(A));if(C)return o.state.loading|=4,o.instance=C,te(C),C;m=OT(d),(A=fo.get(A))&&ZS(m,A),C=(a.ownerDocument||a).createElement("link"),te(C);var z=C;return z._p=new Promise(function(q,ie){z.onload=q,z.onerror=ie}),ns(C,"link",m),o.state.loading|=4,Q_(C,d.precedence,a),o.instance=C;case"script":return C=Tp(d.src),(A=a.querySelector(kg(C)))?(o.instance=A,te(A),A):(m=d,(A=fo.get(C))&&(m=N({},d),QS(m,A)),a=a.ownerDocument||a,A=a.createElement("script"),te(A),ns(A,"link",m),a.head.appendChild(A),o.instance=A);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,Q_(m,d.precedence,a));return o.instance}function Q_(a,o,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=m.length?m[m.length-1]:null,C=A,z=0;z<m.length;z++){var q=m[z];if(q.dataset.precedence===o)C=q;else if(C!==A)break}C?C.parentNode.insertBefore(a,C.nextSibling):(o=d.nodeType===9?d.head:d,o.insertBefore(a,o.firstChild))}function ZS(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function QS(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var $_=null;function LT(a,o,d){if($_===null){var m=new Map,A=$_=new Map;A.set(d,m)}else A=$_,m=A.get(d),m||(m=new Map,A.set(d,m));if(m.has(a))return m;for(m.set(a,null),d=d.getElementsByTagName(a),A=0;A<d.length;A++){var C=d[A];if(!(C[Le]||C[gn]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var z=C.getAttribute(o)||"";z=a+z;var q=m.get(z);q?q.push(C):m.set(z,[C])}}return m}function IT(a,o,d){a=a.ownerDocument||a,a.head.insertBefore(d,o==="title"?a.querySelector("head > title"):null)}function xU(a,o,d){if(d===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function PT(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Xg=null;function AU(){}function SU(a,o,d){if(Xg===null)throw Error(n(475));var m=Xg;if(o.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var A=bp(d.href),C=a.querySelector(Vg(A));if(C){a=C._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(m.count++,m=ey.bind(m),a.then(m,m)),o.state.loading|=4,o.instance=C,te(C);return}C=a.ownerDocument||a,d=OT(d),(A=fo.get(A))&&ZS(d,A),C=C.createElement("link"),te(C);var z=C;z._p=new Promise(function(q,ie){z.onload=q,z.onerror=ie}),ns(C,"link",d),o.instance=C}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(m.count++,o=ey.bind(m),a.addEventListener("load",o),a.addEventListener("error",o))}}function MU(){if(Xg===null)throw Error(n(475));var a=Xg;return a.stylesheets&&a.count===0&&$S(a,a.stylesheets),0<a.count?function(o){var d=setTimeout(function(){if(a.stylesheets&&$S(a,a.stylesheets),a.unsuspend){var m=a.unsuspend;a.unsuspend=null,m()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(d)}}:null}function ey(){if(this.count--,this.count===0){if(this.stylesheets)$S(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var ty=null;function $S(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,ty=new Map,o.forEach(EU,a),ty=null,ey.call(a))}function EU(a,o){if(!(o.state.loading&4)){var d=ty.get(a);if(d)var m=d.get(null);else{d=new Map,ty.set(a,d);for(var A=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<A.length;C++){var z=A[C];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(d.set(z.dataset.precedence,z),m=z)}m&&d.set(null,m)}A=o.instance,z=A.getAttribute("data-precedence"),C=d.get(z)||m,C===m&&d.set(null,A),d.set(z,A),this.count++,m=ey.bind(this),A.addEventListener("load",m),A.addEventListener("error",m),C?C.parentNode.insertBefore(A,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(A,a.firstChild)),o.state.loading|=4}}var Yg={$$typeof:x,Provider:null,Consumer:null,_currentValue:Ne,_currentValue2:Ne,_threadCount:0};function bU(a,o,d,m,A,C,z,q){this.tag=1,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.hiddenUpdates=Dt(null),this.identifierPrefix=m,this.onUncaughtError=A,this.onCaughtError=C,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function FT(a,o,d,m,A,C,z,q,ie,ve,Qe,ot){return a=new bU(a,o,d,z,q,ie,ve,ot),o=1,C===!0&&(o|=24),C=Xi(3,null,null,o),a.current=C,C.stateNode=a,o=cg(),o.refCount++,a.pooledCache=o,o.refCount++,C.memoizedState={element:m,isDehydrated:d,cache:o},Za(C),a}function zT(a){return a?(a=El,a):El}function HT(a,o,d,m,A,C){A=zT(A),m.context===null?m.context=A:m.pendingContext=A,m=Ls(o),m.payload={element:d},C=C===void 0?null:C,C!==null&&(m.callback=C),d=Is(a,m,o),d!==null&&(na(d,a,o),Vl(d,a,o))}function GT(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<o?d:o}}function eM(a,o){GT(a,o),(a=a.alternate)&&GT(a,o)}function VT(a){if(a.tag===13){var o=Oo(a,67108864);o!==null&&na(o,a,67108864),eM(a,67108864)}}var ny=!0;function TU(a,o,d,m){var A=U.T;U.T=null;var C=re.p;try{re.p=2,tM(a,o,d,m)}finally{re.p=C,U.T=A}}function CU(a,o,d,m){var A=U.T;U.T=null;var C=re.p;try{re.p=8,tM(a,o,d,m)}finally{re.p=C,U.T=A}}function tM(a,o,d,m){if(ny){var A=nM(m);if(A===null)kS(a,o,m,iy,d),XT(a,m);else if(wU(A,a,o,d,m))m.stopPropagation();else if(XT(a,m),o&4&&-1<RU.indexOf(a)){for(;A!==null;){var C=V(A);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var z=dt(C.pendingLanes);if(z!==0){var q=C;for(q.pendingLanes|=2,q.entangledLanes|=2;z;){var ie=1<<31-Re(z);q.entanglements[1]|=ie,z&=~ie}mi(C),(dn&6)===0&&(Nn=ze()+500,In(0))}}break;case 13:q=Oo(C,2),q!==null&&na(q,C,2),Hc(),eM(C,2)}if(C=nM(m),C===null&&kS(a,o,m,iy,d),C===A)break;A=C}A!==null&&m.stopPropagation()}else kS(a,o,m,null,d)}}function nM(a){return a=Ff(a),iM(a)}var iy=null;function iM(a){if(iy=null,a=qe(a),a!==null){var o=oe(a);if(o===null)a=null;else{var d=o.tag;if(d===13){if(a=be(o),a!==null)return a;a=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return iy=a,null}function kT(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ye()){case ke:return 2;case _t:return 8;case lt:case yt:return 32;case $t:return 268435456;default:return 32}default:return 32}}var aM=!1,ju=null,Ku=null,Zu=null,qg=new Map,Jg=new Map,Qu=[],RU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function XT(a,o){switch(a){case"focusin":case"focusout":ju=null;break;case"dragenter":case"dragleave":Ku=null;break;case"mouseover":case"mouseout":Zu=null;break;case"pointerover":case"pointerout":qg.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jg.delete(o.pointerId)}}function Wg(a,o,d,m,A,C){return a===null||a.nativeEvent!==C?(a={blockedOn:o,domEventName:d,eventSystemFlags:m,nativeEvent:C,targetContainers:[A]},o!==null&&(o=V(o),o!==null&&VT(o)),a):(a.eventSystemFlags|=m,o=a.targetContainers,A!==null&&o.indexOf(A)===-1&&o.push(A),a)}function wU(a,o,d,m,A){switch(o){case"focusin":return ju=Wg(ju,a,o,d,m,A),!0;case"dragenter":return Ku=Wg(Ku,a,o,d,m,A),!0;case"mouseover":return Zu=Wg(Zu,a,o,d,m,A),!0;case"pointerover":var C=A.pointerId;return qg.set(C,Wg(qg.get(C)||null,a,o,d,m,A)),!0;case"gotpointercapture":return C=A.pointerId,Jg.set(C,Wg(Jg.get(C)||null,a,o,d,m,A)),!0}return!1}function YT(a){var o=qe(a.target);if(o!==null){var d=oe(o);if(d!==null){if(o=d.tag,o===13){if(o=be(d),o!==null){a.blockedOn=o,tn(a.priority,function(){if(d.tag===13){var m=ts(),A=Oo(d,m);A!==null&&na(A,d,m),eM(d,m)}});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function ay(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var d=nM(a.nativeEvent);if(d===null){d=a.nativeEvent;var m=new d.constructor(d.type,d);Nd=m,d.target.dispatchEvent(m),Nd=null}else return o=V(d),o!==null&&VT(o),a.blockedOn=d,!1;o.shift()}return!0}function qT(a,o,d){ay(a)&&d.delete(o)}function BU(){aM=!1,ju!==null&&ay(ju)&&(ju=null),Ku!==null&&ay(Ku)&&(Ku=null),Zu!==null&&ay(Zu)&&(Zu=null),qg.forEach(qT),Jg.forEach(qT)}function sy(a,o){a.blockedOn===o&&(a.blockedOn=null,aM||(aM=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,BU)))}var ry=null;function JT(a){ry!==a&&(ry=a,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ry===a&&(ry=null);for(var o=0;o<a.length;o+=3){var d=a[o],m=a[o+1],A=a[o+2];if(typeof m!="function"){if(iM(m||d)===null)continue;break}var C=V(d);C!==null&&(a.splice(o,3),o-=3,_g(C,{pending:!0,data:A,method:d.method,action:m},m,A))}}))}function jg(a){function o(ie){return sy(ie,a)}ju!==null&&sy(ju,a),Ku!==null&&sy(Ku,a),Zu!==null&&sy(Zu,a),qg.forEach(o),Jg.forEach(o);for(var d=0;d<Qu.length;d++){var m=Qu[d];m.blockedOn===a&&(m.blockedOn=null)}for(;0<Qu.length&&(d=Qu[0],d.blockedOn===null);)YT(d),d.blockedOn===null&&Qu.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var A=d[m],C=d[m+1],z=A[Ht]||null;if(typeof C=="function")z||JT(d);else if(z){var q=null;if(C&&C.hasAttribute("formAction")){if(A=C,z=C[Ht]||null)q=z.formAction;else if(iM(A)!==null)continue}else q=z.action;typeof q=="function"?d[m+1]=q:(d.splice(m,3),m-=3),JT(d)}}}function sM(a){this._internalRoot=a}oy.prototype.render=sM.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(n(409));var d=o.current,m=ts();HT(d,m,a,o,null,null)},oy.prototype.unmount=sM.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;a.tag===0&&gt(),HT(a.current,2,null,a,null,null),Hc(),o[G]=null}};function oy(a){this._internalRoot=a}oy.prototype.unstable_scheduleHydration=function(a){if(a){var o=Zn();a={blockedOn:null,target:a,priority:o};for(var d=0;d<Qu.length&&o!==0&&o<Qu[d].priority;d++);Qu.splice(d,0,a),d===0&&YT(a)}};var WT=e.version;if(WT!=="19.0.0")throw Error(n(527,WT,"19.0.0"));re.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=ue(o),a=a!==null?Ce(a):null,a=a===null?null:a.stateNode,a};var DU={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:U,findFiberByHostInstance:qe,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ly=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ly.isDisabled&&ly.supportsFiber)try{Nt=ly.inject(DU),mt=ly}catch{}}return Zg.createRoot=function(a,o){if(!i(a))throw Error(n(299));var d=!1,m="",A=L_,C=I_,z=P_,q=null;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(A=o.onUncaughtError),o.onCaughtError!==void 0&&(C=o.onCaughtError),o.onRecoverableError!==void 0&&(z=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(q=o.unstable_transitionCallbacks)),o=FT(a,1,!1,null,null,d,m,A,C,z,q,null),a[G]=o.current,VS(a.nodeType===8?a.parentNode:a),new sM(o)},Zg.hydrateRoot=function(a,o,d){if(!i(a))throw Error(n(299));var m=!1,A="",C=L_,z=I_,q=P_,ie=null,ve=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(A=d.identifierPrefix),d.onUncaughtError!==void 0&&(C=d.onUncaughtError),d.onCaughtError!==void 0&&(z=d.onCaughtError),d.onRecoverableError!==void 0&&(q=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(ie=d.unstable_transitionCallbacks),d.formState!==void 0&&(ve=d.formState)),o=FT(a,1,!0,o,d??null,m,A,C,z,q,ie,ve),o.context=zT(null),d=o.current,m=ts(),A=Ls(m),A.callback=null,Is(d,A,m),o.current.lanes=m,Zt(o,m),mi(o),a[G]=o.current,VS(a),new oy(o)},Zg.version="19.0.0",Zg}var aC;function GU(){if(aC)return lM.exports;aC=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),lM.exports=HU(),lM.exports}var VU=GU();const kU=[{name:"Experience",link:"#experience"},{name:"About",link:"#about"},{name:"Skills",link:"#skills"},{name:"Testimonials",link:"#testimonials"}],XU=[{text:"Plan",imgPath:"/3d-portfolio/images/ideas.svg"},{text:"Design",imgPath:"/3d-portfolio/images/designs.svg"},{text:"Code",imgPath:"/3d-portfolio//images/code.svg"}],YU=[{name:"Running",modelPath:"/3d-portfolio/models/nike-shoe.glb",scale:.03,rotation:[0,0,0]},{name:"Surfing",modelPath:"/3d-portfolio/models/surfboard3.glb",scale:1.5,rotation:[6,-Math.PI/7,5]},{name:"Ice Hockey",modelPath:"/3d-portfolio/models/ice-skate3.glb",scale:.6,rotation:[-Math.PI/20,-Math.PI/8,1]}],qU=[{review:"Joe brought creativity and technical expertise to the team, significantly improving our frontend performance. His work has been invaluable in delivering faster experiences.",imgPath:"/3d-portfolio/images/exp1.png",logoPath:"/3d-portfolio/images/logo1.png",title:"Dallas Software Developers Spring Cohort",date:"January 2025 - April 2025",responsibilities:["Worked Hard","22 Enterprise Level github commits","Presentation to 200 live and remote audience of 1500"]},{review:"Joes work on Appwrites mobile app brought a high level of quality and efficiency. He delivered solutions that enhanced our mobile experience & meet our product goals.",imgPath:"/3d-portfolio/images/exp3.png",logoPath:"/3d-portfolio/images/logo3.png",title:"Dev Mountain Web Development Bootcamp",date:"August 2023 - December 2023",responsibilities:["Learned Core Web Develpment Concepts and Programming Principals","Collaborated closely with Instructors and Peers to build full stack applications","Coordinated and Presented Project Demo to peers, faculty members and recruit"]},{review:"Joes contributions to Docker's web applications have been outstanding. He approaches challenges with a problem-solving mindset.",imgPath:"/3d-portfolio/images/exp2.png",logoPath:"/3d-portfolio/images/logo2.png",title:"Freelance Developer",date:"January 2023 - Present",responsibilities:["Worked 1+ year with a Private Equity Firm providing technical services and digital products","Teamed up with a local marketing agency for code debugging and design solutions","Worked with various AI start-ups to consult and design front-end architecture solutions"]}],JU=[{name:"Esther Howard",mentions:"@estherhoward",review:"I cant say enough good things about Joe. He was able to take our complex project requirements and turn them into a seamless, functional website. His problem-solving abilities are outstanding.",imgPath:"/3d-portfolio/images/client1.png"},{name:"Wade Warren",mentions:"@wadewarren",review:"Working with Joe was a fantastic experience. He transformed our outdated website into a modern, user-friendly platform. His attention to detail and commitment to quality are unmatched. Highly recommend him for any web dev projects.",imgPath:"/3d-portfolio/images/client3.png"},{name:"Guy Hawkins",mentions:"@guyhawkins",review:"Collaborating with Joe was an absolute pleasure. His professionalism, promptness, and dedication to delivering exceptional results were evident throughout our project. Joe's enthusiasm for every facet of development truly stands out. If you're seeking to elevate your website and elevate your brand, Joe is the ideal partner.",imgPath:"/3d-portfolio/images/client2.png"},{name:"Marvin McKinney",mentions:"@marvinmckinney",review:"Joe was a pleasure to work with. He turned our outdated website into a fresh, intuitive platform thats both modern and easy to navigate. Fantastic work overall.",imgPath:"/3d-portfolio/images/client5.png"},{name:"Floyd Miles",mentions:"@floydmiles",review:"Joes expertise in web development is truly impressive. He delivered a robust and scalable solution for our e-commerce site, and our online sales have significantly increased since the launch. Hes a true professional!",imgPath:"/3d-portfolio/images/client4.png"},{name:"Albert Flores",mentions:"@albertflores",review:"Joe was a pleasure to work with. He understood our requirements perfectly and delivered a website that exceeded our expectations. His skills in both frontend and backend dev are top-notch.",imgPath:"/3d-portfolio/images/client6.png"}],WU=[{name:"insta",imgPath:"/3d-portfolio/images/insta.png"},{name:"fb",imgPath:"/3d-portfolio/images/fb.png"},{name:"x",imgPath:"/3d-portfolio/images/x.png"},{name:"linkedin",imgPath:"/3d-portfolio/images/linkedin.png"}],NE=({title:r,sub:e})=>Oe.jsxs("div",{className:"flex flex-col items-center gap-5",children:[Oe.jsx("div",{className:"hero-badge",children:Oe.jsx("p",{children:e})}),Oe.jsx("div",{children:Oe.jsx("h1",{className:"font-semibold md:text-5xl text-3xl text-center",children:r})})]}),jU=({card:r,index:e,children:t})=>{const n=pt.useRef([]),i=s=>l=>{const c=n.current[s];if(!c)return;const h=c.getBoundingClientRect(),p=l.clientX-h.left-h.width/2,g=l.clientY-h.top-h.height/2;let _=Math.atan2(g,p)*(180/Math.PI);_=(_+360)%360,c.style.setProperty("--start",_+60)};return Oe.jsxs("div",{ref:s=>n.current[e]=s,onMouseMove:i(e),className:"card card-border timeline-card rounded-xl p-10 mb-5 break-inside-avoid-column",children:[Oe.jsx("div",{className:"glow"}),Oe.jsx("div",{className:"flex items-center gap-1 mb-5",children:Array.from({length:5},(s,l)=>Oe.jsx("img",{src:"/3d-portfolio/images/star.png",alt:"star",className:"size-5"},l))}),Oe.jsx("div",{className:"mb-5",children:Oe.jsx("p",{className:"text-white-50 text-lg",children:r.review})}),t]})},KU=()=>Oe.jsx("section",{id:"testimonials",className:"flex-center section-padding",children:Oe.jsxs("div",{className:"w-full h-full md:px-10 px-5",children:[Oe.jsx(NE,{title:"What My Peers Have To Say?",sub:" Testimonials"}),Oe.jsx("div",{className:"lg:columns-3 md:columns-2 columns-1 mt-16",children:JU.map((r,e)=>Oe.jsx(jU,{card:r,index:e,children:Oe.jsxs("div",{className:"flex items-center gap-3",children:[Oe.jsx("div",{children:Oe.jsx("img",{src:r.imgPath,alt:""})}),Oe.jsxs("div",{children:[Oe.jsx("p",{className:"font-bold",children:r.name}),Oe.jsx("p",{className:"text-white-50",children:r.mentions})]})]})},e))})]})}),ZU=()=>Oe.jsx("footer",{className:"footer",children:Oe.jsxs("div",{className:"footer-container",children:[Oe.jsx("div",{className:"flex flex-col justify-center",children:Oe.jsx("p",{children:"Terms & Conditions"})}),Oe.jsx("div",{className:"socials",children:WU.map((r,e)=>Oe.jsx("div",{className:"icon",children:Oe.jsx("img",{src:r.imgPath,alt:"social icon"})},e))}),Oe.jsx("div",{className:"flex flex-col justify-center",children:Oe.jsxs("p",{className:"text-center md:text-end",children:[" ",new Date().getFullYear()," Joe Aguado. All rights reserved."]})})]})});function Lx(){return Lx=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Lx.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const gv="174",zh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Hh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Ww=0,L1=1,jw=2,QU=3,Kw=0,zA=1,b0=2,ll=3,hc=0,Ks=1,_o=2,sc=0,id=1,I1=2,P1=3,F1=4,Zw=5,ff=100,Qw=101,$w=102,e2=103,t2=104,n2=200,i2=201,a2=202,s2=203,Ix=204,Px=205,r2=206,o2=207,l2=208,c2=209,u2=210,f2=211,h2=212,d2=213,p2=214,Fx=0,zx=1,Hx=2,pd=3,Gx=4,Vx=5,kx=6,Xx=7,vv=0,m2=1,g2=2,rc=0,v2=1,_2=2,y2=3,LE=4,x2=5,A2=6,S2=7,z1="attached",M2="detached",Mf=300,dc=301,Ef=302,mm=303,W0=304,Om=306,bf=1e3,fa=1001,gm=1002,Xa=1003,HA=1004,$U=1004,Wh=1005,eO=1005,oi=1006,sm=1007,tO=1007,xo=1008,H1=1008,xr=1009,GA=1010,VA=1011,vm=1012,_v=1013,pc=1014,ji=1015,ka=1016,kA=1017,XA=1018,md=1020,IE=35902,PE=1021,FE=1022,ha=1023,zE=1024,HE=1025,ad=1026,gd=1027,yv=1028,xv=1029,GE=1030,YA=1031,nO=1032,qA=1033,T0=33776,C0=33777,R0=33778,w0=33779,Yx=35840,qx=35841,Jx=35842,Wx=35843,jx=36196,Kx=37492,Zx=37496,Qx=37808,$x=37809,eA=37810,tA=37811,nA=37812,iA=37813,aA=37814,sA=37815,rA=37816,oA=37817,lA=37818,cA=37819,uA=37820,fA=37821,B0=36492,hA=36494,dA=36495,VE=36283,pA=36284,mA=36285,gA=36286,E2=2200,b2=2201,T2=2202,_m=2300,ym=2301,Ax=2302,jh=2400,Kh=2401,j0=2402,JA=2500,kE=2501,C2=0,XE=1,vA=2,R2=3200,w2=3201,iO=3202,aO=3203,Bf=0,B2=1,tu="",is="srgb",dl="srgb-linear",K0="linear",gi="srgb",sO=0,Gh=7680,rO=7681,oO=7682,lO=7683,cO=34055,uO=34056,fO=5386,hO=512,dO=513,pO=514,mO=515,gO=516,vO=517,_O=518,G1=519,D2=512,U2=513,O2=514,YE=515,N2=516,L2=517,I2=518,P2=519,Z0=35044,yO=35048,xO=35040,AO=35045,SO=35049,MO=35041,EO=35046,bO=35050,TO=35042,CO="100",V1="300 es",fl=2e3,Q0=2001,RO={COMPUTE:"compute",RENDER:"render"};let gc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const i=n[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,l=i.length;s<l;s++)i[s].call(this,e);e.target=null}}};const xs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let sC=1234567;const sd=Math.PI/180,xm=180/Math.PI;function Yr(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(xs[r&255]+xs[r>>8&255]+xs[r>>16&255]+xs[r>>24&255]+"-"+xs[e&255]+xs[e>>8&255]+"-"+xs[e>>16&15|64]+xs[e>>24&255]+"-"+xs[t&63|128]+xs[t>>8&255]+"-"+xs[t>>16&255]+xs[t>>24&255]+xs[n&255]+xs[n>>8&255]+xs[n>>16&255]+xs[n>>24&255]).toLowerCase()}function yn(r,e,t){return Math.max(e,Math.min(t,r))}function qE(r,e){return(r%e+e)%e}function wO(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function BO(r,e,t){return r!==e?(t-r)/(e-r):0}function D0(r,e,t){return(1-t)*r+t*e}function DO(r,e,t,n){return D0(r,e,1-Math.exp(-t*n))}function UO(r,e=1){return e-Math.abs(qE(r,e*2)-e)}function OO(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function NO(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function LO(r,e){return r+Math.floor(Math.random()*(e-r+1))}function IO(r,e){return r+Math.random()*(e-r)}function PO(r){return r*(.5-Math.random())}function FO(r){r!==void 0&&(sC=r);let e=sC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function zO(r){return r*sd}function HO(r){return r*xm}function GO(r){return(r&r-1)===0&&r!==0}function VO(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function kO(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function XO(r,e,t,n,i){const s=Math.cos,l=Math.sin,c=s(t/2),h=l(t/2),p=s((e+n)/2),g=l((e+n)/2),_=s((e-n)/2),y=l((e-n)/2),x=s((n-e)/2),M=l((n-e)/2);switch(i){case"XYX":r.set(c*g,h*_,h*y,c*p);break;case"YZY":r.set(h*y,c*g,h*_,c*p);break;case"ZXZ":r.set(h*_,h*y,c*g,c*p);break;case"XZX":r.set(c*g,h*M,h*x,c*p);break;case"YXY":r.set(h*x,c*g,h*M,c*p);break;case"ZYZ":r.set(h*M,h*x,c*g,c*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Js(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function Mn(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const JE={DEG2RAD:sd,RAD2DEG:xm,generateUUID:Yr,clamp:yn,euclideanModulo:qE,mapLinear:wO,inverseLerp:BO,lerp:D0,damp:DO,pingpong:UO,smoothstep:OO,smootherstep:NO,randInt:LO,randFloat:IO,randFloatSpread:PO,seededRandom:FO,degToRad:zO,radToDeg:HO,isPowerOfTwo:GO,ceilPowerOfTwo:VO,floorPowerOfTwo:kO,setQuaternionFromProperEuler:XO,normalize:Mn,denormalize:Js};class et{constructor(e=0,t=0){et.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=yn(this.x,e.x,t.x),this.y=yn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=yn(this.x,e,t),this.y=yn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(yn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(yn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,l=this.y-e.y;return this.x=s*n-l*i+e.x,this.y=s*i+l*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class An{constructor(e,t,n,i,s,l,c,h,p){An.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,l,c,h,p)}set(e,t,n,i,s,l,c,h,p){const g=this.elements;return g[0]=e,g[1]=i,g[2]=c,g[3]=t,g[4]=s,g[5]=h,g[6]=n,g[7]=l,g[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,l=n[0],c=n[3],h=n[6],p=n[1],g=n[4],_=n[7],y=n[2],x=n[5],M=n[8],T=i[0],b=i[3],E=i[6],w=i[1],D=i[4],B=i[7],I=i[2],L=i[5],F=i[8];return s[0]=l*T+c*w+h*I,s[3]=l*b+c*D+h*L,s[6]=l*E+c*B+h*F,s[1]=p*T+g*w+_*I,s[4]=p*b+g*D+_*L,s[7]=p*E+g*B+_*F,s[2]=y*T+x*w+M*I,s[5]=y*b+x*D+M*L,s[8]=y*E+x*B+M*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],l=e[4],c=e[5],h=e[6],p=e[7],g=e[8];return t*l*g-t*c*p-n*s*g+n*c*h+i*s*p-i*l*h}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],l=e[4],c=e[5],h=e[6],p=e[7],g=e[8],_=g*l-c*p,y=c*h-g*s,x=p*s-l*h,M=t*_+n*y+i*x;if(M===0)return this.set(0,0,0,0,0,0,0,0,0);const T=1/M;return e[0]=_*T,e[1]=(i*p-g*n)*T,e[2]=(c*n-i*l)*T,e[3]=y*T,e[4]=(g*t-i*h)*T,e[5]=(i*s-c*t)*T,e[6]=x*T,e[7]=(n*h-p*t)*T,e[8]=(l*t-n*s)*T,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,l,c){const h=Math.cos(s),p=Math.sin(s);return this.set(n*h,n*p,-n*(h*l+p*c)+l+e,-i*p,i*h,-i*(-p*l+h*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(hM.makeScale(e,t)),this}rotate(e){return this.premultiply(hM.makeRotation(-e)),this}translate(e,t){return this.premultiply(hM.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const hM=new An;function F2(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const YO={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function $p(r,e){return new YO[r](e)}function $0(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function z2(){const r=$0("canvas");return r.style.display="block",r}const rC={};function Vh(r){r in rC||(rC[r]=!0,console.warn(r))}function qO(r,e,t){return new Promise(function(n,i){function s(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:i();break;case r.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function JO(r){const e=r.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function WO(r){const e=r.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const oC=new An().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),lC=new An().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function jO(){const r={enabled:!0,workingColorSpace:dl,spaces:{},convert:function(i,s,l){return this.enabled===!1||s===l||!s||!l||(this.spaces[s].transfer===gi&&(i.r=ou(i.r),i.g=ou(i.g),i.b=ou(i.b)),this.spaces[s].primaries!==this.spaces[l].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===gi&&(i.r=rm(i.r),i.g=rm(i.g),i.b=rm(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===tu?K0:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,l){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return r.define({[dl]:{primaries:e,whitePoint:n,transfer:K0,toXYZ:oC,fromXYZ:lC,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:is},outputColorSpaceConfig:{drawingBufferColorSpace:is}},[is]:{primaries:e,whitePoint:n,transfer:gi,toXYZ:oC,fromXYZ:lC,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:is}}}),r}const Yn=jO();function ou(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function rm(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Cp;class H2{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Cp===void 0&&(Cp=$0("canvas")),Cp.width=e.width,Cp.height=e.height;const n=Cp.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Cp}return t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=$0("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let l=0;l<s.length;l++)s[l]=ou(s[l]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(ou(t[n]/255)*255):t[n]=ou(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let KO=0;class hf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:KO++}),this.uuid=Yr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let l=0,c=i.length;l<c;l++)i[l].isDataTexture?s.push(dM(i[l].image)):s.push(dM(i[l]))}else s=dM(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function dM(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?H2.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ZO=0;class di extends gc{constructor(e=di.DEFAULT_IMAGE,t=di.DEFAULT_MAPPING,n=fa,i=fa,s=oi,l=xo,c=ha,h=xr,p=di.DEFAULT_ANISOTROPY,g=tu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ZO++}),this.uuid=Yr(),this.name="",this.source=new hf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=l,this.anisotropy=p,this.format=c,this.internalFormat=null,this.type=h,this.offset=new et(0,0),this.repeat=new et(1,1),this.center=new et(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new An,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Mf)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case bf:e.x=e.x-Math.floor(e.x);break;case fa:e.x=e.x<0?0:1;break;case gm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case bf:e.y=e.y-Math.floor(e.y);break;case fa:e.y=e.y<0?0:1;break;case gm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}di.DEFAULT_IMAGE=null;di.DEFAULT_MAPPING=Mf;di.DEFAULT_ANISOTROPY=1;class ei{constructor(e=0,t=0,n=0,i=1){ei.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,l=e.elements;return this.x=l[0]*t+l[4]*n+l[8]*i+l[12]*s,this.y=l[1]*t+l[5]*n+l[9]*i+l[13]*s,this.z=l[2]*t+l[6]*n+l[10]*i+l[14]*s,this.w=l[3]*t+l[7]*n+l[11]*i+l[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const h=e.elements,p=h[0],g=h[4],_=h[8],y=h[1],x=h[5],M=h[9],T=h[2],b=h[6],E=h[10];if(Math.abs(g-y)<.01&&Math.abs(_-T)<.01&&Math.abs(M-b)<.01){if(Math.abs(g+y)<.1&&Math.abs(_+T)<.1&&Math.abs(M+b)<.1&&Math.abs(p+x+E-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(p+1)/2,B=(x+1)/2,I=(E+1)/2,L=(g+y)/4,F=(_+T)/4,H=(M+b)/4;return D>B&&D>I?D<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(D),i=L/n,s=F/n):B>I?B<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(B),n=L/i,s=H/i):I<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(I),n=F/s,i=H/s),this.set(n,i,s,t),this}let w=Math.sqrt((b-M)*(b-M)+(_-T)*(_-T)+(y-g)*(y-g));return Math.abs(w)<.001&&(w=1),this.x=(b-M)/w,this.y=(_-T)/w,this.z=(y-g)/w,this.w=Math.acos((p+x+E-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=yn(this.x,e.x,t.x),this.y=yn(this.y,e.y,t.y),this.z=yn(this.z,e.z,t.z),this.w=yn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=yn(this.x,e,t),this.y=yn(this.y,e,t),this.z=yn(this.z,e,t),this.w=yn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(yn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class WA extends gc{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ei(0,0,e,t),this.scissorTest=!1,this.viewport=new ei(0,0,e,t);const i={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:oi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new di(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const l=n.count;for(let c=0;c<l;c++)this.textures[c]=s.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new hf(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Mo extends WA{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Av extends di{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Xa,this.minFilter=Xa,this.wrapR=fa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class QO extends Mo{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Av(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class jA extends di{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Xa,this.minFilter=Xa,this.wrapR=fa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $O extends Mo{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new jA(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Ya{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,l,c){let h=n[i+0],p=n[i+1],g=n[i+2],_=n[i+3];const y=s[l+0],x=s[l+1],M=s[l+2],T=s[l+3];if(c===0){e[t+0]=h,e[t+1]=p,e[t+2]=g,e[t+3]=_;return}if(c===1){e[t+0]=y,e[t+1]=x,e[t+2]=M,e[t+3]=T;return}if(_!==T||h!==y||p!==x||g!==M){let b=1-c;const E=h*y+p*x+g*M+_*T,w=E>=0?1:-1,D=1-E*E;if(D>Number.EPSILON){const I=Math.sqrt(D),L=Math.atan2(I,E*w);b=Math.sin(b*L)/I,c=Math.sin(c*L)/I}const B=c*w;if(h=h*b+y*B,p=p*b+x*B,g=g*b+M*B,_=_*b+T*B,b===1-c){const I=1/Math.sqrt(h*h+p*p+g*g+_*_);h*=I,p*=I,g*=I,_*=I}}e[t]=h,e[t+1]=p,e[t+2]=g,e[t+3]=_}static multiplyQuaternionsFlat(e,t,n,i,s,l){const c=n[i],h=n[i+1],p=n[i+2],g=n[i+3],_=s[l],y=s[l+1],x=s[l+2],M=s[l+3];return e[t]=c*M+g*_+h*x-p*y,e[t+1]=h*M+g*y+p*_-c*x,e[t+2]=p*M+g*x+c*y-h*_,e[t+3]=g*M-c*_-h*y-p*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,s=e._z,l=e._order,c=Math.cos,h=Math.sin,p=c(n/2),g=c(i/2),_=c(s/2),y=h(n/2),x=h(i/2),M=h(s/2);switch(l){case"XYZ":this._x=y*g*_+p*x*M,this._y=p*x*_-y*g*M,this._z=p*g*M+y*x*_,this._w=p*g*_-y*x*M;break;case"YXZ":this._x=y*g*_+p*x*M,this._y=p*x*_-y*g*M,this._z=p*g*M-y*x*_,this._w=p*g*_+y*x*M;break;case"ZXY":this._x=y*g*_-p*x*M,this._y=p*x*_+y*g*M,this._z=p*g*M+y*x*_,this._w=p*g*_-y*x*M;break;case"ZYX":this._x=y*g*_-p*x*M,this._y=p*x*_+y*g*M,this._z=p*g*M-y*x*_,this._w=p*g*_+y*x*M;break;case"YZX":this._x=y*g*_+p*x*M,this._y=p*x*_+y*g*M,this._z=p*g*M-y*x*_,this._w=p*g*_-y*x*M;break;case"XZY":this._x=y*g*_-p*x*M,this._y=p*x*_-y*g*M,this._z=p*g*M+y*x*_,this._w=p*g*_+y*x*M;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],l=t[1],c=t[5],h=t[9],p=t[2],g=t[6],_=t[10],y=n+c+_;if(y>0){const x=.5/Math.sqrt(y+1);this._w=.25/x,this._x=(g-h)*x,this._y=(s-p)*x,this._z=(l-i)*x}else if(n>c&&n>_){const x=2*Math.sqrt(1+n-c-_);this._w=(g-h)/x,this._x=.25*x,this._y=(i+l)/x,this._z=(s+p)/x}else if(c>_){const x=2*Math.sqrt(1+c-n-_);this._w=(s-p)/x,this._x=(i+l)/x,this._y=.25*x,this._z=(h+g)/x}else{const x=2*Math.sqrt(1+_-n-c);this._w=(l-i)/x,this._x=(s+p)/x,this._y=(h+g)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(yn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,l=e._w,c=t._x,h=t._y,p=t._z,g=t._w;return this._x=n*g+l*c+i*p-s*h,this._y=i*g+l*h+s*c-n*p,this._z=s*g+l*p+n*h-i*c,this._w=l*g-n*c-i*h-s*p,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,l=this._w;let c=l*e._w+n*e._x+i*e._y+s*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=l,this._x=n,this._y=i,this._z=s,this;const h=1-c*c;if(h<=Number.EPSILON){const x=1-t;return this._w=x*l+t*this._w,this._x=x*n+t*this._x,this._y=x*i+t*this._y,this._z=x*s+t*this._z,this.normalize(),this}const p=Math.sqrt(h),g=Math.atan2(p,c),_=Math.sin((1-t)*g)/p,y=Math.sin(t*g)/p;return this._w=l*_+this._w*y,this._x=n*_+this._x*y,this._y=i*_+this._y*y,this._z=s*_+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Z{constructor(e=0,t=0,n=0){Z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(cC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(cC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,l=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*l,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*l,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*l,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,l=e.y,c=e.z,h=e.w,p=2*(l*i-c*n),g=2*(c*t-s*i),_=2*(s*n-l*t);return this.x=t+h*p+l*_-c*g,this.y=n+h*g+c*p-s*_,this.z=i+h*_+s*g-l*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=yn(this.x,e.x,t.x),this.y=yn(this.y,e.y,t.y),this.z=yn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=yn(this.x,e,t),this.y=yn(this.y,e,t),this.z=yn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(yn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,l=t.x,c=t.y,h=t.z;return this.x=i*h-s*c,this.y=s*l-n*h,this.z=n*c-i*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return pM.copy(this).projectOnVector(e),this.sub(pM)}reflect(e){return this.sub(pM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(yn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const pM=new Z,cC=new Ya;class Rs{constructor(e=new Z(1/0,1/0,1/0),t=new Z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(il.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(il.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=il.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let l=0,c=s.count;l<c;l++)e.isMesh===!0?e.getVertexPosition(l,il):il.fromBufferAttribute(s,l),il.applyMatrix4(e.matrixWorld),this.expandByPoint(il);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),cy.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),cy.copy(n.boundingBox)),cy.applyMatrix4(e.matrixWorld),this.union(cy)}const i=e.children;for(let s=0,l=i.length;s<l;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,il),il.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Qg),uy.subVectors(this.max,Qg),Rp.subVectors(e.a,Qg),wp.subVectors(e.b,Qg),Bp.subVectors(e.c,Qg),ef.subVectors(wp,Rp),tf.subVectors(Bp,wp),Mh.subVectors(Rp,Bp);let t=[0,-ef.z,ef.y,0,-tf.z,tf.y,0,-Mh.z,Mh.y,ef.z,0,-ef.x,tf.z,0,-tf.x,Mh.z,0,-Mh.x,-ef.y,ef.x,0,-tf.y,tf.x,0,-Mh.y,Mh.x,0];return!mM(t,Rp,wp,Bp,uy)||(t=[1,0,0,0,1,0,0,0,1],!mM(t,Rp,wp,Bp,uy))?!1:(fy.crossVectors(ef,tf),t=[fy.x,fy.y,fy.z],mM(t,Rp,wp,Bp,uy))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,il).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(il).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Xc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Xc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Xc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Xc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Xc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Xc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Xc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Xc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Xc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Xc=[new Z,new Z,new Z,new Z,new Z,new Z,new Z,new Z],il=new Z,cy=new Rs,Rp=new Z,wp=new Z,Bp=new Z,ef=new Z,tf=new Z,Mh=new Z,Qg=new Z,uy=new Z,fy=new Z,Eh=new Z;function mM(r,e,t,n,i){for(let s=0,l=r.length-3;s<=l;s+=3){Eh.fromArray(r,s);const c=i.x*Math.abs(Eh.x)+i.y*Math.abs(Eh.y)+i.z*Math.abs(Eh.z),h=e.dot(Eh),p=t.dot(Eh),g=n.dot(Eh);if(Math.max(-Math.max(h,p,g),Math.min(h,p,g))>c)return!1}return!0}const eN=new Rs,$g=new Z,gM=new Z;class ss{constructor(e=new Z,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):eN.setFromPoints(e).getCenter(n);let i=0;for(let s=0,l=e.length;s<l;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;$g.subVectors(e,this.center);const t=$g.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector($g,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(gM.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint($g.copy(e.center).add(gM)),this.expandByPoint($g.copy(e.center).sub(gM))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Yc=new Z,vM=new Z,hy=new Z,nf=new Z,_M=new Z,dy=new Z,yM=new Z;class Rd{constructor(e=new Z,t=new Z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Yc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Yc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Yc.copy(this.origin).addScaledVector(this.direction,t),Yc.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){vM.copy(e).add(t).multiplyScalar(.5),hy.copy(t).sub(e).normalize(),nf.copy(this.origin).sub(vM);const s=e.distanceTo(t)*.5,l=-this.direction.dot(hy),c=nf.dot(this.direction),h=-nf.dot(hy),p=nf.lengthSq(),g=Math.abs(1-l*l);let _,y,x,M;if(g>0)if(_=l*h-c,y=l*c-h,M=s*g,_>=0)if(y>=-M)if(y<=M){const T=1/g;_*=T,y*=T,x=_*(_+l*y+2*c)+y*(l*_+y+2*h)+p}else y=s,_=Math.max(0,-(l*y+c)),x=-_*_+y*(y+2*h)+p;else y=-s,_=Math.max(0,-(l*y+c)),x=-_*_+y*(y+2*h)+p;else y<=-M?(_=Math.max(0,-(-l*s+c)),y=_>0?-s:Math.min(Math.max(-s,-h),s),x=-_*_+y*(y+2*h)+p):y<=M?(_=0,y=Math.min(Math.max(-s,-h),s),x=y*(y+2*h)+p):(_=Math.max(0,-(l*s+c)),y=_>0?s:Math.min(Math.max(-s,-h),s),x=-_*_+y*(y+2*h)+p);else y=l>0?-s:s,_=Math.max(0,-(l*y+c)),x=-_*_+y*(y+2*h)+p;return n&&n.copy(this.origin).addScaledVector(this.direction,_),i&&i.copy(vM).addScaledVector(hy,y),x}intersectSphere(e,t){Yc.subVectors(e.center,this.origin);const n=Yc.dot(this.direction),i=Yc.dot(Yc)-n*n,s=e.radius*e.radius;if(i>s)return null;const l=Math.sqrt(s-i),c=n-l,h=n+l;return h<0?null:c<0?this.at(h,t):this.at(c,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,l,c,h;const p=1/this.direction.x,g=1/this.direction.y,_=1/this.direction.z,y=this.origin;return p>=0?(n=(e.min.x-y.x)*p,i=(e.max.x-y.x)*p):(n=(e.max.x-y.x)*p,i=(e.min.x-y.x)*p),g>=0?(s=(e.min.y-y.y)*g,l=(e.max.y-y.y)*g):(s=(e.max.y-y.y)*g,l=(e.min.y-y.y)*g),n>l||s>i||((s>n||isNaN(n))&&(n=s),(l<i||isNaN(i))&&(i=l),_>=0?(c=(e.min.z-y.z)*_,h=(e.max.z-y.z)*_):(c=(e.max.z-y.z)*_,h=(e.min.z-y.z)*_),n>h||c>i)||((c>n||n!==n)&&(n=c),(h<i||i!==i)&&(i=h),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,Yc)!==null}intersectTriangle(e,t,n,i,s){_M.subVectors(t,e),dy.subVectors(n,e),yM.crossVectors(_M,dy);let l=this.direction.dot(yM),c;if(l>0){if(i)return null;c=1}else if(l<0)c=-1,l=-l;else return null;nf.subVectors(this.origin,e);const h=c*this.direction.dot(dy.crossVectors(nf,dy));if(h<0)return null;const p=c*this.direction.dot(_M.cross(nf));if(p<0||h+p>l)return null;const g=-c*nf.dot(yM);return g<0?null:this.at(g/l,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class sn{constructor(e,t,n,i,s,l,c,h,p,g,_,y,x,M,T,b){sn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,l,c,h,p,g,_,y,x,M,T,b)}set(e,t,n,i,s,l,c,h,p,g,_,y,x,M,T,b){const E=this.elements;return E[0]=e,E[4]=t,E[8]=n,E[12]=i,E[1]=s,E[5]=l,E[9]=c,E[13]=h,E[2]=p,E[6]=g,E[10]=_,E[14]=y,E[3]=x,E[7]=M,E[11]=T,E[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new sn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Dp.setFromMatrixColumn(e,0).length(),s=1/Dp.setFromMatrixColumn(e,1).length(),l=1/Dp.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*l,t[9]=n[9]*l,t[10]=n[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,l=Math.cos(n),c=Math.sin(n),h=Math.cos(i),p=Math.sin(i),g=Math.cos(s),_=Math.sin(s);if(e.order==="XYZ"){const y=l*g,x=l*_,M=c*g,T=c*_;t[0]=h*g,t[4]=-h*_,t[8]=p,t[1]=x+M*p,t[5]=y-T*p,t[9]=-c*h,t[2]=T-y*p,t[6]=M+x*p,t[10]=l*h}else if(e.order==="YXZ"){const y=h*g,x=h*_,M=p*g,T=p*_;t[0]=y+T*c,t[4]=M*c-x,t[8]=l*p,t[1]=l*_,t[5]=l*g,t[9]=-c,t[2]=x*c-M,t[6]=T+y*c,t[10]=l*h}else if(e.order==="ZXY"){const y=h*g,x=h*_,M=p*g,T=p*_;t[0]=y-T*c,t[4]=-l*_,t[8]=M+x*c,t[1]=x+M*c,t[5]=l*g,t[9]=T-y*c,t[2]=-l*p,t[6]=c,t[10]=l*h}else if(e.order==="ZYX"){const y=l*g,x=l*_,M=c*g,T=c*_;t[0]=h*g,t[4]=M*p-x,t[8]=y*p+T,t[1]=h*_,t[5]=T*p+y,t[9]=x*p-M,t[2]=-p,t[6]=c*h,t[10]=l*h}else if(e.order==="YZX"){const y=l*h,x=l*p,M=c*h,T=c*p;t[0]=h*g,t[4]=T-y*_,t[8]=M*_+x,t[1]=_,t[5]=l*g,t[9]=-c*g,t[2]=-p*g,t[6]=x*_+M,t[10]=y-T*_}else if(e.order==="XZY"){const y=l*h,x=l*p,M=c*h,T=c*p;t[0]=h*g,t[4]=-_,t[8]=p*g,t[1]=y*_+T,t[5]=l*g,t[9]=x*_-M,t[2]=M*_-x,t[6]=c*g,t[10]=T*_+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(tN,e,nN)}lookAt(e,t,n){const i=this.elements;return Lr.subVectors(e,t),Lr.lengthSq()===0&&(Lr.z=1),Lr.normalize(),af.crossVectors(n,Lr),af.lengthSq()===0&&(Math.abs(n.z)===1?Lr.x+=1e-4:Lr.z+=1e-4,Lr.normalize(),af.crossVectors(n,Lr)),af.normalize(),py.crossVectors(Lr,af),i[0]=af.x,i[4]=py.x,i[8]=Lr.x,i[1]=af.y,i[5]=py.y,i[9]=Lr.y,i[2]=af.z,i[6]=py.z,i[10]=Lr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,l=n[0],c=n[4],h=n[8],p=n[12],g=n[1],_=n[5],y=n[9],x=n[13],M=n[2],T=n[6],b=n[10],E=n[14],w=n[3],D=n[7],B=n[11],I=n[15],L=i[0],F=i[4],H=i[8],U=i[12],N=i[1],Y=i[5],ee=i[9],$=i[13],ae=i[2],me=i[6],Q=i[10],he=i[14],oe=i[3],be=i[7],P=i[11],ue=i[15];return s[0]=l*L+c*N+h*ae+p*oe,s[4]=l*F+c*Y+h*me+p*be,s[8]=l*H+c*ee+h*Q+p*P,s[12]=l*U+c*$+h*he+p*ue,s[1]=g*L+_*N+y*ae+x*oe,s[5]=g*F+_*Y+y*me+x*be,s[9]=g*H+_*ee+y*Q+x*P,s[13]=g*U+_*$+y*he+x*ue,s[2]=M*L+T*N+b*ae+E*oe,s[6]=M*F+T*Y+b*me+E*be,s[10]=M*H+T*ee+b*Q+E*P,s[14]=M*U+T*$+b*he+E*ue,s[3]=w*L+D*N+B*ae+I*oe,s[7]=w*F+D*Y+B*me+I*be,s[11]=w*H+D*ee+B*Q+I*P,s[15]=w*U+D*$+B*he+I*ue,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],l=e[1],c=e[5],h=e[9],p=e[13],g=e[2],_=e[6],y=e[10],x=e[14],M=e[3],T=e[7],b=e[11],E=e[15];return M*(+s*h*_-i*p*_-s*c*y+n*p*y+i*c*x-n*h*x)+T*(+t*h*x-t*p*y+s*l*y-i*l*x+i*p*g-s*h*g)+b*(+t*p*_-t*c*x-s*l*_+n*l*x+s*c*g-n*p*g)+E*(-i*c*g-t*h*_+t*c*y+i*l*_-n*l*y+n*h*g)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],l=e[4],c=e[5],h=e[6],p=e[7],g=e[8],_=e[9],y=e[10],x=e[11],M=e[12],T=e[13],b=e[14],E=e[15],w=_*b*p-T*y*p+T*h*x-c*b*x-_*h*E+c*y*E,D=M*y*p-g*b*p-M*h*x+l*b*x+g*h*E-l*y*E,B=g*T*p-M*_*p+M*c*x-l*T*x-g*c*E+l*_*E,I=M*_*h-g*T*h-M*c*y+l*T*y+g*c*b-l*_*b,L=t*w+n*D+i*B+s*I;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/L;return e[0]=w*F,e[1]=(T*y*s-_*b*s-T*i*x+n*b*x+_*i*E-n*y*E)*F,e[2]=(c*b*s-T*h*s+T*i*p-n*b*p-c*i*E+n*h*E)*F,e[3]=(_*h*s-c*y*s-_*i*p+n*y*p+c*i*x-n*h*x)*F,e[4]=D*F,e[5]=(g*b*s-M*y*s+M*i*x-t*b*x-g*i*E+t*y*E)*F,e[6]=(M*h*s-l*b*s-M*i*p+t*b*p+l*i*E-t*h*E)*F,e[7]=(l*y*s-g*h*s+g*i*p-t*y*p-l*i*x+t*h*x)*F,e[8]=B*F,e[9]=(M*_*s-g*T*s-M*n*x+t*T*x+g*n*E-t*_*E)*F,e[10]=(l*T*s-M*c*s+M*n*p-t*T*p-l*n*E+t*c*E)*F,e[11]=(g*c*s-l*_*s-g*n*p+t*_*p+l*n*x-t*c*x)*F,e[12]=I*F,e[13]=(g*T*i-M*_*i+M*n*y-t*T*y-g*n*b+t*_*b)*F,e[14]=(M*c*i-l*T*i-M*n*h+t*T*h+l*n*b-t*c*b)*F,e[15]=(l*_*i-g*c*i+g*n*h-t*_*h-l*n*y+t*c*y)*F,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,l=e.x,c=e.y,h=e.z,p=s*l,g=s*c;return this.set(p*l+n,p*c-i*h,p*h+i*c,0,p*c+i*h,g*c+n,g*h-i*l,0,p*h-i*c,g*h+i*l,s*h*h+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,l){return this.set(1,n,s,0,e,1,l,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,l=t._y,c=t._z,h=t._w,p=s+s,g=l+l,_=c+c,y=s*p,x=s*g,M=s*_,T=l*g,b=l*_,E=c*_,w=h*p,D=h*g,B=h*_,I=n.x,L=n.y,F=n.z;return i[0]=(1-(T+E))*I,i[1]=(x+B)*I,i[2]=(M-D)*I,i[3]=0,i[4]=(x-B)*L,i[5]=(1-(y+E))*L,i[6]=(b+w)*L,i[7]=0,i[8]=(M+D)*F,i[9]=(b-w)*F,i[10]=(1-(y+T))*F,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=Dp.set(i[0],i[1],i[2]).length();const l=Dp.set(i[4],i[5],i[6]).length(),c=Dp.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],al.copy(this);const p=1/s,g=1/l,_=1/c;return al.elements[0]*=p,al.elements[1]*=p,al.elements[2]*=p,al.elements[4]*=g,al.elements[5]*=g,al.elements[6]*=g,al.elements[8]*=_,al.elements[9]*=_,al.elements[10]*=_,t.setFromRotationMatrix(al),n.x=s,n.y=l,n.z=c,this}makePerspective(e,t,n,i,s,l,c=fl){const h=this.elements,p=2*s/(t-e),g=2*s/(n-i),_=(t+e)/(t-e),y=(n+i)/(n-i);let x,M;if(c===fl)x=-(l+s)/(l-s),M=-2*l*s/(l-s);else if(c===Q0)x=-l/(l-s),M=-l*s/(l-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return h[0]=p,h[4]=0,h[8]=_,h[12]=0,h[1]=0,h[5]=g,h[9]=y,h[13]=0,h[2]=0,h[6]=0,h[10]=x,h[14]=M,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,n,i,s,l,c=fl){const h=this.elements,p=1/(t-e),g=1/(n-i),_=1/(l-s),y=(t+e)*p,x=(n+i)*g;let M,T;if(c===fl)M=(l+s)*_,T=-2*_;else if(c===Q0)M=s*_,T=-1*_;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return h[0]=2*p,h[4]=0,h[8]=0,h[12]=-y,h[1]=0,h[5]=2*g,h[9]=0,h[13]=-x,h[2]=0,h[6]=0,h[10]=T,h[14]=-M,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Dp=new Z,al=new sn,tN=new Z(0,0,0),nN=new Z(1,1,1),af=new Z,py=new Z,Lr=new Z,uC=new sn,fC=new Ya;class Jr{constructor(e=0,t=0,n=0,i=Jr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],l=i[4],c=i[8],h=i[1],p=i[5],g=i[9],_=i[2],y=i[6],x=i[10];switch(t){case"XYZ":this._y=Math.asin(yn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-g,x),this._z=Math.atan2(-l,s)):(this._x=Math.atan2(y,p),this._z=0);break;case"YXZ":this._x=Math.asin(-yn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(c,x),this._z=Math.atan2(h,p)):(this._y=Math.atan2(-_,s),this._z=0);break;case"ZXY":this._x=Math.asin(yn(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-_,x),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(h,s));break;case"ZYX":this._y=Math.asin(-yn(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(y,x),this._z=Math.atan2(h,s)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(yn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-g,p),this._y=Math.atan2(-_,s)):(this._x=0,this._y=Math.atan2(c,x));break;case"XZY":this._z=Math.asin(-yn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(y,p),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-g,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return uC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(uC,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return fC.setFromEuler(this),this.setFromQuaternion(fC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Jr.DEFAULT_ORDER="XYZ";class Am{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let iN=0;const hC=new Z,Up=new Ya,qc=new sn,my=new Z,e0=new Z,aN=new Z,sN=new Ya,dC=new Z(1,0,0),pC=new Z(0,1,0),mC=new Z(0,0,1),gC={type:"added"},rN={type:"removed"},Op={type:"childadded",child:null},xM={type:"childremoved",child:null};class Jn extends gc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:iN++}),this.uuid=Yr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jn.DEFAULT_UP.clone();const e=new Z,t=new Jr,n=new Ya,i=new Z(1,1,1);function s(){n.setFromEuler(t,!1)}function l(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new sn},normalMatrix:{value:new An}}),this.matrix=new sn,this.matrixWorld=new sn,this.matrixAutoUpdate=Jn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Jn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Am,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Up.setFromAxisAngle(e,t),this.quaternion.multiply(Up),this}rotateOnWorldAxis(e,t){return Up.setFromAxisAngle(e,t),this.quaternion.premultiply(Up),this}rotateX(e){return this.rotateOnAxis(dC,e)}rotateY(e){return this.rotateOnAxis(pC,e)}rotateZ(e){return this.rotateOnAxis(mC,e)}translateOnAxis(e,t){return hC.copy(e).applyQuaternion(this.quaternion),this.position.add(hC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(dC,e)}translateY(e){return this.translateOnAxis(pC,e)}translateZ(e){return this.translateOnAxis(mC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(qc.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?my.copy(e):my.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),e0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?qc.lookAt(e0,my,this.up):qc.lookAt(my,e0,this.up),this.quaternion.setFromRotationMatrix(qc),i&&(qc.extractRotation(i.matrixWorld),Up.setFromRotationMatrix(qc),this.quaternion.premultiply(Up.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(gC),Op.child=e,this.dispatchEvent(Op),Op.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(rN),xM.child=e,this.dispatchEvent(xM),xM.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),qc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),qc.multiply(e.parent.matrixWorld)),e.applyMatrix4(qc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(gC),Op.child=e,this.dispatchEvent(Op),Op.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const l=this.children[n].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let s=0,l=i.length;s<l;s++)i[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(e0,e,aN),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(e0,sN,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,l=i.length;s<l;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(c,h){return c[h.uuid]===void 0&&(c[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const h=c.shapes;if(Array.isArray(h))for(let p=0,g=h.length;p<g;p++){const _=h[p];s(e.shapes,_)}else s(e.shapes,h)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let h=0,p=this.material.length;h<p;h++)c.push(s(e.materials,this.material[h]));i.material=c}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let c=0;c<this.children.length;c++)i.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let c=0;c<this.animations.length;c++){const h=this.animations[c];i.animations.push(s(e.animations,h))}}if(t){const c=l(e.geometries),h=l(e.materials),p=l(e.textures),g=l(e.images),_=l(e.shapes),y=l(e.skeletons),x=l(e.animations),M=l(e.nodes);c.length>0&&(n.geometries=c),h.length>0&&(n.materials=h),p.length>0&&(n.textures=p),g.length>0&&(n.images=g),_.length>0&&(n.shapes=_),y.length>0&&(n.skeletons=y),x.length>0&&(n.animations=x),M.length>0&&(n.nodes=M)}return n.object=i,n;function l(c){const h=[];for(const p in c){const g=c[p];delete g.metadata,h.push(g)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}Jn.DEFAULT_UP=new Z(0,1,0);Jn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Jn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const sl=new Z,Jc=new Z,AM=new Z,Wc=new Z,Np=new Z,Lp=new Z,vC=new Z,SM=new Z,MM=new Z,EM=new Z,bM=new ei,TM=new ei,CM=new ei;class pr{constructor(e=new Z,t=new Z,n=new Z){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),sl.subVectors(e,t),i.cross(sl);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){sl.subVectors(i,t),Jc.subVectors(n,t),AM.subVectors(e,t);const l=sl.dot(sl),c=sl.dot(Jc),h=sl.dot(AM),p=Jc.dot(Jc),g=Jc.dot(AM),_=l*p-c*c;if(_===0)return s.set(0,0,0),null;const y=1/_,x=(p*h-c*g)*y,M=(l*g-c*h)*y;return s.set(1-x-M,M,x)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Wc)===null?!1:Wc.x>=0&&Wc.y>=0&&Wc.x+Wc.y<=1}static getInterpolation(e,t,n,i,s,l,c,h){return this.getBarycoord(e,t,n,i,Wc)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(s,Wc.x),h.addScaledVector(l,Wc.y),h.addScaledVector(c,Wc.z),h)}static getInterpolatedAttribute(e,t,n,i,s,l){return bM.setScalar(0),TM.setScalar(0),CM.setScalar(0),bM.fromBufferAttribute(e,t),TM.fromBufferAttribute(e,n),CM.fromBufferAttribute(e,i),l.setScalar(0),l.addScaledVector(bM,s.x),l.addScaledVector(TM,s.y),l.addScaledVector(CM,s.z),l}static isFrontFacing(e,t,n,i){return sl.subVectors(n,t),Jc.subVectors(e,t),sl.cross(Jc).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return sl.subVectors(this.c,this.b),Jc.subVectors(this.a,this.b),sl.cross(Jc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return pr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return pr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,s){return pr.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return pr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return pr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let l,c;Np.subVectors(i,n),Lp.subVectors(s,n),SM.subVectors(e,n);const h=Np.dot(SM),p=Lp.dot(SM);if(h<=0&&p<=0)return t.copy(n);MM.subVectors(e,i);const g=Np.dot(MM),_=Lp.dot(MM);if(g>=0&&_<=g)return t.copy(i);const y=h*_-g*p;if(y<=0&&h>=0&&g<=0)return l=h/(h-g),t.copy(n).addScaledVector(Np,l);EM.subVectors(e,s);const x=Np.dot(EM),M=Lp.dot(EM);if(M>=0&&x<=M)return t.copy(s);const T=x*p-h*M;if(T<=0&&p>=0&&M<=0)return c=p/(p-M),t.copy(n).addScaledVector(Lp,c);const b=g*M-x*_;if(b<=0&&_-g>=0&&x-M>=0)return vC.subVectors(s,i),c=(_-g)/(_-g+(x-M)),t.copy(i).addScaledVector(vC,c);const E=1/(b+T+y);return l=T*E,c=y*E,t.copy(n).addScaledVector(Np,l).addScaledVector(Lp,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const G2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},sf={h:0,s:0,l:0},gy={h:0,s:0,l:0};function RM(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class Bt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=is){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Yn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=Yn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Yn.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=Yn.workingColorSpace){if(e=qE(e,1),t=yn(t,0,1),n=yn(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,l=2*n-s;this.r=RM(l,s,e+1/3),this.g=RM(l,s,e),this.b=RM(l,s,e-1/3)}return Yn.toWorkingColorSpace(this,i),this}setStyle(e,t=is){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const l=i[1],c=i[2];switch(l){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],l=s.length;if(l===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=is){const n=G2[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ou(e.r),this.g=ou(e.g),this.b=ou(e.b),this}copyLinearToSRGB(e){return this.r=rm(e.r),this.g=rm(e.g),this.b=rm(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=is){return Yn.fromWorkingColorSpace(As.copy(this),e),Math.round(yn(As.r*255,0,255))*65536+Math.round(yn(As.g*255,0,255))*256+Math.round(yn(As.b*255,0,255))}getHexString(e=is){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Yn.workingColorSpace){Yn.fromWorkingColorSpace(As.copy(this),t);const n=As.r,i=As.g,s=As.b,l=Math.max(n,i,s),c=Math.min(n,i,s);let h,p;const g=(c+l)/2;if(c===l)h=0,p=0;else{const _=l-c;switch(p=g<=.5?_/(l+c):_/(2-l-c),l){case n:h=(i-s)/_+(i<s?6:0);break;case i:h=(s-n)/_+2;break;case s:h=(n-i)/_+4;break}h/=6}return e.h=h,e.s=p,e.l=g,e}getRGB(e,t=Yn.workingColorSpace){return Yn.fromWorkingColorSpace(As.copy(this),t),e.r=As.r,e.g=As.g,e.b=As.b,e}getStyle(e=is){Yn.fromWorkingColorSpace(As.copy(this),e);const t=As.r,n=As.g,i=As.b;return e!==is?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(sf),this.setHSL(sf.h+e,sf.s+t,sf.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(sf),e.getHSL(gy);const n=D0(sf.h,gy.h,t),i=D0(sf.s,gy.s,t),s=D0(sf.l,gy.l,t);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*i,this.g=s[1]*t+s[4]*n+s[7]*i,this.b=s[2]*t+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const As=new Bt;Bt.NAMES=G2;let oN=0;class Ra extends gc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:oN++}),this.uuid=Yr(),this.name="",this.type="Material",this.blending=id,this.side=hc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Ix,this.blendDst=Px,this.blendEquation=ff,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Bt(0,0,0),this.blendAlpha=0,this.depthFunc=pd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=G1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Gh,this.stencilZFail=Gh,this.stencilZPass=Gh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==id&&(n.blending=this.blending),this.side!==hc&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Ix&&(n.blendSrc=this.blendSrc),this.blendDst!==Px&&(n.blendDst=this.blendDst),this.blendEquation!==ff&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==pd&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==G1&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Gh&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Gh&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Gh&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const l=[];for(const c in s){const h=s[c];delete h.metadata,l.push(h)}return l}if(t){const s=i(e.textures),l=i(e.images);s.length>0&&(n.textures=s),l.length>0&&(n.images=l)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class mr extends Ra{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.combine=vv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const nu=lN();function lN(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let h=0;h<256;++h){const p=h-127;p<-27?(n[h]=0,n[h|256]=32768,i[h]=24,i[h|256]=24):p<-14?(n[h]=1024>>-p-14,n[h|256]=1024>>-p-14|32768,i[h]=-p-1,i[h|256]=-p-1):p<=15?(n[h]=p+15<<10,n[h|256]=p+15<<10|32768,i[h]=13,i[h|256]=13):p<128?(n[h]=31744,n[h|256]=64512,i[h]=24,i[h|256]=24):(n[h]=31744,n[h|256]=64512,i[h]=13,i[h|256]=13)}const s=new Uint32Array(2048),l=new Uint32Array(64),c=new Uint32Array(64);for(let h=1;h<1024;++h){let p=h<<13,g=0;for(;(p&8388608)===0;)p<<=1,g-=8388608;p&=-8388609,g+=947912704,s[h]=p|g}for(let h=1024;h<2048;++h)s[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)l[h]=h<<23;l[31]=1199570944,l[32]=2147483648;for(let h=33;h<63;++h)l[h]=2147483648+(h-32<<23);l[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(c[h]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:l,offsetTable:c}}function hr(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=yn(r,-65504,65504),nu.floatView[0]=r;const e=nu.uint32View[0],t=e>>23&511;return nu.baseTable[t]+((e&8388607)>>nu.shiftTable[t])}function g0(r){const e=r>>10;return nu.uint32View[0]=nu.mantissaTable[nu.offsetTable[e]+(r&1023)]+nu.exponentTable[e],nu.floatView[0]}class Zh{static toHalfFloat(e){return hr(e)}static fromHalfFloat(e){return g0(e)}}const _a=new Z,vy=new et;let cN=0;class ti{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:cN++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Z0,this.updateRanges=[],this.gpuType=ji,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)vy.fromBufferAttribute(this,t),vy.applyMatrix3(e),this.setXY(t,vy.x,vy.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)_a.fromBufferAttribute(this,t),_a.applyMatrix3(e),this.setXYZ(t,_a.x,_a.y,_a.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)_a.fromBufferAttribute(this,t),_a.applyMatrix4(e),this.setXYZ(t,_a.x,_a.y,_a.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)_a.fromBufferAttribute(this,t),_a.applyNormalMatrix(e),this.setXYZ(t,_a.x,_a.y,_a.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)_a.fromBufferAttribute(this,t),_a.transformDirection(e),this.setXYZ(t,_a.x,_a.y,_a.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Js(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Mn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Js(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Js(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Js(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Js(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array),i=Mn(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array),i=Mn(i,this.array),s=Mn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Z0&&(e.usage=this.usage),e}}class uN extends ti{constructor(e,t,n){super(new Int8Array(e),t,n)}}class fN extends ti{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class hN extends ti{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class dN extends ti{constructor(e,t,n){super(new Int16Array(e),t,n)}}class WE extends ti{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class pN extends ti{constructor(e,t,n){super(new Int32Array(e),t,n)}}class jE extends ti{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class mN extends ti{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=g0(this.array[e*this.itemSize]);return this.normalized&&(t=Js(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize]=hr(t),this}getY(e){let t=g0(this.array[e*this.itemSize+1]);return this.normalized&&(t=Js(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+1]=hr(t),this}getZ(e){let t=g0(this.array[e*this.itemSize+2]);return this.normalized&&(t=Js(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+2]=hr(t),this}getW(e){let t=g0(this.array[e*this.itemSize+3]);return this.normalized&&(t=Js(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+3]=hr(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array)),this.array[e+0]=hr(t),this.array[e+1]=hr(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array),i=Mn(i,this.array)),this.array[e+0]=hr(t),this.array[e+1]=hr(n),this.array[e+2]=hr(i),this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array),i=Mn(i,this.array),s=Mn(s,this.array)),this.array[e+0]=hr(t),this.array[e+1]=hr(n),this.array[e+2]=hr(i),this.array[e+3]=hr(s),this}}class Jt extends ti{constructor(e,t,n){super(new Float32Array(e),t,n)}}let gN=0;const ho=new sn,wM=new Jn,Ip=new Z,Ir=new Rs,t0=new Rs,Ha=new Z;class Sn extends gc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:gN++}),this.uuid=Yr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(F2(e)?jE:WE)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new An().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ho.makeRotationFromQuaternion(e),this.applyMatrix4(ho),this}rotateX(e){return ho.makeRotationX(e),this.applyMatrix4(ho),this}rotateY(e){return ho.makeRotationY(e),this.applyMatrix4(ho),this}rotateZ(e){return ho.makeRotationZ(e),this.applyMatrix4(ho),this}translate(e,t,n){return ho.makeTranslation(e,t,n),this.applyMatrix4(ho),this}scale(e,t,n){return ho.makeScale(e,t,n),this.applyMatrix4(ho),this}lookAt(e){return wM.lookAt(e),wM.updateMatrix(),this.applyMatrix4(wM.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ip).negate(),this.translate(Ip.x,Ip.y,Ip.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let i=0,s=e.length;i<s;i++){const l=e[i];n.push(l.x,l.y,l.z||0)}this.setAttribute("position",new Jt(n,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Rs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Z(-1/0,-1/0,-1/0),new Z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];Ir.setFromBufferAttribute(s),this.morphTargetsRelative?(Ha.addVectors(this.boundingBox.min,Ir.min),this.boundingBox.expandByPoint(Ha),Ha.addVectors(this.boundingBox.max,Ir.max),this.boundingBox.expandByPoint(Ha)):(this.boundingBox.expandByPoint(Ir.min),this.boundingBox.expandByPoint(Ir.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ss);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Z,1/0);return}if(e){const n=this.boundingSphere.center;if(Ir.setFromBufferAttribute(e),t)for(let s=0,l=t.length;s<l;s++){const c=t[s];t0.setFromBufferAttribute(c),this.morphTargetsRelative?(Ha.addVectors(Ir.min,t0.min),Ir.expandByPoint(Ha),Ha.addVectors(Ir.max,t0.max),Ir.expandByPoint(Ha)):(Ir.expandByPoint(t0.min),Ir.expandByPoint(t0.max))}Ir.getCenter(n);let i=0;for(let s=0,l=e.count;s<l;s++)Ha.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(Ha));if(t)for(let s=0,l=t.length;s<l;s++){const c=t[s],h=this.morphTargetsRelative;for(let p=0,g=c.count;p<g;p++)Ha.fromBufferAttribute(c,p),h&&(Ip.fromBufferAttribute(e,p),Ha.add(Ip)),i=Math.max(i,n.distanceToSquared(Ha))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ti(new Float32Array(4*n.count),4));const l=this.getAttribute("tangent"),c=[],h=[];for(let H=0;H<n.count;H++)c[H]=new Z,h[H]=new Z;const p=new Z,g=new Z,_=new Z,y=new et,x=new et,M=new et,T=new Z,b=new Z;function E(H,U,N){p.fromBufferAttribute(n,H),g.fromBufferAttribute(n,U),_.fromBufferAttribute(n,N),y.fromBufferAttribute(s,H),x.fromBufferAttribute(s,U),M.fromBufferAttribute(s,N),g.sub(p),_.sub(p),x.sub(y),M.sub(y);const Y=1/(x.x*M.y-M.x*x.y);isFinite(Y)&&(T.copy(g).multiplyScalar(M.y).addScaledVector(_,-x.y).multiplyScalar(Y),b.copy(_).multiplyScalar(x.x).addScaledVector(g,-M.x).multiplyScalar(Y),c[H].add(T),c[U].add(T),c[N].add(T),h[H].add(b),h[U].add(b),h[N].add(b))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let H=0,U=w.length;H<U;++H){const N=w[H],Y=N.start,ee=N.count;for(let $=Y,ae=Y+ee;$<ae;$+=3)E(e.getX($+0),e.getX($+1),e.getX($+2))}const D=new Z,B=new Z,I=new Z,L=new Z;function F(H){I.fromBufferAttribute(i,H),L.copy(I);const U=c[H];D.copy(U),D.sub(I.multiplyScalar(I.dot(U))).normalize(),B.crossVectors(L,U);const Y=B.dot(h[H])<0?-1:1;l.setXYZW(H,D.x,D.y,D.z,Y)}for(let H=0,U=w.length;H<U;++H){const N=w[H],Y=N.start,ee=N.count;for(let $=Y,ae=Y+ee;$<ae;$+=3)F(e.getX($+0)),F(e.getX($+1)),F(e.getX($+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new ti(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let y=0,x=n.count;y<x;y++)n.setXYZ(y,0,0,0);const i=new Z,s=new Z,l=new Z,c=new Z,h=new Z,p=new Z,g=new Z,_=new Z;if(e)for(let y=0,x=e.count;y<x;y+=3){const M=e.getX(y+0),T=e.getX(y+1),b=e.getX(y+2);i.fromBufferAttribute(t,M),s.fromBufferAttribute(t,T),l.fromBufferAttribute(t,b),g.subVectors(l,s),_.subVectors(i,s),g.cross(_),c.fromBufferAttribute(n,M),h.fromBufferAttribute(n,T),p.fromBufferAttribute(n,b),c.add(g),h.add(g),p.add(g),n.setXYZ(M,c.x,c.y,c.z),n.setXYZ(T,h.x,h.y,h.z),n.setXYZ(b,p.x,p.y,p.z)}else for(let y=0,x=t.count;y<x;y+=3)i.fromBufferAttribute(t,y+0),s.fromBufferAttribute(t,y+1),l.fromBufferAttribute(t,y+2),g.subVectors(l,s),_.subVectors(i,s),g.cross(_),n.setXYZ(y+0,g.x,g.y,g.z),n.setXYZ(y+1,g.x,g.y,g.z),n.setXYZ(y+2,g.x,g.y,g.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ha.fromBufferAttribute(e,t),Ha.normalize(),e.setXYZ(t,Ha.x,Ha.y,Ha.z)}toNonIndexed(){function e(c,h){const p=c.array,g=c.itemSize,_=c.normalized,y=new p.constructor(h.length*g);let x=0,M=0;for(let T=0,b=h.length;T<b;T++){c.isInterleavedBufferAttribute?x=h[T]*c.data.stride+c.offset:x=h[T]*g;for(let E=0;E<g;E++)y[M++]=p[x++]}return new ti(y,g,_)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Sn,n=this.index.array,i=this.attributes;for(const c in i){const h=i[c],p=e(h,n);t.setAttribute(c,p)}const s=this.morphAttributes;for(const c in s){const h=[],p=s[c];for(let g=0,_=p.length;g<_;g++){const y=p[g],x=e(y,n);h.push(x)}t.morphAttributes[c]=h}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let c=0,h=l.length;c<h;c++){const p=l[c];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const p in h)h[p]!==void 0&&(e[p]=h[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const h in n){const p=n[h];e.data.attributes[h]=p.toJSON(e.data)}const i={};let s=!1;for(const h in this.morphAttributes){const p=this.morphAttributes[h],g=[];for(let _=0,y=p.length;_<y;_++){const x=p[_];g.push(x.toJSON(e.data))}g.length>0&&(i[h]=g,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const p in i){const g=i[p];this.setAttribute(p,g.clone(t))}const s=e.morphAttributes;for(const p in s){const g=[],_=s[p];for(let y=0,x=_.length;y<x;y++)g.push(_[y].clone(t));this.morphAttributes[p]=g}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,g=l.length;p<g;p++){const _=l[p];this.addGroup(_.start,_.count,_.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _C=new sn,bh=new Rd,_y=new ss,yC=new Z,yy=new Z,xy=new Z,Ay=new Z,BM=new Z,Sy=new Z,xC=new Z,My=new Z;class Pi extends Jn{constructor(e=new Sn,t=new mr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,l=i.length;s<l;s++){const c=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,l=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const c=this.morphTargetInfluences;if(s&&c){Sy.set(0,0,0);for(let h=0,p=s.length;h<p;h++){const g=c[h],_=s[h];g!==0&&(BM.fromBufferAttribute(_,e),l?Sy.addScaledVector(BM,g):Sy.addScaledVector(BM.sub(t),g))}t.add(Sy)}return t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),_y.copy(n.boundingSphere),_y.applyMatrix4(s),bh.copy(e.ray).recast(e.near),!(_y.containsPoint(bh.origin)===!1&&(bh.intersectSphere(_y,yC)===null||bh.origin.distanceToSquared(yC)>(e.far-e.near)**2))&&(_C.copy(s).invert(),bh.copy(e.ray).applyMatrix4(_C),!(n.boundingBox!==null&&bh.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,bh)))}_computeIntersections(e,t,n){let i;const s=this.geometry,l=this.material,c=s.index,h=s.attributes.position,p=s.attributes.uv,g=s.attributes.uv1,_=s.attributes.normal,y=s.groups,x=s.drawRange;if(c!==null)if(Array.isArray(l))for(let M=0,T=y.length;M<T;M++){const b=y[M],E=l[b.materialIndex],w=Math.max(b.start,x.start),D=Math.min(c.count,Math.min(b.start+b.count,x.start+x.count));for(let B=w,I=D;B<I;B+=3){const L=c.getX(B),F=c.getX(B+1),H=c.getX(B+2);i=Ey(this,E,e,n,p,g,_,L,F,H),i&&(i.faceIndex=Math.floor(B/3),i.face.materialIndex=b.materialIndex,t.push(i))}}else{const M=Math.max(0,x.start),T=Math.min(c.count,x.start+x.count);for(let b=M,E=T;b<E;b+=3){const w=c.getX(b),D=c.getX(b+1),B=c.getX(b+2);i=Ey(this,l,e,n,p,g,_,w,D,B),i&&(i.faceIndex=Math.floor(b/3),t.push(i))}}else if(h!==void 0)if(Array.isArray(l))for(let M=0,T=y.length;M<T;M++){const b=y[M],E=l[b.materialIndex],w=Math.max(b.start,x.start),D=Math.min(h.count,Math.min(b.start+b.count,x.start+x.count));for(let B=w,I=D;B<I;B+=3){const L=B,F=B+1,H=B+2;i=Ey(this,E,e,n,p,g,_,L,F,H),i&&(i.faceIndex=Math.floor(B/3),i.face.materialIndex=b.materialIndex,t.push(i))}}else{const M=Math.max(0,x.start),T=Math.min(h.count,x.start+x.count);for(let b=M,E=T;b<E;b+=3){const w=b,D=b+1,B=b+2;i=Ey(this,l,e,n,p,g,_,w,D,B),i&&(i.faceIndex=Math.floor(b/3),t.push(i))}}}}function vN(r,e,t,n,i,s,l,c){let h;if(e.side===Ks?h=n.intersectTriangle(l,s,i,!0,c):h=n.intersectTriangle(i,s,l,e.side===hc,c),h===null)return null;My.copy(c),My.applyMatrix4(r.matrixWorld);const p=t.ray.origin.distanceTo(My);return p<t.near||p>t.far?null:{distance:p,point:My.clone(),object:r}}function Ey(r,e,t,n,i,s,l,c,h,p){r.getVertexPosition(c,yy),r.getVertexPosition(h,xy),r.getVertexPosition(p,Ay);const g=vN(r,e,t,n,yy,xy,Ay,xC);if(g){const _=new Z;pr.getBarycoord(xC,yy,xy,Ay,_),i&&(g.uv=pr.getInterpolatedAttribute(i,c,h,p,_,new et)),s&&(g.uv1=pr.getInterpolatedAttribute(s,c,h,p,_,new et)),l&&(g.normal=pr.getInterpolatedAttribute(l,c,h,p,_,new Z),g.normal.dot(n.direction)>0&&g.normal.multiplyScalar(-1));const y={a:c,b:h,c:p,normal:new Z,materialIndex:0};pr.getNormal(yy,xy,Ay,y.normal),g.face=y,g.barycoord=_}return g}class wd extends Sn{constructor(e=1,t=1,n=1,i=1,s=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:l};const c=this;i=Math.floor(i),s=Math.floor(s),l=Math.floor(l);const h=[],p=[],g=[],_=[];let y=0,x=0;M("z","y","x",-1,-1,n,t,e,l,s,0),M("z","y","x",1,-1,n,t,-e,l,s,1),M("x","z","y",1,1,e,n,t,i,l,2),M("x","z","y",1,-1,e,n,-t,i,l,3),M("x","y","z",1,-1,e,t,n,i,s,4),M("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(h),this.setAttribute("position",new Jt(p,3)),this.setAttribute("normal",new Jt(g,3)),this.setAttribute("uv",new Jt(_,2));function M(T,b,E,w,D,B,I,L,F,H,U){const N=B/F,Y=I/H,ee=B/2,$=I/2,ae=L/2,me=F+1,Q=H+1;let he=0,oe=0;const be=new Z;for(let P=0;P<Q;P++){const ue=P*Y-$;for(let Ce=0;Ce<me;Ce++){const Xe=Ce*N-ee;be[T]=Xe*w,be[b]=ue*D,be[E]=ae,p.push(be.x,be.y,be.z),be[T]=0,be[b]=0,be[E]=L>0?1:-1,g.push(be.x,be.y,be.z),_.push(Ce/F),_.push(1-P/H),he+=1}}for(let P=0;P<H;P++)for(let ue=0;ue<F;ue++){const Ce=y+ue+me*P,Xe=y+ue+me*(P+1),re=y+(ue+1)+me*(P+1),Ne=y+(ue+1)+me*P;h.push(Ce,Xe,Ne),h.push(Xe,re,Ne),oe+=6}c.addGroup(x,oe,U),x+=oe,y+=he}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Sm(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function Vs(r){const e={};for(let t=0;t<r.length;t++){const n=Sm(r[t]);for(const i in n)e[i]=n[i]}return e}function _N(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function V2(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Yn.workingColorSpace}const k2={clone:Sm,merge:Vs};var yN=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,xN=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ar extends Ra{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=yN,this.fragmentShader=xN,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Sm(e.uniforms),this.uniformsGroups=_N(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const l=this.uniforms[i].value;l&&l.isTexture?t.uniforms[i]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[i]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[i]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[i]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[i]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[i]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[i]={type:"m4",value:l.toArray()}:t.uniforms[i]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class KA extends Jn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new sn,this.projectionMatrix=new sn,this.projectionMatrixInverse=new sn,this.coordinateSystem=fl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const rf=new Z,AC=new et,SC=new et;class sa extends KA{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=xm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(sd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return xm*2*Math.atan(Math.tan(sd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){rf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(rf.x,rf.y).multiplyScalar(-e/rf.z),rf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(rf.x,rf.y).multiplyScalar(-e/rf.z)}getViewSize(e,t){return this.getViewBounds(e,AC,SC),t.subVectors(SC,AC)}setViewOffset(e,t,n,i,s,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(sd*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const l=this.view;if(this.view!==null&&this.view.enabled){const h=l.fullWidth,p=l.fullHeight;s+=l.offsetX*i/h,t-=l.offsetY*n/p,i*=l.width/h,n*=l.height/p}const c=this.filmOffset;c!==0&&(s+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Pp=-90,Fp=1;class X2 extends Jn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new sa(Pp,Fp,e,t);i.layers=this.layers,this.add(i);const s=new sa(Pp,Fp,e,t);s.layers=this.layers,this.add(s);const l=new sa(Pp,Fp,e,t);l.layers=this.layers,this.add(l);const c=new sa(Pp,Fp,e,t);c.layers=this.layers,this.add(c);const h=new sa(Pp,Fp,e,t);h.layers=this.layers,this.add(h);const p=new sa(Pp,Fp,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,s,l,c,h]=t;for(const p of t)this.remove(p);if(e===fl)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),h.up.set(0,1,0),h.lookAt(0,0,-1);else if(e===Q0)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),h.up.set(0,-1,0),h.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,l,c,h,p,g]=this.children,_=e.getRenderTarget(),y=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),M=e.xr.enabled;e.xr.enabled=!1;const T=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,s),e.setRenderTarget(n,1,i),e.render(t,l),e.setRenderTarget(n,2,i),e.render(t,c),e.setRenderTarget(n,3,i),e.render(t,h),e.setRenderTarget(n,4,i),e.render(t,p),n.texture.generateMipmaps=T,e.setRenderTarget(n,5,i),e.render(t,g),e.setRenderTarget(_,y,x),e.xr.enabled=M,n.texture.needsPMREMUpdate=!0}}class Sv extends di{constructor(e,t,n,i,s,l,c,h,p,g){e=e!==void 0?e:[],t=t!==void 0?t:dc,super(e,t,n,i,s,l,c,h,p,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class KE extends Mo{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new Sv(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:oi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new wd(5,5,5),s=new Ar({name:"CubemapFromEquirect",uniforms:Sm(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Ks,blending:sc});s.uniforms.tEquirect.value=t;const l=new Pi(i,s),c=t.minFilter;return t.minFilter===xo&&(t.minFilter=oi),new X2(1,10,this).update(e,l),t.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,n,i){const s=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,n,i);e.setRenderTarget(s)}}class au extends Jn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const AN={type:"move"};class Sx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new au,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new au,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new au,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,l=null;const c=this._targetRay,h=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){l=!0;for(const T of e.hand.values()){const b=t.getJointPose(T,n),E=this._getHandJoint(p,T);b!==null&&(E.matrix.fromArray(b.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),E.matrixWorldNeedsUpdate=!0,E.jointRadius=b.radius),E.visible=b!==null}const g=p.joints["index-finger-tip"],_=p.joints["thumb-tip"],y=g.position.distanceTo(_.position),x=.02,M=.005;p.inputState.pinching&&y>x+M?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&y<=x-M&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(h.matrix.fromArray(s.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,s.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(s.linearVelocity)):h.hasLinearVelocity=!1,s.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(s.angularVelocity)):h.hasAngularVelocity=!1));c!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(c.matrix.fromArray(i.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,i.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(i.linearVelocity)):c.hasLinearVelocity=!1,i.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(i.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(AN)))}return c!==null&&(c.visible=i!==null),h!==null&&(h.visible=s!==null),p!==null&&(p.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new au;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class ZA{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Bt(e),this.density=t}clone(){return new ZA(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class QA{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Bt(e),this.near=t,this.far=n}clone(){return new QA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Mv extends Jn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Jr,this.environmentIntensity=1,this.environmentRotation=new Jr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Ev{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Z0,this.updateRanges=[],this.version=0,this.uuid=Yr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Yr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Yr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const zs=new Z;class Tf{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)zs.fromBufferAttribute(this,t),zs.applyMatrix4(e),this.setXYZ(t,zs.x,zs.y,zs.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)zs.fromBufferAttribute(this,t),zs.applyNormalMatrix(e),this.setXYZ(t,zs.x,zs.y,zs.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)zs.fromBufferAttribute(this,t),zs.transformDirection(e),this.setXYZ(t,zs.x,zs.y,zs.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Js(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Mn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Js(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Js(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Js(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Js(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array),i=Mn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array),i=Mn(i,this.array),s=Mn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new ti(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Tf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ZE extends Ra{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let zp;const n0=new Z,Hp=new Z,Gp=new Z,Vp=new et,i0=new et,Y2=new sn,by=new Z,a0=new Z,Ty=new Z,MC=new et,DM=new et,EC=new et;class q2 extends Jn{constructor(e=new ZE){if(super(),this.isSprite=!0,this.type="Sprite",zp===void 0){zp=new Sn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Ev(t,5);zp.setIndex([0,1,2,0,2,3]),zp.setAttribute("position",new Tf(n,3,0,!1)),zp.setAttribute("uv",new Tf(n,2,3,!1))}this.geometry=zp,this.material=e,this.center=new et(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Hp.setFromMatrixScale(this.matrixWorld),Y2.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Gp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Hp.multiplyScalar(-Gp.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const l=this.center;Cy(by.set(-.5,-.5,0),Gp,l,Hp,i,s),Cy(a0.set(.5,-.5,0),Gp,l,Hp,i,s),Cy(Ty.set(.5,.5,0),Gp,l,Hp,i,s),MC.set(0,0),DM.set(1,0),EC.set(1,1);let c=e.ray.intersectTriangle(by,a0,Ty,!1,n0);if(c===null&&(Cy(a0.set(-.5,.5,0),Gp,l,Hp,i,s),DM.set(0,1),c=e.ray.intersectTriangle(by,Ty,a0,!1,n0),c===null))return;const h=e.ray.origin.distanceTo(n0);h<e.near||h>e.far||t.push({distance:h,point:n0.clone(),uv:pr.getInterpolation(n0,by,a0,Ty,MC,DM,EC,new et),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Cy(r,e,t,n,i,s){Vp.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(i0.x=s*Vp.x-i*Vp.y,i0.y=i*Vp.x+s*Vp.y):i0.copy(Vp),r.copy(e),r.x+=i0.x,r.y+=i0.y,r.applyMatrix4(Y2)}const Ry=new Z,bC=new Z;class J2 extends Jn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const i=t.splice(n,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Ry.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Ry);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Ry.setFromMatrixPosition(e.matrixWorld),bC.setFromMatrixPosition(this.matrixWorld);const n=Ry.distanceTo(bC)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let l=t[i].distance;if(t[i].object.visible&&(l-=l*t[i].hysteresis),n>=l)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const l=n[i];t.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return t}}const TC=new Z,CC=new ei,RC=new ei,SN=new Z,wC=new sn,wy=new Z,UM=new ss,BC=new sn,OM=new Rd;class QE extends Pi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=z1,this.bindMatrix=new sn,this.bindMatrixInverse=new sn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Rs),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,wy),this.boundingBox.expandByPoint(wy)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ss),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,wy),this.boundingSphere.expandByPoint(wy)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),UM.copy(this.boundingSphere),UM.applyMatrix4(i),e.ray.intersectsSphere(UM)!==!1&&(BC.copy(i).invert(),OM.copy(e.ray).applyMatrix4(BC),!(this.boundingBox!==null&&OM.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,OM)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ei,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===z1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===M2?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;CC.fromBufferAttribute(i.attributes.skinIndex,e),RC.fromBufferAttribute(i.attributes.skinWeight,e),TC.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const l=RC.getComponent(s);if(l!==0){const c=CC.getComponent(s);wC.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),t.addScaledVector(SN.copy(TC).applyMatrix4(wC),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class $A extends Jn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class hl extends di{constructor(e=null,t=1,n=1,i,s,l,c,h,p=Xa,g=Xa,_,y){super(null,l,c,h,p,g,i,s,_,y),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const DC=new sn,MN=new sn;class bv{constructor(e=[],t=[]){this.uuid=Yr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new sn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new sn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,l=e.length;s<l;s++){const c=e[s]?e[s].matrixWorld:MN;DC.multiplyMatrices(c,t[s]),DC.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new bv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new hl(t,e,e,ha,ji);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let l=t[s];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),l=new $A),this.bones.push(l),this.boneInverses.push(new sn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const l=t[i];e.bones.push(l.uuid);const c=n[i];e.boneInverses.push(c.toArray())}return e}}class vd extends ti{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const kp=new sn,UC=new sn,By=[],OC=new Rs,EN=new sn,s0=new Pi,r0=new ss;class $E extends Pi{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new vd(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,EN)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Rs),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,kp),OC.copy(e.boundingBox).applyMatrix4(kp),this.boundingBox.union(OC)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ss),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,kp),r0.copy(e.boundingSphere).applyMatrix4(kp),this.boundingSphere.union(r0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=n.length+1,l=e*s+1;for(let c=0;c<n.length;c++)n[c]=i[l+c]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(s0.geometry=this.geometry,s0.material=this.material,s0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),r0.copy(this.boundingSphere),r0.applyMatrix4(n),e.ray.intersectsSphere(r0)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,kp),UC.multiplyMatrices(n,kp),s0.matrixWorld=UC,s0.raycast(e,By);for(let l=0,c=By.length;l<c;l++){const h=By[l];h.instanceId=s,h.object=this,t.push(h)}By.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new vd(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new hl(new Float32Array(i*this.count),i,this.count,yv,ji));const s=this.morphTexture.source.data.data;let l=0;for(let p=0;p<n.length;p++)l+=n[p];const c=this.geometry.morphTargetsRelative?1:1-l,h=i*e;s[h]=c,s.set(n,h+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const NM=new Z,bN=new Z,TN=new An;class $c{constructor(e=new Z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=NM.subVectors(n,t).cross(bN.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(NM),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||TN.getNormalMatrix(e),i=this.coplanarPoint(NM).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Th=new ss,Dy=new Z;class Tv{constructor(e=new $c,t=new $c,n=new $c,i=new $c,s=new $c,l=new $c){this.planes=[e,t,n,i,s,l]}set(e,t,n,i,s,l){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(n),c[3].copy(i),c[4].copy(s),c[5].copy(l),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=fl){const n=this.planes,i=e.elements,s=i[0],l=i[1],c=i[2],h=i[3],p=i[4],g=i[5],_=i[6],y=i[7],x=i[8],M=i[9],T=i[10],b=i[11],E=i[12],w=i[13],D=i[14],B=i[15];if(n[0].setComponents(h-s,y-p,b-x,B-E).normalize(),n[1].setComponents(h+s,y+p,b+x,B+E).normalize(),n[2].setComponents(h+l,y+g,b+M,B+w).normalize(),n[3].setComponents(h-l,y-g,b-M,B-w).normalize(),n[4].setComponents(h-c,y-_,b-T,B-D).normalize(),t===fl)n[5].setComponents(h+c,y+_,b+T,B+D).normalize();else if(t===Q0)n[5].setComponents(c,_,T,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Th.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Th.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Th)}intersectsSprite(e){return Th.center.set(0,0,0),Th.radius=.7071067811865476,Th.applyMatrix4(e.matrixWorld),this.intersectsSphere(Th)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Dy.x=i.normal.x>0?e.max.x:e.min.x,Dy.y=i.normal.y>0?e.max.y:e.min.y,Dy.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Dy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function LM(r,e){return r-e}function CN(r,e){return r.z-e.z}function RN(r,e){return e.z-r.z}class wN{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,i){const s=this.pool,l=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const c=s[this.index];l.push(c),this.index++,c.start=e,c.count=t,c.z=n,c.index=i}reset(){this.list.length=0,this.index=0}}const fr=new sn,BN=new Bt(1,1,1),IM=new Tv,Uy=new Rs,Ch=new ss,o0=new Z,NC=new Z,DN=new Z,PM=new wN,Ss=new Pi,Oy=[];function UN(r,e,t=0){const n=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const i=r.count;for(let s=0;s<i;s++)for(let l=0;l<n;l++)e.setComponent(s+t,l,r.getComponent(s,l))}else e.array.set(r.array,t*n);e.needsUpdate=!0}function Rh(r,e){if(r.constructor!==e.constructor){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++)e[n]=r[n]}else{const t=Math.min(r.length,e.length);e.set(new r.constructor(r.buffer,0,t))}}class W2 extends Pi{constructor(e,t,n=t*2,i){super(new Sn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new hl(t,e,e,ha,ji);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new hl(t,e,e,xv,pc);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new hl(t,e,e,ha,ji);n.colorSpace=Yn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const l=e.getAttribute(s),{array:c,itemSize:h,normalized:p}=l,g=new c.constructor(n*h),_=new ti(g,h,p);t.setAttribute(s,_)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new ti(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),s=t.getAttribute(n);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Rs);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,fr),this.getBoundingBoxAt(s,Uy).applyMatrix4(fr),e.union(Uy)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ss);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,fr),this.getBoundingSphereAt(s,Ch).applyMatrix4(fr),e.union(Ch)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(LM),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=n):(i=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;fr.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const l=this._colorsTexture;return l&&(BN.toArray(l.image.data,i*4),l.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const l=e.getIndex();if(l!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=n===-1?l.count:n),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let h;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(LM),h=this._availableGeometryIds.shift(),s[h]=i):(h=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(h,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,h}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,s=n.getIndex(),l=t.getIndex(),c=this._geometryInfo[e];if(i&&l.count>c.reservedIndexCount||t.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const h=c.vertexStart,p=c.reservedVertexCount;c.vertexCount=t.getAttribute("position").count;for(const g in n.attributes){const _=t.getAttribute(g),y=n.getAttribute(g);UN(_,y,h);const x=_.itemSize;for(let M=_.count,T=p;M<T;M++){const b=h+M;for(let E=0;E<x;E++)y.setComponent(b,E,0)}y.needsUpdate=!0,y.addUpdateRange(h*x,p*x)}if(i){const g=c.indexStart,_=c.reservedIndexCount;c.indexCount=t.getIndex().count;for(let y=0;y<l.count;y++)s.setX(g+y,h+l.getX(y));for(let y=l.count,x=_;y<x;y++)s.setX(g+y,h);s.needsUpdate=!0,s.addUpdateRange(g,c.reservedIndexCount)}return c.start=i?c.indexStart:c.vertexStart,c.count=i?c.indexCount:c.vertexCount,c.boundingBox=null,t.boundingBox!==null&&(c.boundingBox=t.boundingBox.clone()),c.boundingSphere=null,t.boundingSphere!==null&&(c.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let i=0,s=n.length;i<s;i++)n[i].active&&n[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,i=n.map((l,c)=>c).sort((l,c)=>n[l].vertexStart-n[c].vertexStart),s=this.geometry;for(let l=0,c=n.length;l<c;l++){const h=i[l],p=n[h];if(p.active!==!1){if(s.index!==null){if(p.indexStart!==t){const{indexStart:g,vertexStart:_,reservedIndexCount:y}=p,x=s.index,M=x.array,T=e-_;for(let b=g;b<g+y;b++)M[b]=M[b]+T;x.array.copyWithin(t,g,g+y),x.addUpdateRange(t,y),p.indexStart=t}t+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:g,reservedVertexCount:_}=p,y=s.attributes;for(const x in y){const M=y[x],{array:T,itemSize:b}=M;T.copyWithin(e*b,g*b,(g+_)*b),M.addUpdateRange(e*b,_*b)}p.vertexStart=e}e+=p.reservedVertexCount,p.start=s.index?p.indexStart:p.vertexStart,this._nextIndexStart=s.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new Rs,l=n.index,c=n.attributes.position;for(let h=i.start,p=i.start+i.count;h<p;h++){let g=h;l&&(g=l.getX(g)),s.expandByPoint(o0.fromBufferAttribute(c,g))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new ss;this.getBoundingBoxAt(e,Uy),Uy.getCenter(s.center);const l=n.index,c=n.attributes.position;let h=0;for(let p=i.start,g=i.start+i.count;p<g;p++){let _=p;l&&(_=l.getX(_)),o0.fromBufferAttribute(c,_),h=Math.max(h,s.center.distanceToSquared(o0))}s.radius=Math.sqrt(h),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(LM);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);Rh(this._multiDrawCounts,i),Rh(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const l=this._indirectTexture,c=this._matricesTexture,h=this._colorsTexture;l.dispose(),this._initIndirectTexture(),Rh(l.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),Rh(c.image.data,this._matricesTexture.image.data),h&&(h.dispose(),this._initColorsTexture(),Rh(h.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...n.map(c=>c.vertexStart+c.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(h=>h.indexStart+h.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Sn,this._initializeGeometry(s));const l=this.geometry;s.index&&Rh(s.index.array,l.index.array);for(const c in s.attributes)Rh(s.attributes[c].array,l.attributes[c].array)}raycast(e,t){const n=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,l=this.geometry;Ss.material=this.material,Ss.geometry.index=l.index,Ss.geometry.attributes=l.attributes,Ss.geometry.boundingBox===null&&(Ss.geometry.boundingBox=new Rs),Ss.geometry.boundingSphere===null&&(Ss.geometry.boundingSphere=new ss);for(let c=0,h=n.length;c<h;c++){if(!n[c].visible||!n[c].active)continue;const p=n[c].geometryIndex,g=i[p];Ss.geometry.setDrawRange(g.start,g.count),this.getMatrixAt(c,Ss.matrixWorld).premultiply(s),this.getBoundingBoxAt(p,Ss.geometry.boundingBox),this.getBoundingSphereAt(p,Ss.geometry.boundingSphere),Ss.raycast(e,Oy);for(let _=0,y=Oy.length;_<y;_++){const x=Oy[_];x.object=this,x.batchId=c,t.push(x)}Oy.length=0}Ss.material=null,Ss.geometry.index=null,Ss.geometry.attributes={},Ss.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=i.getIndex(),c=l===null?1:l.array.BYTES_PER_ELEMENT,h=this._instanceInfo,p=this._multiDrawStarts,g=this._multiDrawCounts,_=this._geometryInfo,y=this.perObjectFrustumCulled,x=this._indirectTexture,M=x.image.data;y&&(fr.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),IM.setFromProjectionMatrix(fr,e.coordinateSystem));let T=0;if(this.sortObjects){fr.copy(this.matrixWorld).invert(),o0.setFromMatrixPosition(n.matrixWorld).applyMatrix4(fr),NC.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(fr);for(let w=0,D=h.length;w<D;w++)if(h[w].visible&&h[w].active){const B=h[w].geometryIndex;this.getMatrixAt(w,fr),this.getBoundingSphereAt(B,Ch).applyMatrix4(fr);let I=!1;if(y&&(I=!IM.intersectsSphere(Ch)),!I){const L=_[B],F=DN.subVectors(Ch.center,o0).dot(NC);PM.push(L.start,L.count,F,w)}}const b=PM.list,E=this.customSort;E===null?b.sort(s.transparent?RN:CN):E.call(this,b,n);for(let w=0,D=b.length;w<D;w++){const B=b[w];p[T]=B.start*c,g[T]=B.count,M[T]=B.index,T++}PM.reset()}else for(let b=0,E=h.length;b<E;b++)if(h[b].visible&&h[b].active){const w=h[b].geometryIndex;let D=!1;if(y&&(this.getMatrixAt(b,fr),this.getBoundingSphereAt(w,Ch).applyMatrix4(fr),D=!IM.intersectsSphere(Ch)),!D){const B=_[w];p[T]=B.start*c,g[T]=B.count,M[T]=b,T++}}x.needsUpdate=!0,this._multiDrawCount=T,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,s,l){this.onBeforeRender(e,null,i,s,l)}}class Bs extends Ra{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Bt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const _A=new Z,yA=new Z,LC=new sn,l0=new Rd,Ny=new ss,FM=new Z,IC=new Z;class uu extends Jn{constructor(e=new Sn,t=new Bs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)_A.fromBufferAttribute(t,i-1),yA.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=_A.distanceTo(yA);e.setAttribute("lineDistance",new Jt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Ny.copy(n.boundingSphere),Ny.applyMatrix4(i),Ny.radius+=s,e.ray.intersectsSphere(Ny)===!1)return;LC.copy(i).invert(),l0.copy(e.ray).applyMatrix4(LC);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,p=this.isLineSegments?2:1,g=n.index,y=n.attributes.position;if(g!==null){const x=Math.max(0,l.start),M=Math.min(g.count,l.start+l.count);for(let T=x,b=M-1;T<b;T+=p){const E=g.getX(T),w=g.getX(T+1),D=Ly(this,e,l0,h,E,w,T);D&&t.push(D)}if(this.isLineLoop){const T=g.getX(M-1),b=g.getX(x),E=Ly(this,e,l0,h,T,b,M-1);E&&t.push(E)}}else{const x=Math.max(0,l.start),M=Math.min(y.count,l.start+l.count);for(let T=x,b=M-1;T<b;T+=p){const E=Ly(this,e,l0,h,T,T+1,T);E&&t.push(E)}if(this.isLineLoop){const T=Ly(this,e,l0,h,M-1,x,M-1);T&&t.push(T)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,l=i.length;s<l;s++){const c=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function Ly(r,e,t,n,i,s,l){const c=r.geometry.attributes.position;if(_A.fromBufferAttribute(c,i),yA.fromBufferAttribute(c,s),t.distanceSqToSegment(_A,yA,FM,IC)>n)return;FM.applyMatrix4(r.matrixWorld);const p=e.ray.origin.distanceTo(FM);if(!(p<e.near||p>e.far))return{distance:p,point:IC.clone().applyMatrix4(r.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:r}}const PC=new Z,FC=new Z;class pl extends uu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)PC.fromBufferAttribute(t,i),FC.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+PC.distanceTo(FC);e.setAttribute("lineDistance",new Jt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class eb extends uu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class eS extends Ra{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const zC=new sn,k1=new Rd,Iy=new ss,Py=new Z;class tb extends Jn{constructor(e=new Sn,t=new eS){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Iy.copy(n.boundingSphere),Iy.applyMatrix4(i),Iy.radius+=s,e.ray.intersectsSphere(Iy)===!1)return;zC.copy(i).invert(),k1.copy(e.ray).applyMatrix4(zC);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,p=n.index,_=n.attributes.position;if(p!==null){const y=Math.max(0,l.start),x=Math.min(p.count,l.start+l.count);for(let M=y,T=x;M<T;M++){const b=p.getX(M);Py.fromBufferAttribute(_,b),HC(Py,b,h,i,e,t,this)}}else{const y=Math.max(0,l.start),x=Math.min(_.count,l.start+l.count);for(let M=y,T=x;M<T;M++)Py.fromBufferAttribute(_,M),HC(Py,M,h,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,l=i.length;s<l;s++){const c=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function HC(r,e,t,n,i,s,l){const c=k1.distanceSqToPoint(r);if(c<t){const h=new Z;k1.closestPointToPoint(r,h),h.applyMatrix4(n);const p=i.ray.origin.distanceTo(h);if(p<i.near||p>i.far)return;s.push({distance:p,distanceToRay:Math.sqrt(c),point:h,index:e,face:null,faceIndex:null,barycoord:null,object:l})}}class j2 extends di{constructor(e,t,n,i,s,l,c,h,p){super(e,t,n,i,s,l,c,h,p),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:oi,this.magFilter=s!==void 0?s:oi,this.generateMipmaps=!1;const g=this;function _(){g.needsUpdate=!0,e.requestVideoFrameCallback(_)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(_)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class ON extends j2{constructor(e,t,n,i,s,l,c,h){super({},e,t,n,i,s,l,c,h),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class NN extends di{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Xa,this.minFilter=Xa,this.generateMipmaps=!1,this.needsUpdate=!0}}class tS extends di{constructor(e,t,n,i,s,l,c,h,p,g,_,y){super(null,l,c,h,p,g,i,s,_,y),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class LN extends tS{constructor(e,t,n,i,s,l){super(e,t,n,s,l),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=fa,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class IN extends tS{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,dc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class PN extends di{constructor(e,t,n,i,s,l,c,h,p){super(e,t,n,i,s,l,c,h,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class nb extends di{constructor(e,t,n,i,s,l,c,h,p,g=ad){if(g!==ad&&g!==gd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&g===ad&&(n=pc),n===void 0&&g===gd&&(n=md),super(null,i,s,l,c,h,g,n,p),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=c!==void 0?c:Xa,this.minFilter=h!==void 0?h:Xa,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new hf(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class ml{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let l=1;l<=e;l++)n=this.getPoint(l/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let i=0;const s=n.length;let l;t?l=t:l=e*n[s-1];let c=0,h=s-1,p;for(;c<=h;)if(i=Math.floor(c+(h-c)/2),p=n[i]-l,p<0)c=i+1;else if(p>0)h=i-1;else{h=i;break}if(i=h,n[i]===l)return i/(s-1);const g=n[i],y=n[i+1]-g,x=(l-g)/y;return(i+x)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const l=this.getPoint(i),c=this.getPoint(s),h=t||(l.isVector2?new et:new Z);return h.copy(c).sub(l).normalize(),h}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new Z,i=[],s=[],l=[],c=new Z,h=new sn;for(let x=0;x<=e;x++){const M=x/e;i[x]=this.getTangentAt(M,new Z)}s[0]=new Z,l[0]=new Z;let p=Number.MAX_VALUE;const g=Math.abs(i[0].x),_=Math.abs(i[0].y),y=Math.abs(i[0].z);g<=p&&(p=g,n.set(1,0,0)),_<=p&&(p=_,n.set(0,1,0)),y<=p&&n.set(0,0,1),c.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],c),l[0].crossVectors(i[0],s[0]);for(let x=1;x<=e;x++){if(s[x]=s[x-1].clone(),l[x]=l[x-1].clone(),c.crossVectors(i[x-1],i[x]),c.length()>Number.EPSILON){c.normalize();const M=Math.acos(yn(i[x-1].dot(i[x]),-1,1));s[x].applyMatrix4(h.makeRotationAxis(c,M))}l[x].crossVectors(i[x],s[x])}if(t===!0){let x=Math.acos(yn(s[0].dot(s[e]),-1,1));x/=e,i[0].dot(c.crossVectors(s[0],s[e]))>0&&(x=-x);for(let M=1;M<=e;M++)s[M].applyMatrix4(h.makeRotationAxis(i[M],x*M)),l[M].crossVectors(i[M],s[M])}return{tangents:i,normals:s,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class nS extends ml{constructor(e=0,t=0,n=1,i=1,s=0,l=Math.PI*2,c=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=l,this.aClockwise=c,this.aRotation=h}getPoint(e,t=new et){const n=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const l=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(l?s=0:s=i),this.aClockwise===!0&&!l&&(s===i?s=-i:s=s-i);const c=this.aStartAngle+e*s;let h=this.aX+this.xRadius*Math.cos(c),p=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const g=Math.cos(this.aRotation),_=Math.sin(this.aRotation),y=h-this.aX,x=p-this.aY;h=y*g-x*_+this.aX,p=y*_+x*g+this.aY}return n.set(h,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class K2 extends nS{constructor(e,t,n,i,s,l){super(e,t,n,n,i,s,l),this.isArcCurve=!0,this.type="ArcCurve"}}function ib(){let r=0,e=0,t=0,n=0;function i(s,l,c,h){r=s,e=c,t=-3*s+3*l-2*c-h,n=2*s-2*l+c+h}return{initCatmullRom:function(s,l,c,h,p){i(l,c,p*(c-s),p*(h-l))},initNonuniformCatmullRom:function(s,l,c,h,p,g,_){let y=(l-s)/p-(c-s)/(p+g)+(c-l)/g,x=(c-l)/g-(h-l)/(g+_)+(h-c)/_;y*=g,x*=g,i(l,c,y,x)},calc:function(s){const l=s*s,c=l*s;return r+e*s+t*l+n*c}}}const Fy=new Z,zM=new ib,HM=new ib,GM=new ib;class Z2 extends ml{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new Z){const n=t,i=this.points,s=i.length,l=(s-(this.closed?0:1))*e;let c=Math.floor(l),h=l-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/s)+1)*s:h===0&&c===s-1&&(c=s-2,h=1);let p,g;this.closed||c>0?p=i[(c-1)%s]:(Fy.subVectors(i[0],i[1]).add(i[0]),p=Fy);const _=i[c%s],y=i[(c+1)%s];if(this.closed||c+2<s?g=i[(c+2)%s]:(Fy.subVectors(i[s-1],i[s-2]).add(i[s-1]),g=Fy),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let M=Math.pow(p.distanceToSquared(_),x),T=Math.pow(_.distanceToSquared(y),x),b=Math.pow(y.distanceToSquared(g),x);T<1e-4&&(T=1),M<1e-4&&(M=T),b<1e-4&&(b=T),zM.initNonuniformCatmullRom(p.x,_.x,y.x,g.x,M,T,b),HM.initNonuniformCatmullRom(p.y,_.y,y.y,g.y,M,T,b),GM.initNonuniformCatmullRom(p.z,_.z,y.z,g.z,M,T,b)}else this.curveType==="catmullrom"&&(zM.initCatmullRom(p.x,_.x,y.x,g.x,this.tension),HM.initCatmullRom(p.y,_.y,y.y,g.y,this.tension),GM.initCatmullRom(p.z,_.z,y.z,g.z,this.tension));return n.set(zM.calc(h),HM.calc(h),GM.calc(h)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Z().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function GC(r,e,t,n,i){const s=(n-e)*.5,l=(i-t)*.5,c=r*r,h=r*c;return(2*t-2*n+s+l)*h+(-3*t+3*n-2*s-l)*c+s*r+t}function FN(r,e){const t=1-r;return t*t*e}function zN(r,e){return 2*(1-r)*r*e}function HN(r,e){return r*r*e}function U0(r,e,t,n){return FN(r,e)+zN(r,t)+HN(r,n)}function GN(r,e){const t=1-r;return t*t*t*e}function VN(r,e){const t=1-r;return 3*t*t*r*e}function kN(r,e){return 3*(1-r)*r*r*e}function XN(r,e){return r*r*r*e}function O0(r,e,t,n,i){return GN(r,e)+VN(r,t)+kN(r,n)+XN(r,i)}class ab extends ml{constructor(e=new et,t=new et,n=new et,i=new et){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new et){const n=t,i=this.v0,s=this.v1,l=this.v2,c=this.v3;return n.set(O0(e,i.x,s.x,l.x,c.x),O0(e,i.y,s.y,l.y,c.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Q2 extends ml{constructor(e=new Z,t=new Z,n=new Z,i=new Z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Z){const n=t,i=this.v0,s=this.v1,l=this.v2,c=this.v3;return n.set(O0(e,i.x,s.x,l.x,c.x),O0(e,i.y,s.y,l.y,c.y),O0(e,i.z,s.z,l.z,c.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class sb extends ml{constructor(e=new et,t=new et){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new et){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new et){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $2 extends ml{constructor(e=new Z,t=new Z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Z){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Z){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rb extends ml{constructor(e=new et,t=new et,n=new et){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new et){const n=t,i=this.v0,s=this.v1,l=this.v2;return n.set(U0(e,i.x,s.x,l.x),U0(e,i.y,s.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ob extends ml{constructor(e=new Z,t=new Z,n=new Z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Z){const n=t,i=this.v0,s=this.v1,l=this.v2;return n.set(U0(e,i.x,s.x,l.x),U0(e,i.y,s.y,l.y),U0(e,i.z,s.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lb extends ml{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new et){const n=t,i=this.points,s=(i.length-1)*e,l=Math.floor(s),c=s-l,h=i[l===0?l:l-1],p=i[l],g=i[l>i.length-2?i.length-1:l+1],_=i[l>i.length-3?i.length-1:l+2];return n.set(GC(c,h.x,p.x,g.x,_.x),GC(c,h.y,p.y,g.y,_.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new et().fromArray(i))}return this}}var xA=Object.freeze({__proto__:null,ArcCurve:K2,CatmullRomCurve3:Z2,CubicBezierCurve:ab,CubicBezierCurve3:Q2,EllipseCurve:nS,LineCurve:sb,LineCurve3:$2,QuadraticBezierCurve:rb,QuadraticBezierCurve3:ob,SplineCurve:lb});class eB extends ml{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new xA[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const l=i[s]-n,c=this.curves[s],h=c.getLength(),p=h===0?0:1-l/h;return c.getPointAt(p,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const l=s[i],c=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,h=l.getPoints(c);for(let p=0;p<h.length;p++){const g=h[p];n&&n.equals(g)||(t.push(g),n=g)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new xA[i.type]().fromJSON(i))}return this}}class ev extends eB{constructor(e){super(),this.type="Path",this.currentPoint=new et,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new sb(this.currentPoint.clone(),new et(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new rb(this.currentPoint.clone(),new et(e,t),new et(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,l){const c=new ab(this.currentPoint.clone(),new et(e,t),new et(n,i),new et(s,l));return this.curves.push(c),this.currentPoint.set(s,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new lb(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,l){const c=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+c,t+h,n,i,s,l),this}absarc(e,t,n,i,s,l){return this.absellipse(e,t,n,n,i,s,l),this}ellipse(e,t,n,i,s,l,c,h){const p=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(e+p,t+g,n,i,s,l,c,h),this}absellipse(e,t,n,i,s,l,c,h){const p=new nS(e,t,n,i,s,l,c,h);if(this.curves.length>0){const _=p.getPoint(0);_.equals(this.currentPoint)||this.lineTo(_.x,_.y)}this.curves.push(p);const g=p.getPoint(1);return this.currentPoint.copy(g),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Cv extends Sn{constructor(e=[new et(0,-.5),new et(.5,0),new et(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=yn(i,0,Math.PI*2);const s=[],l=[],c=[],h=[],p=[],g=1/t,_=new Z,y=new et,x=new Z,M=new Z,T=new Z;let b=0,E=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:b=e[w+1].x-e[w].x,E=e[w+1].y-e[w].y,x.x=E*1,x.y=-b,x.z=E*0,T.copy(x),x.normalize(),h.push(x.x,x.y,x.z);break;case e.length-1:h.push(T.x,T.y,T.z);break;default:b=e[w+1].x-e[w].x,E=e[w+1].y-e[w].y,x.x=E*1,x.y=-b,x.z=E*0,M.copy(x),x.x+=T.x,x.y+=T.y,x.z+=T.z,x.normalize(),h.push(x.x,x.y,x.z),T.copy(M)}for(let w=0;w<=t;w++){const D=n+w*g*i,B=Math.sin(D),I=Math.cos(D);for(let L=0;L<=e.length-1;L++){_.x=e[L].x*B,_.y=e[L].y,_.z=e[L].x*I,l.push(_.x,_.y,_.z),y.x=w/t,y.y=L/(e.length-1),c.push(y.x,y.y);const F=h[3*L+0]*B,H=h[3*L+1],U=h[3*L+0]*I;p.push(F,H,U)}}for(let w=0;w<t;w++)for(let D=0;D<e.length-1;D++){const B=D+w*e.length,I=B,L=B+e.length,F=B+e.length+1,H=B+1;s.push(I,L,H),s.push(F,H,L)}this.setIndex(s),this.setAttribute("position",new Jt(l,3)),this.setAttribute("uv",new Jt(c,2)),this.setAttribute("normal",new Jt(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cv(e.points,e.segments,e.phiStart,e.phiLength)}}class iS extends Cv{constructor(e=1,t=1,n=4,i=8){const s=new ev;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new iS(e.radius,e.length,e.capSegments,e.radialSegments)}}class aS extends Sn{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const s=[],l=[],c=[],h=[],p=new Z,g=new et;l.push(0,0,0),c.push(0,0,1),h.push(.5,.5);for(let _=0,y=3;_<=t;_++,y+=3){const x=n+_/t*i;p.x=e*Math.cos(x),p.y=e*Math.sin(x),l.push(p.x,p.y,p.z),c.push(0,0,1),g.x=(l[y]/e+1)/2,g.y=(l[y+1]/e+1)/2,h.push(g.x,g.y)}for(let _=1;_<=t;_++)s.push(_,_+1,0);this.setIndex(s),this.setAttribute("position",new Jt(l,3)),this.setAttribute("normal",new Jt(c,3)),this.setAttribute("uv",new Jt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Nm extends Sn{constructor(e=1,t=1,n=1,i=32,s=1,l=!1,c=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:l,thetaStart:c,thetaLength:h};const p=this;i=Math.floor(i),s=Math.floor(s);const g=[],_=[],y=[],x=[];let M=0;const T=[],b=n/2;let E=0;w(),l===!1&&(e>0&&D(!0),t>0&&D(!1)),this.setIndex(g),this.setAttribute("position",new Jt(_,3)),this.setAttribute("normal",new Jt(y,3)),this.setAttribute("uv",new Jt(x,2));function w(){const B=new Z,I=new Z;let L=0;const F=(t-e)/n;for(let H=0;H<=s;H++){const U=[],N=H/s,Y=N*(t-e)+e;for(let ee=0;ee<=i;ee++){const $=ee/i,ae=$*h+c,me=Math.sin(ae),Q=Math.cos(ae);I.x=Y*me,I.y=-N*n+b,I.z=Y*Q,_.push(I.x,I.y,I.z),B.set(me,F,Q).normalize(),y.push(B.x,B.y,B.z),x.push($,1-N),U.push(M++)}T.push(U)}for(let H=0;H<i;H++)for(let U=0;U<s;U++){const N=T[U][H],Y=T[U+1][H],ee=T[U+1][H+1],$=T[U][H+1];(e>0||U!==0)&&(g.push(N,Y,$),L+=3),(t>0||U!==s-1)&&(g.push(Y,ee,$),L+=3)}p.addGroup(E,L,0),E+=L}function D(B){const I=M,L=new et,F=new Z;let H=0;const U=B===!0?e:t,N=B===!0?1:-1;for(let ee=1;ee<=i;ee++)_.push(0,b*N,0),y.push(0,N,0),x.push(.5,.5),M++;const Y=M;for(let ee=0;ee<=i;ee++){const ae=ee/i*h+c,me=Math.cos(ae),Q=Math.sin(ae);F.x=U*Q,F.y=b*N,F.z=U*me,_.push(F.x,F.y,F.z),y.push(0,N,0),L.x=me*.5+.5,L.y=Q*.5*N+.5,x.push(L.x,L.y),M++}for(let ee=0;ee<i;ee++){const $=I+ee,ae=Y+ee;B===!0?g.push(ae,ae+1,$):g.push(ae+1,ae,$),H+=3}p.addGroup(E,H,B===!0?1:2),E+=H}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sS extends Nm{constructor(e=1,t=1,n=32,i=1,s=!1,l=0,c=Math.PI*2){super(0,e,t,n,i,s,l,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:s,thetaStart:l,thetaLength:c}}static fromJSON(e){return new sS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Df extends Sn{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const s=[],l=[];c(i),p(n),g(),this.setAttribute("position",new Jt(s,3)),this.setAttribute("normal",new Jt(s.slice(),3)),this.setAttribute("uv",new Jt(l,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function c(w){const D=new Z,B=new Z,I=new Z;for(let L=0;L<t.length;L+=3)x(t[L+0],D),x(t[L+1],B),x(t[L+2],I),h(D,B,I,w)}function h(w,D,B,I){const L=I+1,F=[];for(let H=0;H<=L;H++){F[H]=[];const U=w.clone().lerp(B,H/L),N=D.clone().lerp(B,H/L),Y=L-H;for(let ee=0;ee<=Y;ee++)ee===0&&H===L?F[H][ee]=U:F[H][ee]=U.clone().lerp(N,ee/Y)}for(let H=0;H<L;H++)for(let U=0;U<2*(L-H)-1;U++){const N=Math.floor(U/2);U%2===0?(y(F[H][N+1]),y(F[H+1][N]),y(F[H][N])):(y(F[H][N+1]),y(F[H+1][N+1]),y(F[H+1][N]))}}function p(w){const D=new Z;for(let B=0;B<s.length;B+=3)D.x=s[B+0],D.y=s[B+1],D.z=s[B+2],D.normalize().multiplyScalar(w),s[B+0]=D.x,s[B+1]=D.y,s[B+2]=D.z}function g(){const w=new Z;for(let D=0;D<s.length;D+=3){w.x=s[D+0],w.y=s[D+1],w.z=s[D+2];const B=b(w)/2/Math.PI+.5,I=E(w)/Math.PI+.5;l.push(B,1-I)}M(),_()}function _(){for(let w=0;w<l.length;w+=6){const D=l[w+0],B=l[w+2],I=l[w+4],L=Math.max(D,B,I),F=Math.min(D,B,I);L>.9&&F<.1&&(D<.2&&(l[w+0]+=1),B<.2&&(l[w+2]+=1),I<.2&&(l[w+4]+=1))}}function y(w){s.push(w.x,w.y,w.z)}function x(w,D){const B=w*3;D.x=e[B+0],D.y=e[B+1],D.z=e[B+2]}function M(){const w=new Z,D=new Z,B=new Z,I=new Z,L=new et,F=new et,H=new et;for(let U=0,N=0;U<s.length;U+=9,N+=6){w.set(s[U+0],s[U+1],s[U+2]),D.set(s[U+3],s[U+4],s[U+5]),B.set(s[U+6],s[U+7],s[U+8]),L.set(l[N+0],l[N+1]),F.set(l[N+2],l[N+3]),H.set(l[N+4],l[N+5]),I.copy(w).add(D).add(B).divideScalar(3);const Y=b(I);T(L,N+0,w,Y),T(F,N+2,D,Y),T(H,N+4,B,Y)}}function T(w,D,B,I){I<0&&w.x===1&&(l[D]=w.x-1),B.x===0&&B.z===0&&(l[D]=I/2/Math.PI+.5)}function b(w){return Math.atan2(w.z,-w.x)}function E(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Df(e.vertices,e.indices,e.radius,e.details)}}class rS extends Df{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new rS(e.radius,e.detail)}}const zy=new Z,Hy=new Z,VM=new Z,Gy=new pr;class tB extends Sn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(sd*t),l=e.getIndex(),c=e.getAttribute("position"),h=l?l.count:c.count,p=[0,0,0],g=["a","b","c"],_=new Array(3),y={},x=[];for(let M=0;M<h;M+=3){l?(p[0]=l.getX(M),p[1]=l.getX(M+1),p[2]=l.getX(M+2)):(p[0]=M,p[1]=M+1,p[2]=M+2);const{a:T,b,c:E}=Gy;if(T.fromBufferAttribute(c,p[0]),b.fromBufferAttribute(c,p[1]),E.fromBufferAttribute(c,p[2]),Gy.getNormal(VM),_[0]=`${Math.round(T.x*i)},${Math.round(T.y*i)},${Math.round(T.z*i)}`,_[1]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,_[2]=`${Math.round(E.x*i)},${Math.round(E.y*i)},${Math.round(E.z*i)}`,!(_[0]===_[1]||_[1]===_[2]||_[2]===_[0]))for(let w=0;w<3;w++){const D=(w+1)%3,B=_[w],I=_[D],L=Gy[g[w]],F=Gy[g[D]],H=`${B}_${I}`,U=`${I}_${B}`;U in y&&y[U]?(VM.dot(y[U].normal)<=s&&(x.push(L.x,L.y,L.z),x.push(F.x,F.y,F.z)),y[U]=null):H in y||(y[H]={index0:p[w],index1:p[D],normal:VM.clone()})}}for(const M in y)if(y[M]){const{index0:T,index1:b}=y[M];zy.fromBufferAttribute(c,T),Hy.fromBufferAttribute(c,b),x.push(zy.x,zy.y,zy.z),x.push(Hy.x,Hy.y,Hy.z)}this.setAttribute("position",new Jt(x,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class rd extends ev{constructor(e){super(e),this.uuid=Yr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new ev().fromJSON(i))}return this}}class YN{static triangulate(e,t,n=2){const i=t&&t.length,s=i?t[0]*n:e.length;let l=nB(e,0,s,n,!0);const c=[];if(!l||l.next===l.prev)return c;let h,p,g,_,y,x,M;if(i&&(l=KN(e,t,l,n)),e.length>80*n){h=g=e[0],p=_=e[1];for(let T=n;T<s;T+=n)y=e[T],x=e[T+1],y<h&&(h=y),x<p&&(p=x),y>g&&(g=y),x>_&&(_=x);M=Math.max(g-h,_-p),M=M!==0?32767/M:0}return tv(l,c,n,h,p,M,0),c}}function nB(r,e,t,n,i){let s,l;if(i===oL(r,e,t,n)>0)for(s=e;s<t;s+=n)l=VC(s,r[s],r[s+1],l);else for(s=t-n;s>=e;s-=n)l=VC(s,r[s],r[s+1],l);return l&&oS(l,l.next)&&(iv(l),l=l.next),l}function _d(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(oS(t,t.next)||Ji(t.prev,t,t.next)===0)){if(iv(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function tv(r,e,t,n,i,s,l){if(!r)return;!l&&s&&tL(r,n,i,s);let c=r,h,p;for(;r.prev!==r.next;){if(h=r.prev,p=r.next,s?JN(r,n,i,s):qN(r)){e.push(h.i/t|0),e.push(r.i/t|0),e.push(p.i/t|0),iv(r),r=p.next,c=p.next;continue}if(r=p,r===c){l?l===1?(r=WN(_d(r),e,t),tv(r,e,t,n,i,s,2)):l===2&&jN(r,e,t,n,i,s):tv(_d(r),e,t,n,i,s,1);break}}}function qN(r){const e=r.prev,t=r,n=r.next;if(Ji(e,t,n)>=0)return!1;const i=e.x,s=t.x,l=n.x,c=e.y,h=t.y,p=n.y,g=i<s?i<l?i:l:s<l?s:l,_=c<h?c<p?c:p:h<p?h:p,y=i>s?i>l?i:l:s>l?s:l,x=c>h?c>p?c:p:h>p?h:p;let M=n.next;for(;M!==e;){if(M.x>=g&&M.x<=y&&M.y>=_&&M.y<=x&&em(i,c,s,h,l,p,M.x,M.y)&&Ji(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function JN(r,e,t,n){const i=r.prev,s=r,l=r.next;if(Ji(i,s,l)>=0)return!1;const c=i.x,h=s.x,p=l.x,g=i.y,_=s.y,y=l.y,x=c<h?c<p?c:p:h<p?h:p,M=g<_?g<y?g:y:_<y?_:y,T=c>h?c>p?c:p:h>p?h:p,b=g>_?g>y?g:y:_>y?_:y,E=X1(x,M,e,t,n),w=X1(T,b,e,t,n);let D=r.prevZ,B=r.nextZ;for(;D&&D.z>=E&&B&&B.z<=w;){if(D.x>=x&&D.x<=T&&D.y>=M&&D.y<=b&&D!==i&&D!==l&&em(c,g,h,_,p,y,D.x,D.y)&&Ji(D.prev,D,D.next)>=0||(D=D.prevZ,B.x>=x&&B.x<=T&&B.y>=M&&B.y<=b&&B!==i&&B!==l&&em(c,g,h,_,p,y,B.x,B.y)&&Ji(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;D&&D.z>=E;){if(D.x>=x&&D.x<=T&&D.y>=M&&D.y<=b&&D!==i&&D!==l&&em(c,g,h,_,p,y,D.x,D.y)&&Ji(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;B&&B.z<=w;){if(B.x>=x&&B.x<=T&&B.y>=M&&B.y<=b&&B!==i&&B!==l&&em(c,g,h,_,p,y,B.x,B.y)&&Ji(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function WN(r,e,t){let n=r;do{const i=n.prev,s=n.next.next;!oS(i,s)&&iB(i,n,n.next,s)&&nv(i,s)&&nv(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),iv(n),iv(n.next),n=r=s),n=n.next}while(n!==r);return _d(n)}function jN(r,e,t,n,i,s){let l=r;do{let c=l.next.next;for(;c!==l.prev;){if(l.i!==c.i&&aL(l,c)){let h=aB(l,c);l=_d(l,l.next),h=_d(h,h.next),tv(l,e,t,n,i,s,0),tv(h,e,t,n,i,s,0);return}c=c.next}l=l.next}while(l!==r)}function KN(r,e,t,n){const i=[];let s,l,c,h,p;for(s=0,l=e.length;s<l;s++)c=e[s]*n,h=s<l-1?e[s+1]*n:r.length,p=nB(r,c,h,n,!1),p===p.next&&(p.steiner=!0),i.push(iL(p));for(i.sort(ZN),s=0;s<i.length;s++)t=QN(i[s],t);return t}function ZN(r,e){return r.x-e.x}function QN(r,e){const t=$N(r,e);if(!t)return e;const n=aB(t,r);return _d(n,n.next),_d(t,t.next)}function $N(r,e){let t=e,n=-1/0,i;const s=r.x,l=r.y;do{if(l<=t.y&&l>=t.next.y&&t.next.y!==t.y){const y=t.x+(l-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=s&&y>n&&(n=y,i=t.x<t.next.x?t:t.next,y===s))return i}t=t.next}while(t!==e);if(!i)return null;const c=i,h=i.x,p=i.y;let g=1/0,_;t=i;do s>=t.x&&t.x>=h&&s!==t.x&&em(l<p?s:n,l,h,p,l<p?n:s,l,t.x,t.y)&&(_=Math.abs(l-t.y)/(s-t.x),nv(t,r)&&(_<g||_===g&&(t.x>i.x||t.x===i.x&&eL(i,t)))&&(i=t,g=_)),t=t.next;while(t!==c);return i}function eL(r,e){return Ji(r.prev,r,e.prev)<0&&Ji(e.next,r,r.next)<0}function tL(r,e,t,n){let i=r;do i.z===0&&(i.z=X1(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,nL(i)}function nL(r){let e,t,n,i,s,l,c,h,p=1;do{for(t=r,r=null,s=null,l=0;t;){for(l++,n=t,c=0,e=0;e<p&&(c++,n=n.nextZ,!!n);e++);for(h=p;c>0||h>0&&n;)c!==0&&(h===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,c--):(i=n,n=n.nextZ,h--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,p*=2}while(l>1);return r}function X1(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function iL(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function em(r,e,t,n,i,s,l,c){return(i-l)*(e-c)>=(r-l)*(s-c)&&(r-l)*(n-c)>=(t-l)*(e-c)&&(t-l)*(s-c)>=(i-l)*(n-c)}function aL(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!sL(r,e)&&(nv(r,e)&&nv(e,r)&&rL(r,e)&&(Ji(r.prev,r,e.prev)||Ji(r,e.prev,e))||oS(r,e)&&Ji(r.prev,r,r.next)>0&&Ji(e.prev,e,e.next)>0)}function Ji(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function oS(r,e){return r.x===e.x&&r.y===e.y}function iB(r,e,t,n){const i=ky(Ji(r,e,t)),s=ky(Ji(r,e,n)),l=ky(Ji(t,n,r)),c=ky(Ji(t,n,e));return!!(i!==s&&l!==c||i===0&&Vy(r,t,e)||s===0&&Vy(r,n,e)||l===0&&Vy(t,r,n)||c===0&&Vy(t,e,n))}function Vy(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function ky(r){return r>0?1:r<0?-1:0}function sL(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&iB(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function nv(r,e){return Ji(r.prev,r,r.next)<0?Ji(r,e,r.next)>=0&&Ji(r,r.prev,e)>=0:Ji(r,e,r.prev)<0||Ji(r,r.next,e)<0}function rL(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function aB(r,e){const t=new Y1(r.i,r.x,r.y),n=new Y1(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function VC(r,e,t,n){const i=new Y1(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function iv(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Y1(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function oL(r,e,t,n){let i=0;for(let s=e,l=t-n;s<t;s+=n)i+=(r[l]-r[s])*(r[s+1]+r[l+1]),l=s;return i}class oc{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return oc.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];kC(e),XC(n,e);let l=e.length;t.forEach(kC);for(let h=0;h<t.length;h++)i.push(l),l+=t[h].length,XC(n,t[h]);const c=YN.triangulate(n,i);for(let h=0;h<c.length;h+=3)s.push(c.slice(h,h+3));return s}}function kC(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function XC(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class lS extends Sn{constructor(e=new rd([new et(.5,.5),new et(-.5,.5),new et(-.5,-.5),new et(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let c=0,h=e.length;c<h;c++){const p=e[c];l(p)}this.setAttribute("position",new Jt(i,3)),this.setAttribute("uv",new Jt(s,2)),this.computeVertexNormals();function l(c){const h=[],p=t.curveSegments!==void 0?t.curveSegments:12,g=t.steps!==void 0?t.steps:1,_=t.depth!==void 0?t.depth:1;let y=t.bevelEnabled!==void 0?t.bevelEnabled:!0,x=t.bevelThickness!==void 0?t.bevelThickness:.2,M=t.bevelSize!==void 0?t.bevelSize:x-.1,T=t.bevelOffset!==void 0?t.bevelOffset:0,b=t.bevelSegments!==void 0?t.bevelSegments:3;const E=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:lL;let D,B=!1,I,L,F,H;E&&(D=E.getSpacedPoints(g),B=!0,y=!1,I=E.computeFrenetFrames(g,!1),L=new Z,F=new Z,H=new Z),y||(b=0,x=0,M=0,T=0);const U=c.extractPoints(p);let N=U.shape;const Y=U.holes;if(!oc.isClockWise(N)){N=N.reverse();for(let Je=0,De=Y.length;Je<De;Je++){const j=Y[Je];oc.isClockWise(j)&&(Y[Je]=j.reverse())}}const $=oc.triangulateShape(N,Y),ae=N;for(let Je=0,De=Y.length;Je<De;Je++){const j=Y[Je];N=N.concat(j)}function me(Je,De,j){return De||console.error("THREE.ExtrudeGeometry: vec does not exist"),Je.clone().addScaledVector(De,j)}const Q=N.length,he=$.length;function oe(Je,De,j){let Mt,$e,pe;const at=Je.x-De.x,Lt=Je.y-De.y,ut=j.x-Je.x,W=j.y-Je.y,k=at*at+Lt*Lt,xe=at*W-Lt*ut;if(Math.abs(xe)>Number.EPSILON){const ze=Math.sqrt(k),Ye=Math.sqrt(ut*ut+W*W),ke=De.x-Lt/ze,_t=De.y+at/ze,lt=j.x-W/Ye,yt=j.y+ut/Ye,$t=((lt-ke)*W-(yt-_t)*ut)/(at*W-Lt*ut);Mt=ke+at*$t-Je.x,$e=_t+Lt*$t-Je.y;const st=Mt*Mt+$e*$e;if(st<=2)return new et(Mt,$e);pe=Math.sqrt(st/2)}else{let ze=!1;at>Number.EPSILON?ut>Number.EPSILON&&(ze=!0):at<-Number.EPSILON?ut<-Number.EPSILON&&(ze=!0):Math.sign(Lt)===Math.sign(W)&&(ze=!0),ze?(Mt=-Lt,$e=at,pe=Math.sqrt(k)):(Mt=at,$e=Lt,pe=Math.sqrt(k/2))}return new et(Mt/pe,$e/pe)}const be=[];for(let Je=0,De=ae.length,j=De-1,Mt=Je+1;Je<De;Je++,j++,Mt++)j===De&&(j=0),Mt===De&&(Mt=0),be[Je]=oe(ae[Je],ae[j],ae[Mt]);const P=[];let ue,Ce=be.concat();for(let Je=0,De=Y.length;Je<De;Je++){const j=Y[Je];ue=[];for(let Mt=0,$e=j.length,pe=$e-1,at=Mt+1;Mt<$e;Mt++,pe++,at++)pe===$e&&(pe=0),at===$e&&(at=0),ue[Mt]=oe(j[Mt],j[pe],j[at]);P.push(ue),Ce=Ce.concat(ue)}for(let Je=0;Je<b;Je++){const De=Je/b,j=x*Math.cos(De*Math.PI/2),Mt=M*Math.sin(De*Math.PI/2)+T;for(let $e=0,pe=ae.length;$e<pe;$e++){const at=me(ae[$e],be[$e],Mt);Ve(at.x,at.y,-j)}for(let $e=0,pe=Y.length;$e<pe;$e++){const at=Y[$e];ue=P[$e];for(let Lt=0,ut=at.length;Lt<ut;Lt++){const W=me(at[Lt],ue[Lt],Mt);Ve(W.x,W.y,-j)}}}const Xe=M+T;for(let Je=0;Je<Q;Je++){const De=y?me(N[Je],Ce[Je],Xe):N[Je];B?(F.copy(I.normals[0]).multiplyScalar(De.x),L.copy(I.binormals[0]).multiplyScalar(De.y),H.copy(D[0]).add(F).add(L),Ve(H.x,H.y,H.z)):Ve(De.x,De.y,0)}for(let Je=1;Je<=g;Je++)for(let De=0;De<Q;De++){const j=y?me(N[De],Ce[De],Xe):N[De];B?(F.copy(I.normals[Je]).multiplyScalar(j.x),L.copy(I.binormals[Je]).multiplyScalar(j.y),H.copy(D[Je]).add(F).add(L),Ve(H.x,H.y,H.z)):Ve(j.x,j.y,_/g*Je)}for(let Je=b-1;Je>=0;Je--){const De=Je/b,j=x*Math.cos(De*Math.PI/2),Mt=M*Math.sin(De*Math.PI/2)+T;for(let $e=0,pe=ae.length;$e<pe;$e++){const at=me(ae[$e],be[$e],Mt);Ve(at.x,at.y,_+j)}for(let $e=0,pe=Y.length;$e<pe;$e++){const at=Y[$e];ue=P[$e];for(let Lt=0,ut=at.length;Lt<ut;Lt++){const W=me(at[Lt],ue[Lt],Mt);B?Ve(W.x,W.y+D[g-1].y,D[g-1].x+j):Ve(W.x,W.y,_+j)}}}re(),Ne();function re(){const Je=i.length/3;if(y){let De=0,j=Q*De;for(let Mt=0;Mt<he;Mt++){const $e=$[Mt];tt($e[2]+j,$e[1]+j,$e[0]+j)}De=g+b*2,j=Q*De;for(let Mt=0;Mt<he;Mt++){const $e=$[Mt];tt($e[0]+j,$e[1]+j,$e[2]+j)}}else{for(let De=0;De<he;De++){const j=$[De];tt(j[2],j[1],j[0])}for(let De=0;De<he;De++){const j=$[De];tt(j[0]+Q*g,j[1]+Q*g,j[2]+Q*g)}}n.addGroup(Je,i.length/3-Je,0)}function Ne(){const Je=i.length/3;let De=0;Be(ae,De),De+=ae.length;for(let j=0,Mt=Y.length;j<Mt;j++){const $e=Y[j];Be($e,De),De+=$e.length}n.addGroup(Je,i.length/3-Je,1)}function Be(Je,De){let j=Je.length;for(;--j>=0;){const Mt=j;let $e=j-1;$e<0&&($e=Je.length-1);for(let pe=0,at=g+b*2;pe<at;pe++){const Lt=Q*pe,ut=Q*(pe+1),W=De+Mt+Lt,k=De+$e+Lt,xe=De+$e+ut,ze=De+Mt+ut;wt(W,k,xe,ze)}}}function Ve(Je,De,j){h.push(Je),h.push(De),h.push(j)}function tt(Je,De,j){ht(Je),ht(De),ht(j);const Mt=i.length/3,$e=w.generateTopUV(n,i,Mt-3,Mt-2,Mt-1);Pt($e[0]),Pt($e[1]),Pt($e[2])}function wt(Je,De,j,Mt){ht(Je),ht(De),ht(Mt),ht(De),ht(j),ht(Mt);const $e=i.length/3,pe=w.generateSideWallUV(n,i,$e-6,$e-3,$e-2,$e-1);Pt(pe[0]),Pt(pe[1]),Pt(pe[3]),Pt(pe[1]),Pt(pe[2]),Pt(pe[3])}function ht(Je){i.push(h[Je*3+0]),i.push(h[Je*3+1]),i.push(h[Je*3+2])}function Pt(Je){s.push(Je.x),s.push(Je.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return cL(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,l=e.shapes.length;s<l;s++){const c=t[e.shapes[s]];n.push(c)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new xA[i.type]().fromJSON(i)),new lS(n,e.options)}}const lL={generateTopUV:function(r,e,t,n,i){const s=e[t*3],l=e[t*3+1],c=e[n*3],h=e[n*3+1],p=e[i*3],g=e[i*3+1];return[new et(s,l),new et(c,h),new et(p,g)]},generateSideWallUV:function(r,e,t,n,i,s){const l=e[t*3],c=e[t*3+1],h=e[t*3+2],p=e[n*3],g=e[n*3+1],_=e[n*3+2],y=e[i*3],x=e[i*3+1],M=e[i*3+2],T=e[s*3],b=e[s*3+1],E=e[s*3+2];return Math.abs(c-g)<Math.abs(l-p)?[new et(l,1-h),new et(p,1-_),new et(y,1-M),new et(T,1-E)]:[new et(c,1-h),new et(g,1-_),new et(x,1-M),new et(b,1-E)]}};function cL(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Rv extends Df{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Rv(e.radius,e.detail)}}class wv extends Df{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new wv(e.radius,e.detail)}}class Uf extends Sn{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,l=t/2,c=Math.floor(n),h=Math.floor(i),p=c+1,g=h+1,_=e/c,y=t/h,x=[],M=[],T=[],b=[];for(let E=0;E<g;E++){const w=E*y-l;for(let D=0;D<p;D++){const B=D*_-s;M.push(B,-w,0),T.push(0,0,1),b.push(D/c),b.push(1-E/h)}}for(let E=0;E<h;E++)for(let w=0;w<c;w++){const D=w+p*E,B=w+p*(E+1),I=w+1+p*(E+1),L=w+1+p*E;x.push(D,B,L),x.push(B,I,L)}this.setIndex(x),this.setAttribute("position",new Jt(M,3)),this.setAttribute("normal",new Jt(T,3)),this.setAttribute("uv",new Jt(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Uf(e.width,e.height,e.widthSegments,e.heightSegments)}}class cS extends Sn{constructor(e=.5,t=1,n=32,i=1,s=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:l},n=Math.max(3,n),i=Math.max(1,i);const c=[],h=[],p=[],g=[];let _=e;const y=(t-e)/i,x=new Z,M=new et;for(let T=0;T<=i;T++){for(let b=0;b<=n;b++){const E=s+b/n*l;x.x=_*Math.cos(E),x.y=_*Math.sin(E),h.push(x.x,x.y,x.z),p.push(0,0,1),M.x=(x.x/t+1)/2,M.y=(x.y/t+1)/2,g.push(M.x,M.y)}_+=y}for(let T=0;T<i;T++){const b=T*(n+1);for(let E=0;E<n;E++){const w=E+b,D=w,B=w+n+1,I=w+n+2,L=w+1;c.push(D,B,L),c.push(B,I,L)}}this.setIndex(c),this.setAttribute("position",new Jt(h,3)),this.setAttribute("normal",new Jt(p,3)),this.setAttribute("uv",new Jt(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class uS extends Sn{constructor(e=new rd([new et(0,.5),new et(-.5,-.5),new et(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],s=[],l=[];let c=0,h=0;if(Array.isArray(e)===!1)p(e);else for(let g=0;g<e.length;g++)p(e[g]),this.addGroup(c,h,g),c+=h,h=0;this.setIndex(n),this.setAttribute("position",new Jt(i,3)),this.setAttribute("normal",new Jt(s,3)),this.setAttribute("uv",new Jt(l,2));function p(g){const _=i.length/3,y=g.extractPoints(t);let x=y.shape;const M=y.holes;oc.isClockWise(x)===!1&&(x=x.reverse());for(let b=0,E=M.length;b<E;b++){const w=M[b];oc.isClockWise(w)===!0&&(M[b]=w.reverse())}const T=oc.triangulateShape(x,M);for(let b=0,E=M.length;b<E;b++){const w=M[b];x=x.concat(w)}for(let b=0,E=x.length;b<E;b++){const w=x[b];i.push(w.x,w.y,0),s.push(0,0,1),l.push(w.x,w.y)}for(let b=0,E=T.length;b<E;b++){const w=T[b],D=w[0]+_,B=w[1]+_,I=w[2]+_;n.push(D,B,I),h+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return uL(t,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const l=t[e.shapes[i]];n.push(l)}return new uS(n,e.curveSegments)}}function uL(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class Bv extends Sn{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,l=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:l,thetaLength:c},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const h=Math.min(l+c,Math.PI);let p=0;const g=[],_=new Z,y=new Z,x=[],M=[],T=[],b=[];for(let E=0;E<=n;E++){const w=[],D=E/n;let B=0;E===0&&l===0?B=.5/t:E===n&&h===Math.PI&&(B=-.5/t);for(let I=0;I<=t;I++){const L=I/t;_.x=-e*Math.cos(i+L*s)*Math.sin(l+D*c),_.y=e*Math.cos(l+D*c),_.z=e*Math.sin(i+L*s)*Math.sin(l+D*c),M.push(_.x,_.y,_.z),y.copy(_).normalize(),T.push(y.x,y.y,y.z),b.push(L+B,1-D),w.push(p++)}g.push(w)}for(let E=0;E<n;E++)for(let w=0;w<t;w++){const D=g[E][w+1],B=g[E][w],I=g[E+1][w],L=g[E+1][w+1];(E!==0||l>0)&&x.push(D,B,L),(E!==n-1||h<Math.PI)&&x.push(B,I,L)}this.setIndex(x),this.setAttribute("position",new Jt(M,3)),this.setAttribute("normal",new Jt(T,3)),this.setAttribute("uv",new Jt(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class fS extends Df{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new fS(e.radius,e.detail)}}class hS extends Sn{constructor(e=1,t=.4,n=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s},n=Math.floor(n),i=Math.floor(i);const l=[],c=[],h=[],p=[],g=new Z,_=new Z,y=new Z;for(let x=0;x<=n;x++)for(let M=0;M<=i;M++){const T=M/i*s,b=x/n*Math.PI*2;_.x=(e+t*Math.cos(b))*Math.cos(T),_.y=(e+t*Math.cos(b))*Math.sin(T),_.z=t*Math.sin(b),c.push(_.x,_.y,_.z),g.x=e*Math.cos(T),g.y=e*Math.sin(T),y.subVectors(_,g).normalize(),h.push(y.x,y.y,y.z),p.push(M/i),p.push(x/n)}for(let x=1;x<=n;x++)for(let M=1;M<=i;M++){const T=(i+1)*x+M-1,b=(i+1)*(x-1)+M-1,E=(i+1)*(x-1)+M,w=(i+1)*x+M;l.push(T,b,w),l.push(b,E,w)}this.setIndex(l),this.setAttribute("position",new Jt(c,3)),this.setAttribute("normal",new Jt(h,3)),this.setAttribute("uv",new Jt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class dS extends Sn{constructor(e=1,t=.4,n=64,i=8,s=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:s,q:l},n=Math.floor(n),i=Math.floor(i);const c=[],h=[],p=[],g=[],_=new Z,y=new Z,x=new Z,M=new Z,T=new Z,b=new Z,E=new Z;for(let D=0;D<=n;++D){const B=D/n*s*Math.PI*2;w(B,s,l,e,x),w(B+.01,s,l,e,M),b.subVectors(M,x),E.addVectors(M,x),T.crossVectors(b,E),E.crossVectors(T,b),T.normalize(),E.normalize();for(let I=0;I<=i;++I){const L=I/i*Math.PI*2,F=-t*Math.cos(L),H=t*Math.sin(L);_.x=x.x+(F*E.x+H*T.x),_.y=x.y+(F*E.y+H*T.y),_.z=x.z+(F*E.z+H*T.z),h.push(_.x,_.y,_.z),y.subVectors(_,x).normalize(),p.push(y.x,y.y,y.z),g.push(D/n),g.push(I/i)}}for(let D=1;D<=n;D++)for(let B=1;B<=i;B++){const I=(i+1)*(D-1)+(B-1),L=(i+1)*D+(B-1),F=(i+1)*D+B,H=(i+1)*(D-1)+B;c.push(I,L,H),c.push(L,F,H)}this.setIndex(c),this.setAttribute("position",new Jt(h,3)),this.setAttribute("normal",new Jt(p,3)),this.setAttribute("uv",new Jt(g,2));function w(D,B,I,L,F){const H=Math.cos(D),U=Math.sin(D),N=I/B*D,Y=Math.cos(N);F.x=L*(2+Y)*.5*H,F.y=L*(2+Y)*U*.5,F.z=L*Math.sin(N)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class pS extends Sn{constructor(e=new ob(new Z(-1,-1,0),new Z(-1,1,0),new Z(1,1,0)),t=64,n=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s};const l=e.computeFrenetFrames(t,s);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const c=new Z,h=new Z,p=new et;let g=new Z;const _=[],y=[],x=[],M=[];T(),this.setIndex(M),this.setAttribute("position",new Jt(_,3)),this.setAttribute("normal",new Jt(y,3)),this.setAttribute("uv",new Jt(x,2));function T(){for(let D=0;D<t;D++)b(D);b(s===!1?t:0),w(),E()}function b(D){g=e.getPointAt(D/t,g);const B=l.normals[D],I=l.binormals[D];for(let L=0;L<=i;L++){const F=L/i*Math.PI*2,H=Math.sin(F),U=-Math.cos(F);h.x=U*B.x+H*I.x,h.y=U*B.y+H*I.y,h.z=U*B.z+H*I.z,h.normalize(),y.push(h.x,h.y,h.z),c.x=g.x+n*h.x,c.y=g.y+n*h.y,c.z=g.z+n*h.z,_.push(c.x,c.y,c.z)}}function E(){for(let D=1;D<=t;D++)for(let B=1;B<=i;B++){const I=(i+1)*(D-1)+(B-1),L=(i+1)*D+(B-1),F=(i+1)*D+B,H=(i+1)*(D-1)+B;M.push(I,L,H),M.push(L,F,H)}}function w(){for(let D=0;D<=t;D++)for(let B=0;B<=i;B++)p.x=D/t,p.y=B/i,x.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new pS(new xA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class sB extends Sn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new Z,s=new Z;if(e.index!==null){const l=e.attributes.position,c=e.index;let h=e.groups;h.length===0&&(h=[{start:0,count:c.count,materialIndex:0}]);for(let p=0,g=h.length;p<g;++p){const _=h[p],y=_.start,x=_.count;for(let M=y,T=y+x;M<T;M+=3)for(let b=0;b<3;b++){const E=c.getX(M+b),w=c.getX(M+(b+1)%3);i.fromBufferAttribute(l,E),s.fromBufferAttribute(l,w),YC(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const l=e.attributes.position;for(let c=0,h=l.count/3;c<h;c++)for(let p=0;p<3;p++){const g=3*c+p,_=3*c+(p+1)%3;i.fromBufferAttribute(l,g),s.fromBufferAttribute(l,_),YC(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Jt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function YC(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var qC=Object.freeze({__proto__:null,BoxGeometry:wd,CapsuleGeometry:iS,CircleGeometry:aS,ConeGeometry:sS,CylinderGeometry:Nm,DodecahedronGeometry:rS,EdgesGeometry:tB,ExtrudeGeometry:lS,IcosahedronGeometry:Rv,LatheGeometry:Cv,OctahedronGeometry:wv,PlaneGeometry:Uf,PolyhedronGeometry:Df,RingGeometry:cS,ShapeGeometry:uS,SphereGeometry:Bv,TetrahedronGeometry:fS,TorusGeometry:hS,TorusKnotGeometry:dS,TubeGeometry:pS,WireframeGeometry:sB});class rB extends Ra{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Bt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class oB extends Ar{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class yd extends Ra{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Eo extends yd{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new et(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return yn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Bt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Bt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Bt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class lB extends Ra{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Bt(16777215),this.specular=new Bt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.combine=vv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cB extends Ra{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Bt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class uB extends Ra{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class fB extends Ra{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.combine=vv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cb extends Ra{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=R2,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ub extends Ra{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class hB extends Ra{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Bt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dB extends Bs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Qh(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function pB(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function mB(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function q1(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,l=0;l!==n;++s){const c=t[s]*e;for(let h=0;h!==e;++h)i[l++]=r[c+h]}return i}function fb(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let l=s[n];if(l!==void 0)if(Array.isArray(l))do l=s[n],l!==void 0&&(e.push(s.time),t.push(...l)),s=r[i++];while(s!==void 0);else if(l.toArray!==void 0)do l=s[n],l!==void 0&&(e.push(s.time),l.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do l=s[n],l!==void 0&&(e.push(s.time),t.push(l)),s=r[i++];while(s!==void 0)}function fL(r,e,t,n,i=30){const s=r.clone();s.name=e;const l=[];for(let h=0;h<s.tracks.length;++h){const p=s.tracks[h],g=p.getValueSize(),_=[],y=[];for(let x=0;x<p.times.length;++x){const M=p.times[x]*i;if(!(M<t||M>=n)){_.push(p.times[x]);for(let T=0;T<g;++T)y.push(p.values[x*g+T])}}_.length!==0&&(p.times=Qh(_,p.times.constructor),p.values=Qh(y,p.values.constructor),l.push(p))}s.tracks=l;let c=1/0;for(let h=0;h<s.tracks.length;++h)c>s.tracks[h].times[0]&&(c=s.tracks[h].times[0]);for(let h=0;h<s.tracks.length;++h)s.tracks[h].shift(-1*c);return s.resetDuration(),s}function hL(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,s=e/n;for(let l=0;l<i;++l){const c=t.tracks[l],h=c.ValueTypeName;if(h==="bool"||h==="string")continue;const p=r.tracks.find(function(E){return E.name===c.name&&E.ValueTypeName===h});if(p===void 0)continue;let g=0;const _=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=_/3);let y=0;const x=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=x/3);const M=c.times.length-1;let T;if(s<=c.times[0]){const E=g,w=_-g;T=c.values.slice(E,w)}else if(s>=c.times[M]){const E=M*_+g,w=E+_-g;T=c.values.slice(E,w)}else{const E=c.createInterpolant(),w=g,D=_-g;E.evaluate(s),T=E.resultBuffer.slice(w,D)}h==="quaternion"&&new Ya().fromArray(T).normalize().conjugate().toArray(T);const b=p.times.length;for(let E=0;E<b;++E){const w=E*x+y;if(h==="quaternion")Ya.multiplyQuaternionsFlat(p.values,w,T,0,p.values,w);else{const D=x-y*2;for(let B=0;B<D;++B)p.values[w+B]-=T[B]}}}return r.blendMode=kE,r}const dL={convertArray:Qh,isTypedArray:pB,getKeyframeOrder:mB,sortedArray:q1,flattenJSON:fb,subclip:fL,makeClipAdditive:hL};class Lm{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let l;n:{i:if(!(e<i)){for(let c=n+2;;){if(i===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(s=i,i=t[++n],e<i)break t}l=t.length;break n}if(!(e>=s)){const c=t[1];e<c&&(n=2,s=c);for(let h=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===h)break;if(i=s,s=t[--n-1],e>=s)break t}l=n,n=0;break n}break e}for(;n<l;){const c=n+l>>>1;e<t[c]?l=c:n=c+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let l=0;l!==i;++l)t[l]=n[s+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class gB extends Lm{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:jh,endingEnd:jh}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,l=e+1,c=i[s],h=i[l];if(c===void 0)switch(this.getSettings_().endingStart){case Kh:s=e,c=2*t-n;break;case j0:s=i.length-2,c=t+i[s]-i[s+1];break;default:s=e,c=n}if(h===void 0)switch(this.getSettings_().endingEnd){case Kh:l=e,h=2*n-t;break;case j0:l=1,h=n+i[1]-i[0];break;default:l=e-1,h=t}const p=(n-t)*.5,g=this.valueSize;this._weightPrev=p/(t-c),this._weightNext=p/(h-n),this._offsetPrev=s*g,this._offsetNext=l*g}interpolate_(e,t,n,i){const s=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=e*c,p=h-c,g=this._offsetPrev,_=this._offsetNext,y=this._weightPrev,x=this._weightNext,M=(n-t)/(i-t),T=M*M,b=T*M,E=-y*b+2*y*T-y*M,w=(1+y)*b+(-1.5-2*y)*T+(-.5+y)*M+1,D=(-1-x)*b+(1.5+x)*T+.5*M,B=x*b-x*T;for(let I=0;I!==c;++I)s[I]=E*l[g+I]+w*l[p+I]+D*l[h+I]+B*l[_+I];return s}}class hb extends Lm{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=e*c,p=h-c,g=(n-t)/(i-t),_=1-g;for(let y=0;y!==c;++y)s[y]=l[p+y]*_+l[h+y]*g;return s}}class vB extends Lm{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class gl{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Qh(t,this.TimeBufferType),this.values=Qh(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Qh(e.times,Array),values:Qh(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new vB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new hb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new gB(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case _m:t=this.InterpolantFactoryMethodDiscrete;break;case ym:t=this.InterpolantFactoryMethodLinear;break;case Ax:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _m;case this.InterpolantFactoryMethodLinear:return ym;case this.InterpolantFactoryMethodSmooth:return Ax}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,l=i-1;for(;s!==i&&n[s]<e;)++s;for(;l!==-1&&n[l]>t;)--l;if(++l,s!==0||l!==i){s>=l&&(l=Math.max(l,1),s=l-1);const c=this.getValueSize();this.times=n.slice(s,l),this.values=this.values.slice(s*c,l*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let c=0;c!==s;c++){const h=n[c];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,h),e=!1;break}if(l!==null&&l>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,h,l),e=!1;break}l=h}if(i!==void 0&&pB(i))for(let c=0,h=i.length;c!==h;++c){const p=i[c];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===Ax,s=e.length-1;let l=1;for(let c=1;c<s;++c){let h=!1;const p=e[c],g=e[c+1];if(p!==g&&(c!==1||p!==e[0]))if(i)h=!0;else{const _=c*n,y=_-n,x=_+n;for(let M=0;M!==n;++M){const T=t[_+M];if(T!==t[y+M]||T!==t[x+M]){h=!0;break}}}if(h){if(c!==l){e[l]=e[c];const _=c*n,y=l*n;for(let x=0;x!==n;++x)t[y+x]=t[_+x]}++l}}if(s>0){e[l]=e[s];for(let c=s*n,h=l*n,p=0;p!==n;++p)t[h+p]=t[c+p];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}gl.prototype.TimeBufferType=Float32Array;gl.prototype.ValueBufferType=Float32Array;gl.prototype.DefaultInterpolation=ym;class Bd extends gl{constructor(e,t,n){super(e,t,n)}}Bd.prototype.ValueTypeName="bool";Bd.prototype.ValueBufferType=Array;Bd.prototype.DefaultInterpolation=_m;Bd.prototype.InterpolantFactoryMethodLinear=void 0;Bd.prototype.InterpolantFactoryMethodSmooth=void 0;class db extends gl{}db.prototype.ValueTypeName="color";class xd extends gl{}xd.prototype.ValueTypeName="number";class _B extends Lm{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=(n-t)/(i-t);let p=e*c;for(let g=p+c;p!==g;p+=4)Ya.slerpFlat(s,0,l,p-c,l,p,h);return s}}class Ad extends gl{InterpolantFactoryMethodLinear(e){return new _B(this.times,this.values,this.getValueSize(),e)}}Ad.prototype.ValueTypeName="quaternion";Ad.prototype.InterpolantFactoryMethodSmooth=void 0;class Dd extends gl{constructor(e,t,n){super(e,t,n)}}Dd.prototype.ValueTypeName="string";Dd.prototype.ValueBufferType=Array;Dd.prototype.DefaultInterpolation=_m;Dd.prototype.InterpolantFactoryMethodLinear=void 0;Dd.prototype.InterpolantFactoryMethodSmooth=void 0;class Sd extends gl{}Sd.prototype.ValueTypeName="vector";class Mm{constructor(e="",t=-1,n=[],i=JA){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Yr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let l=0,c=n.length;l!==c;++l)t.push(mL(n[l]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,l=n.length;s!==l;++s)t.push(gl.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,l=[];for(let c=0;c<s;c++){let h=[],p=[];h.push((c+s-1)%s,c,(c+1)%s),p.push(0,1,0);const g=mB(h);h=q1(h,1,g),p=q1(p,1,g),!i&&h[0]===0&&(h.push(s),p.push(p[0])),l.push(new xd(".morphTargetInfluences["+t[c].name+"]",h,p).scale(1/n))}return new this(e,-1,l)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let c=0,h=e.length;c<h;c++){const p=e[c],g=p.name.match(s);if(g&&g.length>1){const _=g[1];let y=i[_];y||(i[_]=y=[]),y.push(p)}}const l=[];for(const c in i)l.push(this.CreateFromMorphTargetSequence(c,i[c],t,n));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(_,y,x,M,T){if(x.length!==0){const b=[],E=[];fb(x,b,E,M),b.length!==0&&T.push(new _(y,b,E))}},i=[],s=e.name||"default",l=e.fps||30,c=e.blendMode;let h=e.length||-1;const p=e.hierarchy||[];for(let _=0;_<p.length;_++){const y=p[_].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const x={};let M;for(M=0;M<y.length;M++)if(y[M].morphTargets)for(let T=0;T<y[M].morphTargets.length;T++)x[y[M].morphTargets[T]]=-1;for(const T in x){const b=[],E=[];for(let w=0;w!==y[M].morphTargets.length;++w){const D=y[M];b.push(D.time),E.push(D.morphTarget===T?1:0)}i.push(new xd(".morphTargetInfluence["+T+"]",b,E))}h=x.length*l}else{const x=".bones["+t[_].name+"]";n(Sd,x+".position",y,"pos",i),n(Ad,x+".quaternion",y,"rot",i),n(Sd,x+".scale",y,"scl",i)}}return i.length===0?null:new this(s,h,i,c)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function pL(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return xd;case"vector":case"vector2":case"vector3":case"vector4":return Sd;case"color":return db;case"quaternion":return Ad;case"bool":case"boolean":return Bd;case"string":return Dd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function mL(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=pL(r.type);if(r.times===void 0){const t=[],n=[];fb(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const su={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class mS{constructor(e,t,n){const i=this;let s=!1,l=0,c=0,h;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(g){c++,s===!1&&i.onStart!==void 0&&i.onStart(g,l,c),s=!0},this.itemEnd=function(g){l++,i.onProgress!==void 0&&i.onProgress(g,l,c),l===c&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(g){i.onError!==void 0&&i.onError(g)},this.resolveURL=function(g){return h?h(g):g},this.setURLModifier=function(g){return h=g,this},this.addHandler=function(g,_){return p.push(g,_),this},this.removeHandler=function(g){const _=p.indexOf(g);return _!==-1&&p.splice(_,2),this},this.getHandler=function(g){for(let _=0,y=p.length;_<y;_+=2){const x=p[_],M=p[_+1];if(x.global&&(x.lastIndex=0),x.test(g))return M}return null}}}const yB=new mS;class ls{constructor(e){this.manager=e!==void 0?e:yB,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ls.DEFAULT_MATERIAL_NAME="__DEFAULT";const jc={};class gL extends Error{constructor(e,t){super(e),this.response=t}}class rs extends ls{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=su.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(jc[e]!==void 0){jc[e].push({onLoad:t,onProgress:n,onError:i});return}jc[e]=[],jc[e].push({onLoad:t,onProgress:n,onError:i});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,h=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const g=jc[e],_=p.body.getReader(),y=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),x=y?parseInt(y):0,M=x!==0;let T=0;const b=new ReadableStream({start(E){w();function w(){_.read().then(({done:D,value:B})=>{if(D)E.close();else{T+=B.byteLength;const I=new ProgressEvent("progress",{lengthComputable:M,loaded:T,total:x});for(let L=0,F=g.length;L<F;L++){const H=g[L];H.onProgress&&H.onProgress(I)}E.enqueue(B),w()}},D=>{E.error(D)})}}});return new Response(b)}else throw new gL(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(h){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(g=>new DOMParser().parseFromString(g,c));case"json":return p.json();default:if(c===void 0)return p.text();{const _=/charset="?([^;"\s]*)"?/i.exec(c),y=_&&_[1]?_[1].toLowerCase():void 0,x=new TextDecoder(y);return p.arrayBuffer().then(M=>x.decode(M))}}}).then(p=>{su.add(e,p);const g=jc[e];delete jc[e];for(let _=0,y=g.length;_<y;_++){const x=g[_];x.onLoad&&x.onLoad(p)}}).catch(p=>{const g=jc[e];if(g===void 0)throw this.manager.itemError(e),p;delete jc[e];for(let _=0,y=g.length;_<y;_++){const x=g[_];x.onError&&x.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class vL extends ls{constructor(e){super(e)}load(e,t,n,i){const s=this,l=new rs(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(h){i?i(h):console.error(h),s.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=Mm.parse(e[n]);t.push(i)}return t}}class _L extends ls{constructor(e){super(e)}load(e,t,n,i){const s=this,l=[],c=new tS,h=new rs(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(s.withCredentials);let p=0;function g(_){h.load(e[_],function(y){const x=s.parse(y,!0);l[_]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},p+=1,p===6&&(x.mipmapCount===1&&(c.minFilter=oi),c.image=l,c.format=x.format,c.needsUpdate=!0,t&&t(c))},n,i)}if(Array.isArray(e))for(let _=0,y=e.length;_<y;++_)g(_);else h.load(e,function(_){const y=s.parse(_,!0);if(y.isCubemap){const x=y.mipmaps.length/y.mipmapCount;for(let M=0;M<x;M++){l[M]={mipmaps:[]};for(let T=0;T<y.mipmapCount;T++)l[M].mipmaps.push(y.mipmaps[M*y.mipmapCount+T]),l[M].format=y.format,l[M].width=y.width,l[M].height=y.height}c.image=l}else c.image.width=y.width,c.image.height=y.height,c.mipmaps=y.mipmaps;y.mipmapCount===1&&(c.minFilter=oi),c.format=y.format,c.needsUpdate=!0,t&&t(c)},n,i);return c}}class av extends ls{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,l=su.get(e);if(l!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(l),s.manager.itemEnd(e)},0),l;const c=$0("img");function h(){g(),su.add(e,this),t&&t(this),s.manager.itemEnd(e)}function p(_){g(),i&&i(_),s.manager.itemError(e),s.manager.itemEnd(e)}function g(){c.removeEventListener("load",h,!1),c.removeEventListener("error",p,!1)}return c.addEventListener("load",h,!1),c.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),s.manager.itemStart(e),c.src=e,c}}class xB extends ls{constructor(e){super(e)}load(e,t,n,i){const s=new Sv;s.colorSpace=is;const l=new av(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let c=0;function h(p){l.load(e[p],function(g){s.images[p]=g,c++,c===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let p=0;p<e.length;++p)h(p);return s}}class pb extends ls{constructor(e){super(e)}load(e,t,n,i){const s=this,l=new hl,c=new rs(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(s.withCredentials),c.load(e,function(h){let p;try{p=s.parse(h)}catch(g){if(i!==void 0)i(g);else{console.error(g);return}}p.image!==void 0?l.image=p.image:p.data!==void 0&&(l.image.width=p.width,l.image.height=p.height,l.image.data=p.data),l.wrapS=p.wrapS!==void 0?p.wrapS:fa,l.wrapT=p.wrapT!==void 0?p.wrapT:fa,l.magFilter=p.magFilter!==void 0?p.magFilter:oi,l.minFilter=p.minFilter!==void 0?p.minFilter:oi,l.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(l.colorSpace=p.colorSpace),p.flipY!==void 0&&(l.flipY=p.flipY),p.format!==void 0&&(l.format=p.format),p.type!==void 0&&(l.type=p.type),p.mipmaps!==void 0&&(l.mipmaps=p.mipmaps,l.minFilter=xo),p.mipmapCount===1&&(l.minFilter=oi),p.generateMipmaps!==void 0&&(l.generateMipmaps=p.generateMipmaps),l.needsUpdate=!0,t&&t(l,p)},n,i),l}}class AB extends ls{constructor(e){super(e)}load(e,t,n,i){const s=new di,l=new av(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(c){s.image=c,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class Of extends Jn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Bt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class SB extends Of{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Jn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Bt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const kM=new sn,JC=new Z,WC=new Z;class mb{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new et(512,512),this.map=null,this.mapPass=null,this.matrix=new sn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Tv,this._frameExtents=new et(1,1),this._viewportCount=1,this._viewports=[new ei(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;JC.setFromMatrixPosition(e.matrixWorld),t.position.copy(JC),WC.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(WC),t.updateMatrixWorld(),kM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kM),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(kM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class yL extends mb{constructor(){super(new sa(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=xm*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class gb extends Of{constructor(e,t,n=0,i=Math.PI/3,s=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Jn.DEFAULT_UP),this.updateMatrix(),this.target=new Jn,this.distance=n,this.angle=i,this.penumbra=s,this.decay=l,this.map=null,this.shadow=new yL}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const jC=new sn,c0=new Z,XM=new Z;class xL extends mb{constructor(){super(new sa(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new et(4,2),this._viewportCount=6,this._viewports=[new ei(2,1,1,1),new ei(0,1,1,1),new ei(3,1,1,1),new ei(1,1,1,1),new ei(3,0,1,1),new ei(1,0,1,1)],this._cubeDirections=[new Z(1,0,0),new Z(-1,0,0),new Z(0,0,1),new Z(0,0,-1),new Z(0,1,0),new Z(0,-1,0)],this._cubeUps=[new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,0,1),new Z(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),c0.setFromMatrixPosition(e.matrixWorld),n.position.copy(c0),XM.copy(n.position),XM.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(XM),n.updateMatrixWorld(),i.makeTranslation(-c0.x,-c0.y,-c0.z),jC.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jC)}}class vb extends Of{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new xL}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class lc extends KA{constructor(e=-1,t=1,n=1,i=-1,s=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,l=n+e,c=i+t,h=i-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=p*this.view.offsetX,l=s+p*this.view.width,c-=g*this.view.offsetY,h=c-g*this.view.height}this.projectionMatrix.makeOrthographic(s,l,c,h,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class AL extends mb{constructor(){super(new lc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class _b extends Of{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Jn.DEFAULT_UP),this.updateMatrix(),this.target=new Jn,this.shadow=new AL}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class MB extends Of{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class EB extends Of{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class bB{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Z)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,s=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*i),t.addScaledVector(l[2],.488603*s),t.addScaledVector(l[3],.488603*n),t.addScaledVector(l[4],1.092548*(n*i)),t.addScaledVector(l[5],1.092548*(i*s)),t.addScaledVector(l[6],.315392*(3*s*s-1)),t.addScaledVector(l[7],1.092548*(n*s)),t.addScaledVector(l[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,s=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*i),t.addScaledVector(l[2],2*.511664*s),t.addScaledVector(l[3],2*.511664*n),t.addScaledVector(l[4],2*.429043*n*i),t.addScaledVector(l[5],2*.429043*i*s),t.addScaledVector(l[6],.743125*s*s-.247708),t.addScaledVector(l[7],2*.429043*n*s),t.addScaledVector(l[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-i*i)}}class TB extends Of{constructor(e=new bB,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class gS extends ls{constructor(e){super(e),this.textures={}}load(e,t,n,i){const s=this,l=new rs(s.manager);l.setPath(s.path),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(h){i?i(h):console.error(h),s.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Bt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const l=e.uniforms[s];switch(i.uniforms[s]={},l.type){case"t":i.uniforms[s].value=n(l.value);break;case"c":i.uniforms[s].value=new Bt().setHex(l.value);break;case"v2":i.uniforms[s].value=new et().fromArray(l.value);break;case"v3":i.uniforms[s].value=new Z().fromArray(l.value);break;case"v4":i.uniforms[s].value=new ei().fromArray(l.value);break;case"m3":i.uniforms[s].value=new An().fromArray(l.value);break;case"m4":i.uniforms[s].value=new sn().fromArray(l.value);break;default:i.uniforms[s].value=l.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new et().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new et().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return gS.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:rB,SpriteMaterial:ZE,RawShaderMaterial:oB,ShaderMaterial:Ar,PointsMaterial:eS,MeshPhysicalMaterial:Eo,MeshStandardMaterial:yd,MeshPhongMaterial:lB,MeshToonMaterial:cB,MeshNormalMaterial:uB,MeshLambertMaterial:fB,MeshDepthMaterial:cb,MeshDistanceMaterial:ub,MeshBasicMaterial:mr,MeshMatcapMaterial:hB,LineDashedMaterial:dB,LineBasicMaterial:Bs,Material:Ra};return new t[e]}}class yf{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class CB extends Sn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class RB extends ls{constructor(e){super(e)}load(e,t,n,i){const s=this,l=new rs(s.manager);l.setPath(s.path),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(h){i?i(h):console.error(h),s.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(x,M){if(t[M]!==void 0)return t[M];const b=x.interleavedBuffers[M],E=s(x,b.buffer),w=$p(b.type,E),D=new Ev(w,b.stride);return D.uuid=b.uuid,t[M]=D,D}function s(x,M){if(n[M]!==void 0)return n[M];const b=x.arrayBuffers[M],E=new Uint32Array(b).buffer;return n[M]=E,E}const l=e.isInstancedBufferGeometry?new CB:new Sn,c=e.data.index;if(c!==void 0){const x=$p(c.type,c.array);l.setIndex(new ti(x,1))}const h=e.data.attributes;for(const x in h){const M=h[x];let T;if(M.isInterleavedBufferAttribute){const b=i(e.data,M.data);T=new Tf(b,M.itemSize,M.offset,M.normalized)}else{const b=$p(M.type,M.array),E=M.isInstancedBufferAttribute?vd:ti;T=new E(b,M.itemSize,M.normalized)}M.name!==void 0&&(T.name=M.name),M.usage!==void 0&&T.setUsage(M.usage),l.setAttribute(x,T)}const p=e.data.morphAttributes;if(p)for(const x in p){const M=p[x],T=[];for(let b=0,E=M.length;b<E;b++){const w=M[b];let D;if(w.isInterleavedBufferAttribute){const B=i(e.data,w.data);D=new Tf(B,w.itemSize,w.offset,w.normalized)}else{const B=$p(w.type,w.array);D=new ti(B,w.itemSize,w.normalized)}w.name!==void 0&&(D.name=w.name),T.push(D)}l.morphAttributes[x]=T}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const _=e.data.groups||e.data.drawcalls||e.data.offsets;if(_!==void 0)for(let x=0,M=_.length;x!==M;++x){const T=_[x];l.addGroup(T.start,T.count,T.materialIndex)}const y=e.data.boundingSphere;if(y!==void 0){const x=new Z;y.center!==void 0&&x.fromArray(y.center),l.boundingSphere=new ss(x,y.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class SL extends ls{constructor(e){super(e)}load(e,t,n,i){const s=this,l=this.path===""?yf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const c=new rs(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){let p=null;try{p=JSON.parse(h)}catch(_){i!==void 0&&i(_),console.error("THREE:ObjectLoader: Can't parse "+e+".",_.message);return}const g=p.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(p,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?yf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new rs(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const l=await s.loadAsync(e,t),c=JSON.parse(l),h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(c)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),l=this.parseImages(e.images,function(){t!==void 0&&t(p)}),c=this.parseTextures(e.textures,l),h=this.parseMaterials(e.materials,c),p=this.parseObject(e.object,s,h,c,n),g=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,g),this.bindLightTargets(p),t!==void 0){let _=!1;for(const y in l)if(l[y].data instanceof HTMLImageElement){_=!0;break}_===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,i,c,l,t),p=this.parseSkeletons(e.skeletons,h);return this.bindSkeletons(h,p),this.bindLightTargets(h),h}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const s=new rd().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,l=e.length;s<l;s++){const c=new bv().fromJSON(e[s],i);n[c.uuid]=c}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new RB;for(let s=0,l=e.length;s<l;s++){let c;const h=e[s];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":c=i.parse(h);break;default:h.type in qC?c=qC[h.type].fromJSON(h,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${h.type}"`)}c.uuid=h.uuid,h.name!==void 0&&(c.name=h.name),h.userData!==void 0&&(c.userData=h.userData),n[h.uuid]=c}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const s=new gS;s.setTextures(t);for(let l=0,c=e.length;l<c;l++){const h=e[l];n[h.uuid]===void 0&&(n[h.uuid]=s.parse(h)),i[h.uuid]=n[h.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],s=Mm.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const n=this,i={};let s;function l(h){return n.manager.itemStart(h),s.load(h,function(){n.manager.itemEnd(h)},void 0,function(){n.manager.itemError(h),n.manager.itemEnd(h)})}function c(h){if(typeof h=="string"){const p=h,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;return l(g)}else return h.data?{data:$p(h.type,h.data),width:h.width,height:h.height}:null}if(e!==void 0&&e.length>0){const h=new mS(t);s=new av(h),s.setCrossOrigin(this.crossOrigin);for(let p=0,g=e.length;p<g;p++){const _=e[p],y=_.url;if(Array.isArray(y)){const x=[];for(let M=0,T=y.length;M<T;M++){const b=y[M],E=c(b);E!==null&&(E instanceof HTMLImageElement?x.push(E):x.push(new hl(E.data,E.width,E.height)))}i[_.uuid]=new hf(x)}else{const x=c(_.url);i[_.uuid]=new hf(x)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function s(l){if(typeof l=="string"){const c=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await i.loadAsync(h)}else return l.data?{data:$p(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){i=new av(this.manager),i.setCrossOrigin(this.crossOrigin);for(let l=0,c=e.length;l<c;l++){const h=e[l],p=h.url;if(Array.isArray(p)){const g=[];for(let _=0,y=p.length;_<y;_++){const x=p[_],M=await s(x);M!==null&&(M instanceof HTMLImageElement?g.push(M):g.push(new hl(M.data,M.width,M.height)))}n[h.uuid]=new hf(g)}else{const g=await s(h.url);n[h.uuid]=new hf(g)}}}return n}parseTextures(e,t){function n(s,l){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),l[s])}const i={};if(e!==void 0)for(let s=0,l=e.length;s<l;s++){const c=e[s];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);const h=t[c.image],p=h.data;let g;Array.isArray(p)?(g=new Sv,p.length===6&&(g.needsUpdate=!0)):(p&&p.data?g=new hl:g=new di,p&&(g.needsUpdate=!0)),g.source=h,g.uuid=c.uuid,c.name!==void 0&&(g.name=c.name),c.mapping!==void 0&&(g.mapping=n(c.mapping,ML)),c.channel!==void 0&&(g.channel=c.channel),c.offset!==void 0&&g.offset.fromArray(c.offset),c.repeat!==void 0&&g.repeat.fromArray(c.repeat),c.center!==void 0&&g.center.fromArray(c.center),c.rotation!==void 0&&(g.rotation=c.rotation),c.wrap!==void 0&&(g.wrapS=n(c.wrap[0],KC),g.wrapT=n(c.wrap[1],KC)),c.format!==void 0&&(g.format=c.format),c.internalFormat!==void 0&&(g.internalFormat=c.internalFormat),c.type!==void 0&&(g.type=c.type),c.colorSpace!==void 0&&(g.colorSpace=c.colorSpace),c.minFilter!==void 0&&(g.minFilter=n(c.minFilter,ZC)),c.magFilter!==void 0&&(g.magFilter=n(c.magFilter,ZC)),c.anisotropy!==void 0&&(g.anisotropy=c.anisotropy),c.flipY!==void 0&&(g.flipY=c.flipY),c.generateMipmaps!==void 0&&(g.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(g.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(g.compareFunction=c.compareFunction),c.userData!==void 0&&(g.userData=c.userData),i[c.uuid]=g}return i}parseObject(e,t,n,i,s){let l;function c(y){return t[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",y),t[y]}function h(y){if(y!==void 0){if(Array.isArray(y)){const x=[];for(let M=0,T=y.length;M<T;M++){const b=y[M];n[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),x.push(n[b])}return x}return n[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),n[y]}}function p(y){return i[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",y),i[y]}let g,_;switch(e.type){case"Scene":l=new Mv,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new Bt(e.background):l.background=p(e.background)),e.environment!==void 0&&(l.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new QA(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new ZA(e.fog.color,e.fog.density)),e.fog.name!==""&&(l.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&l.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(l.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&l.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":l=new sa(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new lc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new MB(e.color,e.intensity);break;case"DirectionalLight":l=new _b(e.color,e.intensity),l.target=e.target||"";break;case"PointLight":l=new vb(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new EB(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new gb(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),l.target=e.target||"";break;case"HemisphereLight":l=new SB(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new TB().fromJSON(e);break;case"SkinnedMesh":g=c(e.geometry),_=h(e.material),l=new QE(g,_),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":g=c(e.geometry),_=h(e.material),l=new Pi(g,_);break;case"InstancedMesh":g=c(e.geometry),_=h(e.material);const y=e.count,x=e.instanceMatrix,M=e.instanceColor;l=new $E(g,_,y),l.instanceMatrix=new vd(new Float32Array(x.array),16),M!==void 0&&(l.instanceColor=new vd(new Float32Array(M.array),M.itemSize));break;case"BatchedMesh":g=c(e.geometry),_=h(e.material),l=new W2(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,_),l.geometry=g,l.perObjectFrustumCulled=e.perObjectFrustumCulled,l.sortObjects=e.sortObjects,l._drawRanges=e.drawRanges,l._reservedRanges=e.reservedRanges,l._visibility=e.visibility,l._active=e.active,l._bounds=e.bounds.map(T=>{const b=new Rs;b.min.fromArray(T.boxMin),b.max.fromArray(T.boxMax);const E=new ss;return E.radius=T.sphereRadius,E.center.fromArray(T.sphereCenter),{boxInitialized:T.boxInitialized,box:b,sphereInitialized:T.sphereInitialized,sphere:E}}),l._maxInstanceCount=e.maxInstanceCount,l._maxVertexCount=e.maxVertexCount,l._maxIndexCount=e.maxIndexCount,l._geometryInitialized=e.geometryInitialized,l._geometryCount=e.geometryCount,l._matricesTexture=p(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(l._colorsTexture=p(e.colorsTexture.uuid));break;case"LOD":l=new J2;break;case"Line":l=new uu(c(e.geometry),h(e.material));break;case"LineLoop":l=new eb(c(e.geometry),h(e.material));break;case"LineSegments":l=new pl(c(e.geometry),h(e.material));break;case"PointCloud":case"Points":l=new tb(c(e.geometry),h(e.material));break;case"Sprite":l=new q2(h(e.material));break;case"Group":l=new au;break;case"Bone":l=new $A;break;default:l=new Jn}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(l.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let x=0;x<y.length;x++)l.add(this.parseObject(y[x],t,n,i,s))}if(e.animations!==void 0){const y=e.animations;for(let x=0;x<y.length;x++){const M=y[x];l.animations.push(s[M])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const y=e.levels;for(let x=0;x<y.length;x++){const M=y[x],T=l.getObjectByProperty("uuid",M.object);T!==void 0&&l.addLevel(T,M.distance,M.hysteresis)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);i!==void 0?t.target=i:t.target=new Jn}})}}const ML={UVMapping:Mf,CubeReflectionMapping:dc,CubeRefractionMapping:Ef,EquirectangularReflectionMapping:mm,EquirectangularRefractionMapping:W0,CubeUVReflectionMapping:Om},KC={RepeatWrapping:bf,ClampToEdgeWrapping:fa,MirroredRepeatWrapping:gm},ZC={NearestFilter:Xa,NearestMipmapNearestFilter:HA,NearestMipmapLinearFilter:Wh,LinearFilter:oi,LinearMipmapNearestFilter:sm,LinearMipmapLinearFilter:xo};class wB extends ls{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,l=su.get(e);if(l!==void 0){if(s.manager.itemStart(e),l.then){l.then(p=>{t&&t(p),s.manager.itemEnd(e)}).catch(p=>{i&&i(p)});return}return setTimeout(function(){t&&t(l),s.manager.itemEnd(e)},0),l}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader;const h=fetch(e,c).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(p){return su.add(e,p),t&&t(p),s.manager.itemEnd(e),p}).catch(function(p){i&&i(p),su.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});su.add(e,h),s.manager.itemStart(e)}}let Xy;class yb{static getContext(){return Xy===void 0&&(Xy=new(window.AudioContext||window.webkitAudioContext)),Xy}static setContext(e){Xy=e}}class EL extends ls{constructor(e){super(e)}load(e,t,n,i){const s=this,l=new rs(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(h){try{const p=h.slice(0);yb.getContext().decodeAudioData(p,function(_){t(_)}).catch(c)}catch(p){c(p)}},n,i);function c(h){i?i(h):console.error(h),s.manager.itemError(e)}}}const QC=new sn,$C=new sn,wh=new sn;class bL{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new sa,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new sa,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,wh.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,l=t.near*Math.tan(sd*t.fov*.5)/t.zoom;let c,h;$C.elements[12]=-i,QC.elements[12]=i,c=-l*t.aspect+s,h=l*t.aspect+s,wh.elements[0]=2*t.near/(h-c),wh.elements[8]=(h+c)/(h-c),this.cameraL.projectionMatrix.copy(wh),c=-l*t.aspect-s,h=l*t.aspect-s,wh.elements[0]=2*t.near/(h-c),wh.elements[8]=(h+c)/(h-c),this.cameraR.projectionMatrix.copy(wh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply($C),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(QC)}}class BB extends sa{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class xb{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=eR(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=eR();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function eR(){return performance.now()}const Bh=new Z,tR=new Ya,TL=new Z,Dh=new Z;class CL extends Jn{constructor(){super(),this.type="AudioListener",this.context=yb.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new xb}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Bh,tR,TL),Dh.set(0,0,-1).applyQuaternion(tR),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Bh.x,i),t.positionY.linearRampToValueAtTime(Bh.y,i),t.positionZ.linearRampToValueAtTime(Bh.z,i),t.forwardX.linearRampToValueAtTime(Dh.x,i),t.forwardY.linearRampToValueAtTime(Dh.y,i),t.forwardZ.linearRampToValueAtTime(Dh.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(Bh.x,Bh.y,Bh.z),t.setOrientation(Dh.x,Dh.y,Dh.z,n.x,n.y,n.z)}}class DB extends Jn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Uh=new Z,nR=new Ya,RL=new Z,Oh=new Z;class wL extends DB{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Uh,nR,RL),Oh.set(0,0,1).applyQuaternion(nR);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Uh.x,n),t.positionY.linearRampToValueAtTime(Uh.y,n),t.positionZ.linearRampToValueAtTime(Uh.z,n),t.orientationX.linearRampToValueAtTime(Oh.x,n),t.orientationY.linearRampToValueAtTime(Oh.y,n),t.orientationZ.linearRampToValueAtTime(Oh.z,n)}else t.setPosition(Uh.x,Uh.y,Uh.z),t.setOrientation(Oh.x,Oh.y,Oh.z)}}class BL{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class UB{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,l;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let l=this.cumulativeWeight;if(l===0){for(let c=0;c!==i;++c)n[s+c]=n[c];l=t}else{l+=t;const c=t/l;this._mixBufferRegion(n,s,0,c,i)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,l=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const h=t*this._origIndex;this._mixBufferRegion(n,i,h,1-s,t)}l>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let h=t,p=t+t;h!==p;++h)if(n[h]!==n[h+t]){c.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,l=i;s!==l;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let l=0;l!==s;++l)e[t+l]=e[n+l]}_slerp(e,t,n,i){Ya.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const l=this._workIndex*s;Ya.multiplyQuaternionsFlat(e,l,e,t,e,n),Ya.slerpFlat(e,t,e,t,e,l,i)}_lerp(e,t,n,i,s){const l=1-i;for(let c=0;c!==s;++c){const h=t+c;e[h]=e[h]*l+e[n+c]*i}}_lerpAdditive(e,t,n,i,s){for(let l=0;l!==s;++l){const c=t+l;e[c]=e[c]+e[n+l]*i}}}const Ab="\\[\\]\\.:\\/",DL=new RegExp("["+Ab+"]","g"),Sb="[^"+Ab+"]",UL="[^"+Ab.replace("\\.","")+"]",OL=/((?:WC+[\/:])*)/.source.replace("WC",Sb),NL=/(WCOD+)?/.source.replace("WCOD",UL),LL=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Sb),IL=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Sb),PL=new RegExp("^"+OL+NL+LL+IL+"$"),FL=["material","materials","bones","map"];class zL{constructor(e,t,n){const i=n||Kn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Kn{constructor(e,t,n){this.path=t,this.parsedPath=n||Kn.parseTrackName(t),this.node=Kn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Kn.Composite(e,t,n):new Kn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(DL,"")}static parseTrackName(e){const t=PL.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);FL.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let l=0;l<s.length;l++){const c=s[l];if(c.name===t||c.uuid===t)return c;const h=n(c.children);if(h)return h}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Kn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let p=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let g=0;g<e.length;g++)if(e[g].name===p){p=g;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(p!==void 0){if(e[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const l=e[i];if(l===void 0){const p=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+i+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?c=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=s}else l.fromArray!==void 0&&l.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=i;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Kn.Composite=zL;Kn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Kn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Kn.prototype.GetterByBindingType=[Kn.prototype._getValue_direct,Kn.prototype._getValue_array,Kn.prototype._getValue_arrayElement,Kn.prototype._getValue_toArray];Kn.prototype.SetterByBindingTypeAndVersioning=[[Kn.prototype._setValue_direct,Kn.prototype._setValue_direct_setNeedsUpdate,Kn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Kn.prototype._setValue_array,Kn.prototype._setValue_array_setNeedsUpdate,Kn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Kn.prototype._setValue_arrayElement,Kn.prototype._setValue_arrayElement_setNeedsUpdate,Kn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Kn.prototype._setValue_fromArray,Kn.prototype._setValue_fromArray_setNeedsUpdate,Kn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class HL{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Yr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,l=s.length;let c,h=e.length,p=this.nCachedObjects_;for(let g=0,_=arguments.length;g!==_;++g){const y=arguments[g],x=y.uuid;let M=t[x];if(M===void 0){M=h++,t[x]=M,e.push(y);for(let T=0,b=l;T!==b;++T)s[T].push(new Kn(y,n[T],i[T]))}else if(M<p){c=e[M];const T=--p,b=e[T];t[b.uuid]=M,e[M]=b,t[x]=T,e[T]=y;for(let E=0,w=l;E!==w;++E){const D=s[E],B=D[T];let I=D[M];D[M]=B,I===void 0&&(I=new Kn(y,n[E],i[E])),D[T]=I}}else e[M]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let l=0,c=arguments.length;l!==c;++l){const h=arguments[l],p=h.uuid,g=t[p];if(g!==void 0&&g>=s){const _=s++,y=e[_];t[y.uuid]=g,e[g]=y,t[p]=_,e[_]=h;for(let x=0,M=i;x!==M;++x){const T=n[x],b=T[_],E=T[g];T[g]=b,T[_]=E}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,l=e.length;for(let c=0,h=arguments.length;c!==h;++c){const p=arguments[c],g=p.uuid,_=t[g];if(_!==void 0)if(delete t[g],_<s){const y=--s,x=e[y],M=--l,T=e[M];t[x.uuid]=_,e[_]=x,t[T.uuid]=y,e[y]=T,e.pop();for(let b=0,E=i;b!==E;++b){const w=n[b],D=w[y],B=w[M];w[_]=D,w[y]=B,w.pop()}}else{const y=--l,x=e[y];y>0&&(t[x.uuid]=_),e[_]=x,e.pop();for(let M=0,T=i;M!==T;++M){const b=n[M];b[_]=b[y],b.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const s=this._bindings;if(i!==void 0)return s[i];const l=this._paths,c=this._parsedPaths,h=this._objects,p=h.length,g=this.nCachedObjects_,_=new Array(p);i=s.length,n[e]=i,l.push(e),c.push(t),s.push(_);for(let y=g,x=h.length;y!==x;++y){const M=h[y];_[y]=new Kn(M,e,t)}return _}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,s=this._parsedPaths,l=this._bindings,c=l.length-1,h=l[c],p=e[c];t[p]=n,l[n]=h,l.pop(),s[n]=s[c],s.pop(),i[n]=i[c],i.pop()}}}class OB{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,l=s.length,c=new Array(l),h={endingStart:jh,endingEnd:jh};for(let p=0;p!==l;++p){const g=s[p].createInterpolant(null);c[p]=g,g.settings=h}this._interpolantSettings=h,this._interpolants=c,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=b2,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,s=e._clip.duration,l=s/i,c=i/s;e.warp(1,l,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,l=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=i._lendControlInterpolant(),this._timeScaleInterpolant=c);const h=c.parameterPositions,p=c.sampleValues;return h[0]=s,h[1]=s+n,p[0]=e/l,p[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const h=(e-s)*n;h<0||n===0?t=0:(this._startTime=null,t=n*h)}t*=this._updateTimeScale(e);const l=this._updateTime(t),c=this._updateWeight(e);if(c>0){const h=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case kE:for(let g=0,_=h.length;g!==_;++g)h[g].evaluate(l),p[g].accumulateAdditive(c);break;case JA:default:for(let g=0,_=h.length;g!==_;++g)h[g].evaluate(l),p[g].accumulate(i,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const l=n===T2;if(e===0)return s===-1?i:l&&(s&1)===1?t-i:i;if(n===E2){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),i>=t||i<0){const c=Math.floor(i/t);i-=t*c,s+=Math.abs(c);const h=this.repetitions-s;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){const p=e<0;this._setEndings(p,!p,l)}else this._setEndings(!1,!1,l);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=i;if(l&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Kh,i.endingEnd=Kh):(e?i.endingStart=this.zeroSlopeAtStart?Kh:jh:i.endingStart=j0,t?i.endingEnd=this.zeroSlopeAtEnd?Kh:jh:i.endingEnd=j0)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let l=this._weightInterpolant;l===null&&(l=i._lendControlInterpolant(),this._weightInterpolant=l);const c=l.parameterPositions,h=l.sampleValues;return c[0]=s,h[0]=t,c[1]=s+e,h[1]=n,this}}const GL=new Float32Array(1);class VL extends gc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,l=e._propertyBindings,c=e._interpolants,h=n.uuid,p=this._bindingsByRootAndName;let g=p[h];g===void 0&&(g={},p[h]=g);for(let _=0;_!==s;++_){const y=i[_],x=y.name;let M=g[x];if(M!==void 0)++M.referenceCount,l[_]=M;else{if(M=l[_],M!==void 0){M._cacheIndex===null&&(++M.referenceCount,this._addInactiveBinding(M,h,x));continue}const T=t&&t._propertyBindings[_].binding.parsedPath;M=new UB(Kn.create(n,x,T),y.ValueTypeName,y.getValueSize()),++M.referenceCount,this._addInactiveBinding(M,h,x),l[_]=M}c[_].resultBuffer=M.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let l=s[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=l;else{const c=l.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=i.length,i.push(e),l.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,l=this._actionsByClip,c=l[s],h=c.knownActions,p=h[h.length-1],g=e._byClipCacheIndex;p._byClipCacheIndex=g,h[g]=p,h.pop(),e._byClipCacheIndex=null;const _=c.actionByRoot,y=(e._localRoot||this._root).uuid;delete _[y],h.length===0&&delete l[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let l=i[t];l===void 0&&(l={},i[t]=l),l[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,l=this._bindingsByRootAndName,c=l[i],h=t[t.length-1],p=e._cacheIndex;h._cacheIndex=p,t[p]=h,t.pop(),delete c[s],Object.keys(c).length===0&&delete l[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new hb(new Float32Array(2),new Float32Array(2),1,GL),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let l=typeof e=="string"?Mm.findByName(i,e):e;const c=l!==null?l.uuid:e,h=this._actionsByClip[c];let p=null;if(n===void 0&&(l!==null?n=l.blendMode:n=JA),h!==void 0){const _=h.actionByRoot[s];if(_!==void 0&&_.blendMode===n)return _;p=h.knownActions[0],l===null&&(l=p._clip)}if(l===null)return null;const g=new OB(this,l,t,n);return this._bindAction(g,p),this._addInactiveAction(g,c,s),g}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?Mm.findByName(n,e):e,l=s?s.uuid:e,c=this._actionsByClip[l];return c!==void 0&&c.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),l=this._accuIndex^=1;for(let p=0;p!==n;++p)t[p]._update(i,e,s,l);const c=this._bindings,h=this._nActiveBindings;for(let p=0;p!==h;++p)c[p].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const l=s.knownActions;for(let c=0,h=l.length;c!==h;++c){const p=l[c];this._deactivateAction(p);const g=p._cacheIndex,_=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,_._cacheIndex=g,t[g]=_,t.pop(),this._removeInactiveBindingsForAction(p)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const l in n){const c=n[l].actionByRoot,h=c[t];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const l in s){const c=s[l];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class kL extends WA{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=n,this.texture=new jA(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class XL extends WA{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isRenderTargetArray=!0,this.depth=n,this.texture=new Av(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Mb{constructor(e){this.value=e}clone(){return new Mb(this.value.clone===void 0?this.value:this.value.clone())}}let YL=0;class qL extends gc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:YL++}),this.name="",this.usage=Z0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let l=0;l<s.length;l++)this.uniforms.push(s[l].clone())}return this}clone(){return new this.constructor().copy(this)}}class JL extends Ev{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class WL{constructor(e,t,n,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const iR=new sn;class Eb{constructor(e,t,n=0,i=1/0){this.ray=new Rd(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Am,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return iR.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(iR),this}intersectObject(e,t=!0,n=[]){return J1(e,this,n,t),n.sort(aR),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)J1(e[i],this,n,t);return n.sort(aR),n}}function aR(r,e){return r.distance-e.distance}function J1(r,e,t,n){let i=!0;if(r.layers.test(e.layers)&&r.raycast(e,t)===!1&&(i=!1),i===!0&&n===!0){const s=r.children;for(let l=0,c=s.length;l<c;l++)J1(s[l],e,t,!0)}}class W1{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=yn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(yn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class jL{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class bb{constructor(e,t,n,i){bb.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=i,this}}const sR=new et;class KL{constructor(e=new et(1/0,1/0),t=new et(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=sR.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,sR).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const rR=new Z,Yy=new Z;class ZL{constructor(e=new Z,t=new Z){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){rR.subVectors(e,this.start),Yy.subVectors(this.end,this.start);const n=Yy.dot(Yy);let s=Yy.dot(rR)/n;return t&&(s=yn(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const oR=new Z;class QL extends Jn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Sn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,c=1,h=32;l<h;l++,c++){const p=l/h*Math.PI*2,g=c/h*Math.PI*2;i.push(Math.cos(p),Math.sin(p),1,Math.cos(g),Math.sin(g),1)}n.setAttribute("position",new Jt(i,3));const s=new Bs({fog:!1,toneMapped:!1});this.cone=new pl(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),oR.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(oR),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const of=new Z,qy=new sn,YM=new sn;class $L extends pl{constructor(e){const t=NB(e),n=new Sn,i=[],s=[],l=new Bt(0,0,1),c=new Bt(0,1,0);for(let p=0;p<t.length;p++){const g=t[p];g.parent&&g.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(l.r,l.g,l.b),s.push(c.r,c.g,c.b))}n.setAttribute("position",new Jt(i,3)),n.setAttribute("color",new Jt(s,3));const h=new Bs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,h),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");YM.copy(this.root.matrixWorld).invert();for(let s=0,l=0;s<t.length;s++){const c=t[s];c.parent&&c.parent.isBone&&(qy.multiplyMatrices(YM,c.matrixWorld),of.setFromMatrixPosition(qy),i.setXYZ(l,of.x,of.y,of.z),qy.multiplyMatrices(YM,c.parent.matrixWorld),of.setFromMatrixPosition(qy),i.setXYZ(l+1,of.x,of.y,of.z),l+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function NB(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push(...NB(r.children[t]));return e}class eI extends Pi{constructor(e,t,n){const i=new Bv(t,4,2),s=new mr({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const tI=new Z,lR=new Bt,cR=new Bt;class nI extends Jn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new wv(t);i.rotateY(Math.PI*.5),this.material=new mr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),l=new Float32Array(s.count*3);i.setAttribute("color",new ti(l,3)),this.add(new Pi(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");lR.copy(this.light.color),cR.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const s=n<i/2?lR:cR;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(tI.setFromMatrixPosition(this.light.matrixWorld).negate())}}class iI extends pl{constructor(e=10,t=10,n=4473924,i=8947848){n=new Bt(n),i=new Bt(i);const s=t/2,l=e/t,c=e/2,h=[],p=[];for(let y=0,x=0,M=-c;y<=t;y++,M+=l){h.push(-c,0,M,c,0,M),h.push(M,0,-c,M,0,c);const T=y===s?n:i;T.toArray(p,x),x+=3,T.toArray(p,x),x+=3,T.toArray(p,x),x+=3,T.toArray(p,x),x+=3}const g=new Sn;g.setAttribute("position",new Jt(h,3)),g.setAttribute("color",new Jt(p,3));const _=new Bs({vertexColors:!0,toneMapped:!1});super(g,_),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class aI extends pl{constructor(e=10,t=16,n=8,i=64,s=4473924,l=8947848){s=new Bt(s),l=new Bt(l);const c=[],h=[];if(t>1)for(let _=0;_<t;_++){const y=_/t*(Math.PI*2),x=Math.sin(y)*e,M=Math.cos(y)*e;c.push(0,0,0),c.push(x,0,M);const T=_&1?s:l;h.push(T.r,T.g,T.b),h.push(T.r,T.g,T.b)}for(let _=0;_<n;_++){const y=_&1?s:l,x=e-e/n*_;for(let M=0;M<i;M++){let T=M/i*(Math.PI*2),b=Math.sin(T)*x,E=Math.cos(T)*x;c.push(b,0,E),h.push(y.r,y.g,y.b),T=(M+1)/i*(Math.PI*2),b=Math.sin(T)*x,E=Math.cos(T)*x,c.push(b,0,E),h.push(y.r,y.g,y.b)}}const p=new Sn;p.setAttribute("position",new Jt(c,3)),p.setAttribute("color",new Jt(h,3));const g=new Bs({vertexColors:!0,toneMapped:!1});super(p,g),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const uR=new Z,Jy=new Z,fR=new Z;class sI extends Jn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Sn;i.setAttribute("position",new Jt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Bs({fog:!1,toneMapped:!1});this.lightPlane=new uu(i,s),this.add(this.lightPlane),i=new Sn,i.setAttribute("position",new Jt([0,0,0,0,0,1],3)),this.targetLine=new uu(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),uR.setFromMatrixPosition(this.light.matrixWorld),Jy.setFromMatrixPosition(this.light.target.matrixWorld),fR.subVectors(Jy,uR),this.lightPlane.lookAt(Jy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Jy),this.targetLine.scale.z=fR.length()}}const Wy=new Z,aa=new KA;class rI extends pl{constructor(e){const t=new Sn,n=new Bs({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],l={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(M,T){h(M),h(T)}function h(M){i.push(0,0,0),s.push(0,0,0),l[M]===void 0&&(l[M]=[]),l[M].push(i.length/3-1)}t.setAttribute("position",new Jt(i,3)),t.setAttribute("color",new Jt(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const p=new Bt(16755200),g=new Bt(16711680),_=new Bt(43775),y=new Bt(16777215),x=new Bt(3355443);this.setColors(p,g,_,y,x)}setColors(e,t,n,i,s){const c=this.geometry.getAttribute("color");c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,n.r,n.g,n.b),c.setXYZ(33,n.r,n.g,n.b),c.setXYZ(34,n.r,n.g,n.b),c.setXYZ(35,n.r,n.g,n.b),c.setXYZ(36,n.r,n.g,n.b),c.setXYZ(37,n.r,n.g,n.b),c.setXYZ(38,i.r,i.g,i.b),c.setXYZ(39,i.r,i.g,i.b),c.setXYZ(40,s.r,s.g,s.b),c.setXYZ(41,s.r,s.g,s.b),c.setXYZ(42,s.r,s.g,s.b),c.setXYZ(43,s.r,s.g,s.b),c.setXYZ(44,s.r,s.g,s.b),c.setXYZ(45,s.r,s.g,s.b),c.setXYZ(46,s.r,s.g,s.b),c.setXYZ(47,s.r,s.g,s.b),c.setXYZ(48,s.r,s.g,s.b),c.setXYZ(49,s.r,s.g,s.b),c.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;aa.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===fl?-1:0;ca("c",t,e,aa,0,0,s),ca("t",t,e,aa,0,0,1),ca("n1",t,e,aa,-1,-1,s),ca("n2",t,e,aa,n,-1,s),ca("n3",t,e,aa,-1,i,s),ca("n4",t,e,aa,n,i,s),ca("f1",t,e,aa,-1,-1,1),ca("f2",t,e,aa,n,-1,1),ca("f3",t,e,aa,-1,i,1),ca("f4",t,e,aa,n,i,1),ca("u1",t,e,aa,n*.7,i*1.1,s),ca("u2",t,e,aa,-1*.7,i*1.1,s),ca("u3",t,e,aa,0,i*2,s),ca("cf1",t,e,aa,-1,0,1),ca("cf2",t,e,aa,n,0,1),ca("cf3",t,e,aa,0,-1,1),ca("cf4",t,e,aa,0,i,1),ca("cn1",t,e,aa,-1,0,s),ca("cn2",t,e,aa,n,0,s),ca("cn3",t,e,aa,0,-1,s),ca("cn4",t,e,aa,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ca(r,e,t,n,i,s,l){Wy.set(i,s,l).unproject(n);const c=e[r];if(c!==void 0){const h=t.getAttribute("position");for(let p=0,g=c.length;p<g;p++)h.setXYZ(c[p],Wy.x,Wy.y,Wy.z)}}const jy=new Rs;class oI extends pl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Sn;s.setIndex(new ti(n,1)),s.setAttribute("position",new ti(i,3)),super(s,new Bs({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&jy.setFromObject(this.object),jy.isEmpty())return;const e=jy.min,t=jy.max,n=this.geometry.attributes.position,i=n.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class lI extends pl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Sn;s.setIndex(new ti(n,1)),s.setAttribute("position",new Jt(i,3)),super(s,new Bs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class cI extends uu{constructor(e,t=1,n=16776960){const i=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new Sn;l.setAttribute("position",new Jt(s,3)),l.computeBoundingSphere(),super(l,new Bs({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],h=new Sn;h.setAttribute("position",new Jt(c,3)),h.computeBoundingSphere(),this.add(new Pi(h,new mr({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const hR=new Z;let Ky,qM;class uI extends Jn{constructor(e=new Z(0,0,1),t=new Z(0,0,0),n=1,i=16776960,s=n*.2,l=s*.2){super(),this.type="ArrowHelper",Ky===void 0&&(Ky=new Sn,Ky.setAttribute("position",new Jt([0,0,0,0,1,0],3)),qM=new Nm(0,.5,1,5,1),qM.translate(0,-.5,0)),this.position.copy(t),this.line=new uu(Ky,new Bs({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Pi(qM,new mr({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{hR.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(hR,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class fI extends pl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Sn;i.setAttribute("position",new Jt(t,3)),i.setAttribute("color",new Jt(n,3));const s=new Bs({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new Bt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class hI{constructor(){this.type="ShapePath",this.color=new Bt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new ev,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,s,l){return this.currentPath.bezierCurveTo(e,t,n,i,s,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(E){const w=[];for(let D=0,B=E.length;D<B;D++){const I=E[D],L=new rd;L.curves=I.curves,w.push(L)}return w}function n(E,w){const D=w.length;let B=!1;for(let I=D-1,L=0;L<D;I=L++){let F=w[I],H=w[L],U=H.x-F.x,N=H.y-F.y;if(Math.abs(N)>Number.EPSILON){if(N<0&&(F=w[L],U=-U,H=w[I],N=-N),E.y<F.y||E.y>H.y)continue;if(E.y===F.y){if(E.x===F.x)return!0}else{const Y=N*(E.x-F.x)-U*(E.y-F.y);if(Y===0)return!0;if(Y<0)continue;B=!B}}else{if(E.y!==F.y)continue;if(H.x<=E.x&&E.x<=F.x||F.x<=E.x&&E.x<=H.x)return!0}}return B}const i=oc.isClockWise,s=this.subPaths;if(s.length===0)return[];let l,c,h;const p=[];if(s.length===1)return c=s[0],h=new rd,h.curves=c.curves,p.push(h),p;let g=!i(s[0].getPoints());g=e?!g:g;const _=[],y=[];let x=[],M=0,T;y[M]=void 0,x[M]=[];for(let E=0,w=s.length;E<w;E++)c=s[E],T=c.getPoints(),l=i(T),l=e?!l:l,l?(!g&&y[M]&&M++,y[M]={s:new rd,p:T},y[M].s.curves=c.curves,g&&M++,x[M]=[]):x[M].push({h:c,p:T[0]});if(!y[0])return t(s);if(y.length>1){let E=!1,w=0;for(let D=0,B=y.length;D<B;D++)_[D]=[];for(let D=0,B=y.length;D<B;D++){const I=x[D];for(let L=0;L<I.length;L++){const F=I[L];let H=!0;for(let U=0;U<y.length;U++)n(F.p,y[U].p)&&(D!==U&&w++,H?(H=!1,_[U].push(F)):E=!0);H&&_[D].push(F)}}w>0&&E===!1&&(x=_)}let b;for(let E=0,w=y.length;E<w;E++){h=y[E].s,p.push(h),b=x[E];for(let D=0,B=b.length;D<B;D++)h.holes.push(b[D].h)}return p}}class dI extends gc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function pI(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2):(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0),r}function mI(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0):(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2),r}function gI(r){return r.repeat.x=1,r.repeat.y=1,r.offset.x=0,r.offset.y=0,r}function j1(r,e,t,n){const i=vI(n);switch(t){case PE:return r*e;case zE:return r*e;case HE:return r*e*2;case yv:return r*e/i.components*i.byteLength;case xv:return r*e/i.components*i.byteLength;case GE:return r*e*2/i.components*i.byteLength;case YA:return r*e*2/i.components*i.byteLength;case FE:return r*e*3/i.components*i.byteLength;case ha:return r*e*4/i.components*i.byteLength;case qA:return r*e*4/i.components*i.byteLength;case T0:case C0:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case R0:case w0:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case qx:case Wx:return Math.max(r,16)*Math.max(e,8)/4;case Yx:case Jx:return Math.max(r,8)*Math.max(e,8)/2;case jx:case Kx:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case Zx:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case Qx:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case $x:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case eA:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case tA:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case nA:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case iA:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case aA:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case sA:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case rA:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case oA:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case lA:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case cA:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case uA:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case fA:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case B0:case hA:case dA:return Math.ceil(r/4)*Math.ceil(e/4)*16;case VE:case pA:return Math.ceil(r/4)*Math.ceil(e/4)*8;case mA:case gA:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function vI(r){switch(r){case xr:case GA:return{byteLength:1,components:1};case vm:case VA:case ka:return{byteLength:2,components:1};case kA:case XA:return{byteLength:2,components:4};case pc:case _v:case ji:return{byteLength:4,components:1};case IE:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}class _I{static contain(e,t){return pI(e,t)}static cover(e,t){return mI(e,t)}static fill(e){return gI(e)}static getByteLength(e,t,n,i){return j1(e,t,n,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:gv}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=gv);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function LB(){let r=null,e=!1,t=null,n=null;function i(s,l){t(s,l),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function yI(r){const e=new WeakMap;function t(c,h){const p=c.array,g=c.usage,_=p.byteLength,y=r.createBuffer();r.bindBuffer(h,y),r.bufferData(h,p,g),c.onUploadCallback();let x;if(p instanceof Float32Array)x=r.FLOAT;else if(p instanceof Uint16Array)c.isFloat16BufferAttribute?x=r.HALF_FLOAT:x=r.UNSIGNED_SHORT;else if(p instanceof Int16Array)x=r.SHORT;else if(p instanceof Uint32Array)x=r.UNSIGNED_INT;else if(p instanceof Int32Array)x=r.INT;else if(p instanceof Int8Array)x=r.BYTE;else if(p instanceof Uint8Array)x=r.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)x=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:y,type:x,bytesPerElement:p.BYTES_PER_ELEMENT,version:c.version,size:_}}function n(c,h,p){const g=h.array,_=h.updateRanges;if(r.bindBuffer(p,c),_.length===0)r.bufferSubData(p,0,g);else{_.sort((x,M)=>x.start-M.start);let y=0;for(let x=1;x<_.length;x++){const M=_[y],T=_[x];T.start<=M.start+M.count+1?M.count=Math.max(M.count,T.start+T.count-M.start):(++y,_[y]=T)}_.length=y+1;for(let x=0,M=_.length;x<M;x++){const T=_[x];r.bufferSubData(p,T.start*g.BYTES_PER_ELEMENT,g,T.start,T.count)}h.clearUpdateRanges()}h.onUploadCallback()}function i(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const h=e.get(c);h&&(r.deleteBuffer(h.buffer),e.delete(c))}function l(c,h){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const g=e.get(c);(!g||g.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const p=e.get(c);if(p===void 0)e.set(c,t(c,h));else if(p.version<c.version){if(p.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(p.buffer,c,h),p.version=c.version}}return{get:i,remove:s,update:l}}var xI=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,AI=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,SI=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,MI=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,EI=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,bI=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,TI=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,CI=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,RI=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,wI=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,BI=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,DI=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,UI=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,OI=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,NI=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,LI=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,II=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,PI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,FI=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,zI=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,HI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,GI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,VI=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,kI=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,XI=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,YI=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,qI=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,JI=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,WI=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,jI=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,KI="gl_FragColor = linearToOutputTexel( gl_FragColor );",ZI=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,QI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,$I=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,eP=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,tP=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,nP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,iP=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,aP=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,sP=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,rP=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,oP=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lP=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,cP=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,uP=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,fP=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,hP=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,dP=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,pP=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,mP=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,gP=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,vP=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,_P=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,yP=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,xP=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,AP=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,SP=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,MP=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,EP=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,bP=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,TP=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,CP=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,RP=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,wP=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,BP=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,DP=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,UP=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,OP=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,NP=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,LP=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,IP=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,PP=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,FP=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,zP=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,HP=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,GP=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,VP=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,kP=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,XP=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,YP=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,qP=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,JP=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,WP=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,jP=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,KP=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ZP=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,QP=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,$P=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,eF=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,tF=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,nF=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,iF=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,aF=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,sF=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,rF=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,oF=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,lF=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,cF=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,uF=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,fF=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,hF=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,dF=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,pF=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,mF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,gF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,vF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,_F=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const yF=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,xF=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,AF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,SF=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,MF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,EF=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bF=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,TF=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,CF=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,RF=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,wF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,BF=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,DF=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,UF=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,OF=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,NF=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LF=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IF=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PF=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,FF=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zF=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,HF=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,GF=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VF=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kF=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,XF=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YF=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qF=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JF=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,WF=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,jF=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KF=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ZF=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,QF=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Cn={alphahash_fragment:xI,alphahash_pars_fragment:AI,alphamap_fragment:SI,alphamap_pars_fragment:MI,alphatest_fragment:EI,alphatest_pars_fragment:bI,aomap_fragment:TI,aomap_pars_fragment:CI,batching_pars_vertex:RI,batching_vertex:wI,begin_vertex:BI,beginnormal_vertex:DI,bsdfs:UI,iridescence_fragment:OI,bumpmap_pars_fragment:NI,clipping_planes_fragment:LI,clipping_planes_pars_fragment:II,clipping_planes_pars_vertex:PI,clipping_planes_vertex:FI,color_fragment:zI,color_pars_fragment:HI,color_pars_vertex:GI,color_vertex:VI,common:kI,cube_uv_reflection_fragment:XI,defaultnormal_vertex:YI,displacementmap_pars_vertex:qI,displacementmap_vertex:JI,emissivemap_fragment:WI,emissivemap_pars_fragment:jI,colorspace_fragment:KI,colorspace_pars_fragment:ZI,envmap_fragment:QI,envmap_common_pars_fragment:$I,envmap_pars_fragment:eP,envmap_pars_vertex:tP,envmap_physical_pars_fragment:hP,envmap_vertex:nP,fog_vertex:iP,fog_pars_vertex:aP,fog_fragment:sP,fog_pars_fragment:rP,gradientmap_pars_fragment:oP,lightmap_pars_fragment:lP,lights_lambert_fragment:cP,lights_lambert_pars_fragment:uP,lights_pars_begin:fP,lights_toon_fragment:dP,lights_toon_pars_fragment:pP,lights_phong_fragment:mP,lights_phong_pars_fragment:gP,lights_physical_fragment:vP,lights_physical_pars_fragment:_P,lights_fragment_begin:yP,lights_fragment_maps:xP,lights_fragment_end:AP,logdepthbuf_fragment:SP,logdepthbuf_pars_fragment:MP,logdepthbuf_pars_vertex:EP,logdepthbuf_vertex:bP,map_fragment:TP,map_pars_fragment:CP,map_particle_fragment:RP,map_particle_pars_fragment:wP,metalnessmap_fragment:BP,metalnessmap_pars_fragment:DP,morphinstance_vertex:UP,morphcolor_vertex:OP,morphnormal_vertex:NP,morphtarget_pars_vertex:LP,morphtarget_vertex:IP,normal_fragment_begin:PP,normal_fragment_maps:FP,normal_pars_fragment:zP,normal_pars_vertex:HP,normal_vertex:GP,normalmap_pars_fragment:VP,clearcoat_normal_fragment_begin:kP,clearcoat_normal_fragment_maps:XP,clearcoat_pars_fragment:YP,iridescence_pars_fragment:qP,opaque_fragment:JP,packing:WP,premultiplied_alpha_fragment:jP,project_vertex:KP,dithering_fragment:ZP,dithering_pars_fragment:QP,roughnessmap_fragment:$P,roughnessmap_pars_fragment:eF,shadowmap_pars_fragment:tF,shadowmap_pars_vertex:nF,shadowmap_vertex:iF,shadowmask_pars_fragment:aF,skinbase_vertex:sF,skinning_pars_vertex:rF,skinning_vertex:oF,skinnormal_vertex:lF,specularmap_fragment:cF,specularmap_pars_fragment:uF,tonemapping_fragment:fF,tonemapping_pars_fragment:hF,transmission_fragment:dF,transmission_pars_fragment:pF,uv_pars_fragment:mF,uv_pars_vertex:gF,uv_vertex:vF,worldpos_vertex:_F,background_vert:yF,background_frag:xF,backgroundCube_vert:AF,backgroundCube_frag:SF,cube_vert:MF,cube_frag:EF,depth_vert:bF,depth_frag:TF,distanceRGBA_vert:CF,distanceRGBA_frag:RF,equirect_vert:wF,equirect_frag:BF,linedashed_vert:DF,linedashed_frag:UF,meshbasic_vert:OF,meshbasic_frag:NF,meshlambert_vert:LF,meshlambert_frag:IF,meshmatcap_vert:PF,meshmatcap_frag:FF,meshnormal_vert:zF,meshnormal_frag:HF,meshphong_vert:GF,meshphong_frag:VF,meshphysical_vert:kF,meshphysical_frag:XF,meshtoon_vert:YF,meshtoon_frag:qF,points_vert:JF,points_frag:WF,shadow_vert:jF,shadow_frag:KF,sprite_vert:ZF,sprite_frag:QF},Ot={common:{diffuse:{value:new Bt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new An},alphaMap:{value:null},alphaMapTransform:{value:new An},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new An}},envmap:{envMap:{value:null},envMapRotation:{value:new An},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new An}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new An}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new An},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new An},normalScale:{value:new et(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new An},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new An}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new An}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new An}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new An},alphaTest:{value:0},uvTransform:{value:new An}},sprite:{diffuse:{value:new Bt(16777215)},opacity:{value:1},center:{value:new et(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new An},alphaMap:{value:null},alphaMapTransform:{value:new An},alphaTest:{value:0}}},cl={basic:{uniforms:Vs([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.fog]),vertexShader:Cn.meshbasic_vert,fragmentShader:Cn.meshbasic_frag},lambert:{uniforms:Vs([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,Ot.lights,{emissive:{value:new Bt(0)}}]),vertexShader:Cn.meshlambert_vert,fragmentShader:Cn.meshlambert_frag},phong:{uniforms:Vs([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,Ot.lights,{emissive:{value:new Bt(0)},specular:{value:new Bt(1118481)},shininess:{value:30}}]),vertexShader:Cn.meshphong_vert,fragmentShader:Cn.meshphong_frag},standard:{uniforms:Vs([Ot.common,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.roughnessmap,Ot.metalnessmap,Ot.fog,Ot.lights,{emissive:{value:new Bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag},toon:{uniforms:Vs([Ot.common,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.gradientmap,Ot.fog,Ot.lights,{emissive:{value:new Bt(0)}}]),vertexShader:Cn.meshtoon_vert,fragmentShader:Cn.meshtoon_frag},matcap:{uniforms:Vs([Ot.common,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,{matcap:{value:null}}]),vertexShader:Cn.meshmatcap_vert,fragmentShader:Cn.meshmatcap_frag},points:{uniforms:Vs([Ot.points,Ot.fog]),vertexShader:Cn.points_vert,fragmentShader:Cn.points_frag},dashed:{uniforms:Vs([Ot.common,Ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Cn.linedashed_vert,fragmentShader:Cn.linedashed_frag},depth:{uniforms:Vs([Ot.common,Ot.displacementmap]),vertexShader:Cn.depth_vert,fragmentShader:Cn.depth_frag},normal:{uniforms:Vs([Ot.common,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,{opacity:{value:1}}]),vertexShader:Cn.meshnormal_vert,fragmentShader:Cn.meshnormal_frag},sprite:{uniforms:Vs([Ot.sprite,Ot.fog]),vertexShader:Cn.sprite_vert,fragmentShader:Cn.sprite_frag},background:{uniforms:{uvTransform:{value:new An},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Cn.background_vert,fragmentShader:Cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new An}},vertexShader:Cn.backgroundCube_vert,fragmentShader:Cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Cn.cube_vert,fragmentShader:Cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Cn.equirect_vert,fragmentShader:Cn.equirect_frag},distanceRGBA:{uniforms:Vs([Ot.common,Ot.displacementmap,{referencePosition:{value:new Z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Cn.distanceRGBA_vert,fragmentShader:Cn.distanceRGBA_frag},shadow:{uniforms:Vs([Ot.lights,Ot.fog,{color:{value:new Bt(0)},opacity:{value:1}}]),vertexShader:Cn.shadow_vert,fragmentShader:Cn.shadow_frag}};cl.physical={uniforms:Vs([cl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new An},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new An},clearcoatNormalScale:{value:new et(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new An},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new An},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new An},sheen:{value:0},sheenColor:{value:new Bt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new An},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new An},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new An},transmissionSamplerSize:{value:new et},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new An},attenuationDistance:{value:0},attenuationColor:{value:new Bt(0)},specularColor:{value:new Bt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new An},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new An},anisotropyVector:{value:new et},anisotropyMap:{value:null},anisotropyMapTransform:{value:new An}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag};const Zy={r:0,b:0,g:0},Nh=new Jr,$F=new sn;function ez(r,e,t,n,i,s,l){const c=new Bt(0);let h=s===!0?0:1,p,g,_=null,y=0,x=null;function M(D){let B=D.isScene===!0?D.background:null;return B&&B.isTexture&&(B=(D.backgroundBlurriness>0?t:e).get(B)),B}function T(D){let B=!1;const I=M(D);I===null?E(c,h):I&&I.isColor&&(E(I,1),B=!0);const L=r.xr.getEnvironmentBlendMode();L==="additive"?n.buffers.color.setClear(0,0,0,1,l):L==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,l),(r.autoClear||B)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function b(D,B){const I=M(B);I&&(I.isCubeTexture||I.mapping===Om)?(g===void 0&&(g=new Pi(new wd(1,1,1),new Ar({name:"BackgroundCubeMaterial",uniforms:Sm(cl.backgroundCube.uniforms),vertexShader:cl.backgroundCube.vertexShader,fragmentShader:cl.backgroundCube.fragmentShader,side:Ks,depthTest:!1,depthWrite:!1,fog:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(L,F,H){this.matrixWorld.copyPosition(H.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(g)),Nh.copy(B.backgroundRotation),Nh.x*=-1,Nh.y*=-1,Nh.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(Nh.y*=-1,Nh.z*=-1),g.material.uniforms.envMap.value=I,g.material.uniforms.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=B.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4($F.makeRotationFromEuler(Nh)),g.material.toneMapped=Yn.getTransfer(I.colorSpace)!==gi,(_!==I||y!==I.version||x!==r.toneMapping)&&(g.material.needsUpdate=!0,_=I,y=I.version,x=r.toneMapping),g.layers.enableAll(),D.unshift(g,g.geometry,g.material,0,0,null)):I&&I.isTexture&&(p===void 0&&(p=new Pi(new Uf(2,2),new Ar({name:"BackgroundMaterial",uniforms:Sm(cl.background.uniforms),vertexShader:cl.background.vertexShader,fragmentShader:cl.background.fragmentShader,side:hc,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(p)),p.material.uniforms.t2D.value=I,p.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,p.material.toneMapped=Yn.getTransfer(I.colorSpace)!==gi,I.matrixAutoUpdate===!0&&I.updateMatrix(),p.material.uniforms.uvTransform.value.copy(I.matrix),(_!==I||y!==I.version||x!==r.toneMapping)&&(p.material.needsUpdate=!0,_=I,y=I.version,x=r.toneMapping),p.layers.enableAll(),D.unshift(p,p.geometry,p.material,0,0,null))}function E(D,B){D.getRGB(Zy,V2(r)),n.buffers.color.setClear(Zy.r,Zy.g,Zy.b,B,l)}function w(){g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return c},setClearColor:function(D,B=1){c.set(D),h=B,E(c,h)},getClearAlpha:function(){return h},setClearAlpha:function(D){h=D,E(c,h)},render:T,addToRenderList:b,dispose:w}}function tz(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),n={},i=y(null);let s=i,l=!1;function c(N,Y,ee,$,ae){let me=!1;const Q=_($,ee,Y);s!==Q&&(s=Q,p(s.object)),me=x(N,$,ee,ae),me&&M(N,$,ee,ae),ae!==null&&e.update(ae,r.ELEMENT_ARRAY_BUFFER),(me||l)&&(l=!1,B(N,Y,ee,$),ae!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(ae).buffer))}function h(){return r.createVertexArray()}function p(N){return r.bindVertexArray(N)}function g(N){return r.deleteVertexArray(N)}function _(N,Y,ee){const $=ee.wireframe===!0;let ae=n[N.id];ae===void 0&&(ae={},n[N.id]=ae);let me=ae[Y.id];me===void 0&&(me={},ae[Y.id]=me);let Q=me[$];return Q===void 0&&(Q=y(h()),me[$]=Q),Q}function y(N){const Y=[],ee=[],$=[];for(let ae=0;ae<t;ae++)Y[ae]=0,ee[ae]=0,$[ae]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:ee,attributeDivisors:$,object:N,attributes:{},index:null}}function x(N,Y,ee,$){const ae=s.attributes,me=Y.attributes;let Q=0;const he=ee.getAttributes();for(const oe in he)if(he[oe].location>=0){const P=ae[oe];let ue=me[oe];if(ue===void 0&&(oe==="instanceMatrix"&&N.instanceMatrix&&(ue=N.instanceMatrix),oe==="instanceColor"&&N.instanceColor&&(ue=N.instanceColor)),P===void 0||P.attribute!==ue||ue&&P.data!==ue.data)return!0;Q++}return s.attributesNum!==Q||s.index!==$}function M(N,Y,ee,$){const ae={},me=Y.attributes;let Q=0;const he=ee.getAttributes();for(const oe in he)if(he[oe].location>=0){let P=me[oe];P===void 0&&(oe==="instanceMatrix"&&N.instanceMatrix&&(P=N.instanceMatrix),oe==="instanceColor"&&N.instanceColor&&(P=N.instanceColor));const ue={};ue.attribute=P,P&&P.data&&(ue.data=P.data),ae[oe]=ue,Q++}s.attributes=ae,s.attributesNum=Q,s.index=$}function T(){const N=s.newAttributes;for(let Y=0,ee=N.length;Y<ee;Y++)N[Y]=0}function b(N){E(N,0)}function E(N,Y){const ee=s.newAttributes,$=s.enabledAttributes,ae=s.attributeDivisors;ee[N]=1,$[N]===0&&(r.enableVertexAttribArray(N),$[N]=1),ae[N]!==Y&&(r.vertexAttribDivisor(N,Y),ae[N]=Y)}function w(){const N=s.newAttributes,Y=s.enabledAttributes;for(let ee=0,$=Y.length;ee<$;ee++)Y[ee]!==N[ee]&&(r.disableVertexAttribArray(ee),Y[ee]=0)}function D(N,Y,ee,$,ae,me,Q){Q===!0?r.vertexAttribIPointer(N,Y,ee,ae,me):r.vertexAttribPointer(N,Y,ee,$,ae,me)}function B(N,Y,ee,$){T();const ae=$.attributes,me=ee.getAttributes(),Q=Y.defaultAttributeValues;for(const he in me){const oe=me[he];if(oe.location>=0){let be=ae[he];if(be===void 0&&(he==="instanceMatrix"&&N.instanceMatrix&&(be=N.instanceMatrix),he==="instanceColor"&&N.instanceColor&&(be=N.instanceColor)),be!==void 0){const P=be.normalized,ue=be.itemSize,Ce=e.get(be);if(Ce===void 0)continue;const Xe=Ce.buffer,re=Ce.type,Ne=Ce.bytesPerElement,Be=re===r.INT||re===r.UNSIGNED_INT||be.gpuType===_v;if(be.isInterleavedBufferAttribute){const Ve=be.data,tt=Ve.stride,wt=be.offset;if(Ve.isInstancedInterleavedBuffer){for(let ht=0;ht<oe.locationSize;ht++)E(oe.location+ht,Ve.meshPerAttribute);N.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=Ve.meshPerAttribute*Ve.count)}else for(let ht=0;ht<oe.locationSize;ht++)b(oe.location+ht);r.bindBuffer(r.ARRAY_BUFFER,Xe);for(let ht=0;ht<oe.locationSize;ht++)D(oe.location+ht,ue/oe.locationSize,re,P,tt*Ne,(wt+ue/oe.locationSize*ht)*Ne,Be)}else{if(be.isInstancedBufferAttribute){for(let Ve=0;Ve<oe.locationSize;Ve++)E(oe.location+Ve,be.meshPerAttribute);N.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let Ve=0;Ve<oe.locationSize;Ve++)b(oe.location+Ve);r.bindBuffer(r.ARRAY_BUFFER,Xe);for(let Ve=0;Ve<oe.locationSize;Ve++)D(oe.location+Ve,ue/oe.locationSize,re,P,ue*Ne,ue/oe.locationSize*Ve*Ne,Be)}}else if(Q!==void 0){const P=Q[he];if(P!==void 0)switch(P.length){case 2:r.vertexAttrib2fv(oe.location,P);break;case 3:r.vertexAttrib3fv(oe.location,P);break;case 4:r.vertexAttrib4fv(oe.location,P);break;default:r.vertexAttrib1fv(oe.location,P)}}}}w()}function I(){H();for(const N in n){const Y=n[N];for(const ee in Y){const $=Y[ee];for(const ae in $)g($[ae].object),delete $[ae];delete Y[ee]}delete n[N]}}function L(N){if(n[N.id]===void 0)return;const Y=n[N.id];for(const ee in Y){const $=Y[ee];for(const ae in $)g($[ae].object),delete $[ae];delete Y[ee]}delete n[N.id]}function F(N){for(const Y in n){const ee=n[Y];if(ee[N.id]===void 0)continue;const $=ee[N.id];for(const ae in $)g($[ae].object),delete $[ae];delete ee[N.id]}}function H(){U(),l=!0,s!==i&&(s=i,p(s.object))}function U(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:c,reset:H,resetDefaultState:U,dispose:I,releaseStatesOfGeometry:L,releaseStatesOfProgram:F,initAttributes:T,enableAttribute:b,disableUnusedAttributes:w}}function nz(r,e,t){let n;function i(p){n=p}function s(p,g){r.drawArrays(n,p,g),t.update(g,n,1)}function l(p,g,_){_!==0&&(r.drawArraysInstanced(n,p,g,_),t.update(g,n,_))}function c(p,g,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,p,0,g,0,_);let x=0;for(let M=0;M<_;M++)x+=g[M];t.update(x,n,1)}function h(p,g,_,y){if(_===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let M=0;M<p.length;M++)l(p[M],g[M],y[M]);else{x.multiDrawArraysInstancedWEBGL(n,p,0,g,0,y,0,_);let M=0;for(let T=0;T<_;T++)M+=g[T]*y[T];t.update(M,n,1)}}this.setMode=i,this.render=s,this.renderInstances=l,this.renderMultiDraw=c,this.renderMultiDrawInstances=h}function iz(r,e,t,n){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");i=r.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function l(F){return!(F!==ha&&n.convert(F)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(F){const H=F===ka&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(F!==xr&&n.convert(F)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&F!==ji&&!H)}function h(F){if(F==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=t.precision!==void 0?t.precision:"highp";const g=h(p);g!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",g,"instead."),p=g);const _=t.logarithmicDepthBuffer===!0,y=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),x=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),M=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),T=r.getParameter(r.MAX_TEXTURE_SIZE),b=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),E=r.getParameter(r.MAX_VERTEX_ATTRIBS),w=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),D=r.getParameter(r.MAX_VARYING_VECTORS),B=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),I=M>0,L=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:h,textureFormatReadable:l,textureTypeReadable:c,precision:p,logarithmicDepthBuffer:_,reverseDepthBuffer:y,maxTextures:x,maxVertexTextures:M,maxTextureSize:T,maxCubemapSize:b,maxAttributes:E,maxVertexUniforms:w,maxVaryings:D,maxFragmentUniforms:B,vertexTextures:I,maxSamples:L}}function az(r){const e=this;let t=null,n=0,i=!1,s=!1;const l=new $c,c=new An,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(_,y){const x=_.length!==0||y||n!==0||i;return i=y,n=_.length,x},this.beginShadows=function(){s=!0,g(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(_,y){t=g(_,y,0)},this.setState=function(_,y,x){const M=_.clippingPlanes,T=_.clipIntersection,b=_.clipShadows,E=r.get(_);if(!i||M===null||M.length===0||s&&!b)s?g(null):p();else{const w=s?0:n,D=w*4;let B=E.clippingState||null;h.value=B,B=g(M,y,D,x);for(let I=0;I!==D;++I)B[I]=t[I];E.clippingState=B,this.numIntersection=T?this.numPlanes:0,this.numPlanes+=w}};function p(){h.value!==t&&(h.value=t,h.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function g(_,y,x,M){const T=_!==null?_.length:0;let b=null;if(T!==0){if(b=h.value,M!==!0||b===null){const E=x+T*4,w=y.matrixWorldInverse;c.getNormalMatrix(w),(b===null||b.length<E)&&(b=new Float32Array(E));for(let D=0,B=x;D!==T;++D,B+=4)l.copy(_[D]).applyMatrix4(w,c),l.normal.toArray(b,B),b[B+3]=l.constant}h.value=b,h.needsUpdate=!0}return e.numPlanes=T,e.numIntersection=0,b}}function sz(r){let e=new WeakMap;function t(l,c){return c===mm?l.mapping=dc:c===W0&&(l.mapping=Ef),l}function n(l){if(l&&l.isTexture){const c=l.mapping;if(c===mm||c===W0)if(e.has(l)){const h=e.get(l).texture;return t(h,l.mapping)}else{const h=l.image;if(h&&h.height>0){const p=new KE(h.height);return p.fromEquirectangularTexture(r,l),e.set(l,p),l.addEventListener("dispose",i),t(p.texture,l.mapping)}else return null}}return l}function i(l){const c=l.target;c.removeEventListener("dispose",i);const h=e.get(c);h!==void 0&&(e.delete(c),h.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const tm=4,dR=[.125,.215,.35,.446,.526,.582],Jh=20,JM=new lc,pR=new Bt;let WM=null,jM=0,KM=0,ZM=!1;const kh=(1+Math.sqrt(5))/2,Xp=1/kh,mR=[new Z(-kh,Xp,0),new Z(kh,Xp,0),new Z(-Xp,0,kh),new Z(Xp,0,kh),new Z(0,kh,-Xp),new Z(0,kh,Xp),new Z(-1,1,-1),new Z(1,1,-1),new Z(-1,1,1),new Z(1,1,1)],rz=new Z;class K1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100,s={}){const{size:l=256,position:c=rz}=s;WM=this._renderer.getRenderTarget(),jM=this._renderer.getActiveCubeFace(),KM=this._renderer.getActiveMipmapLevel(),ZM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(l);const h=this._allocateTargets();return h.depthBuffer=!0,this._sceneToCubeUV(e,n,i,h,c),t>0&&this._blur(h,0,0,t),this._applyPMREM(h),this._cleanup(h),h}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_R(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=vR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(WM,jM,KM),this._renderer.xr.enabled=ZM,e.scissorTest=!1,Qy(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===dc||e.mapping===Ef?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),WM=this._renderer.getRenderTarget(),jM=this._renderer.getActiveCubeFace(),KM=this._renderer.getActiveMipmapLevel(),ZM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:oi,minFilter:oi,generateMipmaps:!1,type:ka,format:ha,colorSpace:dl,depthBuffer:!1},i=gR(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=gR(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=oz(s)),this._blurMaterial=lz(s,e,t)}return i}_compileMaterial(e){const t=new Pi(this._lodPlanes[0],e);this._renderer.compile(t,JM)}_sceneToCubeUV(e,t,n,i,s){const h=new sa(90,1,t,n),p=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],_=this._renderer,y=_.autoClear,x=_.toneMapping;_.getClearColor(pR),_.toneMapping=rc,_.autoClear=!1;const M=new mr({name:"PMREM.Background",side:Ks,depthWrite:!1,depthTest:!1}),T=new Pi(new wd,M);let b=!1;const E=e.background;E?E.isColor&&(M.color.copy(E),e.background=null,b=!0):(M.color.copy(pR),b=!0);for(let w=0;w<6;w++){const D=w%3;D===0?(h.up.set(0,p[w],0),h.position.set(s.x,s.y,s.z),h.lookAt(s.x+g[w],s.y,s.z)):D===1?(h.up.set(0,0,p[w]),h.position.set(s.x,s.y,s.z),h.lookAt(s.x,s.y+g[w],s.z)):(h.up.set(0,p[w],0),h.position.set(s.x,s.y,s.z),h.lookAt(s.x,s.y,s.z+g[w]));const B=this._cubeSize;Qy(i,D*B,w>2?B:0,B,B),_.setRenderTarget(i),b&&_.render(T,h),_.render(e,h)}T.geometry.dispose(),T.material.dispose(),_.toneMapping=x,_.autoClear=y,e.background=E}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===dc||e.mapping===Ef;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=_R()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=vR());const s=i?this._cubemapMaterial:this._equirectMaterial,l=new Pi(this._lodPlanes[0],s),c=s.uniforms;c.envMap.value=e;const h=this._cubeSize;Qy(t,0,0,3*h,2*h),n.setRenderTarget(t),n.render(l,JM)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const l=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),c=mR[(i-s-1)%mR.length];this._blur(e,s-1,s,l,c)}t.autoClear=n}_blur(e,t,n,i,s){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,n,i,"latitudinal",s),this._halfBlur(l,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,l,c){const h=this._renderer,p=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const g=3,_=new Pi(this._lodPlanes[i],p),y=p.uniforms,x=this._sizeLods[n]-1,M=isFinite(s)?Math.PI/(2*x):2*Math.PI/(2*Jh-1),T=s/M,b=isFinite(s)?1+Math.floor(g*T):Jh;b>Jh&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${Jh}`);const E=[];let w=0;for(let F=0;F<Jh;++F){const H=F/T,U=Math.exp(-H*H/2);E.push(U),F===0?w+=U:F<b&&(w+=2*U)}for(let F=0;F<E.length;F++)E[F]=E[F]/w;y.envMap.value=e.texture,y.samples.value=b,y.weights.value=E,y.latitudinal.value=l==="latitudinal",c&&(y.poleAxis.value=c);const{_lodMax:D}=this;y.dTheta.value=M,y.mipInt.value=D-n;const B=this._sizeLods[i],I=3*B*(i>D-tm?i-D+tm:0),L=4*(this._cubeSize-B);Qy(t,I,L,3*B,2*B),h.setRenderTarget(t),h.render(_,JM)}}function oz(r){const e=[],t=[],n=[];let i=r;const s=r-tm+1+dR.length;for(let l=0;l<s;l++){const c=Math.pow(2,i);t.push(c);let h=1/c;l>r-tm?h=dR[l-r+tm-1]:l===0&&(h=0),n.push(h);const p=1/(c-2),g=-p,_=1+p,y=[g,g,_,g,_,_,g,g,_,_,g,_],x=6,M=6,T=3,b=2,E=1,w=new Float32Array(T*M*x),D=new Float32Array(b*M*x),B=new Float32Array(E*M*x);for(let L=0;L<x;L++){const F=L%3*2/3-1,H=L>2?0:-1,U=[F,H,0,F+2/3,H,0,F+2/3,H+1,0,F,H,0,F+2/3,H+1,0,F,H+1,0];w.set(U,T*M*L),D.set(y,b*M*L);const N=[L,L,L,L,L,L];B.set(N,E*M*L)}const I=new Sn;I.setAttribute("position",new ti(w,T)),I.setAttribute("uv",new ti(D,b)),I.setAttribute("faceIndex",new ti(B,E)),e.push(I),i>tm&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function gR(r,e,t){const n=new Mo(r,e,t);return n.texture.mapping=Om,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Qy(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function lz(r,e,t){const n=new Float32Array(Jh),i=new Z(0,1,0);return new Ar({name:"SphericalGaussianBlur",defines:{n:Jh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Tb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:sc,depthTest:!1,depthWrite:!1})}function vR(){return new Ar({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Tb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:sc,depthTest:!1,depthWrite:!1})}function _R(){return new Ar({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Tb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:sc,depthTest:!1,depthWrite:!1})}function Tb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function cz(r){let e=new WeakMap,t=null;function n(c){if(c&&c.isTexture){const h=c.mapping,p=h===mm||h===W0,g=h===dc||h===Ef;if(p||g){let _=e.get(c);const y=_!==void 0?_.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==y)return t===null&&(t=new K1(r)),_=p?t.fromEquirectangular(c,_):t.fromCubemap(c,_),_.texture.pmremVersion=c.pmremVersion,e.set(c,_),_.texture;if(_!==void 0)return _.texture;{const x=c.image;return p&&x&&x.height>0||g&&x&&i(x)?(t===null&&(t=new K1(r)),_=p?t.fromEquirectangular(c):t.fromCubemap(c),_.texture.pmremVersion=c.pmremVersion,e.set(c,_),c.addEventListener("dispose",s),_.texture):null}}}return c}function i(c){let h=0;const p=6;for(let g=0;g<p;g++)c[g]!==void 0&&h++;return h===p}function s(c){const h=c.target;h.removeEventListener("dispose",s);const p=e.get(h);p!==void 0&&(e.delete(h),p.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:l}}function uz(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const i=t(n);return i===null&&Vh("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function fz(r,e,t,n){const i={},s=new WeakMap;function l(_){const y=_.target;y.index!==null&&e.remove(y.index);for(const M in y.attributes)e.remove(y.attributes[M]);y.removeEventListener("dispose",l),delete i[y.id];const x=s.get(y);x&&(e.remove(x),s.delete(y)),n.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function c(_,y){return i[y.id]===!0||(y.addEventListener("dispose",l),i[y.id]=!0,t.memory.geometries++),y}function h(_){const y=_.attributes;for(const x in y)e.update(y[x],r.ARRAY_BUFFER)}function p(_){const y=[],x=_.index,M=_.attributes.position;let T=0;if(x!==null){const w=x.array;T=x.version;for(let D=0,B=w.length;D<B;D+=3){const I=w[D+0],L=w[D+1],F=w[D+2];y.push(I,L,L,F,F,I)}}else if(M!==void 0){const w=M.array;T=M.version;for(let D=0,B=w.length/3-1;D<B;D+=3){const I=D+0,L=D+1,F=D+2;y.push(I,L,L,F,F,I)}}else return;const b=new(F2(y)?jE:WE)(y,1);b.version=T;const E=s.get(_);E&&e.remove(E),s.set(_,b)}function g(_){const y=s.get(_);if(y){const x=_.index;x!==null&&y.version<x.version&&p(_)}else p(_);return s.get(_)}return{get:c,update:h,getWireframeAttribute:g}}function hz(r,e,t){let n;function i(y){n=y}let s,l;function c(y){s=y.type,l=y.bytesPerElement}function h(y,x){r.drawElements(n,x,s,y*l),t.update(x,n,1)}function p(y,x,M){M!==0&&(r.drawElementsInstanced(n,x,s,y*l,M),t.update(x,n,M))}function g(y,x,M){if(M===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,x,0,s,y,0,M);let b=0;for(let E=0;E<M;E++)b+=x[E];t.update(b,n,1)}function _(y,x,M,T){if(M===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let E=0;E<y.length;E++)p(y[E]/l,x[E],T[E]);else{b.multiDrawElementsInstancedWEBGL(n,x,0,s,y,0,T,0,M);let E=0;for(let w=0;w<M;w++)E+=x[w]*T[w];t.update(E,n,1)}}this.setMode=i,this.setIndex=c,this.render=h,this.renderInstances=p,this.renderMultiDraw=g,this.renderMultiDrawInstances=_}function dz(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,l,c){switch(t.calls++,l){case r.TRIANGLES:t.triangles+=c*(s/3);break;case r.LINES:t.lines+=c*(s/2);break;case r.LINE_STRIP:t.lines+=c*(s-1);break;case r.LINE_LOOP:t.lines+=c*s;break;case r.POINTS:t.points+=c*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function pz(r,e,t){const n=new WeakMap,i=new ei;function s(l,c,h){const p=l.morphTargetInfluences,g=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,_=g!==void 0?g.length:0;let y=n.get(c);if(y===void 0||y.count!==_){let N=function(){H.dispose(),n.delete(c),c.removeEventListener("dispose",N)};var x=N;y!==void 0&&y.texture.dispose();const M=c.morphAttributes.position!==void 0,T=c.morphAttributes.normal!==void 0,b=c.morphAttributes.color!==void 0,E=c.morphAttributes.position||[],w=c.morphAttributes.normal||[],D=c.morphAttributes.color||[];let B=0;M===!0&&(B=1),T===!0&&(B=2),b===!0&&(B=3);let I=c.attributes.position.count*B,L=1;I>e.maxTextureSize&&(L=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const F=new Float32Array(I*L*4*_),H=new Av(F,I,L,_);H.type=ji,H.needsUpdate=!0;const U=B*4;for(let Y=0;Y<_;Y++){const ee=E[Y],$=w[Y],ae=D[Y],me=I*L*4*Y;for(let Q=0;Q<ee.count;Q++){const he=Q*U;M===!0&&(i.fromBufferAttribute(ee,Q),F[me+he+0]=i.x,F[me+he+1]=i.y,F[me+he+2]=i.z,F[me+he+3]=0),T===!0&&(i.fromBufferAttribute($,Q),F[me+he+4]=i.x,F[me+he+5]=i.y,F[me+he+6]=i.z,F[me+he+7]=0),b===!0&&(i.fromBufferAttribute(ae,Q),F[me+he+8]=i.x,F[me+he+9]=i.y,F[me+he+10]=i.z,F[me+he+11]=ae.itemSize===4?i.w:1)}}y={count:_,texture:H,size:new et(I,L)},n.set(c,y),c.addEventListener("dispose",N)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)h.getUniforms().setValue(r,"morphTexture",l.morphTexture,t);else{let M=0;for(let b=0;b<p.length;b++)M+=p[b];const T=c.morphTargetsRelative?1:1-M;h.getUniforms().setValue(r,"morphTargetBaseInfluence",T),h.getUniforms().setValue(r,"morphTargetInfluences",p)}h.getUniforms().setValue(r,"morphTargetsTexture",y.texture,t),h.getUniforms().setValue(r,"morphTargetsTextureSize",y.size)}return{update:s}}function mz(r,e,t,n){let i=new WeakMap;function s(h){const p=n.render.frame,g=h.geometry,_=e.get(h,g);if(i.get(_)!==p&&(e.update(_),i.set(_,p)),h.isInstancedMesh&&(h.hasEventListener("dispose",c)===!1&&h.addEventListener("dispose",c),i.get(h)!==p&&(t.update(h.instanceMatrix,r.ARRAY_BUFFER),h.instanceColor!==null&&t.update(h.instanceColor,r.ARRAY_BUFFER),i.set(h,p))),h.isSkinnedMesh){const y=h.skeleton;i.get(y)!==p&&(y.update(),i.set(y,p))}return _}function l(){i=new WeakMap}function c(h){const p=h.target;p.removeEventListener("dispose",c),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:s,dispose:l}}const IB=new di,yR=new nb(1,1),PB=new Av,FB=new jA,zB=new Sv,xR=[],AR=[],SR=new Float32Array(16),MR=new Float32Array(9),ER=new Float32Array(4);function Im(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=xR[i];if(s===void 0&&(s=new Float32Array(i),xR[i]=s),e!==0){n.toArray(s,0);for(let l=1,c=0;l!==e;++l)c+=t,r[l].toArray(s,c)}return s}function wa(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function Ba(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function vS(r,e){let t=AR[e];t===void 0&&(t=new Int32Array(e),AR[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function gz(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function vz(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wa(t,e))return;r.uniform2fv(this.addr,e),Ba(t,e)}}function _z(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(wa(t,e))return;r.uniform3fv(this.addr,e),Ba(t,e)}}function yz(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wa(t,e))return;r.uniform4fv(this.addr,e),Ba(t,e)}}function xz(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(wa(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),Ba(t,e)}else{if(wa(t,n))return;ER.set(n),r.uniformMatrix2fv(this.addr,!1,ER),Ba(t,n)}}function Az(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(wa(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),Ba(t,e)}else{if(wa(t,n))return;MR.set(n),r.uniformMatrix3fv(this.addr,!1,MR),Ba(t,n)}}function Sz(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(wa(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),Ba(t,e)}else{if(wa(t,n))return;SR.set(n),r.uniformMatrix4fv(this.addr,!1,SR),Ba(t,n)}}function Mz(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function Ez(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wa(t,e))return;r.uniform2iv(this.addr,e),Ba(t,e)}}function bz(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(wa(t,e))return;r.uniform3iv(this.addr,e),Ba(t,e)}}function Tz(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wa(t,e))return;r.uniform4iv(this.addr,e),Ba(t,e)}}function Cz(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function Rz(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wa(t,e))return;r.uniform2uiv(this.addr,e),Ba(t,e)}}function wz(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(wa(t,e))return;r.uniform3uiv(this.addr,e),Ba(t,e)}}function Bz(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wa(t,e))return;r.uniform4uiv(this.addr,e),Ba(t,e)}}function Dz(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i);let s;this.type===r.SAMPLER_2D_SHADOW?(yR.compareFunction=YE,s=yR):s=IB,t.setTexture2D(e||s,i)}function Uz(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||FB,i)}function Oz(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||zB,i)}function Nz(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||PB,i)}function Lz(r){switch(r){case 5126:return gz;case 35664:return vz;case 35665:return _z;case 35666:return yz;case 35674:return xz;case 35675:return Az;case 35676:return Sz;case 5124:case 35670:return Mz;case 35667:case 35671:return Ez;case 35668:case 35672:return bz;case 35669:case 35673:return Tz;case 5125:return Cz;case 36294:return Rz;case 36295:return wz;case 36296:return Bz;case 35678:case 36198:case 36298:case 36306:case 35682:return Dz;case 35679:case 36299:case 36307:return Uz;case 35680:case 36300:case 36308:case 36293:return Oz;case 36289:case 36303:case 36311:case 36292:return Nz}}function Iz(r,e){r.uniform1fv(this.addr,e)}function Pz(r,e){const t=Im(e,this.size,2);r.uniform2fv(this.addr,t)}function Fz(r,e){const t=Im(e,this.size,3);r.uniform3fv(this.addr,t)}function zz(r,e){const t=Im(e,this.size,4);r.uniform4fv(this.addr,t)}function Hz(r,e){const t=Im(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function Gz(r,e){const t=Im(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function Vz(r,e){const t=Im(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function kz(r,e){r.uniform1iv(this.addr,e)}function Xz(r,e){r.uniform2iv(this.addr,e)}function Yz(r,e){r.uniform3iv(this.addr,e)}function qz(r,e){r.uniform4iv(this.addr,e)}function Jz(r,e){r.uniform1uiv(this.addr,e)}function Wz(r,e){r.uniform2uiv(this.addr,e)}function jz(r,e){r.uniform3uiv(this.addr,e)}function Kz(r,e){r.uniform4uiv(this.addr,e)}function Zz(r,e,t){const n=this.cache,i=e.length,s=vS(t,i);wa(n,s)||(r.uniform1iv(this.addr,s),Ba(n,s));for(let l=0;l!==i;++l)t.setTexture2D(e[l]||IB,s[l])}function Qz(r,e,t){const n=this.cache,i=e.length,s=vS(t,i);wa(n,s)||(r.uniform1iv(this.addr,s),Ba(n,s));for(let l=0;l!==i;++l)t.setTexture3D(e[l]||FB,s[l])}function $z(r,e,t){const n=this.cache,i=e.length,s=vS(t,i);wa(n,s)||(r.uniform1iv(this.addr,s),Ba(n,s));for(let l=0;l!==i;++l)t.setTextureCube(e[l]||zB,s[l])}function eH(r,e,t){const n=this.cache,i=e.length,s=vS(t,i);wa(n,s)||(r.uniform1iv(this.addr,s),Ba(n,s));for(let l=0;l!==i;++l)t.setTexture2DArray(e[l]||PB,s[l])}function tH(r){switch(r){case 5126:return Iz;case 35664:return Pz;case 35665:return Fz;case 35666:return zz;case 35674:return Hz;case 35675:return Gz;case 35676:return Vz;case 5124:case 35670:return kz;case 35667:case 35671:return Xz;case 35668:case 35672:return Yz;case 35669:case 35673:return qz;case 5125:return Jz;case 36294:return Wz;case 36295:return jz;case 36296:return Kz;case 35678:case 36198:case 36298:case 36306:case 35682:return Zz;case 35679:case 36299:case 36307:return Qz;case 35680:case 36300:case 36308:case 36293:return $z;case 36289:case 36303:case 36311:case 36292:return eH}}class nH{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=Lz(t.type)}}class iH{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=tH(t.type)}}class aH{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,l=i.length;s!==l;++s){const c=i[s];c.setValue(e,t[c.id],n)}}}const QM=/(\w+)(\])?(\[|\.)?/g;function bR(r,e){r.seq.push(e),r.map[e.id]=e}function sH(r,e,t){const n=r.name,i=n.length;for(QM.lastIndex=0;;){const s=QM.exec(n),l=QM.lastIndex;let c=s[1];const h=s[2]==="]",p=s[3];if(h&&(c=c|0),p===void 0||p==="["&&l+2===i){bR(t,p===void 0?new nH(c,r,e):new iH(c,r,e));break}else{let _=t.map[c];_===void 0&&(_=new aH(c),bR(t,_)),t=_}}}class Mx{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),l=e.getUniformLocation(t,s.name);sH(s,l,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,l=t.length;s!==l;++s){const c=t[s],h=n[c.id];h.needsUpdate!==!1&&c.setValue(e,h.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const l=e[i];l.id in t&&n.push(l)}return n}}function TR(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const rH=37297;let oH=0;function lH(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let l=i;l<s;l++){const c=l+1;n.push(`${c===e?">":" "} ${c}: ${t[l]}`)}return n.join(`
`)}const CR=new An;function cH(r){Yn._getMatrix(CR,Yn.workingColorSpace,r);const e=`mat3( ${CR.elements.map(t=>t.toFixed(4))} )`;switch(Yn.getTransfer(r)){case K0:return[e,"LinearTransferOETF"];case gi:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",r),[e,"LinearTransferOETF"]}}function RR(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const l=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+lH(r.getShaderSource(e),l)}else return i}function uH(r,e){const t=cH(e);return[`vec4 ${r}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function fH(r,e){let t;switch(e){case v2:t="Linear";break;case _2:t="Reinhard";break;case y2:t="Cineon";break;case LE:t="ACESFilmic";break;case A2:t="AgX";break;case S2:t="Neutral";break;case x2:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const $y=new Z;function hH(){Yn.getLuminanceCoefficients($y);const r=$y.x.toFixed(4),e=$y.y.toFixed(4),t=$y.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function dH(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(v0).join(`
`)}function pH(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function mH(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),l=s.name;let c=1;s.type===r.FLOAT_MAT2&&(c=2),s.type===r.FLOAT_MAT3&&(c=3),s.type===r.FLOAT_MAT4&&(c=4),t[l]={type:s.type,location:r.getAttribLocation(e,l),locationSize:c}}return t}function v0(r){return r!==""}function wR(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function BR(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const gH=/^[ \t]*#include +<([\w\d./]+)>/gm;function Z1(r){return r.replace(gH,_H)}const vH=new Map;function _H(r,e){let t=Cn[e];if(t===void 0){const n=vH.get(e);if(n!==void 0)t=Cn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return Z1(t)}const yH=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function DR(r){return r.replace(yH,xH)}function xH(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function UR(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function AH(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===zA?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===b0?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===ll&&(e="SHADOWMAP_TYPE_VSM"),e}function SH(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case dc:case Ef:e="ENVMAP_TYPE_CUBE";break;case Om:e="ENVMAP_TYPE_CUBE_UV";break}return e}function MH(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Ef:e="ENVMAP_MODE_REFRACTION";break}return e}function EH(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case vv:e="ENVMAP_BLENDING_MULTIPLY";break;case m2:e="ENVMAP_BLENDING_MIX";break;case g2:e="ENVMAP_BLENDING_ADD";break}return e}function bH(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function TH(r,e,t,n){const i=r.getContext(),s=t.defines;let l=t.vertexShader,c=t.fragmentShader;const h=AH(t),p=SH(t),g=MH(t),_=EH(t),y=bH(t),x=dH(t),M=pH(s),T=i.createProgram();let b,E,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(v0).join(`
`),b.length>0&&(b+=`
`),E=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(v0).join(`
`),E.length>0&&(E+=`
`)):(b=[UR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(v0).join(`
`),E=[UR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",t.envMap?"#define "+_:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==rc?"#define TONE_MAPPING":"",t.toneMapping!==rc?Cn.tonemapping_pars_fragment:"",t.toneMapping!==rc?fH("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Cn.colorspace_pars_fragment,uH("linearToOutputTexel",t.outputColorSpace),hH(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(v0).join(`
`)),l=Z1(l),l=wR(l,t),l=BR(l,t),c=Z1(c),c=wR(c,t),c=BR(c,t),l=DR(l),c=DR(c),t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,b=[x,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,E=["#define varying in",t.glslVersion===V1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===V1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+E);const D=w+b+l,B=w+E+c,I=TR(i,i.VERTEX_SHADER,D),L=TR(i,i.FRAGMENT_SHADER,B);i.attachShader(T,I),i.attachShader(T,L),t.index0AttributeName!==void 0?i.bindAttribLocation(T,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(T,0,"position"),i.linkProgram(T);function F(Y){if(r.debug.checkShaderErrors){const ee=i.getProgramInfoLog(T).trim(),$=i.getShaderInfoLog(I).trim(),ae=i.getShaderInfoLog(L).trim();let me=!0,Q=!0;if(i.getProgramParameter(T,i.LINK_STATUS)===!1)if(me=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,T,I,L);else{const he=RR(i,I,"vertex"),oe=RR(i,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(T,i.VALIDATE_STATUS)+`

Material Name: `+Y.name+`
Material Type: `+Y.type+`

Program Info Log: `+ee+`
`+he+`
`+oe)}else ee!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ee):($===""||ae==="")&&(Q=!1);Q&&(Y.diagnostics={runnable:me,programLog:ee,vertexShader:{log:$,prefix:b},fragmentShader:{log:ae,prefix:E}})}i.deleteShader(I),i.deleteShader(L),H=new Mx(i,T),U=mH(i,T)}let H;this.getUniforms=function(){return H===void 0&&F(this),H};let U;this.getAttributes=function(){return U===void 0&&F(this),U};let N=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return N===!1&&(N=i.getProgramParameter(T,rH)),N},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(T),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=oH++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=I,this.fragmentShader=L,this}let CH=0;class RH{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),l=this._getShaderCacheForMaterial(e);return l.has(i)===!1&&(l.add(i),i.usedTimes++),l.has(s)===!1&&(l.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new wH(e),t.set(e,n)),n}}class wH{constructor(e){this.id=CH++,this.code=e,this.usedTimes=0}}function BH(r,e,t,n,i,s,l){const c=new Am,h=new RH,p=new Set,g=[],_=i.logarithmicDepthBuffer,y=i.vertexTextures;let x=i.precision;const M={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function T(U){return p.add(U),U===0?"uv":`uv${U}`}function b(U,N,Y,ee,$){const ae=ee.fog,me=$.geometry,Q=U.isMeshStandardMaterial?ee.environment:null,he=(U.isMeshStandardMaterial?t:e).get(U.envMap||Q),oe=he&&he.mapping===Om?he.image.height:null,be=M[U.type];U.precision!==null&&(x=i.getMaxPrecision(U.precision),x!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",x,"instead."));const P=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,ue=P!==void 0?P.length:0;let Ce=0;me.morphAttributes.position!==void 0&&(Ce=1),me.morphAttributes.normal!==void 0&&(Ce=2),me.morphAttributes.color!==void 0&&(Ce=3);let Xe,re,Ne,Be;if(be){const St=cl[be];Xe=St.vertexShader,re=St.fragmentShader}else Xe=U.vertexShader,re=U.fragmentShader,h.update(U),Ne=h.getVertexShaderID(U),Be=h.getFragmentShaderID(U);const Ve=r.getRenderTarget(),tt=r.state.buffers.depth.getReversed(),wt=$.isInstancedMesh===!0,ht=$.isBatchedMesh===!0,Pt=!!U.map,Je=!!U.matcap,De=!!he,j=!!U.aoMap,Mt=!!U.lightMap,$e=!!U.bumpMap,pe=!!U.normalMap,at=!!U.displacementMap,Lt=!!U.emissiveMap,ut=!!U.metalnessMap,W=!!U.roughnessMap,k=U.anisotropy>0,xe=U.clearcoat>0,ze=U.dispersion>0,Ye=U.iridescence>0,ke=U.sheen>0,_t=U.transmission>0,lt=k&&!!U.anisotropyMap,yt=xe&&!!U.clearcoatMap,$t=xe&&!!U.clearcoatNormalMap,st=xe&&!!U.clearcoatRoughnessMap,vt=Ye&&!!U.iridescenceMap,Nt=Ye&&!!U.iridescenceThicknessMap,mt=ke&&!!U.sheenColorMap,Et=ke&&!!U.sheenRoughnessMap,le=!!U.specularMap,Re=!!U.specularColorMap,rt=!!U.specularIntensityMap,ne=_t&&!!U.transmissionMap,Me=_t&&!!U.thicknessMap,Te=!!U.gradientMap,Ge=!!U.alphaMap,dt=U.alphaTest>0,xt=!!U.alphaHash,Ft=!!U.extensions;let rn=rc;U.toneMapped&&(Ve===null||Ve.isXRRenderTarget===!0)&&(rn=r.toneMapping);const Bn={shaderID:be,shaderType:U.type,shaderName:U.name,vertexShader:Xe,fragmentShader:re,defines:U.defines,customVertexShaderID:Ne,customFragmentShaderID:Be,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:x,batching:ht,batchingColor:ht&&$._colorsTexture!==null,instancing:wt,instancingColor:wt&&$.instanceColor!==null,instancingMorph:wt&&$.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:Ve===null?r.outputColorSpace:Ve.isXRRenderTarget===!0?Ve.texture.colorSpace:dl,alphaToCoverage:!!U.alphaToCoverage,map:Pt,matcap:Je,envMap:De,envMapMode:De&&he.mapping,envMapCubeUVHeight:oe,aoMap:j,lightMap:Mt,bumpMap:$e,normalMap:pe,displacementMap:y&&at,emissiveMap:Lt,normalMapObjectSpace:pe&&U.normalMapType===B2,normalMapTangentSpace:pe&&U.normalMapType===Bf,metalnessMap:ut,roughnessMap:W,anisotropy:k,anisotropyMap:lt,clearcoat:xe,clearcoatMap:yt,clearcoatNormalMap:$t,clearcoatRoughnessMap:st,dispersion:ze,iridescence:Ye,iridescenceMap:vt,iridescenceThicknessMap:Nt,sheen:ke,sheenColorMap:mt,sheenRoughnessMap:Et,specularMap:le,specularColorMap:Re,specularIntensityMap:rt,transmission:_t,transmissionMap:ne,thicknessMap:Me,gradientMap:Te,opaque:U.transparent===!1&&U.blending===id&&U.alphaToCoverage===!1,alphaMap:Ge,alphaTest:dt,alphaHash:xt,combine:U.combine,mapUv:Pt&&T(U.map.channel),aoMapUv:j&&T(U.aoMap.channel),lightMapUv:Mt&&T(U.lightMap.channel),bumpMapUv:$e&&T(U.bumpMap.channel),normalMapUv:pe&&T(U.normalMap.channel),displacementMapUv:at&&T(U.displacementMap.channel),emissiveMapUv:Lt&&T(U.emissiveMap.channel),metalnessMapUv:ut&&T(U.metalnessMap.channel),roughnessMapUv:W&&T(U.roughnessMap.channel),anisotropyMapUv:lt&&T(U.anisotropyMap.channel),clearcoatMapUv:yt&&T(U.clearcoatMap.channel),clearcoatNormalMapUv:$t&&T(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:st&&T(U.clearcoatRoughnessMap.channel),iridescenceMapUv:vt&&T(U.iridescenceMap.channel),iridescenceThicknessMapUv:Nt&&T(U.iridescenceThicknessMap.channel),sheenColorMapUv:mt&&T(U.sheenColorMap.channel),sheenRoughnessMapUv:Et&&T(U.sheenRoughnessMap.channel),specularMapUv:le&&T(U.specularMap.channel),specularColorMapUv:Re&&T(U.specularColorMap.channel),specularIntensityMapUv:rt&&T(U.specularIntensityMap.channel),transmissionMapUv:ne&&T(U.transmissionMap.channel),thicknessMapUv:Me&&T(U.thicknessMap.channel),alphaMapUv:Ge&&T(U.alphaMap.channel),vertexTangents:!!me.attributes.tangent&&(pe||k),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,pointsUvs:$.isPoints===!0&&!!me.attributes.uv&&(Pt||Ge),fog:!!ae,useFog:U.fog===!0,fogExp2:!!ae&&ae.isFogExp2,flatShading:U.flatShading===!0,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:_,reverseDepthBuffer:tt,skinning:$.isSkinnedMesh===!0,morphTargets:me.morphAttributes.position!==void 0,morphNormals:me.morphAttributes.normal!==void 0,morphColors:me.morphAttributes.color!==void 0,morphTargetsCount:ue,morphTextureStride:Ce,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numLightProbes:N.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:U.dithering,shadowMapEnabled:r.shadowMap.enabled&&Y.length>0,shadowMapType:r.shadowMap.type,toneMapping:rn,decodeVideoTexture:Pt&&U.map.isVideoTexture===!0&&Yn.getTransfer(U.map.colorSpace)===gi,decodeVideoTextureEmissive:Lt&&U.emissiveMap.isVideoTexture===!0&&Yn.getTransfer(U.emissiveMap.colorSpace)===gi,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===_o,flipSided:U.side===Ks,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionClipCullDistance:Ft&&U.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ft&&U.extensions.multiDraw===!0||ht)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:U.customProgramCacheKey()};return Bn.vertexUv1s=p.has(1),Bn.vertexUv2s=p.has(2),Bn.vertexUv3s=p.has(3),p.clear(),Bn}function E(U){const N=[];if(U.shaderID?N.push(U.shaderID):(N.push(U.customVertexShaderID),N.push(U.customFragmentShaderID)),U.defines!==void 0)for(const Y in U.defines)N.push(Y),N.push(U.defines[Y]);return U.isRawShaderMaterial===!1&&(w(N,U),D(N,U),N.push(r.outputColorSpace)),N.push(U.customProgramCacheKey),N.join()}function w(U,N){U.push(N.precision),U.push(N.outputColorSpace),U.push(N.envMapMode),U.push(N.envMapCubeUVHeight),U.push(N.mapUv),U.push(N.alphaMapUv),U.push(N.lightMapUv),U.push(N.aoMapUv),U.push(N.bumpMapUv),U.push(N.normalMapUv),U.push(N.displacementMapUv),U.push(N.emissiveMapUv),U.push(N.metalnessMapUv),U.push(N.roughnessMapUv),U.push(N.anisotropyMapUv),U.push(N.clearcoatMapUv),U.push(N.clearcoatNormalMapUv),U.push(N.clearcoatRoughnessMapUv),U.push(N.iridescenceMapUv),U.push(N.iridescenceThicknessMapUv),U.push(N.sheenColorMapUv),U.push(N.sheenRoughnessMapUv),U.push(N.specularMapUv),U.push(N.specularColorMapUv),U.push(N.specularIntensityMapUv),U.push(N.transmissionMapUv),U.push(N.thicknessMapUv),U.push(N.combine),U.push(N.fogExp2),U.push(N.sizeAttenuation),U.push(N.morphTargetsCount),U.push(N.morphAttributeCount),U.push(N.numDirLights),U.push(N.numPointLights),U.push(N.numSpotLights),U.push(N.numSpotLightMaps),U.push(N.numHemiLights),U.push(N.numRectAreaLights),U.push(N.numDirLightShadows),U.push(N.numPointLightShadows),U.push(N.numSpotLightShadows),U.push(N.numSpotLightShadowsWithMaps),U.push(N.numLightProbes),U.push(N.shadowMapType),U.push(N.toneMapping),U.push(N.numClippingPlanes),U.push(N.numClipIntersection),U.push(N.depthPacking)}function D(U,N){c.disableAll(),N.supportsVertexTextures&&c.enable(0),N.instancing&&c.enable(1),N.instancingColor&&c.enable(2),N.instancingMorph&&c.enable(3),N.matcap&&c.enable(4),N.envMap&&c.enable(5),N.normalMapObjectSpace&&c.enable(6),N.normalMapTangentSpace&&c.enable(7),N.clearcoat&&c.enable(8),N.iridescence&&c.enable(9),N.alphaTest&&c.enable(10),N.vertexColors&&c.enable(11),N.vertexAlphas&&c.enable(12),N.vertexUv1s&&c.enable(13),N.vertexUv2s&&c.enable(14),N.vertexUv3s&&c.enable(15),N.vertexTangents&&c.enable(16),N.anisotropy&&c.enable(17),N.alphaHash&&c.enable(18),N.batching&&c.enable(19),N.dispersion&&c.enable(20),N.batchingColor&&c.enable(21),U.push(c.mask),c.disableAll(),N.fog&&c.enable(0),N.useFog&&c.enable(1),N.flatShading&&c.enable(2),N.logarithmicDepthBuffer&&c.enable(3),N.reverseDepthBuffer&&c.enable(4),N.skinning&&c.enable(5),N.morphTargets&&c.enable(6),N.morphNormals&&c.enable(7),N.morphColors&&c.enable(8),N.premultipliedAlpha&&c.enable(9),N.shadowMapEnabled&&c.enable(10),N.doubleSided&&c.enable(11),N.flipSided&&c.enable(12),N.useDepthPacking&&c.enable(13),N.dithering&&c.enable(14),N.transmission&&c.enable(15),N.sheen&&c.enable(16),N.opaque&&c.enable(17),N.pointsUvs&&c.enable(18),N.decodeVideoTexture&&c.enable(19),N.decodeVideoTextureEmissive&&c.enable(20),N.alphaToCoverage&&c.enable(21),U.push(c.mask)}function B(U){const N=M[U.type];let Y;if(N){const ee=cl[N];Y=k2.clone(ee.uniforms)}else Y=U.uniforms;return Y}function I(U,N){let Y;for(let ee=0,$=g.length;ee<$;ee++){const ae=g[ee];if(ae.cacheKey===N){Y=ae,++Y.usedTimes;break}}return Y===void 0&&(Y=new TH(r,N,U,s),g.push(Y)),Y}function L(U){if(--U.usedTimes===0){const N=g.indexOf(U);g[N]=g[g.length-1],g.pop(),U.destroy()}}function F(U){h.remove(U)}function H(){h.dispose()}return{getParameters:b,getProgramCacheKey:E,getUniforms:B,acquireProgram:I,releaseProgram:L,releaseShaderCache:F,programs:g,dispose:H}}function DH(){let r=new WeakMap;function e(l){return r.has(l)}function t(l){let c=r.get(l);return c===void 0&&(c={},r.set(l,c)),c}function n(l){r.delete(l)}function i(l,c,h){r.get(l)[c]=h}function s(){r=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:s}}function UH(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function OR(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function NR(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function l(_,y,x,M,T,b){let E=r[e];return E===void 0?(E={id:_.id,object:_,geometry:y,material:x,groupOrder:M,renderOrder:_.renderOrder,z:T,group:b},r[e]=E):(E.id=_.id,E.object=_,E.geometry=y,E.material=x,E.groupOrder=M,E.renderOrder=_.renderOrder,E.z=T,E.group=b),e++,E}function c(_,y,x,M,T,b){const E=l(_,y,x,M,T,b);x.transmission>0?n.push(E):x.transparent===!0?i.push(E):t.push(E)}function h(_,y,x,M,T,b){const E=l(_,y,x,M,T,b);x.transmission>0?n.unshift(E):x.transparent===!0?i.unshift(E):t.unshift(E)}function p(_,y){t.length>1&&t.sort(_||UH),n.length>1&&n.sort(y||OR),i.length>1&&i.sort(y||OR)}function g(){for(let _=e,y=r.length;_<y;_++){const x=r[_];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:c,unshift:h,finish:g,sort:p}}function OH(){let r=new WeakMap;function e(n,i){const s=r.get(n);let l;return s===void 0?(l=new NR,r.set(n,[l])):i>=s.length?(l=new NR,s.push(l)):l=s[i],l}function t(){r=new WeakMap}return{get:e,dispose:t}}function NH(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Z,color:new Bt};break;case"SpotLight":t={position:new Z,direction:new Z,color:new Bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Z,color:new Bt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Z,skyColor:new Bt,groundColor:new Bt};break;case"RectAreaLight":t={color:new Bt,position:new Z,halfWidth:new Z,halfHeight:new Z};break}return r[e.id]=t,t}}}function LH(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let IH=0;function PH(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function FH(r){const e=new NH,t=LH(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)n.probe.push(new Z);const i=new Z,s=new sn,l=new sn;function c(p){let g=0,_=0,y=0;for(let U=0;U<9;U++)n.probe[U].set(0,0,0);let x=0,M=0,T=0,b=0,E=0,w=0,D=0,B=0,I=0,L=0,F=0;p.sort(PH);for(let U=0,N=p.length;U<N;U++){const Y=p[U],ee=Y.color,$=Y.intensity,ae=Y.distance,me=Y.shadow&&Y.shadow.map?Y.shadow.map.texture:null;if(Y.isAmbientLight)g+=ee.r*$,_+=ee.g*$,y+=ee.b*$;else if(Y.isLightProbe){for(let Q=0;Q<9;Q++)n.probe[Q].addScaledVector(Y.sh.coefficients[Q],$);F++}else if(Y.isDirectionalLight){const Q=e.get(Y);if(Q.color.copy(Y.color).multiplyScalar(Y.intensity),Y.castShadow){const he=Y.shadow,oe=t.get(Y);oe.shadowIntensity=he.intensity,oe.shadowBias=he.bias,oe.shadowNormalBias=he.normalBias,oe.shadowRadius=he.radius,oe.shadowMapSize=he.mapSize,n.directionalShadow[x]=oe,n.directionalShadowMap[x]=me,n.directionalShadowMatrix[x]=Y.shadow.matrix,w++}n.directional[x]=Q,x++}else if(Y.isSpotLight){const Q=e.get(Y);Q.position.setFromMatrixPosition(Y.matrixWorld),Q.color.copy(ee).multiplyScalar($),Q.distance=ae,Q.coneCos=Math.cos(Y.angle),Q.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),Q.decay=Y.decay,n.spot[T]=Q;const he=Y.shadow;if(Y.map&&(n.spotLightMap[I]=Y.map,I++,he.updateMatrices(Y),Y.castShadow&&L++),n.spotLightMatrix[T]=he.matrix,Y.castShadow){const oe=t.get(Y);oe.shadowIntensity=he.intensity,oe.shadowBias=he.bias,oe.shadowNormalBias=he.normalBias,oe.shadowRadius=he.radius,oe.shadowMapSize=he.mapSize,n.spotShadow[T]=oe,n.spotShadowMap[T]=me,B++}T++}else if(Y.isRectAreaLight){const Q=e.get(Y);Q.color.copy(ee).multiplyScalar($),Q.halfWidth.set(Y.width*.5,0,0),Q.halfHeight.set(0,Y.height*.5,0),n.rectArea[b]=Q,b++}else if(Y.isPointLight){const Q=e.get(Y);if(Q.color.copy(Y.color).multiplyScalar(Y.intensity),Q.distance=Y.distance,Q.decay=Y.decay,Y.castShadow){const he=Y.shadow,oe=t.get(Y);oe.shadowIntensity=he.intensity,oe.shadowBias=he.bias,oe.shadowNormalBias=he.normalBias,oe.shadowRadius=he.radius,oe.shadowMapSize=he.mapSize,oe.shadowCameraNear=he.camera.near,oe.shadowCameraFar=he.camera.far,n.pointShadow[M]=oe,n.pointShadowMap[M]=me,n.pointShadowMatrix[M]=Y.shadow.matrix,D++}n.point[M]=Q,M++}else if(Y.isHemisphereLight){const Q=e.get(Y);Q.skyColor.copy(Y.color).multiplyScalar($),Q.groundColor.copy(Y.groundColor).multiplyScalar($),n.hemi[E]=Q,E++}}b>0&&(r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ot.LTC_FLOAT_1,n.rectAreaLTC2=Ot.LTC_FLOAT_2):(n.rectAreaLTC1=Ot.LTC_HALF_1,n.rectAreaLTC2=Ot.LTC_HALF_2)),n.ambient[0]=g,n.ambient[1]=_,n.ambient[2]=y;const H=n.hash;(H.directionalLength!==x||H.pointLength!==M||H.spotLength!==T||H.rectAreaLength!==b||H.hemiLength!==E||H.numDirectionalShadows!==w||H.numPointShadows!==D||H.numSpotShadows!==B||H.numSpotMaps!==I||H.numLightProbes!==F)&&(n.directional.length=x,n.spot.length=T,n.rectArea.length=b,n.point.length=M,n.hemi.length=E,n.directionalShadow.length=w,n.directionalShadowMap.length=w,n.pointShadow.length=D,n.pointShadowMap.length=D,n.spotShadow.length=B,n.spotShadowMap.length=B,n.directionalShadowMatrix.length=w,n.pointShadowMatrix.length=D,n.spotLightMatrix.length=B+I-L,n.spotLightMap.length=I,n.numSpotLightShadowsWithMaps=L,n.numLightProbes=F,H.directionalLength=x,H.pointLength=M,H.spotLength=T,H.rectAreaLength=b,H.hemiLength=E,H.numDirectionalShadows=w,H.numPointShadows=D,H.numSpotShadows=B,H.numSpotMaps=I,H.numLightProbes=F,n.version=IH++)}function h(p,g){let _=0,y=0,x=0,M=0,T=0;const b=g.matrixWorldInverse;for(let E=0,w=p.length;E<w;E++){const D=p[E];if(D.isDirectionalLight){const B=n.directional[_];B.direction.setFromMatrixPosition(D.matrixWorld),i.setFromMatrixPosition(D.target.matrixWorld),B.direction.sub(i),B.direction.transformDirection(b),_++}else if(D.isSpotLight){const B=n.spot[x];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(b),B.direction.setFromMatrixPosition(D.matrixWorld),i.setFromMatrixPosition(D.target.matrixWorld),B.direction.sub(i),B.direction.transformDirection(b),x++}else if(D.isRectAreaLight){const B=n.rectArea[M];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(b),l.identity(),s.copy(D.matrixWorld),s.premultiply(b),l.extractRotation(s),B.halfWidth.set(D.width*.5,0,0),B.halfHeight.set(0,D.height*.5,0),B.halfWidth.applyMatrix4(l),B.halfHeight.applyMatrix4(l),M++}else if(D.isPointLight){const B=n.point[y];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(b),y++}else if(D.isHemisphereLight){const B=n.hemi[T];B.direction.setFromMatrixPosition(D.matrixWorld),B.direction.transformDirection(b),T++}}}return{setup:c,setupView:h,state:n}}function LR(r){const e=new FH(r),t=[],n=[];function i(g){p.camera=g,t.length=0,n.length=0}function s(g){t.push(g)}function l(g){n.push(g)}function c(){e.setup(t)}function h(g){e.setupView(t,g)}const p={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:p,setupLights:c,setupLightsView:h,pushLight:s,pushShadow:l}}function zH(r){let e=new WeakMap;function t(i,s=0){const l=e.get(i);let c;return l===void 0?(c=new LR(r),e.set(i,[c])):s>=l.length?(c=new LR(r),l.push(c)):c=l[s],c}function n(){e=new WeakMap}return{get:t,dispose:n}}const HH=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,GH=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function VH(r,e,t){let n=new Tv;const i=new et,s=new et,l=new ei,c=new cb({depthPacking:w2}),h=new ub,p={},g=t.maxTextureSize,_={[hc]:Ks,[Ks]:hc,[_o]:_o},y=new Ar({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new et},radius:{value:4}},vertexShader:HH,fragmentShader:GH}),x=y.clone();x.defines.HORIZONTAL_PASS=1;const M=new Sn;M.setAttribute("position",new ti(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new Pi(M,y),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=zA;let E=this.type;this.render=function(L,F,H){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||L.length===0)return;const U=r.getRenderTarget(),N=r.getActiveCubeFace(),Y=r.getActiveMipmapLevel(),ee=r.state;ee.setBlending(sc),ee.buffers.color.setClear(1,1,1,1),ee.buffers.depth.setTest(!0),ee.setScissorTest(!1);const $=E!==ll&&this.type===ll,ae=E===ll&&this.type!==ll;for(let me=0,Q=L.length;me<Q;me++){const he=L[me],oe=he.shadow;if(oe===void 0){console.warn("THREE.WebGLShadowMap:",he,"has no shadow.");continue}if(oe.autoUpdate===!1&&oe.needsUpdate===!1)continue;i.copy(oe.mapSize);const be=oe.getFrameExtents();if(i.multiply(be),s.copy(oe.mapSize),(i.x>g||i.y>g)&&(i.x>g&&(s.x=Math.floor(g/be.x),i.x=s.x*be.x,oe.mapSize.x=s.x),i.y>g&&(s.y=Math.floor(g/be.y),i.y=s.y*be.y,oe.mapSize.y=s.y)),oe.map===null||$===!0||ae===!0){const ue=this.type!==ll?{minFilter:Xa,magFilter:Xa}:{};oe.map!==null&&oe.map.dispose(),oe.map=new Mo(i.x,i.y,ue),oe.map.texture.name=he.name+".shadowMap",oe.camera.updateProjectionMatrix()}r.setRenderTarget(oe.map),r.clear();const P=oe.getViewportCount();for(let ue=0;ue<P;ue++){const Ce=oe.getViewport(ue);l.set(s.x*Ce.x,s.y*Ce.y,s.x*Ce.z,s.y*Ce.w),ee.viewport(l),oe.updateMatrices(he,ue),n=oe.getFrustum(),B(F,H,oe.camera,he,this.type)}oe.isPointLightShadow!==!0&&this.type===ll&&w(oe,H),oe.needsUpdate=!1}E=this.type,b.needsUpdate=!1,r.setRenderTarget(U,N,Y)};function w(L,F){const H=e.update(T);y.defines.VSM_SAMPLES!==L.blurSamples&&(y.defines.VSM_SAMPLES=L.blurSamples,x.defines.VSM_SAMPLES=L.blurSamples,y.needsUpdate=!0,x.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new Mo(i.x,i.y)),y.uniforms.shadow_pass.value=L.map.texture,y.uniforms.resolution.value=L.mapSize,y.uniforms.radius.value=L.radius,r.setRenderTarget(L.mapPass),r.clear(),r.renderBufferDirect(F,null,H,y,T,null),x.uniforms.shadow_pass.value=L.mapPass.texture,x.uniforms.resolution.value=L.mapSize,x.uniforms.radius.value=L.radius,r.setRenderTarget(L.map),r.clear(),r.renderBufferDirect(F,null,H,x,T,null)}function D(L,F,H,U){let N=null;const Y=H.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(Y!==void 0)N=Y;else if(N=H.isPointLight===!0?h:c,r.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0){const ee=N.uuid,$=F.uuid;let ae=p[ee];ae===void 0&&(ae={},p[ee]=ae);let me=ae[$];me===void 0&&(me=N.clone(),ae[$]=me,F.addEventListener("dispose",I)),N=me}if(N.visible=F.visible,N.wireframe=F.wireframe,U===ll?N.side=F.shadowSide!==null?F.shadowSide:F.side:N.side=F.shadowSide!==null?F.shadowSide:_[F.side],N.alphaMap=F.alphaMap,N.alphaTest=F.alphaTest,N.map=F.map,N.clipShadows=F.clipShadows,N.clippingPlanes=F.clippingPlanes,N.clipIntersection=F.clipIntersection,N.displacementMap=F.displacementMap,N.displacementScale=F.displacementScale,N.displacementBias=F.displacementBias,N.wireframeLinewidth=F.wireframeLinewidth,N.linewidth=F.linewidth,H.isPointLight===!0&&N.isMeshDistanceMaterial===!0){const ee=r.properties.get(N);ee.light=H}return N}function B(L,F,H,U,N){if(L.visible===!1)return;if(L.layers.test(F.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&N===ll)&&(!L.frustumCulled||n.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,L.matrixWorld);const $=e.update(L),ae=L.material;if(Array.isArray(ae)){const me=$.groups;for(let Q=0,he=me.length;Q<he;Q++){const oe=me[Q],be=ae[oe.materialIndex];if(be&&be.visible){const P=D(L,be,U,N);L.onBeforeShadow(r,L,F,H,$,P,oe),r.renderBufferDirect(H,null,$,P,L,oe),L.onAfterShadow(r,L,F,H,$,P,oe)}}}else if(ae.visible){const me=D(L,ae,U,N);L.onBeforeShadow(r,L,F,H,$,me,null),r.renderBufferDirect(H,null,$,me,L,null),L.onAfterShadow(r,L,F,H,$,me,null)}}const ee=L.children;for(let $=0,ae=ee.length;$<ae;$++)B(ee[$],F,H,U,N)}function I(L){L.target.removeEventListener("dispose",I);for(const H in p){const U=p[H],N=L.target.uuid;N in U&&(U[N].dispose(),delete U[N])}}}const kH={[Fx]:zx,[Hx]:kx,[Gx]:Xx,[pd]:Vx,[zx]:Fx,[kx]:Hx,[Xx]:Gx,[Vx]:pd};function XH(r,e){function t(){let ne=!1;const Me=new ei;let Te=null;const Ge=new ei(0,0,0,0);return{setMask:function(dt){Te!==dt&&!ne&&(r.colorMask(dt,dt,dt,dt),Te=dt)},setLocked:function(dt){ne=dt},setClear:function(dt,xt,Ft,rn,Bn){Bn===!0&&(dt*=rn,xt*=rn,Ft*=rn),Me.set(dt,xt,Ft,rn),Ge.equals(Me)===!1&&(r.clearColor(dt,xt,Ft,rn),Ge.copy(Me))},reset:function(){ne=!1,Te=null,Ge.set(-1,0,0,0)}}}function n(){let ne=!1,Me=!1,Te=null,Ge=null,dt=null;return{setReversed:function(xt){if(Me!==xt){const Ft=e.get("EXT_clip_control");Me?Ft.clipControlEXT(Ft.LOWER_LEFT_EXT,Ft.ZERO_TO_ONE_EXT):Ft.clipControlEXT(Ft.LOWER_LEFT_EXT,Ft.NEGATIVE_ONE_TO_ONE_EXT);const rn=dt;dt=null,this.setClear(rn)}Me=xt},getReversed:function(){return Me},setTest:function(xt){xt?Ve(r.DEPTH_TEST):tt(r.DEPTH_TEST)},setMask:function(xt){Te!==xt&&!ne&&(r.depthMask(xt),Te=xt)},setFunc:function(xt){if(Me&&(xt=kH[xt]),Ge!==xt){switch(xt){case Fx:r.depthFunc(r.NEVER);break;case zx:r.depthFunc(r.ALWAYS);break;case Hx:r.depthFunc(r.LESS);break;case pd:r.depthFunc(r.LEQUAL);break;case Gx:r.depthFunc(r.EQUAL);break;case Vx:r.depthFunc(r.GEQUAL);break;case kx:r.depthFunc(r.GREATER);break;case Xx:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Ge=xt}},setLocked:function(xt){ne=xt},setClear:function(xt){dt!==xt&&(Me&&(xt=1-xt),r.clearDepth(xt),dt=xt)},reset:function(){ne=!1,Te=null,Ge=null,dt=null,Me=!1}}}function i(){let ne=!1,Me=null,Te=null,Ge=null,dt=null,xt=null,Ft=null,rn=null,Bn=null;return{setTest:function(St){ne||(St?Ve(r.STENCIL_TEST):tt(r.STENCIL_TEST))},setMask:function(St){Me!==St&&!ne&&(r.stencilMask(St),Me=St)},setFunc:function(St,Dt,Zt){(Te!==St||Ge!==Dt||dt!==Zt)&&(r.stencilFunc(St,Dt,Zt),Te=St,Ge=Dt,dt=Zt)},setOp:function(St,Dt,Zt){(xt!==St||Ft!==Dt||rn!==Zt)&&(r.stencilOp(St,Dt,Zt),xt=St,Ft=Dt,rn=Zt)},setLocked:function(St){ne=St},setClear:function(St){Bn!==St&&(r.clearStencil(St),Bn=St)},reset:function(){ne=!1,Me=null,Te=null,Ge=null,dt=null,xt=null,Ft=null,rn=null,Bn=null}}}const s=new t,l=new n,c=new i,h=new WeakMap,p=new WeakMap;let g={},_={},y=new WeakMap,x=[],M=null,T=!1,b=null,E=null,w=null,D=null,B=null,I=null,L=null,F=new Bt(0,0,0),H=0,U=!1,N=null,Y=null,ee=null,$=null,ae=null;const me=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Q=!1,he=0;const oe=r.getParameter(r.VERSION);oe.indexOf("WebGL")!==-1?(he=parseFloat(/^WebGL (\d)/.exec(oe)[1]),Q=he>=1):oe.indexOf("OpenGL ES")!==-1&&(he=parseFloat(/^OpenGL ES (\d)/.exec(oe)[1]),Q=he>=2);let be=null,P={};const ue=r.getParameter(r.SCISSOR_BOX),Ce=r.getParameter(r.VIEWPORT),Xe=new ei().fromArray(ue),re=new ei().fromArray(Ce);function Ne(ne,Me,Te,Ge){const dt=new Uint8Array(4),xt=r.createTexture();r.bindTexture(ne,xt),r.texParameteri(ne,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(ne,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let Ft=0;Ft<Te;Ft++)ne===r.TEXTURE_3D||ne===r.TEXTURE_2D_ARRAY?r.texImage3D(Me,0,r.RGBA,1,1,Ge,0,r.RGBA,r.UNSIGNED_BYTE,dt):r.texImage2D(Me+Ft,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,dt);return xt}const Be={};Be[r.TEXTURE_2D]=Ne(r.TEXTURE_2D,r.TEXTURE_2D,1),Be[r.TEXTURE_CUBE_MAP]=Ne(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),Be[r.TEXTURE_2D_ARRAY]=Ne(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),Be[r.TEXTURE_3D]=Ne(r.TEXTURE_3D,r.TEXTURE_3D,1,1),s.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ve(r.DEPTH_TEST),l.setFunc(pd),$e(!1),pe(L1),Ve(r.CULL_FACE),j(sc);function Ve(ne){g[ne]!==!0&&(r.enable(ne),g[ne]=!0)}function tt(ne){g[ne]!==!1&&(r.disable(ne),g[ne]=!1)}function wt(ne,Me){return _[ne]!==Me?(r.bindFramebuffer(ne,Me),_[ne]=Me,ne===r.DRAW_FRAMEBUFFER&&(_[r.FRAMEBUFFER]=Me),ne===r.FRAMEBUFFER&&(_[r.DRAW_FRAMEBUFFER]=Me),!0):!1}function ht(ne,Me){let Te=x,Ge=!1;if(ne){Te=y.get(Me),Te===void 0&&(Te=[],y.set(Me,Te));const dt=ne.textures;if(Te.length!==dt.length||Te[0]!==r.COLOR_ATTACHMENT0){for(let xt=0,Ft=dt.length;xt<Ft;xt++)Te[xt]=r.COLOR_ATTACHMENT0+xt;Te.length=dt.length,Ge=!0}}else Te[0]!==r.BACK&&(Te[0]=r.BACK,Ge=!0);Ge&&r.drawBuffers(Te)}function Pt(ne){return M!==ne?(r.useProgram(ne),M=ne,!0):!1}const Je={[ff]:r.FUNC_ADD,[Qw]:r.FUNC_SUBTRACT,[$w]:r.FUNC_REVERSE_SUBTRACT};Je[e2]=r.MIN,Je[t2]=r.MAX;const De={[n2]:r.ZERO,[i2]:r.ONE,[a2]:r.SRC_COLOR,[Ix]:r.SRC_ALPHA,[u2]:r.SRC_ALPHA_SATURATE,[l2]:r.DST_COLOR,[r2]:r.DST_ALPHA,[s2]:r.ONE_MINUS_SRC_COLOR,[Px]:r.ONE_MINUS_SRC_ALPHA,[c2]:r.ONE_MINUS_DST_COLOR,[o2]:r.ONE_MINUS_DST_ALPHA,[f2]:r.CONSTANT_COLOR,[h2]:r.ONE_MINUS_CONSTANT_COLOR,[d2]:r.CONSTANT_ALPHA,[p2]:r.ONE_MINUS_CONSTANT_ALPHA};function j(ne,Me,Te,Ge,dt,xt,Ft,rn,Bn,St){if(ne===sc){T===!0&&(tt(r.BLEND),T=!1);return}if(T===!1&&(Ve(r.BLEND),T=!0),ne!==Zw){if(ne!==b||St!==U){if((E!==ff||B!==ff)&&(r.blendEquation(r.FUNC_ADD),E=ff,B=ff),St)switch(ne){case id:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case I1:r.blendFunc(r.ONE,r.ONE);break;case P1:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case F1:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne);break}else switch(ne){case id:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case I1:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case P1:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case F1:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne);break}w=null,D=null,I=null,L=null,F.set(0,0,0),H=0,b=ne,U=St}return}dt=dt||Me,xt=xt||Te,Ft=Ft||Ge,(Me!==E||dt!==B)&&(r.blendEquationSeparate(Je[Me],Je[dt]),E=Me,B=dt),(Te!==w||Ge!==D||xt!==I||Ft!==L)&&(r.blendFuncSeparate(De[Te],De[Ge],De[xt],De[Ft]),w=Te,D=Ge,I=xt,L=Ft),(rn.equals(F)===!1||Bn!==H)&&(r.blendColor(rn.r,rn.g,rn.b,Bn),F.copy(rn),H=Bn),b=ne,U=!1}function Mt(ne,Me){ne.side===_o?tt(r.CULL_FACE):Ve(r.CULL_FACE);let Te=ne.side===Ks;Me&&(Te=!Te),$e(Te),ne.blending===id&&ne.transparent===!1?j(sc):j(ne.blending,ne.blendEquation,ne.blendSrc,ne.blendDst,ne.blendEquationAlpha,ne.blendSrcAlpha,ne.blendDstAlpha,ne.blendColor,ne.blendAlpha,ne.premultipliedAlpha),l.setFunc(ne.depthFunc),l.setTest(ne.depthTest),l.setMask(ne.depthWrite),s.setMask(ne.colorWrite);const Ge=ne.stencilWrite;c.setTest(Ge),Ge&&(c.setMask(ne.stencilWriteMask),c.setFunc(ne.stencilFunc,ne.stencilRef,ne.stencilFuncMask),c.setOp(ne.stencilFail,ne.stencilZFail,ne.stencilZPass)),Lt(ne.polygonOffset,ne.polygonOffsetFactor,ne.polygonOffsetUnits),ne.alphaToCoverage===!0?Ve(r.SAMPLE_ALPHA_TO_COVERAGE):tt(r.SAMPLE_ALPHA_TO_COVERAGE)}function $e(ne){N!==ne&&(ne?r.frontFace(r.CW):r.frontFace(r.CCW),N=ne)}function pe(ne){ne!==Ww?(Ve(r.CULL_FACE),ne!==Y&&(ne===L1?r.cullFace(r.BACK):ne===jw?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):tt(r.CULL_FACE),Y=ne}function at(ne){ne!==ee&&(Q&&r.lineWidth(ne),ee=ne)}function Lt(ne,Me,Te){ne?(Ve(r.POLYGON_OFFSET_FILL),($!==Me||ae!==Te)&&(r.polygonOffset(Me,Te),$=Me,ae=Te)):tt(r.POLYGON_OFFSET_FILL)}function ut(ne){ne?Ve(r.SCISSOR_TEST):tt(r.SCISSOR_TEST)}function W(ne){ne===void 0&&(ne=r.TEXTURE0+me-1),be!==ne&&(r.activeTexture(ne),be=ne)}function k(ne,Me,Te){Te===void 0&&(be===null?Te=r.TEXTURE0+me-1:Te=be);let Ge=P[Te];Ge===void 0&&(Ge={type:void 0,texture:void 0},P[Te]=Ge),(Ge.type!==ne||Ge.texture!==Me)&&(be!==Te&&(r.activeTexture(Te),be=Te),r.bindTexture(ne,Me||Be[ne]),Ge.type=ne,Ge.texture=Me)}function xe(){const ne=P[be];ne!==void 0&&ne.type!==void 0&&(r.bindTexture(ne.type,null),ne.type=void 0,ne.texture=void 0)}function ze(){try{r.compressedTexImage2D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Ye(){try{r.compressedTexImage3D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function ke(){try{r.texSubImage2D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function _t(){try{r.texSubImage3D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function lt(){try{r.compressedTexSubImage2D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function yt(){try{r.compressedTexSubImage3D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function $t(){try{r.texStorage2D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function st(){try{r.texStorage3D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function vt(){try{r.texImage2D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Nt(){try{r.texImage3D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function mt(ne){Xe.equals(ne)===!1&&(r.scissor(ne.x,ne.y,ne.z,ne.w),Xe.copy(ne))}function Et(ne){re.equals(ne)===!1&&(r.viewport(ne.x,ne.y,ne.z,ne.w),re.copy(ne))}function le(ne,Me){let Te=p.get(Me);Te===void 0&&(Te=new WeakMap,p.set(Me,Te));let Ge=Te.get(ne);Ge===void 0&&(Ge=r.getUniformBlockIndex(Me,ne.name),Te.set(ne,Ge))}function Re(ne,Me){const Ge=p.get(Me).get(ne);h.get(Me)!==Ge&&(r.uniformBlockBinding(Me,Ge,ne.__bindingPointIndex),h.set(Me,Ge))}function rt(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),l.setReversed(!1),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),g={},be=null,P={},_={},y=new WeakMap,x=[],M=null,T=!1,b=null,E=null,w=null,D=null,B=null,I=null,L=null,F=new Bt(0,0,0),H=0,U=!1,N=null,Y=null,ee=null,$=null,ae=null,Xe.set(0,0,r.canvas.width,r.canvas.height),re.set(0,0,r.canvas.width,r.canvas.height),s.reset(),l.reset(),c.reset()}return{buffers:{color:s,depth:l,stencil:c},enable:Ve,disable:tt,bindFramebuffer:wt,drawBuffers:ht,useProgram:Pt,setBlending:j,setMaterial:Mt,setFlipSided:$e,setCullFace:pe,setLineWidth:at,setPolygonOffset:Lt,setScissorTest:ut,activeTexture:W,bindTexture:k,unbindTexture:xe,compressedTexImage2D:ze,compressedTexImage3D:Ye,texImage2D:vt,texImage3D:Nt,updateUBOMapping:le,uniformBlockBinding:Re,texStorage2D:$t,texStorage3D:st,texSubImage2D:ke,texSubImage3D:_t,compressedTexSubImage2D:lt,compressedTexSubImage3D:yt,scissor:mt,viewport:Et,reset:rt}}function YH(r,e,t,n,i,s,l){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new et,g=new WeakMap;let _;const y=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M(W,k){return x?new OffscreenCanvas(W,k):$0("canvas")}function T(W,k,xe){let ze=1;const Ye=ut(W);if((Ye.width>xe||Ye.height>xe)&&(ze=xe/Math.max(Ye.width,Ye.height)),ze<1)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap||typeof VideoFrame<"u"&&W instanceof VideoFrame){const ke=Math.floor(ze*Ye.width),_t=Math.floor(ze*Ye.height);_===void 0&&(_=M(ke,_t));const lt=k?M(ke,_t):_;return lt.width=ke,lt.height=_t,lt.getContext("2d").drawImage(W,0,0,ke,_t),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ye.width+"x"+Ye.height+") to ("+ke+"x"+_t+")."),lt}else return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ye.width+"x"+Ye.height+")."),W;return W}function b(W){return W.generateMipmaps}function E(W){r.generateMipmap(W)}function w(W){return W.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:W.isWebGL3DRenderTarget?r.TEXTURE_3D:W.isWebGLArrayRenderTarget||W.isCompressedArrayTexture?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D}function D(W,k,xe,ze,Ye=!1){if(W!==null){if(r[W]!==void 0)return r[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let ke=k;if(k===r.RED&&(xe===r.FLOAT&&(ke=r.R32F),xe===r.HALF_FLOAT&&(ke=r.R16F),xe===r.UNSIGNED_BYTE&&(ke=r.R8)),k===r.RED_INTEGER&&(xe===r.UNSIGNED_BYTE&&(ke=r.R8UI),xe===r.UNSIGNED_SHORT&&(ke=r.R16UI),xe===r.UNSIGNED_INT&&(ke=r.R32UI),xe===r.BYTE&&(ke=r.R8I),xe===r.SHORT&&(ke=r.R16I),xe===r.INT&&(ke=r.R32I)),k===r.RG&&(xe===r.FLOAT&&(ke=r.RG32F),xe===r.HALF_FLOAT&&(ke=r.RG16F),xe===r.UNSIGNED_BYTE&&(ke=r.RG8)),k===r.RG_INTEGER&&(xe===r.UNSIGNED_BYTE&&(ke=r.RG8UI),xe===r.UNSIGNED_SHORT&&(ke=r.RG16UI),xe===r.UNSIGNED_INT&&(ke=r.RG32UI),xe===r.BYTE&&(ke=r.RG8I),xe===r.SHORT&&(ke=r.RG16I),xe===r.INT&&(ke=r.RG32I)),k===r.RGB_INTEGER&&(xe===r.UNSIGNED_BYTE&&(ke=r.RGB8UI),xe===r.UNSIGNED_SHORT&&(ke=r.RGB16UI),xe===r.UNSIGNED_INT&&(ke=r.RGB32UI),xe===r.BYTE&&(ke=r.RGB8I),xe===r.SHORT&&(ke=r.RGB16I),xe===r.INT&&(ke=r.RGB32I)),k===r.RGBA_INTEGER&&(xe===r.UNSIGNED_BYTE&&(ke=r.RGBA8UI),xe===r.UNSIGNED_SHORT&&(ke=r.RGBA16UI),xe===r.UNSIGNED_INT&&(ke=r.RGBA32UI),xe===r.BYTE&&(ke=r.RGBA8I),xe===r.SHORT&&(ke=r.RGBA16I),xe===r.INT&&(ke=r.RGBA32I)),k===r.RGB&&xe===r.UNSIGNED_INT_5_9_9_9_REV&&(ke=r.RGB9_E5),k===r.RGBA){const _t=Ye?K0:Yn.getTransfer(ze);xe===r.FLOAT&&(ke=r.RGBA32F),xe===r.HALF_FLOAT&&(ke=r.RGBA16F),xe===r.UNSIGNED_BYTE&&(ke=_t===gi?r.SRGB8_ALPHA8:r.RGBA8),xe===r.UNSIGNED_SHORT_4_4_4_4&&(ke=r.RGBA4),xe===r.UNSIGNED_SHORT_5_5_5_1&&(ke=r.RGB5_A1)}return(ke===r.R16F||ke===r.R32F||ke===r.RG16F||ke===r.RG32F||ke===r.RGBA16F||ke===r.RGBA32F)&&e.get("EXT_color_buffer_float"),ke}function B(W,k){let xe;return W?k===null||k===pc||k===md?xe=r.DEPTH24_STENCIL8:k===ji?xe=r.DEPTH32F_STENCIL8:k===vm&&(xe=r.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):k===null||k===pc||k===md?xe=r.DEPTH_COMPONENT24:k===ji?xe=r.DEPTH_COMPONENT32F:k===vm&&(xe=r.DEPTH_COMPONENT16),xe}function I(W,k){return b(W)===!0||W.isFramebufferTexture&&W.minFilter!==Xa&&W.minFilter!==oi?Math.log2(Math.max(k.width,k.height))+1:W.mipmaps!==void 0&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?k.mipmaps.length:1}function L(W){const k=W.target;k.removeEventListener("dispose",L),H(k),k.isVideoTexture&&g.delete(k)}function F(W){const k=W.target;k.removeEventListener("dispose",F),N(k)}function H(W){const k=n.get(W);if(k.__webglInit===void 0)return;const xe=W.source,ze=y.get(xe);if(ze){const Ye=ze[k.__cacheKey];Ye.usedTimes--,Ye.usedTimes===0&&U(W),Object.keys(ze).length===0&&y.delete(xe)}n.remove(W)}function U(W){const k=n.get(W);r.deleteTexture(k.__webglTexture);const xe=W.source,ze=y.get(xe);delete ze[k.__cacheKey],l.memory.textures--}function N(W){const k=n.get(W);if(W.depthTexture&&(W.depthTexture.dispose(),n.remove(W.depthTexture)),W.isWebGLCubeRenderTarget)for(let ze=0;ze<6;ze++){if(Array.isArray(k.__webglFramebuffer[ze]))for(let Ye=0;Ye<k.__webglFramebuffer[ze].length;Ye++)r.deleteFramebuffer(k.__webglFramebuffer[ze][Ye]);else r.deleteFramebuffer(k.__webglFramebuffer[ze]);k.__webglDepthbuffer&&r.deleteRenderbuffer(k.__webglDepthbuffer[ze])}else{if(Array.isArray(k.__webglFramebuffer))for(let ze=0;ze<k.__webglFramebuffer.length;ze++)r.deleteFramebuffer(k.__webglFramebuffer[ze]);else r.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&r.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&r.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let ze=0;ze<k.__webglColorRenderbuffer.length;ze++)k.__webglColorRenderbuffer[ze]&&r.deleteRenderbuffer(k.__webglColorRenderbuffer[ze]);k.__webglDepthRenderbuffer&&r.deleteRenderbuffer(k.__webglDepthRenderbuffer)}const xe=W.textures;for(let ze=0,Ye=xe.length;ze<Ye;ze++){const ke=n.get(xe[ze]);ke.__webglTexture&&(r.deleteTexture(ke.__webglTexture),l.memory.textures--),n.remove(xe[ze])}n.remove(W)}let Y=0;function ee(){Y=0}function $(){const W=Y;return W>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+i.maxTextures),Y+=1,W}function ae(W){const k=[];return k.push(W.wrapS),k.push(W.wrapT),k.push(W.wrapR||0),k.push(W.magFilter),k.push(W.minFilter),k.push(W.anisotropy),k.push(W.internalFormat),k.push(W.format),k.push(W.type),k.push(W.generateMipmaps),k.push(W.premultiplyAlpha),k.push(W.flipY),k.push(W.unpackAlignment),k.push(W.colorSpace),k.join()}function me(W,k){const xe=n.get(W);if(W.isVideoTexture&&at(W),W.isRenderTargetTexture===!1&&W.version>0&&xe.__version!==W.version){const ze=W.image;if(ze===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ze.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{re(xe,W,k);return}}t.bindTexture(r.TEXTURE_2D,xe.__webglTexture,r.TEXTURE0+k)}function Q(W,k){const xe=n.get(W);if(W.version>0&&xe.__version!==W.version){re(xe,W,k);return}t.bindTexture(r.TEXTURE_2D_ARRAY,xe.__webglTexture,r.TEXTURE0+k)}function he(W,k){const xe=n.get(W);if(W.version>0&&xe.__version!==W.version){re(xe,W,k);return}t.bindTexture(r.TEXTURE_3D,xe.__webglTexture,r.TEXTURE0+k)}function oe(W,k){const xe=n.get(W);if(W.version>0&&xe.__version!==W.version){Ne(xe,W,k);return}t.bindTexture(r.TEXTURE_CUBE_MAP,xe.__webglTexture,r.TEXTURE0+k)}const be={[bf]:r.REPEAT,[fa]:r.CLAMP_TO_EDGE,[gm]:r.MIRRORED_REPEAT},P={[Xa]:r.NEAREST,[HA]:r.NEAREST_MIPMAP_NEAREST,[Wh]:r.NEAREST_MIPMAP_LINEAR,[oi]:r.LINEAR,[sm]:r.LINEAR_MIPMAP_NEAREST,[xo]:r.LINEAR_MIPMAP_LINEAR},ue={[D2]:r.NEVER,[P2]:r.ALWAYS,[U2]:r.LESS,[YE]:r.LEQUAL,[O2]:r.EQUAL,[I2]:r.GEQUAL,[N2]:r.GREATER,[L2]:r.NOTEQUAL};function Ce(W,k){if(k.type===ji&&e.has("OES_texture_float_linear")===!1&&(k.magFilter===oi||k.magFilter===sm||k.magFilter===Wh||k.magFilter===xo||k.minFilter===oi||k.minFilter===sm||k.minFilter===Wh||k.minFilter===xo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(W,r.TEXTURE_WRAP_S,be[k.wrapS]),r.texParameteri(W,r.TEXTURE_WRAP_T,be[k.wrapT]),(W===r.TEXTURE_3D||W===r.TEXTURE_2D_ARRAY)&&r.texParameteri(W,r.TEXTURE_WRAP_R,be[k.wrapR]),r.texParameteri(W,r.TEXTURE_MAG_FILTER,P[k.magFilter]),r.texParameteri(W,r.TEXTURE_MIN_FILTER,P[k.minFilter]),k.compareFunction&&(r.texParameteri(W,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(W,r.TEXTURE_COMPARE_FUNC,ue[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(k.magFilter===Xa||k.minFilter!==Wh&&k.minFilter!==xo||k.type===ji&&e.has("OES_texture_float_linear")===!1)return;if(k.anisotropy>1||n.get(k).__currentAnisotropy){const xe=e.get("EXT_texture_filter_anisotropic");r.texParameterf(W,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,i.getMaxAnisotropy())),n.get(k).__currentAnisotropy=k.anisotropy}}}function Xe(W,k){let xe=!1;W.__webglInit===void 0&&(W.__webglInit=!0,k.addEventListener("dispose",L));const ze=k.source;let Ye=y.get(ze);Ye===void 0&&(Ye={},y.set(ze,Ye));const ke=ae(k);if(ke!==W.__cacheKey){Ye[ke]===void 0&&(Ye[ke]={texture:r.createTexture(),usedTimes:0},l.memory.textures++,xe=!0),Ye[ke].usedTimes++;const _t=Ye[W.__cacheKey];_t!==void 0&&(Ye[W.__cacheKey].usedTimes--,_t.usedTimes===0&&U(k)),W.__cacheKey=ke,W.__webglTexture=Ye[ke].texture}return xe}function re(W,k,xe){let ze=r.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(ze=r.TEXTURE_2D_ARRAY),k.isData3DTexture&&(ze=r.TEXTURE_3D);const Ye=Xe(W,k),ke=k.source;t.bindTexture(ze,W.__webglTexture,r.TEXTURE0+xe);const _t=n.get(ke);if(ke.version!==_t.__version||Ye===!0){t.activeTexture(r.TEXTURE0+xe);const lt=Yn.getPrimaries(Yn.workingColorSpace),yt=k.colorSpace===tu?null:Yn.getPrimaries(k.colorSpace),$t=k.colorSpace===tu||lt===yt?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,k.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,k.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,$t);let st=T(k.image,!1,i.maxTextureSize);st=Lt(k,st);const vt=s.convert(k.format,k.colorSpace),Nt=s.convert(k.type);let mt=D(k.internalFormat,vt,Nt,k.colorSpace,k.isVideoTexture);Ce(ze,k);let Et;const le=k.mipmaps,Re=k.isVideoTexture!==!0,rt=_t.__version===void 0||Ye===!0,ne=ke.dataReady,Me=I(k,st);if(k.isDepthTexture)mt=B(k.format===gd,k.type),rt&&(Re?t.texStorage2D(r.TEXTURE_2D,1,mt,st.width,st.height):t.texImage2D(r.TEXTURE_2D,0,mt,st.width,st.height,0,vt,Nt,null));else if(k.isDataTexture)if(le.length>0){Re&&rt&&t.texStorage2D(r.TEXTURE_2D,Me,mt,le[0].width,le[0].height);for(let Te=0,Ge=le.length;Te<Ge;Te++)Et=le[Te],Re?ne&&t.texSubImage2D(r.TEXTURE_2D,Te,0,0,Et.width,Et.height,vt,Nt,Et.data):t.texImage2D(r.TEXTURE_2D,Te,mt,Et.width,Et.height,0,vt,Nt,Et.data);k.generateMipmaps=!1}else Re?(rt&&t.texStorage2D(r.TEXTURE_2D,Me,mt,st.width,st.height),ne&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,st.width,st.height,vt,Nt,st.data)):t.texImage2D(r.TEXTURE_2D,0,mt,st.width,st.height,0,vt,Nt,st.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){Re&&rt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Me,mt,le[0].width,le[0].height,st.depth);for(let Te=0,Ge=le.length;Te<Ge;Te++)if(Et=le[Te],k.format!==ha)if(vt!==null)if(Re){if(ne)if(k.layerUpdates.size>0){const dt=j1(Et.width,Et.height,k.format,k.type);for(const xt of k.layerUpdates){const Ft=Et.data.subarray(xt*dt/Et.data.BYTES_PER_ELEMENT,(xt+1)*dt/Et.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Te,0,0,xt,Et.width,Et.height,1,vt,Ft)}k.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Te,0,0,0,Et.width,Et.height,st.depth,vt,Et.data)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Te,mt,Et.width,Et.height,st.depth,0,Et.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Re?ne&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,Te,0,0,0,Et.width,Et.height,st.depth,vt,Nt,Et.data):t.texImage3D(r.TEXTURE_2D_ARRAY,Te,mt,Et.width,Et.height,st.depth,0,vt,Nt,Et.data)}else{Re&&rt&&t.texStorage2D(r.TEXTURE_2D,Me,mt,le[0].width,le[0].height);for(let Te=0,Ge=le.length;Te<Ge;Te++)Et=le[Te],k.format!==ha?vt!==null?Re?ne&&t.compressedTexSubImage2D(r.TEXTURE_2D,Te,0,0,Et.width,Et.height,vt,Et.data):t.compressedTexImage2D(r.TEXTURE_2D,Te,mt,Et.width,Et.height,0,Et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Re?ne&&t.texSubImage2D(r.TEXTURE_2D,Te,0,0,Et.width,Et.height,vt,Nt,Et.data):t.texImage2D(r.TEXTURE_2D,Te,mt,Et.width,Et.height,0,vt,Nt,Et.data)}else if(k.isDataArrayTexture)if(Re){if(rt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Me,mt,st.width,st.height,st.depth),ne)if(k.layerUpdates.size>0){const Te=j1(st.width,st.height,k.format,k.type);for(const Ge of k.layerUpdates){const dt=st.data.subarray(Ge*Te/st.data.BYTES_PER_ELEMENT,(Ge+1)*Te/st.data.BYTES_PER_ELEMENT);t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,Ge,st.width,st.height,1,vt,Nt,dt)}k.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,st.width,st.height,st.depth,vt,Nt,st.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,mt,st.width,st.height,st.depth,0,vt,Nt,st.data);else if(k.isData3DTexture)Re?(rt&&t.texStorage3D(r.TEXTURE_3D,Me,mt,st.width,st.height,st.depth),ne&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,st.width,st.height,st.depth,vt,Nt,st.data)):t.texImage3D(r.TEXTURE_3D,0,mt,st.width,st.height,st.depth,0,vt,Nt,st.data);else if(k.isFramebufferTexture){if(rt)if(Re)t.texStorage2D(r.TEXTURE_2D,Me,mt,st.width,st.height);else{let Te=st.width,Ge=st.height;for(let dt=0;dt<Me;dt++)t.texImage2D(r.TEXTURE_2D,dt,mt,Te,Ge,0,vt,Nt,null),Te>>=1,Ge>>=1}}else if(le.length>0){if(Re&&rt){const Te=ut(le[0]);t.texStorage2D(r.TEXTURE_2D,Me,mt,Te.width,Te.height)}for(let Te=0,Ge=le.length;Te<Ge;Te++)Et=le[Te],Re?ne&&t.texSubImage2D(r.TEXTURE_2D,Te,0,0,vt,Nt,Et):t.texImage2D(r.TEXTURE_2D,Te,mt,vt,Nt,Et);k.generateMipmaps=!1}else if(Re){if(rt){const Te=ut(st);t.texStorage2D(r.TEXTURE_2D,Me,mt,Te.width,Te.height)}ne&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,vt,Nt,st)}else t.texImage2D(r.TEXTURE_2D,0,mt,vt,Nt,st);b(k)&&E(ze),_t.__version=ke.version,k.onUpdate&&k.onUpdate(k)}W.__version=k.version}function Ne(W,k,xe){if(k.image.length!==6)return;const ze=Xe(W,k),Ye=k.source;t.bindTexture(r.TEXTURE_CUBE_MAP,W.__webglTexture,r.TEXTURE0+xe);const ke=n.get(Ye);if(Ye.version!==ke.__version||ze===!0){t.activeTexture(r.TEXTURE0+xe);const _t=Yn.getPrimaries(Yn.workingColorSpace),lt=k.colorSpace===tu?null:Yn.getPrimaries(k.colorSpace),yt=k.colorSpace===tu||_t===lt?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,k.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,k.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,yt);const $t=k.isCompressedTexture||k.image[0].isCompressedTexture,st=k.image[0]&&k.image[0].isDataTexture,vt=[];for(let Ge=0;Ge<6;Ge++)!$t&&!st?vt[Ge]=T(k.image[Ge],!0,i.maxCubemapSize):vt[Ge]=st?k.image[Ge].image:k.image[Ge],vt[Ge]=Lt(k,vt[Ge]);const Nt=vt[0],mt=s.convert(k.format,k.colorSpace),Et=s.convert(k.type),le=D(k.internalFormat,mt,Et,k.colorSpace),Re=k.isVideoTexture!==!0,rt=ke.__version===void 0||ze===!0,ne=Ye.dataReady;let Me=I(k,Nt);Ce(r.TEXTURE_CUBE_MAP,k);let Te;if($t){Re&&rt&&t.texStorage2D(r.TEXTURE_CUBE_MAP,Me,le,Nt.width,Nt.height);for(let Ge=0;Ge<6;Ge++){Te=vt[Ge].mipmaps;for(let dt=0;dt<Te.length;dt++){const xt=Te[dt];k.format!==ha?mt!==null?Re?ne&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,dt,0,0,xt.width,xt.height,mt,xt.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,dt,le,xt.width,xt.height,0,xt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Re?ne&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,dt,0,0,xt.width,xt.height,mt,Et,xt.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,dt,le,xt.width,xt.height,0,mt,Et,xt.data)}}}else{if(Te=k.mipmaps,Re&&rt){Te.length>0&&Me++;const Ge=ut(vt[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,Me,le,Ge.width,Ge.height)}for(let Ge=0;Ge<6;Ge++)if(st){Re?ne&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,0,0,vt[Ge].width,vt[Ge].height,mt,Et,vt[Ge].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,le,vt[Ge].width,vt[Ge].height,0,mt,Et,vt[Ge].data);for(let dt=0;dt<Te.length;dt++){const Ft=Te[dt].image[Ge].image;Re?ne&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,dt+1,0,0,Ft.width,Ft.height,mt,Et,Ft.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,dt+1,le,Ft.width,Ft.height,0,mt,Et,Ft.data)}}else{Re?ne&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,0,0,mt,Et,vt[Ge]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,le,mt,Et,vt[Ge]);for(let dt=0;dt<Te.length;dt++){const xt=Te[dt];Re?ne&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,dt+1,0,0,mt,Et,xt.image[Ge]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,dt+1,le,mt,Et,xt.image[Ge])}}}b(k)&&E(r.TEXTURE_CUBE_MAP),ke.__version=Ye.version,k.onUpdate&&k.onUpdate(k)}W.__version=k.version}function Be(W,k,xe,ze,Ye,ke){const _t=s.convert(xe.format,xe.colorSpace),lt=s.convert(xe.type),yt=D(xe.internalFormat,_t,lt,xe.colorSpace),$t=n.get(k),st=n.get(xe);if(st.__renderTarget=k,!$t.__hasExternalTextures){const vt=Math.max(1,k.width>>ke),Nt=Math.max(1,k.height>>ke);Ye===r.TEXTURE_3D||Ye===r.TEXTURE_2D_ARRAY?t.texImage3D(Ye,ke,yt,vt,Nt,k.depth,0,_t,lt,null):t.texImage2D(Ye,ke,yt,vt,Nt,0,_t,lt,null)}t.bindFramebuffer(r.FRAMEBUFFER,W),pe(k)?c.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,ze,Ye,st.__webglTexture,0,$e(k)):(Ye===r.TEXTURE_2D||Ye>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Ye<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,ze,Ye,st.__webglTexture,ke),t.bindFramebuffer(r.FRAMEBUFFER,null)}function Ve(W,k,xe){if(r.bindRenderbuffer(r.RENDERBUFFER,W),k.depthBuffer){const ze=k.depthTexture,Ye=ze&&ze.isDepthTexture?ze.type:null,ke=B(k.stencilBuffer,Ye),_t=k.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,lt=$e(k);pe(k)?c.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,lt,ke,k.width,k.height):xe?r.renderbufferStorageMultisample(r.RENDERBUFFER,lt,ke,k.width,k.height):r.renderbufferStorage(r.RENDERBUFFER,ke,k.width,k.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,_t,r.RENDERBUFFER,W)}else{const ze=k.textures;for(let Ye=0;Ye<ze.length;Ye++){const ke=ze[Ye],_t=s.convert(ke.format,ke.colorSpace),lt=s.convert(ke.type),yt=D(ke.internalFormat,_t,lt,ke.colorSpace),$t=$e(k);xe&&pe(k)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,$t,yt,k.width,k.height):pe(k)?c.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,$t,yt,k.width,k.height):r.renderbufferStorage(r.RENDERBUFFER,yt,k.width,k.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function tt(W,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,W),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ze=n.get(k.depthTexture);ze.__renderTarget=k,(!ze.__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),me(k.depthTexture,0);const Ye=ze.__webglTexture,ke=$e(k);if(k.depthTexture.format===ad)pe(k)?c.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Ye,0,ke):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Ye,0);else if(k.depthTexture.format===gd)pe(k)?c.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Ye,0,ke):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Ye,0);else throw new Error("Unknown depthTexture format")}function wt(W){const k=n.get(W),xe=W.isWebGLCubeRenderTarget===!0;if(k.__boundDepthTexture!==W.depthTexture){const ze=W.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),ze){const Ye=()=>{delete k.__boundDepthTexture,delete k.__depthDisposeCallback,ze.removeEventListener("dispose",Ye)};ze.addEventListener("dispose",Ye),k.__depthDisposeCallback=Ye}k.__boundDepthTexture=ze}if(W.depthTexture&&!k.__autoAllocateDepthBuffer){if(xe)throw new Error("target.depthTexture not supported in Cube render targets");tt(k.__webglFramebuffer,W)}else if(xe){k.__webglDepthbuffer=[];for(let ze=0;ze<6;ze++)if(t.bindFramebuffer(r.FRAMEBUFFER,k.__webglFramebuffer[ze]),k.__webglDepthbuffer[ze]===void 0)k.__webglDepthbuffer[ze]=r.createRenderbuffer(),Ve(k.__webglDepthbuffer[ze],W,!1);else{const Ye=W.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,ke=k.__webglDepthbuffer[ze];r.bindRenderbuffer(r.RENDERBUFFER,ke),r.framebufferRenderbuffer(r.FRAMEBUFFER,Ye,r.RENDERBUFFER,ke)}}else if(t.bindFramebuffer(r.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer===void 0)k.__webglDepthbuffer=r.createRenderbuffer(),Ve(k.__webglDepthbuffer,W,!1);else{const ze=W.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Ye=k.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,Ye),r.framebufferRenderbuffer(r.FRAMEBUFFER,ze,r.RENDERBUFFER,Ye)}t.bindFramebuffer(r.FRAMEBUFFER,null)}function ht(W,k,xe){const ze=n.get(W);k!==void 0&&Be(ze.__webglFramebuffer,W,W.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),xe!==void 0&&wt(W)}function Pt(W){const k=W.texture,xe=n.get(W),ze=n.get(k);W.addEventListener("dispose",F);const Ye=W.textures,ke=W.isWebGLCubeRenderTarget===!0,_t=Ye.length>1;if(_t||(ze.__webglTexture===void 0&&(ze.__webglTexture=r.createTexture()),ze.__version=k.version,l.memory.textures++),ke){xe.__webglFramebuffer=[];for(let lt=0;lt<6;lt++)if(k.mipmaps&&k.mipmaps.length>0){xe.__webglFramebuffer[lt]=[];for(let yt=0;yt<k.mipmaps.length;yt++)xe.__webglFramebuffer[lt][yt]=r.createFramebuffer()}else xe.__webglFramebuffer[lt]=r.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){xe.__webglFramebuffer=[];for(let lt=0;lt<k.mipmaps.length;lt++)xe.__webglFramebuffer[lt]=r.createFramebuffer()}else xe.__webglFramebuffer=r.createFramebuffer();if(_t)for(let lt=0,yt=Ye.length;lt<yt;lt++){const $t=n.get(Ye[lt]);$t.__webglTexture===void 0&&($t.__webglTexture=r.createTexture(),l.memory.textures++)}if(W.samples>0&&pe(W)===!1){xe.__webglMultisampledFramebuffer=r.createFramebuffer(),xe.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,xe.__webglMultisampledFramebuffer);for(let lt=0;lt<Ye.length;lt++){const yt=Ye[lt];xe.__webglColorRenderbuffer[lt]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,xe.__webglColorRenderbuffer[lt]);const $t=s.convert(yt.format,yt.colorSpace),st=s.convert(yt.type),vt=D(yt.internalFormat,$t,st,yt.colorSpace,W.isXRRenderTarget===!0),Nt=$e(W);r.renderbufferStorageMultisample(r.RENDERBUFFER,Nt,vt,W.width,W.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+lt,r.RENDERBUFFER,xe.__webglColorRenderbuffer[lt])}r.bindRenderbuffer(r.RENDERBUFFER,null),W.depthBuffer&&(xe.__webglDepthRenderbuffer=r.createRenderbuffer(),Ve(xe.__webglDepthRenderbuffer,W,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(ke){t.bindTexture(r.TEXTURE_CUBE_MAP,ze.__webglTexture),Ce(r.TEXTURE_CUBE_MAP,k);for(let lt=0;lt<6;lt++)if(k.mipmaps&&k.mipmaps.length>0)for(let yt=0;yt<k.mipmaps.length;yt++)Be(xe.__webglFramebuffer[lt][yt],W,k,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+lt,yt);else Be(xe.__webglFramebuffer[lt],W,k,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+lt,0);b(k)&&E(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(_t){for(let lt=0,yt=Ye.length;lt<yt;lt++){const $t=Ye[lt],st=n.get($t);t.bindTexture(r.TEXTURE_2D,st.__webglTexture),Ce(r.TEXTURE_2D,$t),Be(xe.__webglFramebuffer,W,$t,r.COLOR_ATTACHMENT0+lt,r.TEXTURE_2D,0),b($t)&&E(r.TEXTURE_2D)}t.unbindTexture()}else{let lt=r.TEXTURE_2D;if((W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(lt=W.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(lt,ze.__webglTexture),Ce(lt,k),k.mipmaps&&k.mipmaps.length>0)for(let yt=0;yt<k.mipmaps.length;yt++)Be(xe.__webglFramebuffer[yt],W,k,r.COLOR_ATTACHMENT0,lt,yt);else Be(xe.__webglFramebuffer,W,k,r.COLOR_ATTACHMENT0,lt,0);b(k)&&E(lt),t.unbindTexture()}W.depthBuffer&&wt(W)}function Je(W){const k=W.textures;for(let xe=0,ze=k.length;xe<ze;xe++){const Ye=k[xe];if(b(Ye)){const ke=w(W),_t=n.get(Ye).__webglTexture;t.bindTexture(ke,_t),E(ke),t.unbindTexture()}}}const De=[],j=[];function Mt(W){if(W.samples>0){if(pe(W)===!1){const k=W.textures,xe=W.width,ze=W.height;let Ye=r.COLOR_BUFFER_BIT;const ke=W.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,_t=n.get(W),lt=k.length>1;if(lt)for(let yt=0;yt<k.length;yt++)t.bindFramebuffer(r.FRAMEBUFFER,_t.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+yt,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,_t.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+yt,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,_t.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,_t.__webglFramebuffer);for(let yt=0;yt<k.length;yt++){if(W.resolveDepthBuffer&&(W.depthBuffer&&(Ye|=r.DEPTH_BUFFER_BIT),W.stencilBuffer&&W.resolveStencilBuffer&&(Ye|=r.STENCIL_BUFFER_BIT)),lt){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,_t.__webglColorRenderbuffer[yt]);const $t=n.get(k[yt]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,$t,0)}r.blitFramebuffer(0,0,xe,ze,0,0,xe,ze,Ye,r.NEAREST),h===!0&&(De.length=0,j.length=0,De.push(r.COLOR_ATTACHMENT0+yt),W.depthBuffer&&W.resolveDepthBuffer===!1&&(De.push(ke),j.push(ke),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,j)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,De))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),lt)for(let yt=0;yt<k.length;yt++){t.bindFramebuffer(r.FRAMEBUFFER,_t.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+yt,r.RENDERBUFFER,_t.__webglColorRenderbuffer[yt]);const $t=n.get(k[yt]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,_t.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+yt,r.TEXTURE_2D,$t,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,_t.__webglMultisampledFramebuffer)}else if(W.depthBuffer&&W.resolveDepthBuffer===!1&&h){const k=W.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[k])}}}function $e(W){return Math.min(i.maxSamples,W.samples)}function pe(W){const k=n.get(W);return W.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function at(W){const k=l.render.frame;g.get(W)!==k&&(g.set(W,k),W.update())}function Lt(W,k){const xe=W.colorSpace,ze=W.format,Ye=W.type;return W.isCompressedTexture===!0||W.isVideoTexture===!0||xe!==dl&&xe!==tu&&(Yn.getTransfer(xe)===gi?(ze!==ha||Ye!==xr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",xe)),k}function ut(W){return typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement?(p.width=W.naturalWidth||W.width,p.height=W.naturalHeight||W.height):typeof VideoFrame<"u"&&W instanceof VideoFrame?(p.width=W.displayWidth,p.height=W.displayHeight):(p.width=W.width,p.height=W.height),p}this.allocateTextureUnit=$,this.resetTextureUnits=ee,this.setTexture2D=me,this.setTexture2DArray=Q,this.setTexture3D=he,this.setTextureCube=oe,this.rebindTextures=ht,this.setupRenderTarget=Pt,this.updateRenderTargetMipmap=Je,this.updateMultisampleRenderTarget=Mt,this.setupDepthRenderbuffer=wt,this.setupFrameBufferTexture=Be,this.useMultisampledRTT=pe}function HB(r,e){function t(n,i=tu){let s;const l=Yn.getTransfer(i);if(n===xr)return r.UNSIGNED_BYTE;if(n===kA)return r.UNSIGNED_SHORT_4_4_4_4;if(n===XA)return r.UNSIGNED_SHORT_5_5_5_1;if(n===IE)return r.UNSIGNED_INT_5_9_9_9_REV;if(n===GA)return r.BYTE;if(n===VA)return r.SHORT;if(n===vm)return r.UNSIGNED_SHORT;if(n===_v)return r.INT;if(n===pc)return r.UNSIGNED_INT;if(n===ji)return r.FLOAT;if(n===ka)return r.HALF_FLOAT;if(n===PE)return r.ALPHA;if(n===FE)return r.RGB;if(n===ha)return r.RGBA;if(n===zE)return r.LUMINANCE;if(n===HE)return r.LUMINANCE_ALPHA;if(n===ad)return r.DEPTH_COMPONENT;if(n===gd)return r.DEPTH_STENCIL;if(n===yv)return r.RED;if(n===xv)return r.RED_INTEGER;if(n===GE)return r.RG;if(n===YA)return r.RG_INTEGER;if(n===qA)return r.RGBA_INTEGER;if(n===T0||n===C0||n===R0||n===w0)if(l===gi)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===T0)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===C0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===R0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===w0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===T0)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===C0)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===R0)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===w0)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Yx||n===qx||n===Jx||n===Wx)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===Yx)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===qx)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Jx)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Wx)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===jx||n===Kx||n===Zx)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===jx||n===Kx)return l===gi?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===Zx)return l===gi?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===Qx||n===$x||n===eA||n===tA||n===nA||n===iA||n===aA||n===sA||n===rA||n===oA||n===lA||n===cA||n===uA||n===fA)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===Qx)return l===gi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===$x)return l===gi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===eA)return l===gi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===tA)return l===gi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===nA)return l===gi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===iA)return l===gi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===aA)return l===gi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===sA)return l===gi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===rA)return l===gi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===oA)return l===gi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===lA)return l===gi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===cA)return l===gi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===uA)return l===gi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===fA)return l===gi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===B0||n===hA||n===dA)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===B0)return l===gi?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===hA)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===dA)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===VE||n===pA||n===mA||n===gA)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===B0)return s.COMPRESSED_RED_RGTC1_EXT;if(n===pA)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===mA)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===gA)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===md?r.UNSIGNED_INT_24_8:r[n]!==void 0?r[n]:null}return{convert:t}}const qH=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,JH=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WH{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const i=new di,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Ar({vertexShader:qH,fragmentShader:JH,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Pi(new Uf(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class jH extends gc{constructor(e,t){super();const n=this;let i=null,s=1,l=null,c="local-floor",h=1,p=null,g=null,_=null,y=null,x=null,M=null;const T=new WH,b=t.getContextAttributes();let E=null,w=null;const D=[],B=[],I=new et;let L=null;const F=new sa;F.viewport=new ei;const H=new sa;H.viewport=new ei;const U=[F,H],N=new BB;let Y=null,ee=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(re){let Ne=D[re];return Ne===void 0&&(Ne=new Sx,D[re]=Ne),Ne.getTargetRaySpace()},this.getControllerGrip=function(re){let Ne=D[re];return Ne===void 0&&(Ne=new Sx,D[re]=Ne),Ne.getGripSpace()},this.getHand=function(re){let Ne=D[re];return Ne===void 0&&(Ne=new Sx,D[re]=Ne),Ne.getHandSpace()};function $(re){const Ne=B.indexOf(re.inputSource);if(Ne===-1)return;const Be=D[Ne];Be!==void 0&&(Be.update(re.inputSource,re.frame,p||l),Be.dispatchEvent({type:re.type,data:re.inputSource}))}function ae(){i.removeEventListener("select",$),i.removeEventListener("selectstart",$),i.removeEventListener("selectend",$),i.removeEventListener("squeeze",$),i.removeEventListener("squeezestart",$),i.removeEventListener("squeezeend",$),i.removeEventListener("end",ae),i.removeEventListener("inputsourceschange",me);for(let re=0;re<D.length;re++){const Ne=B[re];Ne!==null&&(B[re]=null,D[re].disconnect(Ne))}Y=null,ee=null,T.reset(),e.setRenderTarget(E),x=null,y=null,_=null,i=null,w=null,Xe.stop(),n.isPresenting=!1,e.setPixelRatio(L),e.setSize(I.width,I.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(re){s=re,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(re){c=re,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||l},this.setReferenceSpace=function(re){p=re},this.getBaseLayer=function(){return y!==null?y:x},this.getBinding=function(){return _},this.getFrame=function(){return M},this.getSession=function(){return i},this.setSession=async function(re){if(i=re,i!==null){if(E=e.getRenderTarget(),i.addEventListener("select",$),i.addEventListener("selectstart",$),i.addEventListener("selectend",$),i.addEventListener("squeeze",$),i.addEventListener("squeezestart",$),i.addEventListener("squeezeend",$),i.addEventListener("end",ae),i.addEventListener("inputsourceschange",me),b.xrCompatible!==!0&&await t.makeXRCompatible(),L=e.getPixelRatio(),e.getSize(I),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Be=null,Ve=null,tt=null;b.depth&&(tt=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Be=b.stencil?gd:ad,Ve=b.stencil?md:pc);const wt={colorFormat:t.RGBA8,depthFormat:tt,scaleFactor:s};_=new XRWebGLBinding(i,t),y=_.createProjectionLayer(wt),i.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),w=new Mo(y.textureWidth,y.textureHeight,{format:ha,type:xr,depthTexture:new nb(y.textureWidth,y.textureHeight,Ve,void 0,void 0,void 0,void 0,void 0,void 0,Be),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const Be={antialias:b.antialias,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s};x=new XRWebGLLayer(i,t,Be),i.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),w=new Mo(x.framebufferWidth,x.framebufferHeight,{format:ha,type:xr,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(h),p=null,l=await i.requestReferenceSpace(c),Xe.setContext(i),Xe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return T.getDepthTexture()};function me(re){for(let Ne=0;Ne<re.removed.length;Ne++){const Be=re.removed[Ne],Ve=B.indexOf(Be);Ve>=0&&(B[Ve]=null,D[Ve].disconnect(Be))}for(let Ne=0;Ne<re.added.length;Ne++){const Be=re.added[Ne];let Ve=B.indexOf(Be);if(Ve===-1){for(let wt=0;wt<D.length;wt++)if(wt>=B.length){B.push(Be),Ve=wt;break}else if(B[wt]===null){B[wt]=Be,Ve=wt;break}if(Ve===-1)break}const tt=D[Ve];tt&&tt.connect(Be)}}const Q=new Z,he=new Z;function oe(re,Ne,Be){Q.setFromMatrixPosition(Ne.matrixWorld),he.setFromMatrixPosition(Be.matrixWorld);const Ve=Q.distanceTo(he),tt=Ne.projectionMatrix.elements,wt=Be.projectionMatrix.elements,ht=tt[14]/(tt[10]-1),Pt=tt[14]/(tt[10]+1),Je=(tt[9]+1)/tt[5],De=(tt[9]-1)/tt[5],j=(tt[8]-1)/tt[0],Mt=(wt[8]+1)/wt[0],$e=ht*j,pe=ht*Mt,at=Ve/(-j+Mt),Lt=at*-j;if(Ne.matrixWorld.decompose(re.position,re.quaternion,re.scale),re.translateX(Lt),re.translateZ(at),re.matrixWorld.compose(re.position,re.quaternion,re.scale),re.matrixWorldInverse.copy(re.matrixWorld).invert(),tt[10]===-1)re.projectionMatrix.copy(Ne.projectionMatrix),re.projectionMatrixInverse.copy(Ne.projectionMatrixInverse);else{const ut=ht+at,W=Pt+at,k=$e-Lt,xe=pe+(Ve-Lt),ze=Je*Pt/W*ut,Ye=De*Pt/W*ut;re.projectionMatrix.makePerspective(k,xe,ze,Ye,ut,W),re.projectionMatrixInverse.copy(re.projectionMatrix).invert()}}function be(re,Ne){Ne===null?re.matrixWorld.copy(re.matrix):re.matrixWorld.multiplyMatrices(Ne.matrixWorld,re.matrix),re.matrixWorldInverse.copy(re.matrixWorld).invert()}this.updateCamera=function(re){if(i===null)return;let Ne=re.near,Be=re.far;T.texture!==null&&(T.depthNear>0&&(Ne=T.depthNear),T.depthFar>0&&(Be=T.depthFar)),N.near=H.near=F.near=Ne,N.far=H.far=F.far=Be,(Y!==N.near||ee!==N.far)&&(i.updateRenderState({depthNear:N.near,depthFar:N.far}),Y=N.near,ee=N.far),F.layers.mask=re.layers.mask|2,H.layers.mask=re.layers.mask|4,N.layers.mask=F.layers.mask|H.layers.mask;const Ve=re.parent,tt=N.cameras;be(N,Ve);for(let wt=0;wt<tt.length;wt++)be(tt[wt],Ve);tt.length===2?oe(N,F,H):N.projectionMatrix.copy(F.projectionMatrix),P(re,N,Ve)};function P(re,Ne,Be){Be===null?re.matrix.copy(Ne.matrixWorld):(re.matrix.copy(Be.matrixWorld),re.matrix.invert(),re.matrix.multiply(Ne.matrixWorld)),re.matrix.decompose(re.position,re.quaternion,re.scale),re.updateMatrixWorld(!0),re.projectionMatrix.copy(Ne.projectionMatrix),re.projectionMatrixInverse.copy(Ne.projectionMatrixInverse),re.isPerspectiveCamera&&(re.fov=xm*2*Math.atan(1/re.projectionMatrix.elements[5]),re.zoom=1)}this.getCamera=function(){return N},this.getFoveation=function(){if(!(y===null&&x===null))return h},this.setFoveation=function(re){h=re,y!==null&&(y.fixedFoveation=re),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=re)},this.hasDepthSensing=function(){return T.texture!==null},this.getDepthSensingMesh=function(){return T.getMesh(N)};let ue=null;function Ce(re,Ne){if(g=Ne.getViewerPose(p||l),M=Ne,g!==null){const Be=g.views;x!==null&&(e.setRenderTargetFramebuffer(w,x.framebuffer),e.setRenderTarget(w));let Ve=!1;Be.length!==N.cameras.length&&(N.cameras.length=0,Ve=!0);for(let ht=0;ht<Be.length;ht++){const Pt=Be[ht];let Je=null;if(x!==null)Je=x.getViewport(Pt);else{const j=_.getViewSubImage(y,Pt);Je=j.viewport,ht===0&&(e.setRenderTargetTextures(w,j.colorTexture,y.ignoreDepthValues?void 0:j.depthStencilTexture),e.setRenderTarget(w))}let De=U[ht];De===void 0&&(De=new sa,De.layers.enable(ht),De.viewport=new ei,U[ht]=De),De.matrix.fromArray(Pt.transform.matrix),De.matrix.decompose(De.position,De.quaternion,De.scale),De.projectionMatrix.fromArray(Pt.projectionMatrix),De.projectionMatrixInverse.copy(De.projectionMatrix).invert(),De.viewport.set(Je.x,Je.y,Je.width,Je.height),ht===0&&(N.matrix.copy(De.matrix),N.matrix.decompose(N.position,N.quaternion,N.scale)),Ve===!0&&N.cameras.push(De)}const tt=i.enabledFeatures;if(tt&&tt.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&_){const ht=_.getDepthInformation(Be[0]);ht&&ht.isValid&&ht.texture&&T.init(e,ht,i.renderState)}}for(let Be=0;Be<D.length;Be++){const Ve=B[Be],tt=D[Be];Ve!==null&&tt!==void 0&&tt.update(Ve,Ne,p||l)}ue&&ue(re,Ne),Ne.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ne}),M=null}const Xe=new LB;Xe.setAnimationLoop(Ce),this.setAnimationLoop=function(re){ue=re},this.dispose=function(){}}}const Lh=new Jr,KH=new sn;function ZH(r,e){function t(b,E){b.matrixAutoUpdate===!0&&b.updateMatrix(),E.value.copy(b.matrix)}function n(b,E){E.color.getRGB(b.fogColor.value,V2(r)),E.isFog?(b.fogNear.value=E.near,b.fogFar.value=E.far):E.isFogExp2&&(b.fogDensity.value=E.density)}function i(b,E,w,D,B){E.isMeshBasicMaterial||E.isMeshLambertMaterial?s(b,E):E.isMeshToonMaterial?(s(b,E),_(b,E)):E.isMeshPhongMaterial?(s(b,E),g(b,E)):E.isMeshStandardMaterial?(s(b,E),y(b,E),E.isMeshPhysicalMaterial&&x(b,E,B)):E.isMeshMatcapMaterial?(s(b,E),M(b,E)):E.isMeshDepthMaterial?s(b,E):E.isMeshDistanceMaterial?(s(b,E),T(b,E)):E.isMeshNormalMaterial?s(b,E):E.isLineBasicMaterial?(l(b,E),E.isLineDashedMaterial&&c(b,E)):E.isPointsMaterial?h(b,E,w,D):E.isSpriteMaterial?p(b,E):E.isShadowMaterial?(b.color.value.copy(E.color),b.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}function s(b,E){b.opacity.value=E.opacity,E.color&&b.diffuse.value.copy(E.color),E.emissive&&b.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(b.map.value=E.map,t(E.map,b.mapTransform)),E.alphaMap&&(b.alphaMap.value=E.alphaMap,t(E.alphaMap,b.alphaMapTransform)),E.bumpMap&&(b.bumpMap.value=E.bumpMap,t(E.bumpMap,b.bumpMapTransform),b.bumpScale.value=E.bumpScale,E.side===Ks&&(b.bumpScale.value*=-1)),E.normalMap&&(b.normalMap.value=E.normalMap,t(E.normalMap,b.normalMapTransform),b.normalScale.value.copy(E.normalScale),E.side===Ks&&b.normalScale.value.negate()),E.displacementMap&&(b.displacementMap.value=E.displacementMap,t(E.displacementMap,b.displacementMapTransform),b.displacementScale.value=E.displacementScale,b.displacementBias.value=E.displacementBias),E.emissiveMap&&(b.emissiveMap.value=E.emissiveMap,t(E.emissiveMap,b.emissiveMapTransform)),E.specularMap&&(b.specularMap.value=E.specularMap,t(E.specularMap,b.specularMapTransform)),E.alphaTest>0&&(b.alphaTest.value=E.alphaTest);const w=e.get(E),D=w.envMap,B=w.envMapRotation;D&&(b.envMap.value=D,Lh.copy(B),Lh.x*=-1,Lh.y*=-1,Lh.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(Lh.y*=-1,Lh.z*=-1),b.envMapRotation.value.setFromMatrix4(KH.makeRotationFromEuler(Lh)),b.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=E.reflectivity,b.ior.value=E.ior,b.refractionRatio.value=E.refractionRatio),E.lightMap&&(b.lightMap.value=E.lightMap,b.lightMapIntensity.value=E.lightMapIntensity,t(E.lightMap,b.lightMapTransform)),E.aoMap&&(b.aoMap.value=E.aoMap,b.aoMapIntensity.value=E.aoMapIntensity,t(E.aoMap,b.aoMapTransform))}function l(b,E){b.diffuse.value.copy(E.color),b.opacity.value=E.opacity,E.map&&(b.map.value=E.map,t(E.map,b.mapTransform))}function c(b,E){b.dashSize.value=E.dashSize,b.totalSize.value=E.dashSize+E.gapSize,b.scale.value=E.scale}function h(b,E,w,D){b.diffuse.value.copy(E.color),b.opacity.value=E.opacity,b.size.value=E.size*w,b.scale.value=D*.5,E.map&&(b.map.value=E.map,t(E.map,b.uvTransform)),E.alphaMap&&(b.alphaMap.value=E.alphaMap,t(E.alphaMap,b.alphaMapTransform)),E.alphaTest>0&&(b.alphaTest.value=E.alphaTest)}function p(b,E){b.diffuse.value.copy(E.color),b.opacity.value=E.opacity,b.rotation.value=E.rotation,E.map&&(b.map.value=E.map,t(E.map,b.mapTransform)),E.alphaMap&&(b.alphaMap.value=E.alphaMap,t(E.alphaMap,b.alphaMapTransform)),E.alphaTest>0&&(b.alphaTest.value=E.alphaTest)}function g(b,E){b.specular.value.copy(E.specular),b.shininess.value=Math.max(E.shininess,1e-4)}function _(b,E){E.gradientMap&&(b.gradientMap.value=E.gradientMap)}function y(b,E){b.metalness.value=E.metalness,E.metalnessMap&&(b.metalnessMap.value=E.metalnessMap,t(E.metalnessMap,b.metalnessMapTransform)),b.roughness.value=E.roughness,E.roughnessMap&&(b.roughnessMap.value=E.roughnessMap,t(E.roughnessMap,b.roughnessMapTransform)),E.envMap&&(b.envMapIntensity.value=E.envMapIntensity)}function x(b,E,w){b.ior.value=E.ior,E.sheen>0&&(b.sheenColor.value.copy(E.sheenColor).multiplyScalar(E.sheen),b.sheenRoughness.value=E.sheenRoughness,E.sheenColorMap&&(b.sheenColorMap.value=E.sheenColorMap,t(E.sheenColorMap,b.sheenColorMapTransform)),E.sheenRoughnessMap&&(b.sheenRoughnessMap.value=E.sheenRoughnessMap,t(E.sheenRoughnessMap,b.sheenRoughnessMapTransform))),E.clearcoat>0&&(b.clearcoat.value=E.clearcoat,b.clearcoatRoughness.value=E.clearcoatRoughness,E.clearcoatMap&&(b.clearcoatMap.value=E.clearcoatMap,t(E.clearcoatMap,b.clearcoatMapTransform)),E.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap,t(E.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),E.clearcoatNormalMap&&(b.clearcoatNormalMap.value=E.clearcoatNormalMap,t(E.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),E.side===Ks&&b.clearcoatNormalScale.value.negate())),E.dispersion>0&&(b.dispersion.value=E.dispersion),E.iridescence>0&&(b.iridescence.value=E.iridescence,b.iridescenceIOR.value=E.iridescenceIOR,b.iridescenceThicknessMinimum.value=E.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=E.iridescenceThicknessRange[1],E.iridescenceMap&&(b.iridescenceMap.value=E.iridescenceMap,t(E.iridescenceMap,b.iridescenceMapTransform)),E.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=E.iridescenceThicknessMap,t(E.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),E.transmission>0&&(b.transmission.value=E.transmission,b.transmissionSamplerMap.value=w.texture,b.transmissionSamplerSize.value.set(w.width,w.height),E.transmissionMap&&(b.transmissionMap.value=E.transmissionMap,t(E.transmissionMap,b.transmissionMapTransform)),b.thickness.value=E.thickness,E.thicknessMap&&(b.thicknessMap.value=E.thicknessMap,t(E.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=E.attenuationDistance,b.attenuationColor.value.copy(E.attenuationColor)),E.anisotropy>0&&(b.anisotropyVector.value.set(E.anisotropy*Math.cos(E.anisotropyRotation),E.anisotropy*Math.sin(E.anisotropyRotation)),E.anisotropyMap&&(b.anisotropyMap.value=E.anisotropyMap,t(E.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=E.specularIntensity,b.specularColor.value.copy(E.specularColor),E.specularColorMap&&(b.specularColorMap.value=E.specularColorMap,t(E.specularColorMap,b.specularColorMapTransform)),E.specularIntensityMap&&(b.specularIntensityMap.value=E.specularIntensityMap,t(E.specularIntensityMap,b.specularIntensityMapTransform))}function M(b,E){E.matcap&&(b.matcap.value=E.matcap)}function T(b,E){const w=e.get(E).light;b.referencePosition.value.setFromMatrixPosition(w.matrixWorld),b.nearDistance.value=w.shadow.camera.near,b.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function QH(r,e,t,n){let i={},s={},l=[];const c=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function h(w,D){const B=D.program;n.uniformBlockBinding(w,B)}function p(w,D){let B=i[w.id];B===void 0&&(M(w),B=g(w),i[w.id]=B,w.addEventListener("dispose",b));const I=D.program;n.updateUBOMapping(w,I);const L=e.render.frame;s[w.id]!==L&&(y(w),s[w.id]=L)}function g(w){const D=_();w.__bindingPointIndex=D;const B=r.createBuffer(),I=w.__size,L=w.usage;return r.bindBuffer(r.UNIFORM_BUFFER,B),r.bufferData(r.UNIFORM_BUFFER,I,L),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,D,B),B}function _(){for(let w=0;w<c;w++)if(l.indexOf(w)===-1)return l.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(w){const D=i[w.id],B=w.uniforms,I=w.__cache;r.bindBuffer(r.UNIFORM_BUFFER,D);for(let L=0,F=B.length;L<F;L++){const H=Array.isArray(B[L])?B[L]:[B[L]];for(let U=0,N=H.length;U<N;U++){const Y=H[U];if(x(Y,L,U,I)===!0){const ee=Y.__offset,$=Array.isArray(Y.value)?Y.value:[Y.value];let ae=0;for(let me=0;me<$.length;me++){const Q=$[me],he=T(Q);typeof Q=="number"||typeof Q=="boolean"?(Y.__data[0]=Q,r.bufferSubData(r.UNIFORM_BUFFER,ee+ae,Y.__data)):Q.isMatrix3?(Y.__data[0]=Q.elements[0],Y.__data[1]=Q.elements[1],Y.__data[2]=Q.elements[2],Y.__data[3]=0,Y.__data[4]=Q.elements[3],Y.__data[5]=Q.elements[4],Y.__data[6]=Q.elements[5],Y.__data[7]=0,Y.__data[8]=Q.elements[6],Y.__data[9]=Q.elements[7],Y.__data[10]=Q.elements[8],Y.__data[11]=0):(Q.toArray(Y.__data,ae),ae+=he.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,ee,Y.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function x(w,D,B,I){const L=w.value,F=D+"_"+B;if(I[F]===void 0)return typeof L=="number"||typeof L=="boolean"?I[F]=L:I[F]=L.clone(),!0;{const H=I[F];if(typeof L=="number"||typeof L=="boolean"){if(H!==L)return I[F]=L,!0}else if(H.equals(L)===!1)return H.copy(L),!0}return!1}function M(w){const D=w.uniforms;let B=0;const I=16;for(let F=0,H=D.length;F<H;F++){const U=Array.isArray(D[F])?D[F]:[D[F]];for(let N=0,Y=U.length;N<Y;N++){const ee=U[N],$=Array.isArray(ee.value)?ee.value:[ee.value];for(let ae=0,me=$.length;ae<me;ae++){const Q=$[ae],he=T(Q),oe=B%I,be=oe%he.boundary,P=oe+be;B+=be,P!==0&&I-P<he.storage&&(B+=I-P),ee.__data=new Float32Array(he.storage/Float32Array.BYTES_PER_ELEMENT),ee.__offset=B,B+=he.storage}}}const L=B%I;return L>0&&(B+=I-L),w.__size=B,w.__cache={},this}function T(w){const D={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(D.boundary=4,D.storage=4):w.isVector2?(D.boundary=8,D.storage=8):w.isVector3||w.isColor?(D.boundary=16,D.storage=12):w.isVector4?(D.boundary=16,D.storage=16):w.isMatrix3?(D.boundary=48,D.storage=48):w.isMatrix4?(D.boundary=64,D.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),D}function b(w){const D=w.target;D.removeEventListener("dispose",b);const B=l.indexOf(D.__bindingPointIndex);l.splice(B,1),r.deleteBuffer(i[D.id]),delete i[D.id],delete s[D.id]}function E(){for(const w in i)r.deleteBuffer(i[w]);l=[],i={},s={}}return{bind:h,update:p,dispose:E}}class Cb{constructor(e={}){const{canvas:t=z2(),context:n=null,depth:i=!0,stencil:s=!1,alpha:l=!1,antialias:c=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:p=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:_=!1,reverseDepthBuffer:y=!1}=e;this.isWebGLRenderer=!0;let x;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");x=n.getContextAttributes().alpha}else x=l;const M=new Uint32Array(4),T=new Int32Array(4);let b=null,E=null;const w=[],D=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=is,this.toneMapping=rc,this.toneMappingExposure=1;const B=this;let I=!1,L=0,F=0,H=null,U=-1,N=null;const Y=new ei,ee=new ei;let $=null;const ae=new Bt(0);let me=0,Q=t.width,he=t.height,oe=1,be=null,P=null;const ue=new ei(0,0,Q,he),Ce=new ei(0,0,Q,he);let Xe=!1;const re=new Tv;let Ne=!1,Be=!1;this.transmissionResolutionScale=1;const Ve=new sn,tt=new sn,wt=new Z,ht=new ei,Pt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Je=!1;function De(){return H===null?oe:1}let j=n;function Mt(V,K){return t.getContext(V,K)}try{const V={alpha:!0,depth:i,stencil:s,antialias:c,premultipliedAlpha:h,preserveDrawingBuffer:p,powerPreference:g,failIfMajorPerformanceCaveat:_};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${gv}`),t.addEventListener("webglcontextlost",Ge,!1),t.addEventListener("webglcontextrestored",dt,!1),t.addEventListener("webglcontextcreationerror",xt,!1),j===null){const K="webgl2";if(j=Mt(K,V),j===null)throw Mt(K)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(V){throw console.error("THREE.WebGLRenderer: "+V.message),V}let $e,pe,at,Lt,ut,W,k,xe,ze,Ye,ke,_t,lt,yt,$t,st,vt,Nt,mt,Et,le,Re,rt,ne;function Me(){$e=new uz(j),$e.init(),Re=new HB(j,$e),pe=new iz(j,$e,e,Re),at=new XH(j,$e),pe.reverseDepthBuffer&&y&&at.buffers.depth.setReversed(!0),Lt=new dz(j),ut=new DH,W=new YH(j,$e,at,ut,pe,Re,Lt),k=new sz(B),xe=new cz(B),ze=new yI(j),rt=new tz(j,ze),Ye=new fz(j,ze,Lt,rt),ke=new mz(j,Ye,ze,Lt),mt=new pz(j,pe,W),st=new az(ut),_t=new BH(B,k,xe,$e,pe,rt,st),lt=new ZH(B,ut),yt=new OH,$t=new zH($e),Nt=new ez(B,k,xe,at,ke,x,h),vt=new VH(B,ke,pe),ne=new QH(j,Lt,pe,at),Et=new nz(j,$e,Lt),le=new hz(j,$e,Lt),Lt.programs=_t.programs,B.capabilities=pe,B.extensions=$e,B.properties=ut,B.renderLists=yt,B.shadowMap=vt,B.state=at,B.info=Lt}Me();const Te=new jH(B,j);this.xr=Te,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){const V=$e.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=$e.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return oe},this.setPixelRatio=function(V){V!==void 0&&(oe=V,this.setSize(Q,he,!1))},this.getSize=function(V){return V.set(Q,he)},this.setSize=function(V,K,se=!0){if(Te.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Q=V,he=K,t.width=Math.floor(V*oe),t.height=Math.floor(K*oe),se===!0&&(t.style.width=V+"px",t.style.height=K+"px"),this.setViewport(0,0,V,K)},this.getDrawingBufferSize=function(V){return V.set(Q*oe,he*oe).floor()},this.setDrawingBufferSize=function(V,K,se){Q=V,he=K,oe=se,t.width=Math.floor(V*se),t.height=Math.floor(K*se),this.setViewport(0,0,V,K)},this.getCurrentViewport=function(V){return V.copy(Y)},this.getViewport=function(V){return V.copy(ue)},this.setViewport=function(V,K,se,te){V.isVector4?ue.set(V.x,V.y,V.z,V.w):ue.set(V,K,se,te),at.viewport(Y.copy(ue).multiplyScalar(oe).round())},this.getScissor=function(V){return V.copy(Ce)},this.setScissor=function(V,K,se,te){V.isVector4?Ce.set(V.x,V.y,V.z,V.w):Ce.set(V,K,se,te),at.scissor(ee.copy(Ce).multiplyScalar(oe).round())},this.getScissorTest=function(){return Xe},this.setScissorTest=function(V){at.setScissorTest(Xe=V)},this.setOpaqueSort=function(V){be=V},this.setTransparentSort=function(V){P=V},this.getClearColor=function(V){return V.copy(Nt.getClearColor())},this.setClearColor=function(){Nt.setClearColor(...arguments)},this.getClearAlpha=function(){return Nt.getClearAlpha()},this.setClearAlpha=function(){Nt.setClearAlpha(...arguments)},this.clear=function(V=!0,K=!0,se=!0){let te=0;if(V){let de=!1;if(H!==null){const Ae=H.texture.format;de=Ae===qA||Ae===YA||Ae===xv}if(de){const Ae=H.texture.type,He=Ae===xr||Ae===pc||Ae===vm||Ae===md||Ae===kA||Ae===XA,je=Nt.getClearColor(),Ke=Nt.getClearAlpha(),At=je.r,Tt=je.g,Ct=je.b;He?(M[0]=At,M[1]=Tt,M[2]=Ct,M[3]=Ke,j.clearBufferuiv(j.COLOR,0,M)):(T[0]=At,T[1]=Tt,T[2]=Ct,T[3]=Ke,j.clearBufferiv(j.COLOR,0,T))}else te|=j.COLOR_BUFFER_BIT}K&&(te|=j.DEPTH_BUFFER_BIT),se&&(te|=j.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),j.clear(te)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ge,!1),t.removeEventListener("webglcontextrestored",dt,!1),t.removeEventListener("webglcontextcreationerror",xt,!1),Nt.dispose(),yt.dispose(),$t.dispose(),ut.dispose(),k.dispose(),xe.dispose(),ke.dispose(),rt.dispose(),ne.dispose(),_t.dispose(),Te.dispose(),Te.removeEventListener("sessionstart",bt),Te.removeEventListener("sessionend",en),It.stop()};function Ge(V){V.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function dt(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;const V=Lt.autoReset,K=vt.enabled,se=vt.autoUpdate,te=vt.needsUpdate,de=vt.type;Me(),Lt.autoReset=V,vt.enabled=K,vt.autoUpdate=se,vt.needsUpdate=te,vt.type=de}function xt(V){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",V.statusMessage)}function Ft(V){const K=V.target;K.removeEventListener("dispose",Ft),rn(K)}function rn(V){Bn(V),ut.remove(V)}function Bn(V){const K=ut.get(V).programs;K!==void 0&&(K.forEach(function(se){_t.releaseProgram(se)}),V.isShaderMaterial&&_t.releaseShaderCache(V))}this.renderBufferDirect=function(V,K,se,te,de,Ae){K===null&&(K=Pt);const He=de.isMesh&&de.matrixWorld.determinant()<0,je=ce(V,K,se,te,de);at.setMaterial(te,He);let Ke=se.index,At=1;if(te.wireframe===!0){if(Ke=Ye.getWireframeAttribute(se),Ke===void 0)return;At=2}const Tt=se.drawRange,Ct=se.attributes.position;let Wt=Tt.start*At,Vt=(Tt.start+Tt.count)*At;Ae!==null&&(Wt=Math.max(Wt,Ae.start*At),Vt=Math.min(Vt,(Ae.start+Ae.count)*At)),Ke!==null?(Wt=Math.max(Wt,0),Vt=Math.min(Vt,Ke.count)):Ct!=null&&(Wt=Math.max(Wt,0),Vt=Math.min(Vt,Ct.count));const Dn=Vt-Wt;if(Dn<0||Dn===1/0)return;rt.setup(de,te,je,se,Ke);let Yt,zt=Et;if(Ke!==null&&(Yt=ze.get(Ke),zt=le,zt.setIndex(Yt)),de.isMesh)te.wireframe===!0?(at.setLineWidth(te.wireframeLinewidth*De()),zt.setMode(j.LINES)):zt.setMode(j.TRIANGLES);else if(de.isLine){let Gt=te.linewidth;Gt===void 0&&(Gt=1),at.setLineWidth(Gt*De()),de.isLineSegments?zt.setMode(j.LINES):de.isLineLoop?zt.setMode(j.LINE_LOOP):zt.setMode(j.LINE_STRIP)}else de.isPoints?zt.setMode(j.POINTS):de.isSprite&&zt.setMode(j.TRIANGLES);if(de.isBatchedMesh)if(de._multiDrawInstances!==null)Vh("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),zt.renderMultiDrawInstances(de._multiDrawStarts,de._multiDrawCounts,de._multiDrawCount,de._multiDrawInstances);else if($e.get("WEBGL_multi_draw"))zt.renderMultiDraw(de._multiDrawStarts,de._multiDrawCounts,de._multiDrawCount);else{const Gt=de._multiDrawStarts,vi=de._multiDrawCounts,on=de._multiDrawCount,mn=Ke?ze.get(Ke).bytesPerElement:1,ni=ut.get(te).currentProgram.getUniforms();for(let xn=0;xn<on;xn++)ni.setValue(j,"_gl_DrawID",xn),zt.render(Gt[xn]/mn,vi[xn])}else if(de.isInstancedMesh)zt.renderInstances(Wt,Dn,de.count);else if(se.isInstancedBufferGeometry){const Gt=se._maxInstanceCount!==void 0?se._maxInstanceCount:1/0,vi=Math.min(se.instanceCount,Gt);zt.renderInstances(Wt,Dn,vi)}else zt.render(Wt,Dn)};function St(V,K,se){V.transparent===!0&&V.side===_o&&V.forceSinglePass===!1?(V.side=Ks,V.needsUpdate=!0,Ht(V,K,se),V.side=hc,V.needsUpdate=!0,Ht(V,K,se),V.side=_o):Ht(V,K,se)}this.compile=function(V,K,se=null){se===null&&(se=V),E=$t.get(se),E.init(K),D.push(E),se.traverseVisible(function(de){de.isLight&&de.layers.test(K.layers)&&(E.pushLight(de),de.castShadow&&E.pushShadow(de))}),V!==se&&V.traverseVisible(function(de){de.isLight&&de.layers.test(K.layers)&&(E.pushLight(de),de.castShadow&&E.pushShadow(de))}),E.setupLights();const te=new Set;return V.traverse(function(de){if(!(de.isMesh||de.isPoints||de.isLine||de.isSprite))return;const Ae=de.material;if(Ae)if(Array.isArray(Ae))for(let He=0;He<Ae.length;He++){const je=Ae[He];St(je,se,de),te.add(je)}else St(Ae,se,de),te.add(Ae)}),E=D.pop(),te},this.compileAsync=function(V,K,se=null){const te=this.compile(V,K,se);return new Promise(de=>{function Ae(){if(te.forEach(function(He){ut.get(He).currentProgram.isReady()&&te.delete(He)}),te.size===0){de(V);return}setTimeout(Ae,10)}$e.get("KHR_parallel_shader_compile")!==null?Ae():setTimeout(Ae,10)})};let Dt=null;function Zt(V){Dt&&Dt(V)}function bt(){It.stop()}function en(){It.start()}const It=new LB;It.setAnimationLoop(Zt),typeof self<"u"&&It.setContext(self),this.setAnimationLoop=function(V){Dt=V,Te.setAnimationLoop(V),V===null?It.stop():It.start()},Te.addEventListener("sessionstart",bt),Te.addEventListener("sessionend",en),this.render=function(V,K){if(K!==void 0&&K.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;if(V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),K.parent===null&&K.matrixWorldAutoUpdate===!0&&K.updateMatrixWorld(),Te.enabled===!0&&Te.isPresenting===!0&&(Te.cameraAutoUpdate===!0&&Te.updateCamera(K),K=Te.getCamera()),V.isScene===!0&&V.onBeforeRender(B,V,K,H),E=$t.get(V,D.length),E.init(K),D.push(E),tt.multiplyMatrices(K.projectionMatrix,K.matrixWorldInverse),re.setFromProjectionMatrix(tt),Be=this.localClippingEnabled,Ne=st.init(this.clippingPlanes,Be),b=yt.get(V,w.length),b.init(),w.push(b),Te.enabled===!0&&Te.isPresenting===!0){const Ae=B.xr.getDepthSensingMesh();Ae!==null&&qt(Ae,K,-1/0,B.sortObjects)}qt(V,K,0,B.sortObjects),b.finish(),B.sortObjects===!0&&b.sort(be,P),Je=Te.enabled===!1||Te.isPresenting===!1||Te.hasDepthSensing()===!1,Je&&Nt.addToRenderList(b,V),this.info.render.frame++,Ne===!0&&st.beginShadows();const se=E.state.shadowsArray;vt.render(se,V,K),Ne===!0&&st.endShadows(),this.info.autoReset===!0&&this.info.reset();const te=b.opaque,de=b.transmissive;if(E.setupLights(),K.isArrayCamera){const Ae=K.cameras;if(de.length>0)for(let He=0,je=Ae.length;He<je;He++){const Ke=Ae[He];tn(te,de,V,Ke)}Je&&Nt.render(V);for(let He=0,je=Ae.length;He<je;He++){const Ke=Ae[He];Zn(b,V,Ke,Ke.viewport)}}else de.length>0&&tn(te,de,V,K),Je&&Nt.render(V),Zn(b,V,K);H!==null&&F===0&&(W.updateMultisampleRenderTarget(H),W.updateRenderTargetMipmap(H)),V.isScene===!0&&V.onAfterRender(B,V,K),rt.resetDefaultState(),U=-1,N=null,D.pop(),D.length>0?(E=D[D.length-1],Ne===!0&&st.setGlobalState(B.clippingPlanes,E.state.camera)):E=null,w.pop(),w.length>0?b=w[w.length-1]:b=null};function qt(V,K,se,te){if(V.visible===!1)return;if(V.layers.test(K.layers)){if(V.isGroup)se=V.renderOrder;else if(V.isLOD)V.autoUpdate===!0&&V.update(K);else if(V.isLight)E.pushLight(V),V.castShadow&&E.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||re.intersectsSprite(V)){te&&ht.setFromMatrixPosition(V.matrixWorld).applyMatrix4(tt);const He=ke.update(V),je=V.material;je.visible&&b.push(V,He,je,se,ht.z,null)}}else if((V.isMesh||V.isLine||V.isPoints)&&(!V.frustumCulled||re.intersectsObject(V))){const He=ke.update(V),je=V.material;if(te&&(V.boundingSphere!==void 0?(V.boundingSphere===null&&V.computeBoundingSphere(),ht.copy(V.boundingSphere.center)):(He.boundingSphere===null&&He.computeBoundingSphere(),ht.copy(He.boundingSphere.center)),ht.applyMatrix4(V.matrixWorld).applyMatrix4(tt)),Array.isArray(je)){const Ke=He.groups;for(let At=0,Tt=Ke.length;At<Tt;At++){const Ct=Ke[At],Wt=je[Ct.materialIndex];Wt&&Wt.visible&&b.push(V,He,Wt,se,ht.z,Ct)}}else je.visible&&b.push(V,He,je,se,ht.z,null)}}const Ae=V.children;for(let He=0,je=Ae.length;He<je;He++)qt(Ae[He],K,se,te)}function Zn(V,K,se,te){const de=V.opaque,Ae=V.transmissive,He=V.transparent;E.setupLightsView(se),Ne===!0&&st.setGlobalState(B.clippingPlanes,se),te&&at.viewport(Y.copy(te)),de.length>0&&Rt(de,K,se),Ae.length>0&&Rt(Ae,K,se),He.length>0&&Rt(He,K,se),at.buffers.depth.setTest(!0),at.buffers.depth.setMask(!0),at.buffers.color.setMask(!0),at.setPolygonOffset(!1)}function tn(V,K,se,te){if((se.isScene===!0?se.overrideMaterial:null)!==null)return;E.state.transmissionRenderTarget[te.id]===void 0&&(E.state.transmissionRenderTarget[te.id]=new Mo(1,1,{generateMipmaps:!0,type:$e.has("EXT_color_buffer_half_float")||$e.has("EXT_color_buffer_float")?ka:xr,minFilter:xo,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Yn.workingColorSpace}));const Ae=E.state.transmissionRenderTarget[te.id],He=te.viewport||Y;Ae.setSize(He.z*B.transmissionResolutionScale,He.w*B.transmissionResolutionScale);const je=B.getRenderTarget();B.setRenderTarget(Ae),B.getClearColor(ae),me=B.getClearAlpha(),me<1&&B.setClearColor(16777215,.5),B.clear(),Je&&Nt.render(se);const Ke=B.toneMapping;B.toneMapping=rc;const At=te.viewport;if(te.viewport!==void 0&&(te.viewport=void 0),E.setupLightsView(te),Ne===!0&&st.setGlobalState(B.clippingPlanes,te),Rt(V,se,te),W.updateMultisampleRenderTarget(Ae),W.updateRenderTargetMipmap(Ae),$e.has("WEBGL_multisampled_render_to_texture")===!1){let Tt=!1;for(let Ct=0,Wt=K.length;Ct<Wt;Ct++){const Vt=K[Ct],Dn=Vt.object,Yt=Vt.geometry,zt=Vt.material,Gt=Vt.group;if(zt.side===_o&&Dn.layers.test(te.layers)){const vi=zt.side;zt.side=Ks,zt.needsUpdate=!0,gn(Dn,se,te,Yt,zt,Gt),zt.side=vi,zt.needsUpdate=!0,Tt=!0}}Tt===!0&&(W.updateMultisampleRenderTarget(Ae),W.updateRenderTargetMipmap(Ae))}B.setRenderTarget(je),B.setClearColor(ae,me),At!==void 0&&(te.viewport=At),B.toneMapping=Ke}function Rt(V,K,se){const te=K.isScene===!0?K.overrideMaterial:null;for(let de=0,Ae=V.length;de<Ae;de++){const He=V[de],je=He.object,Ke=He.geometry,At=te===null?He.material:te,Tt=He.group;je.layers.test(se.layers)&&gn(je,K,se,Ke,At,Tt)}}function gn(V,K,se,te,de,Ae){V.onBeforeRender(B,K,se,te,de,Ae),V.modelViewMatrix.multiplyMatrices(se.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),de.onBeforeRender(B,K,se,te,V,Ae),de.transparent===!0&&de.side===_o&&de.forceSinglePass===!1?(de.side=Ks,de.needsUpdate=!0,B.renderBufferDirect(se,K,te,de,V,Ae),de.side=hc,de.needsUpdate=!0,B.renderBufferDirect(se,K,te,de,V,Ae),de.side=_o):B.renderBufferDirect(se,K,te,de,V,Ae),V.onAfterRender(B,K,se,te,de,Ae)}function Ht(V,K,se){K.isScene!==!0&&(K=Pt);const te=ut.get(V),de=E.state.lights,Ae=E.state.shadowsArray,He=de.state.version,je=_t.getParameters(V,de.state,Ae,K,se),Ke=_t.getProgramCacheKey(je);let At=te.programs;te.environment=V.isMeshStandardMaterial?K.environment:null,te.fog=K.fog,te.envMap=(V.isMeshStandardMaterial?xe:k).get(V.envMap||te.environment),te.envMapRotation=te.environment!==null&&V.envMap===null?K.environmentRotation:V.envMapRotation,At===void 0&&(V.addEventListener("dispose",Ft),At=new Map,te.programs=At);let Tt=At.get(Ke);if(Tt!==void 0){if(te.currentProgram===Tt&&te.lightsStateVersion===He)return X(V,je),Tt}else je.uniforms=_t.getUniforms(V),V.onBeforeCompile(je,B),Tt=_t.acquireProgram(je,Ke),At.set(Ke,Tt),te.uniforms=je.uniforms;const Ct=te.uniforms;return(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(Ct.clippingPlanes=st.uniform),X(V,je),te.needsLights=Ie(V),te.lightsStateVersion=He,te.needsLights&&(Ct.ambientLightColor.value=de.state.ambient,Ct.lightProbe.value=de.state.probe,Ct.directionalLights.value=de.state.directional,Ct.directionalLightShadows.value=de.state.directionalShadow,Ct.spotLights.value=de.state.spot,Ct.spotLightShadows.value=de.state.spotShadow,Ct.rectAreaLights.value=de.state.rectArea,Ct.ltc_1.value=de.state.rectAreaLTC1,Ct.ltc_2.value=de.state.rectAreaLTC2,Ct.pointLights.value=de.state.point,Ct.pointLightShadows.value=de.state.pointShadow,Ct.hemisphereLights.value=de.state.hemi,Ct.directionalShadowMap.value=de.state.directionalShadowMap,Ct.directionalShadowMatrix.value=de.state.directionalShadowMatrix,Ct.spotShadowMap.value=de.state.spotShadowMap,Ct.spotLightMatrix.value=de.state.spotLightMatrix,Ct.spotLightMap.value=de.state.spotLightMap,Ct.pointShadowMap.value=de.state.pointShadowMap,Ct.pointShadowMatrix.value=de.state.pointShadowMatrix),te.currentProgram=Tt,te.uniformsList=null,Tt}function G(V){if(V.uniformsList===null){const K=V.currentProgram.getUniforms();V.uniformsList=Mx.seqWithValue(K.seq,V.uniforms)}return V.uniformsList}function X(V,K){const se=ut.get(V);se.outputColorSpace=K.outputColorSpace,se.batching=K.batching,se.batchingColor=K.batchingColor,se.instancing=K.instancing,se.instancingColor=K.instancingColor,se.instancingMorph=K.instancingMorph,se.skinning=K.skinning,se.morphTargets=K.morphTargets,se.morphNormals=K.morphNormals,se.morphColors=K.morphColors,se.morphTargetsCount=K.morphTargetsCount,se.numClippingPlanes=K.numClippingPlanes,se.numIntersection=K.numClipIntersection,se.vertexAlphas=K.vertexAlphas,se.vertexTangents=K.vertexTangents,se.toneMapping=K.toneMapping}function ce(V,K,se,te,de){K.isScene!==!0&&(K=Pt),W.resetTextureUnits();const Ae=K.fog,He=te.isMeshStandardMaterial?K.environment:null,je=H===null?B.outputColorSpace:H.isXRRenderTarget===!0?H.texture.colorSpace:dl,Ke=(te.isMeshStandardMaterial?xe:k).get(te.envMap||He),At=te.vertexColors===!0&&!!se.attributes.color&&se.attributes.color.itemSize===4,Tt=!!se.attributes.tangent&&(!!te.normalMap||te.anisotropy>0),Ct=!!se.morphAttributes.position,Wt=!!se.morphAttributes.normal,Vt=!!se.morphAttributes.color;let Dn=rc;te.toneMapped&&(H===null||H.isXRRenderTarget===!0)&&(Dn=B.toneMapping);const Yt=se.morphAttributes.position||se.morphAttributes.normal||se.morphAttributes.color,zt=Yt!==void 0?Yt.length:0,Gt=ut.get(te),vi=E.state.lights;if(Ne===!0&&(Be===!0||V!==N)){const $n=V===N&&te.id===U;st.setState(te,V,$n)}let on=!1;te.version===Gt.__version?(Gt.needsLights&&Gt.lightsStateVersion!==vi.state.version||Gt.outputColorSpace!==je||de.isBatchedMesh&&Gt.batching===!1||!de.isBatchedMesh&&Gt.batching===!0||de.isBatchedMesh&&Gt.batchingColor===!0&&de.colorTexture===null||de.isBatchedMesh&&Gt.batchingColor===!1&&de.colorTexture!==null||de.isInstancedMesh&&Gt.instancing===!1||!de.isInstancedMesh&&Gt.instancing===!0||de.isSkinnedMesh&&Gt.skinning===!1||!de.isSkinnedMesh&&Gt.skinning===!0||de.isInstancedMesh&&Gt.instancingColor===!0&&de.instanceColor===null||de.isInstancedMesh&&Gt.instancingColor===!1&&de.instanceColor!==null||de.isInstancedMesh&&Gt.instancingMorph===!0&&de.morphTexture===null||de.isInstancedMesh&&Gt.instancingMorph===!1&&de.morphTexture!==null||Gt.envMap!==Ke||te.fog===!0&&Gt.fog!==Ae||Gt.numClippingPlanes!==void 0&&(Gt.numClippingPlanes!==st.numPlanes||Gt.numIntersection!==st.numIntersection)||Gt.vertexAlphas!==At||Gt.vertexTangents!==Tt||Gt.morphTargets!==Ct||Gt.morphNormals!==Wt||Gt.morphColors!==Vt||Gt.toneMapping!==Dn||Gt.morphTargetsCount!==zt)&&(on=!0):(on=!0,Gt.__version=te.version);let mn=Gt.currentProgram;on===!0&&(mn=Ht(te,K,de));let ni=!1,xn=!1,ln=!1;const vn=mn.getUniforms(),bi=Gt.uniforms;if(at.useProgram(mn.program)&&(ni=!0,xn=!0,ln=!0),te.id!==U&&(U=te.id,xn=!0),ni||N!==V){at.buffers.depth.getReversed()?(Ve.copy(V.projectionMatrix),JO(Ve),WO(Ve),vn.setValue(j,"projectionMatrix",Ve)):vn.setValue(j,"projectionMatrix",V.projectionMatrix),vn.setValue(j,"viewMatrix",V.matrixWorldInverse);const pa=vn.map.cameraPosition;pa!==void 0&&pa.setValue(j,wt.setFromMatrixPosition(V.matrixWorld)),pe.logarithmicDepthBuffer&&vn.setValue(j,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),(te.isMeshPhongMaterial||te.isMeshToonMaterial||te.isMeshLambertMaterial||te.isMeshBasicMaterial||te.isMeshStandardMaterial||te.isShaderMaterial)&&vn.setValue(j,"isOrthographic",V.isOrthographicCamera===!0),N!==V&&(N=V,xn=!0,ln=!0)}if(de.isSkinnedMesh){vn.setOptional(j,de,"bindMatrix"),vn.setOptional(j,de,"bindMatrixInverse");const $n=de.skeleton;$n&&($n.boneTexture===null&&$n.computeBoneTexture(),vn.setValue(j,"boneTexture",$n.boneTexture,W))}de.isBatchedMesh&&(vn.setOptional(j,de,"batchingTexture"),vn.setValue(j,"batchingTexture",de._matricesTexture,W),vn.setOptional(j,de,"batchingIdTexture"),vn.setValue(j,"batchingIdTexture",de._indirectTexture,W),vn.setOptional(j,de,"batchingColorTexture"),de._colorsTexture!==null&&vn.setValue(j,"batchingColorTexture",de._colorsTexture,W));const Qn=se.morphAttributes;if((Qn.position!==void 0||Qn.normal!==void 0||Qn.color!==void 0)&&mt.update(de,se,mn),(xn||Gt.receiveShadow!==de.receiveShadow)&&(Gt.receiveShadow=de.receiveShadow,vn.setValue(j,"receiveShadow",de.receiveShadow)),te.isMeshGouraudMaterial&&te.envMap!==null&&(bi.envMap.value=Ke,bi.flipEnvMap.value=Ke.isCubeTexture&&Ke.isRenderTargetTexture===!1?-1:1),te.isMeshStandardMaterial&&te.envMap===null&&K.environment!==null&&(bi.envMapIntensity.value=K.environmentIntensity),xn&&(vn.setValue(j,"toneMappingExposure",B.toneMappingExposure),Gt.needsLights&&ye(bi,ln),Ae&&te.fog===!0&&lt.refreshFogUniforms(bi,Ae),lt.refreshMaterialUniforms(bi,te,oe,he,E.state.transmissionRenderTarget[V.id]),Mx.upload(j,G(Gt),bi,W)),te.isShaderMaterial&&te.uniformsNeedUpdate===!0&&(Mx.upload(j,G(Gt),bi,W),te.uniformsNeedUpdate=!1),te.isSpriteMaterial&&vn.setValue(j,"center",de.center),vn.setValue(j,"modelViewMatrix",de.modelViewMatrix),vn.setValue(j,"normalMatrix",de.normalMatrix),vn.setValue(j,"modelMatrix",de.matrixWorld),te.isShaderMaterial||te.isRawShaderMaterial){const $n=te.uniformsGroups;for(let pa=0,Mr=$n.length;pa<Mr;pa++){const Ja=$n[pa];ne.update(Ja,mn),ne.bind(Ja,mn)}}return mn}function ye(V,K){V.ambientLightColor.needsUpdate=K,V.lightProbe.needsUpdate=K,V.directionalLights.needsUpdate=K,V.directionalLightShadows.needsUpdate=K,V.pointLights.needsUpdate=K,V.pointLightShadows.needsUpdate=K,V.spotLights.needsUpdate=K,V.spotLightShadows.needsUpdate=K,V.rectAreaLights.needsUpdate=K,V.hemisphereLights.needsUpdate=K}function Ie(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&V.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return H},this.setRenderTargetTextures=function(V,K,se){ut.get(V.texture).__webglTexture=K,ut.get(V.depthTexture).__webglTexture=se;const te=ut.get(V);te.__hasExternalTextures=!0,te.__autoAllocateDepthBuffer=se===void 0,te.__autoAllocateDepthBuffer||$e.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),te.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(V,K){const se=ut.get(V);se.__webglFramebuffer=K,se.__useDefaultFramebuffer=K===void 0};const Le=j.createFramebuffer();this.setRenderTarget=function(V,K=0,se=0){H=V,L=K,F=se;let te=!0,de=null,Ae=!1,He=!1;if(V){const Ke=ut.get(V);if(Ke.__useDefaultFramebuffer!==void 0)at.bindFramebuffer(j.FRAMEBUFFER,null),te=!1;else if(Ke.__webglFramebuffer===void 0)W.setupRenderTarget(V);else if(Ke.__hasExternalTextures)W.rebindTextures(V,ut.get(V.texture).__webglTexture,ut.get(V.depthTexture).__webglTexture);else if(V.depthBuffer){const Ct=V.depthTexture;if(Ke.__boundDepthTexture!==Ct){if(Ct!==null&&ut.has(Ct)&&(V.width!==Ct.image.width||V.height!==Ct.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");W.setupDepthRenderbuffer(V)}}const At=V.texture;(At.isData3DTexture||At.isDataArrayTexture||At.isCompressedArrayTexture)&&(He=!0);const Tt=ut.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(Array.isArray(Tt[K])?de=Tt[K][se]:de=Tt[K],Ae=!0):V.samples>0&&W.useMultisampledRTT(V)===!1?de=ut.get(V).__webglMultisampledFramebuffer:Array.isArray(Tt)?de=Tt[se]:de=Tt,Y.copy(V.viewport),ee.copy(V.scissor),$=V.scissorTest}else Y.copy(ue).multiplyScalar(oe).floor(),ee.copy(Ce).multiplyScalar(oe).floor(),$=Xe;if(se!==0&&(de=Le),at.bindFramebuffer(j.FRAMEBUFFER,de)&&te&&at.drawBuffers(V,de),at.viewport(Y),at.scissor(ee),at.setScissorTest($),Ae){const Ke=ut.get(V.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+K,Ke.__webglTexture,se)}else if(He){const Ke=ut.get(V.texture),At=K;j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,Ke.__webglTexture,se,At)}else if(V!==null&&se!==0){const Ke=ut.get(V.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,Ke.__webglTexture,se)}U=-1},this.readRenderTargetPixels=function(V,K,se,te,de,Ae,He){if(!(V&&V.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let je=ut.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&He!==void 0&&(je=je[He]),je){at.bindFramebuffer(j.FRAMEBUFFER,je);try{const Ke=V.texture,At=Ke.format,Tt=Ke.type;if(!pe.textureFormatReadable(At)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!pe.textureTypeReadable(Tt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}K>=0&&K<=V.width-te&&se>=0&&se<=V.height-de&&j.readPixels(K,se,te,de,Re.convert(At),Re.convert(Tt),Ae)}finally{const Ke=H!==null?ut.get(H).__webglFramebuffer:null;at.bindFramebuffer(j.FRAMEBUFFER,Ke)}}},this.readRenderTargetPixelsAsync=async function(V,K,se,te,de,Ae,He){if(!(V&&V.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let je=ut.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&He!==void 0&&(je=je[He]),je){const Ke=V.texture,At=Ke.format,Tt=Ke.type;if(!pe.textureFormatReadable(At))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!pe.textureTypeReadable(Tt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(K>=0&&K<=V.width-te&&se>=0&&se<=V.height-de){at.bindFramebuffer(j.FRAMEBUFFER,je);const Ct=j.createBuffer();j.bindBuffer(j.PIXEL_PACK_BUFFER,Ct),j.bufferData(j.PIXEL_PACK_BUFFER,Ae.byteLength,j.STREAM_READ),j.readPixels(K,se,te,de,Re.convert(At),Re.convert(Tt),0);const Wt=H!==null?ut.get(H).__webglFramebuffer:null;at.bindFramebuffer(j.FRAMEBUFFER,Wt);const Vt=j.fenceSync(j.SYNC_GPU_COMMANDS_COMPLETE,0);return j.flush(),await qO(j,Vt,4),j.bindBuffer(j.PIXEL_PACK_BUFFER,Ct),j.getBufferSubData(j.PIXEL_PACK_BUFFER,0,Ae),j.deleteBuffer(Ct),j.deleteSync(Vt),Ae}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(V,K=null,se=0){V.isTexture!==!0&&(Vh("WebGLRenderer: copyFramebufferToTexture function signature has changed."),K=arguments[0]||null,V=arguments[1]);const te=Math.pow(2,-se),de=Math.floor(V.image.width*te),Ae=Math.floor(V.image.height*te),He=K!==null?K.x:0,je=K!==null?K.y:0;W.setTexture2D(V,0),j.copyTexSubImage2D(j.TEXTURE_2D,se,0,0,He,je,de,Ae),at.unbindTexture()};const nt=j.createFramebuffer(),qe=j.createFramebuffer();this.copyTextureToTexture=function(V,K,se=null,te=null,de=0,Ae=null){V.isTexture!==!0&&(Vh("WebGLRenderer: copyTextureToTexture function signature has changed."),te=arguments[0]||null,V=arguments[1],K=arguments[2],Ae=arguments[3]||0,se=null),Ae===null&&(de!==0?(Vh("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ae=de,de=0):Ae=0);let He,je,Ke,At,Tt,Ct,Wt,Vt,Dn;const Yt=V.isCompressedTexture?V.mipmaps[Ae]:V.image;if(se!==null)He=se.max.x-se.min.x,je=se.max.y-se.min.y,Ke=se.isBox3?se.max.z-se.min.z:1,At=se.min.x,Tt=se.min.y,Ct=se.isBox3?se.min.z:0;else{const Qn=Math.pow(2,-de);He=Math.floor(Yt.width*Qn),je=Math.floor(Yt.height*Qn),V.isDataArrayTexture?Ke=Yt.depth:V.isData3DTexture?Ke=Math.floor(Yt.depth*Qn):Ke=1,At=0,Tt=0,Ct=0}te!==null?(Wt=te.x,Vt=te.y,Dn=te.z):(Wt=0,Vt=0,Dn=0);const zt=Re.convert(K.format),Gt=Re.convert(K.type);let vi;K.isData3DTexture?(W.setTexture3D(K,0),vi=j.TEXTURE_3D):K.isDataArrayTexture||K.isCompressedArrayTexture?(W.setTexture2DArray(K,0),vi=j.TEXTURE_2D_ARRAY):(W.setTexture2D(K,0),vi=j.TEXTURE_2D),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,K.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,K.unpackAlignment);const on=j.getParameter(j.UNPACK_ROW_LENGTH),mn=j.getParameter(j.UNPACK_IMAGE_HEIGHT),ni=j.getParameter(j.UNPACK_SKIP_PIXELS),xn=j.getParameter(j.UNPACK_SKIP_ROWS),ln=j.getParameter(j.UNPACK_SKIP_IMAGES);j.pixelStorei(j.UNPACK_ROW_LENGTH,Yt.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,Yt.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,At),j.pixelStorei(j.UNPACK_SKIP_ROWS,Tt),j.pixelStorei(j.UNPACK_SKIP_IMAGES,Ct);const vn=V.isDataArrayTexture||V.isData3DTexture,bi=K.isDataArrayTexture||K.isData3DTexture;if(V.isDepthTexture){const Qn=ut.get(V),$n=ut.get(K),pa=ut.get(Qn.__renderTarget),Mr=ut.get($n.__renderTarget);at.bindFramebuffer(j.READ_FRAMEBUFFER,pa.__webglFramebuffer),at.bindFramebuffer(j.DRAW_FRAMEBUFFER,Mr.__webglFramebuffer);for(let Ja=0;Ja<Ke;Ja++)vn&&(j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,ut.get(V).__webglTexture,de,Ct+Ja),j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,ut.get(K).__webglTexture,Ae,Dn+Ja)),j.blitFramebuffer(At,Tt,He,je,Wt,Vt,He,je,j.DEPTH_BUFFER_BIT,j.NEAREST);at.bindFramebuffer(j.READ_FRAMEBUFFER,null),at.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else if(de!==0||V.isRenderTargetTexture||ut.has(V)){const Qn=ut.get(V),$n=ut.get(K);at.bindFramebuffer(j.READ_FRAMEBUFFER,nt),at.bindFramebuffer(j.DRAW_FRAMEBUFFER,qe);for(let pa=0;pa<Ke;pa++)vn?j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,Qn.__webglTexture,de,Ct+pa):j.framebufferTexture2D(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,Qn.__webglTexture,de),bi?j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,$n.__webglTexture,Ae,Dn+pa):j.framebufferTexture2D(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,$n.__webglTexture,Ae),de!==0?j.blitFramebuffer(At,Tt,He,je,Wt,Vt,He,je,j.COLOR_BUFFER_BIT,j.NEAREST):bi?j.copyTexSubImage3D(vi,Ae,Wt,Vt,Dn+pa,At,Tt,He,je):j.copyTexSubImage2D(vi,Ae,Wt,Vt,At,Tt,He,je);at.bindFramebuffer(j.READ_FRAMEBUFFER,null),at.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else bi?V.isDataTexture||V.isData3DTexture?j.texSubImage3D(vi,Ae,Wt,Vt,Dn,He,je,Ke,zt,Gt,Yt.data):K.isCompressedArrayTexture?j.compressedTexSubImage3D(vi,Ae,Wt,Vt,Dn,He,je,Ke,zt,Yt.data):j.texSubImage3D(vi,Ae,Wt,Vt,Dn,He,je,Ke,zt,Gt,Yt):V.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,Ae,Wt,Vt,He,je,zt,Gt,Yt.data):V.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,Ae,Wt,Vt,Yt.width,Yt.height,zt,Yt.data):j.texSubImage2D(j.TEXTURE_2D,Ae,Wt,Vt,He,je,zt,Gt,Yt);j.pixelStorei(j.UNPACK_ROW_LENGTH,on),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,mn),j.pixelStorei(j.UNPACK_SKIP_PIXELS,ni),j.pixelStorei(j.UNPACK_SKIP_ROWS,xn),j.pixelStorei(j.UNPACK_SKIP_IMAGES,ln),Ae===0&&K.generateMipmaps&&j.generateMipmap(vi),at.unbindTexture()},this.copyTextureToTexture3D=function(V,K,se=null,te=null,de=0){return V.isTexture!==!0&&(Vh("WebGLRenderer: copyTextureToTexture3D function signature has changed."),se=arguments[0]||null,te=arguments[1]||null,V=arguments[2],K=arguments[3],de=arguments[4]||0),Vh('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(V,K,se,te,de)},this.initRenderTarget=function(V){ut.get(V).__webglFramebuffer===void 0&&W.setupRenderTarget(V)},this.initTexture=function(V){V.isCubeTexture?W.setTextureCube(V,0):V.isData3DTexture?W.setTexture3D(V,0):V.isDataArrayTexture||V.isCompressedArrayTexture?W.setTexture2DArray(V,0):W.setTexture2D(V,0),at.unbindTexture()},this.resetState=function(){L=0,F=0,H=null,at.reset(),rt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return fl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Yn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Yn._getUnpackColorSpace()}}const $H=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:LE,AddEquation:ff,AddOperation:g2,AdditiveAnimationBlendMode:kE,AdditiveBlending:I1,AgXToneMapping:A2,AlphaFormat:PE,AlwaysCompare:P2,AlwaysDepth:zx,AlwaysStencilFunc:G1,AmbientLight:MB,AnimationAction:OB,AnimationClip:Mm,AnimationLoader:vL,AnimationMixer:VL,AnimationObjectGroup:HL,AnimationUtils:dL,ArcCurve:K2,ArrayCamera:BB,ArrowHelper:uI,AttachedBindMode:z1,Audio:DB,AudioAnalyser:BL,AudioContext:yb,AudioListener:CL,AudioLoader:EL,AxesHelper:fI,BackSide:Ks,BasicDepthPacking:R2,BasicShadowMap:Kw,BatchedMesh:W2,Bone:$A,BooleanKeyframeTrack:Bd,Box2:KL,Box3:Rs,Box3Helper:lI,BoxGeometry:wd,BoxHelper:oI,BufferAttribute:ti,BufferGeometry:Sn,BufferGeometryLoader:RB,ByteType:GA,Cache:su,Camera:KA,CameraHelper:rI,CanvasTexture:PN,CapsuleGeometry:iS,CatmullRomCurve3:Z2,CineonToneMapping:y2,CircleGeometry:aS,ClampToEdgeWrapping:fa,Clock:xb,Color:Bt,ColorKeyframeTrack:db,ColorManagement:Yn,CompressedArrayTexture:LN,CompressedCubeTexture:IN,CompressedTexture:tS,CompressedTextureLoader:_L,ConeGeometry:sS,ConstantAlphaFactor:d2,ConstantColorFactor:f2,Controls:dI,CubeCamera:X2,CubeReflectionMapping:dc,CubeRefractionMapping:Ef,CubeTexture:Sv,CubeTextureLoader:xB,CubeUVReflectionMapping:Om,CubicBezierCurve:ab,CubicBezierCurve3:Q2,CubicInterpolant:gB,CullFaceBack:L1,CullFaceFront:jw,CullFaceFrontBack:QU,CullFaceNone:Ww,Curve:ml,CurvePath:eB,CustomBlending:Zw,CustomToneMapping:x2,CylinderGeometry:Nm,Cylindrical:jL,Data3DTexture:jA,DataArrayTexture:Av,DataTexture:hl,DataTextureLoader:pb,DataUtils:Zh,DecrementStencilOp:lO,DecrementWrapStencilOp:uO,DefaultLoadingManager:yB,DepthFormat:ad,DepthStencilFormat:gd,DepthTexture:nb,DetachedBindMode:M2,DirectionalLight:_b,DirectionalLightHelper:sI,DiscreteInterpolant:vB,DodecahedronGeometry:rS,DoubleSide:_o,DstAlphaFactor:r2,DstColorFactor:l2,DynamicCopyUsage:bO,DynamicDrawUsage:yO,DynamicReadUsage:SO,EdgesGeometry:tB,EllipseCurve:nS,EqualCompare:O2,EqualDepth:Gx,EqualStencilFunc:pO,EquirectangularReflectionMapping:mm,EquirectangularRefractionMapping:W0,Euler:Jr,EventDispatcher:gc,ExtrudeGeometry:lS,FileLoader:rs,Float16BufferAttribute:mN,Float32BufferAttribute:Jt,FloatType:ji,Fog:QA,FogExp2:ZA,FramebufferTexture:NN,FrontSide:hc,Frustum:Tv,GLBufferAttribute:WL,GLSL1:CO,GLSL3:V1,GreaterCompare:N2,GreaterDepth:kx,GreaterEqualCompare:I2,GreaterEqualDepth:Vx,GreaterEqualStencilFunc:_O,GreaterStencilFunc:gO,GridHelper:iI,Group:au,HalfFloatType:ka,HemisphereLight:SB,HemisphereLightHelper:nI,IcosahedronGeometry:Rv,ImageBitmapLoader:wB,ImageLoader:av,ImageUtils:H2,IncrementStencilOp:oO,IncrementWrapStencilOp:cO,InstancedBufferAttribute:vd,InstancedBufferGeometry:CB,InstancedInterleavedBuffer:JL,InstancedMesh:$E,Int16BufferAttribute:dN,Int32BufferAttribute:pN,Int8BufferAttribute:uN,IntType:_v,InterleavedBuffer:Ev,InterleavedBufferAttribute:Tf,Interpolant:Lm,InterpolateDiscrete:_m,InterpolateLinear:ym,InterpolateSmooth:Ax,InvertStencilOp:fO,KeepStencilOp:Gh,KeyframeTrack:gl,LOD:J2,LatheGeometry:Cv,Layers:Am,LessCompare:U2,LessDepth:Hx,LessEqualCompare:YE,LessEqualDepth:pd,LessEqualStencilFunc:mO,LessStencilFunc:dO,Light:Of,LightProbe:TB,Line:uu,Line3:ZL,LineBasicMaterial:Bs,LineCurve:sb,LineCurve3:$2,LineDashedMaterial:dB,LineLoop:eb,LineSegments:pl,LinearFilter:oi,LinearInterpolant:hb,LinearMipMapLinearFilter:H1,LinearMipMapNearestFilter:tO,LinearMipmapLinearFilter:xo,LinearMipmapNearestFilter:sm,LinearSRGBColorSpace:dl,LinearToneMapping:v2,LinearTransfer:K0,Loader:ls,LoaderUtils:yf,LoadingManager:mS,LoopOnce:E2,LoopPingPong:T2,LoopRepeat:b2,LuminanceAlphaFormat:HE,LuminanceFormat:zE,MOUSE:zh,Material:Ra,MaterialLoader:gS,MathUtils:JE,Matrix2:bb,Matrix3:An,Matrix4:sn,MaxEquation:t2,Mesh:Pi,MeshBasicMaterial:mr,MeshDepthMaterial:cb,MeshDistanceMaterial:ub,MeshLambertMaterial:fB,MeshMatcapMaterial:hB,MeshNormalMaterial:uB,MeshPhongMaterial:lB,MeshPhysicalMaterial:Eo,MeshStandardMaterial:yd,MeshToonMaterial:cB,MinEquation:e2,MirroredRepeatWrapping:gm,MixOperation:m2,MultiplyBlending:F1,MultiplyOperation:vv,NearestFilter:Xa,NearestMipMapLinearFilter:eO,NearestMipMapNearestFilter:$U,NearestMipmapLinearFilter:Wh,NearestMipmapNearestFilter:HA,NeutralToneMapping:S2,NeverCompare:D2,NeverDepth:Fx,NeverStencilFunc:hO,NoBlending:sc,NoColorSpace:tu,NoToneMapping:rc,NormalAnimationBlendMode:JA,NormalBlending:id,NotEqualCompare:L2,NotEqualDepth:Xx,NotEqualStencilFunc:vO,NumberKeyframeTrack:xd,Object3D:Jn,ObjectLoader:SL,ObjectSpaceNormalMap:B2,OctahedronGeometry:wv,OneFactor:i2,OneMinusConstantAlphaFactor:p2,OneMinusConstantColorFactor:h2,OneMinusDstAlphaFactor:o2,OneMinusDstColorFactor:c2,OneMinusSrcAlphaFactor:Px,OneMinusSrcColorFactor:s2,OrthographicCamera:lc,PCFShadowMap:zA,PCFSoftShadowMap:b0,PMREMGenerator:K1,Path:ev,PerspectiveCamera:sa,Plane:$c,PlaneGeometry:Uf,PlaneHelper:cI,PointLight:vb,PointLightHelper:eI,Points:tb,PointsMaterial:eS,PolarGridHelper:aI,PolyhedronGeometry:Df,PositionalAudio:wL,PropertyBinding:Kn,PropertyMixer:UB,QuadraticBezierCurve:rb,QuadraticBezierCurve3:ob,Quaternion:Ya,QuaternionKeyframeTrack:Ad,QuaternionLinearInterpolant:_B,RED_GREEN_RGTC2_Format:mA,RED_RGTC1_Format:VE,REVISION:gv,RGBADepthPacking:w2,RGBAFormat:ha,RGBAIntegerFormat:qA,RGBA_ASTC_10x10_Format:cA,RGBA_ASTC_10x5_Format:rA,RGBA_ASTC_10x6_Format:oA,RGBA_ASTC_10x8_Format:lA,RGBA_ASTC_12x10_Format:uA,RGBA_ASTC_12x12_Format:fA,RGBA_ASTC_4x4_Format:Qx,RGBA_ASTC_5x4_Format:$x,RGBA_ASTC_5x5_Format:eA,RGBA_ASTC_6x5_Format:tA,RGBA_ASTC_6x6_Format:nA,RGBA_ASTC_8x5_Format:iA,RGBA_ASTC_8x6_Format:aA,RGBA_ASTC_8x8_Format:sA,RGBA_BPTC_Format:B0,RGBA_ETC2_EAC_Format:Zx,RGBA_PVRTC_2BPPV1_Format:Wx,RGBA_PVRTC_4BPPV1_Format:Jx,RGBA_S3TC_DXT1_Format:C0,RGBA_S3TC_DXT3_Format:R0,RGBA_S3TC_DXT5_Format:w0,RGBDepthPacking:iO,RGBFormat:FE,RGBIntegerFormat:nO,RGB_BPTC_SIGNED_Format:hA,RGB_BPTC_UNSIGNED_Format:dA,RGB_ETC1_Format:jx,RGB_ETC2_Format:Kx,RGB_PVRTC_2BPPV1_Format:qx,RGB_PVRTC_4BPPV1_Format:Yx,RGB_S3TC_DXT1_Format:T0,RGDepthPacking:aO,RGFormat:GE,RGIntegerFormat:YA,RawShaderMaterial:oB,Ray:Rd,Raycaster:Eb,RectAreaLight:EB,RedFormat:yv,RedIntegerFormat:xv,ReinhardToneMapping:_2,RenderTarget:WA,RenderTarget3D:kL,RenderTargetArray:XL,RepeatWrapping:bf,ReplaceStencilOp:rO,ReverseSubtractEquation:$w,RingGeometry:cS,SIGNED_RED_GREEN_RGTC2_Format:gA,SIGNED_RED_RGTC1_Format:pA,SRGBColorSpace:is,SRGBTransfer:gi,Scene:Mv,ShaderChunk:Cn,ShaderLib:cl,ShaderMaterial:Ar,ShadowMaterial:rB,Shape:rd,ShapeGeometry:uS,ShapePath:hI,ShapeUtils:oc,ShortType:VA,Skeleton:bv,SkeletonHelper:$L,SkinnedMesh:QE,Source:hf,Sphere:ss,SphereGeometry:Bv,Spherical:W1,SphericalHarmonics3:bB,SplineCurve:lb,SpotLight:gb,SpotLightHelper:QL,Sprite:q2,SpriteMaterial:ZE,SrcAlphaFactor:Ix,SrcAlphaSaturateFactor:u2,SrcColorFactor:a2,StaticCopyUsage:EO,StaticDrawUsage:Z0,StaticReadUsage:AO,StereoCamera:bL,StreamCopyUsage:TO,StreamDrawUsage:xO,StreamReadUsage:MO,StringKeyframeTrack:Dd,SubtractEquation:Qw,SubtractiveBlending:P1,TOUCH:Hh,TangentSpaceNormalMap:Bf,TetrahedronGeometry:fS,Texture:di,TextureLoader:AB,TextureUtils:_I,TimestampQuery:RO,TorusGeometry:hS,TorusKnotGeometry:dS,Triangle:pr,TriangleFanDrawMode:vA,TriangleStripDrawMode:XE,TrianglesDrawMode:C2,TubeGeometry:pS,UVMapping:Mf,Uint16BufferAttribute:WE,Uint32BufferAttribute:jE,Uint8BufferAttribute:fN,Uint8ClampedBufferAttribute:hN,Uniform:Mb,UniformsGroup:qL,UniformsLib:Ot,UniformsUtils:k2,UnsignedByteType:xr,UnsignedInt248Type:md,UnsignedInt5999Type:IE,UnsignedIntType:pc,UnsignedShort4444Type:kA,UnsignedShort5551Type:XA,UnsignedShortType:vm,VSMShadowMap:ll,Vector2:et,Vector3:Z,Vector4:ei,VectorKeyframeTrack:Sd,VideoFrameTexture:ON,VideoTexture:j2,WebGL3DRenderTarget:$O,WebGLArrayRenderTarget:QO,WebGLCoordinateSystem:fl,WebGLCubeRenderTarget:KE,WebGLRenderTarget:Mo,WebGLRenderer:Cb,WebGLUtils:HB,WebGPUCoordinateSystem:Q0,WebXRController:Sx,WireframeGeometry:sB,WrapAroundEnding:j0,ZeroCurvatureEnding:jh,ZeroFactor:n2,ZeroSlopeEnding:Kh,ZeroStencilOp:sO,createCanvasElement:z2},Symbol.toStringTag,{value:"Module"}));var $M={exports:{}},Kc={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IR;function eG(){return IR||(IR=1,Kc.ConcurrentRoot=1,Kc.ContinuousEventPriority=8,Kc.DefaultEventPriority=32,Kc.DiscreteEventPriority=2,Kc.IdleEventPriority=268435456,Kc.LegacyRoot=0,Kc.NoEventPriority=0),Kc}var PR;function tG(){return PR||(PR=1,$M.exports=eG()),$M.exports}var Ex=tG(),e1={exports:{}},t1={},n1={exports:{}},i1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FR;function nG(){if(FR)return i1;FR=1;var r=Um();function e(_,y){return _===y&&(_!==0||1/_===1/y)||_!==_&&y!==y}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,i=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(_,y){var x=y(),M=n({inst:{value:x,getSnapshot:y}}),T=M[0].inst,b=M[1];return s(function(){T.value=x,T.getSnapshot=y,h(T)&&b({inst:T})},[_,x,y]),i(function(){return h(T)&&b({inst:T}),_(function(){h(T)&&b({inst:T})})},[_]),l(x),x}function h(_){var y=_.getSnapshot;_=_.value;try{var x=y();return!t(_,x)}catch{return!0}}function p(_,y){return y()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:c;return i1.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:g,i1}var zR;function iG(){return zR||(zR=1,n1.exports=nG()),n1.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HR;function aG(){if(HR)return t1;HR=1;var r=Um(),e=iG();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=r.useRef,l=r.useEffect,c=r.useMemo,h=r.useDebugValue;return t1.useSyncExternalStoreWithSelector=function(p,g,_,y,x){var M=s(null);if(M.current===null){var T={hasValue:!1,value:null};M.current=T}else T=M.current;M=c(function(){function E(L){if(!w){if(w=!0,D=L,L=y(L),x!==void 0&&T.hasValue){var F=T.value;if(x(F,L))return B=F}return B=L}if(F=B,n(D,L))return F;var H=y(L);return x!==void 0&&x(F,H)?(D=L,F):(D=L,B=H)}var w=!1,D,B,I=_===void 0?null:_;return[function(){return E(g())},I===null?void 0:function(){return E(I())}]},[g,_,y,x]);var b=i(p,M[0],M[1]);return l(function(){T.hasValue=!0,T.value=b},[b]),h(b),b},t1}var GR;function sG(){return GR||(GR=1,e1.exports=aG()),e1.exports}var rG=sG();const oG=UE(rG),VR=r=>{let e;const t=new Set,n=(p,g)=>{const _=typeof p=="function"?p(e):p;if(!Object.is(_,e)){const y=e;e=g??(typeof _!="object"||_===null)?_:Object.assign({},e,_),t.forEach(x=>x(e,y))}},i=()=>e,c={setState:n,getState:i,getInitialState:()=>h,subscribe:p=>(t.add(p),()=>t.delete(p))},h=e=r(n,i,c);return c},lG=r=>r?VR(r):VR,{useSyncExternalStoreWithSelector:cG}=oG,uG=r=>r;function fG(r,e=uG,t){const n=cG(r.subscribe,r.getState,r.getInitialState,e,t);return IU.useDebugValue(n),n}const kR=(r,e)=>{const t=lG(r),n=(i,s=e)=>fG(t,i,s);return Object.assign(n,t),n},GB=(r,e)=>r?kR(r,e):kR;var a1={exports:{}},s1={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XR;function hG(){return XR||(XR=1,function(r){r.exports=function(e){function t(u,f,v,S){return new i_(u,f,v,S)}function n(){}function i(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(u){return u===null||typeof u!="object"?null:(u=si&&u[si]||u["@@iterator"],typeof u=="function"?u:null)}function l(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===Qi?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case Ul:return"Fragment";case to:return"Portal";case Ol:return"Profiler";case Rc:return"StrictMode";case Ho:return"Suspense";case ch:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case Nl:return(u.displayName||"Context")+".Provider";case ug:return(u._context.displayName||"Context")+".Consumer";case ep:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case Du:return f=u.displayName||null,f!==null?f:l(u.type)||"Memo";case Go:f=u._payload,u=u._init;try{return l(u(f))}catch{}}return null}function c(u){if(Ll===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);Ll=f&&f[1]||"",Il=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ll+u+Il}function h(u,f){if(!u||Uu)return"";Uu=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(f){var Ut=function(){throw Error()};if(Object.defineProperty(Ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ut,[])}catch(pn){var ft=pn}Reflect.construct(u,[],Ut)}else{try{Ut.call()}catch(pn){ft=pn}u.call(Ut.prototype)}}else{try{throw Error()}catch(pn){ft=pn}(Ut=u())&&typeof Ut.catch=="function"&&Ut.catch(function(){})}}catch(pn){if(pn&&ft&&typeof pn.stack=="string")return[pn.stack,ft.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=S.DetermineComponentFrameRoot(),J=O[0],fe=O[1];if(J&&fe){var Ee=J.split(`
`),Ze=fe.split(`
`);for(R=S=0;S<Ee.length&&!Ee[S].includes("DetermineComponentFrameRoot");)S++;for(;R<Ze.length&&!Ze[R].includes("DetermineComponentFrameRoot");)R++;if(S===Ee.length||R===Ze.length)for(S=Ee.length-1,R=Ze.length-1;1<=S&&0<=R&&Ee[S]!==Ze[R];)R--;for(;1<=S&&0<=R;S--,R--)if(Ee[S]!==Ze[R]){if(S!==1||R!==1)do if(S--,R--,0>R||Ee[S]!==Ze[R]){var gt=`
`+Ee[S].replace(" at new "," at ");return u.displayName&&gt.includes("<anonymous>")&&(gt=gt.replace("<anonymous>",u.displayName)),gt}while(1<=S&&0<=R);break}}}finally{Uu=!1,Error.prepareStackTrace=v}return(v=u?u.displayName||u.name:"")?c(v):""}function p(u){switch(u.tag){case 26:case 27:case 5:return c(u.type);case 16:return c("Lazy");case 13:return c("Suspense");case 19:return c("SuspenseList");case 0:case 15:return u=h(u.type,!1),u;case 11:return u=h(u.type.render,!1),u;case 1:return u=h(u.type,!0),u;default:return""}}function g(u){try{var f="";do f+=p(u),u=u.return;while(u);return f}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function _(u){var f=u,v=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(v=f.return),u=f.return;while(u)}return f.tag===3?v:null}function y(u){if(_(u)!==u)throw Error(i(188))}function x(u){var f=u.alternate;if(!f){if(f=_(u),f===null)throw Error(i(188));return f!==u?null:u}for(var v=u,S=f;;){var R=v.return;if(R===null)break;var O=R.alternate;if(O===null){if(S=R.return,S!==null){v=S;continue}break}if(R.child===O.child){for(O=R.child;O;){if(O===v)return y(R),u;if(O===S)return y(R),f;O=O.sibling}throw Error(i(188))}if(v.return!==S.return)v=R,S=O;else{for(var J=!1,fe=R.child;fe;){if(fe===v){J=!0,v=R,S=O;break}if(fe===S){J=!0,S=R,v=O;break}fe=fe.sibling}if(!J){for(fe=O.child;fe;){if(fe===v){J=!0,v=O,S=R;break}if(fe===S){J=!0,S=O,v=R;break}fe=fe.sibling}if(!J)throw Error(i(189))}}if(v.alternate!==S)throw Error(i(190))}if(v.tag!==3)throw Error(i(188));return v.stateNode.current===v?u:f}function M(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=M(u),f!==null)return f;u=u.sibling}return null}function T(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(u.tag!==4&&(f=T(u),f!==null))return f;u=u.sibling}return null}function b(u){return{current:u}}function E(u){0>Hl||(u.current=dp[Hl],dp[Hl]=null,Hl--)}function w(u,f){Hl++,dp[Hl]=u.current,u.current=f}function D(u){return u>>>=0,u===0?32:31-(Ng(u)/IS|0)|0}function B(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function I(u,f){var v=u.pendingLanes;if(v===0)return 0;var S=0,R=u.suspendedLanes,O=u.pingedLanes,J=u.warmLanes;u=u.finishedLanes!==0;var fe=v&134217727;return fe!==0?(v=fe&~R,v!==0?S=B(v):(O&=fe,O!==0?S=B(O):u||(J=fe&~J,J!==0&&(S=B(J))))):(fe=v&~R,fe!==0?S=B(fe):O!==0?S=B(O):u||(J=v&~J,J!==0&&(S=B(J)))),S===0?0:f!==0&&f!==S&&(f&R)===0&&(R=S&-S,J=f&-f,R>=J||R===32&&(J&4194176)!==0)?f:S}function L(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function F(u,f){switch(u){case 1:case 2:case 4:case 8:return f+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H(){var u=dh;return dh<<=1,(dh&4194176)===0&&(dh=128),u}function U(){var u=Pu;return Pu<<=1,(Pu&62914560)===0&&(Pu=4194304),u}function N(u){for(var f=[],v=0;31>v;v++)f.push(u);return f}function Y(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function ee(u,f,v,S,R,O){var J=u.pendingLanes;u.pendingLanes=v,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=v,u.entangledLanes&=v,u.errorRecoveryDisabledLanes&=v,u.shellSuspendCounter=0;var fe=u.entanglements,Ee=u.expirationTimes,Ze=u.hiddenUpdates;for(v=J&~v;0<v;){var gt=31-Hi(v),Ut=1<<gt;fe[gt]=0,Ee[gt]=-1;var ft=Ze[gt];if(ft!==null)for(Ze[gt]=null,gt=0;gt<ft.length;gt++){var pn=ft[gt];pn!==null&&(pn.lane&=-536870913)}v&=~Ut}S!==0&&$(u,S,0),O!==0&&R===0&&u.tag!==0&&(u.suspendedLanes|=O&~(J&~f))}function $(u,f,v){u.pendingLanes|=f,u.suspendedLanes&=~f;var S=31-Hi(f);u.entangledLanes|=f,u.entanglements[S]=u.entanglements[S]|1073741824|v&4194218}function ae(u,f){var v=u.entangledLanes|=f;for(u=u.entanglements;v;){var S=31-Hi(v),R=1<<S;R&f|u[S]&f&&(u[S]|=f),v&=~R}}function me(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Q(u){if($i&&typeof $i.onCommitFiberRoot=="function")try{$i.onCommitFiberRoot(zu,u,void 0,(u.current.flags&128)===128)}catch{}}function he(u){if(typeof Oa=="function"&&mp(u),$i&&typeof $i.setStrictMode=="function")try{$i.setStrictMode(zu,u)}catch{}}function oe(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}function be(u,f){if(typeof u=="object"&&u!==null){var v=gp.get(u);return v!==void 0?v:(f={value:u,source:f,stack:g(f)},gp.set(u,f),f)}return{value:u,source:f,stack:g(f)}}function P(u,f){Ls[Is++]=Hu,Ls[Is++]=Vl,Vl=u,Hu=f}function ue(u,f,v){gs[Na++]=so,gs[Na++]=ro,gs[Na++]=Rr,Rr=u;var S=so;u=ro;var R=32-Hi(S)-1;S&=~(1<<R),v+=1;var O=32-Hi(f)+R;if(30<O){var J=R-R%5;O=(S&(1<<J)-1).toString(32),S>>=J,R-=J,so=1<<32-Hi(f)+R|v<<R|S,ro=O+u}else so=1<<O|v<<R|S,ro=u}function Ce(u){u.return!==null&&(P(u,1),ue(u,1,0))}function Xe(u){for(;u===Vl;)Vl=Ls[--Is],Ls[Is]=null,Hu=Ls[--Is],Ls[Is]=null;for(;u===Rr;)Rr=gs[--Na],gs[Na]=null,ro=gs[--Na],gs[Na]=null,so=gs[--Na],gs[Na]=null}function re(u,f){w(qo,f),w(tr,u),w(Gi,null),u=fg(f),E(Gi),w(Gi,u)}function Ne(){E(Gi),E(tr),E(qo)}function Be(u){u.memoizedState!==null&&w(mh,u);var f=Gi.current,v=a_(f,u.type);f!==v&&(w(tr,u),w(Gi,v))}function Ve(u){tr.current===u&&(E(Gi),E(tr)),mh.current===u&&(E(mh),br?ko._currentValue=Bc:ko._currentValue2=Bc)}function tt(u){var f=Error(i(418,""));throw De(be(f,u)),gh}function wt(u,f){if(!ms)throw Error(i(175));Oc(u.stateNode,u.type,u.memoizedProps,f,u)||tt(u)}function ht(u){for(Vi=u.return;Vi;)switch(Vi.tag){case 3:case 27:wr=!0;return;case 5:case 13:wr=!1;return;default:Vi=Vi.return}}function Pt(u){if(!ms||u!==Vi)return!1;if(!kn)return ht(u),kn=!0,!1;var f=!1;if(ga?u.tag!==3&&u.tag!==27&&(u.tag!==5||Eg(u.type)&&!ba(u.type,u.memoizedProps))&&(f=!0):u.tag!==3&&(u.tag!==5||Eg(u.type)&&!ba(u.type,u.memoizedProps))&&(f=!0),f&&li&&tt(u),ht(u),u.tag===13){if(!ms)throw Error(i(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));li=I_(u)}else li=Vi?zl(u.stateNode):null;return!0}function Je(){ms&&(li=Vi=null,kn=!1)}function De(u){nr===null?nr=[u]:nr.push(u)}function j(){for(var u=Jo,f=Br=Jo=0;f<u;){var v=vs[f];vs[f++]=null;var S=vs[f];vs[f++]=null;var R=vs[f];vs[f++]=null;var O=vs[f];if(vs[f++]=null,S!==null&&R!==null){var J=S.pending;J===null?R.next=R:(R.next=J.next,J.next=R),S.pending=R}O!==0&&at(v,R,O)}}function Mt(u,f,v,S){vs[Jo++]=u,vs[Jo++]=f,vs[Jo++]=v,vs[Jo++]=S,Br|=S,u.lanes|=S,u=u.alternate,u!==null&&(u.lanes|=S)}function $e(u,f,v,S){return Mt(u,f,v,S),Lt(u)}function pe(u,f){return Mt(u,null,null,f),Lt(u)}function at(u,f,v){u.lanes|=v;var S=u.alternate;S!==null&&(S.lanes|=v);for(var R=!1,O=u.return;O!==null;)O.childLanes|=v,S=O.alternate,S!==null&&(S.childLanes|=v),O.tag===22&&(u=O.stateNode,u===null||u._visibility&1||(R=!0)),u=O,O=O.return;R&&f!==null&&u.tag===3&&(O=u.stateNode,R=31-Hi(v),O=O.hiddenUpdates,u=O[R],u===null?O[R]=[f]:u.push(f),f.lane=v|536870912)}function Lt(u){if(50<Gc)throw Gc=0,zg=null,Error(i(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}function ut(u){u!==kl&&u.next===null&&(kl===null?Ai=kl=u:kl=kl.next=u),ki=!0,vp||(vp=!0,ke(k))}function W(u,f){if(!_p&&ki){_p=!0;do for(var v=!1,S=Ai;S!==null;){if(u!==0){var R=S.pendingLanes;if(R===0)var O=0;else{var J=S.suspendedLanes,fe=S.pingedLanes;O=(1<<31-Hi(42|u)+1)-1,O&=R&~(J&~fe),O=O&201326677?O&201326677|1:O?O|2:0}O!==0&&(v=!0,Ye(S,O))}else O=Nn,O=I(S,S===ui?O:0),(O&3)===0||L(S,O)||(v=!0,Ye(S,O));S=S.next}while(v);_p=!1}}function k(){ki=vp=!1;var u=0;Gu!==0&&(l_()&&(u=Gu),Gu=0);for(var f=Ns(),v=null,S=Ai;S!==null;){var R=S.next,O=xe(S,f);O===0?(S.next=null,v===null?Ai=R:v.next=R,R===null&&(kl=v)):(v=S,(u!==0||(O&3)!==0)&&(ki=!0)),S=R}W(u)}function xe(u,f){for(var v=u.suspendedLanes,S=u.pingedLanes,R=u.expirationTimes,O=u.pendingLanes&-62914561;0<O;){var J=31-Hi(O),fe=1<<J,Ee=R[J];Ee===-1?((fe&v)===0||(fe&S)!==0)&&(R[J]=F(fe,f)):Ee<=f&&(u.expiredLanes|=fe),O&=~fe}if(f=ui,v=Nn,v=I(u,u===f?v:0),S=u.callbackNode,v===0||u===f&&ri===2||u.cancelPendingCommit!==null)return S!==null&&S!==null&&Cr(S),u.callbackNode=null,u.callbackPriority=0;if((v&3)===0||L(u,v)){if(f=v&-v,f===u.callbackPriority)return f;switch(S!==null&&Cr(S),me(v)){case 2:case 8:v=ph;break;case 32:v=Fu;break;case 268435456:v=Lc;break;default:v=Fu}return S=ze.bind(null,u),v=ao(v,S),u.callbackPriority=f,u.callbackNode=v,f}return S!==null&&S!==null&&Cr(S),u.callbackPriority=2,u.callbackNode=null,2}function ze(u,f){var v=u.callbackNode;if(Rl()&&u.callbackNode!==v)return null;var S=Nn;return S=I(u,u===ui?S:0),S===0?null:(Ds(u,S,f),xe(u,Ns()),u.callbackNode!=null&&u.callbackNode===v?ze.bind(null,u):null)}function Ye(u,f){if(Rl())return null;Ds(u,f,!0)}function ke(u){h_?d_(function(){(On&6)!==0?ao(pp,u):u()}):ao(pp,u)}function _t(){return Gu===0&&(Gu=H()),Gu}function lt(u,f){if(Vu===null){var v=Vu=[];yp=0,Si=_t(),va={status:"pending",value:void 0,then:function(S){v.push(S)}}}return yp++,f.then(yt,yt),f}function yt(){if(--yp===0&&Vu!==null){va!==null&&(va.status="fulfilled");var u=Vu;Vu=null,Si=0,va=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function $t(u,f){var v=[],S={status:"pending",value:null,reason:null,then:function(R){v.push(R)}};return u.then(function(){S.status="fulfilled",S.value=f;for(var R=0;R<v.length;R++)(0,v[R])(f)},function(R){for(S.status="rejected",S.reason=R,R=0;R<v.length;R++)(0,v[R])(void 0)}),S}function st(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vt(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Nt(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function mt(u,f,v){var S=u.updateQueue;if(S===null)return null;if(S=S.shared,(On&2)!==0){var R=S.pending;return R===null?f.next=f:(f.next=R.next,R.next=f),S.pending=f,f=Lt(u),at(u,null,v),f}return Mt(u,S,f,v),Lt(u)}function Et(u,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194176)!==0)){var S=f.lanes;S&=u.pendingLanes,v|=S,f.lanes=v,ae(u,v)}}function le(u,f){var v=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,v===S)){var R=null,O=null;if(v=v.firstBaseUpdate,v!==null){do{var J={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};O===null?R=O=J:O=O.next=J,v=v.next}while(v!==null);O===null?R=O=f:O=O.next=f}else R=O=f;v={baseState:S.baseState,firstBaseUpdate:R,lastBaseUpdate:O,shared:S.shared,callbacks:S.callbacks},u.updateQueue=v;return}u=v.lastBaseUpdate,u===null?v.firstBaseUpdate=f:u.next=f,v.lastBaseUpdate=f}function Re(){if(xp){var u=va;if(u!==null)throw u}}function rt(u,f,v,S){xp=!1;var R=u.updateQueue;La=!1;var O=R.firstBaseUpdate,J=R.lastBaseUpdate,fe=R.shared.pending;if(fe!==null){R.shared.pending=null;var Ee=fe,Ze=Ee.next;Ee.next=null,J===null?O=Ze:J.next=Ze,J=Ee;var gt=u.alternate;gt!==null&&(gt=gt.updateQueue,fe=gt.lastBaseUpdate,fe!==J&&(fe===null?gt.firstBaseUpdate=Ze:fe.next=Ze,gt.lastBaseUpdate=Ee))}if(O!==null){var Ut=R.baseState;J=0,gt=Ze=Ee=null,fe=O;do{var ft=fe.lane&-536870913,pn=ft!==fe.lane;if(pn?(Nn&ft)===ft:(S&ft)===ft){ft!==0&&ft===Si&&(xp=!0),gt!==null&&(gt=gt.next={lane:0,tag:fe.tag,payload:fe.payload,callback:null,next:null});e:{var ur=u,Wu=fe;ft=f;var Vc=v;switch(Wu.tag){case 1:if(ur=Wu.payload,typeof ur=="function"){Ut=ur.call(Vc,Ut,ft);break e}Ut=ur;break e;case 3:ur.flags=ur.flags&-65537|128;case 0:if(ur=Wu.payload,ft=typeof ur=="function"?ur.call(Vc,Ut,ft):ur,ft==null)break e;Ut=Fi({},Ut,ft);break e;case 2:La=!0}}ft=fe.callback,ft!==null&&(u.flags|=64,pn&&(u.flags|=8192),pn=R.callbacks,pn===null?R.callbacks=[ft]:pn.push(ft))}else pn={lane:ft,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},gt===null?(Ze=gt=pn,Ee=Ut):gt=gt.next=pn,J|=ft;if(fe=fe.next,fe===null){if(fe=R.shared.pending,fe===null)break;pn=fe,fe=pn.next,pn.next=null,R.lastBaseUpdate=pn,R.shared.pending=null}}while(!0);gt===null&&(Ee=Ut),R.baseState=Ee,R.firstBaseUpdate=Ze,R.lastBaseUpdate=gt,O===null&&(R.shared.lanes=0),lr|=J,u.lanes=J,u.memoizedState=Ut}}function ne(u,f){if(typeof u!="function")throw Error(i(191,u));u.call(f)}function Me(u,f){var v=u.callbacks;if(v!==null)for(u.callbacks=null,u=0;u<v.length;u++)ne(v[u],f)}function Te(u,f){if(Za(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var v=Object.keys(u),S=Object.keys(f);if(v.length!==S.length)return!1;for(S=0;S<v.length;S++){var R=v[S];if(!X_.call(f,R)||!Za(u[R],f[R]))return!1}return!0}function Ge(u){return u=u.status,u==="fulfilled"||u==="rejected"}function dt(){}function xt(u,f,v){switch(v=u[v],v===void 0?u.push(f):v!==f&&(f.then(dt,dt),f=v),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,u===vh?Error(i(483)):u;default:if(typeof f.status=="string")f.then(dt,dt);else{if(u=ui,u!==null&&100<u.shellSuspendCounter)throw Error(i(482));u=f,u.status="pending",u.then(function(S){if(f.status==="pending"){var R=f;R.status="fulfilled",R.value=S}},function(S){if(f.status==="pending"){var R=f;R.status="rejected",R.reason=S}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,u===vh?Error(i(483)):u}throw Ia=f,vh}}function Ft(){if(Ia===null)throw Error(i(459));var u=Ia;return Ia=null,u}function rn(u){var f=Pa;return Pa+=1,Ic===null&&(Ic=[]),xt(Ic,u,f)}function Bn(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function St(u,f){throw f.$$typeof===cg?Error(i(525)):(u=Object.prototype.toString.call(f),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function Dt(u){var f=u._init;return f(u._payload)}function Zt(u){function f(Ue,_e){if(u){var Fe=Ue.deletions;Fe===null?(Ue.deletions=[_e],Ue.flags|=16):Fe.push(_e)}}function v(Ue,_e){if(!u)return null;for(;_e!==null;)f(Ue,_e),_e=_e.sibling;return null}function S(Ue){for(var _e=new Map;Ue!==null;)Ue.key!==null?_e.set(Ue.key,Ue):_e.set(Ue.index,Ue),Ue=Ue.sibling;return _e}function R(Ue,_e){return Ue=Po(Ue,_e),Ue.index=0,Ue.sibling=null,Ue}function O(Ue,_e,Fe){return Ue.index=Fe,u?(Fe=Ue.alternate,Fe!==null?(Fe=Fe.index,Fe<_e?(Ue.flags|=33554434,_e):Fe):(Ue.flags|=33554434,_e)):(Ue.flags|=1048576,_e)}function J(Ue){return u&&Ue.alternate===null&&(Ue.flags|=33554434),Ue}function fe(Ue,_e,Fe,ct){return _e===null||_e.tag!==6?(_e=lh(Fe,Ue.mode,ct),_e.return=Ue,_e):(_e=R(_e,Fe),_e.return=Ue,_e)}function Ee(Ue,_e,Fe,ct){var jt=Fe.type;return jt===Ul?gt(Ue,_e,Fe.props.children,ct,Fe.key):_e!==null&&(_e.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===Go&&Dt(jt)===_e.type)?(_e=R(_e,Fe.props),Bn(_e,Fe),_e.return=Ue,_e):(_e=Cc(Fe.type,Fe.key,Fe.props,null,Ue.mode,ct),Bn(_e,Fe),_e.return=Ue,_e)}function Ze(Ue,_e,Fe,ct){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Fe.containerInfo||_e.stateNode.implementation!==Fe.implementation?(_e=ps(Fe,Ue.mode,ct),_e.return=Ue,_e):(_e=R(_e,Fe.children||[]),_e.return=Ue,_e)}function gt(Ue,_e,Fe,ct,jt){return _e===null||_e.tag!==7?(_e=Bl(Fe,Ue.mode,ct,jt),_e.return=Ue,_e):(_e=R(_e,Fe),_e.return=Ue,_e)}function Ut(Ue,_e,Fe){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return _e=lh(""+_e,Ue.mode,Fe),_e.return=Ue,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case Dl:return Fe=Cc(_e.type,_e.key,_e.props,null,Ue.mode,Fe),Bn(Fe,_e),Fe.return=Ue,Fe;case to:return _e=ps(_e,Ue.mode,Fe),_e.return=Ue,_e;case Go:var ct=_e._init;return _e=ct(_e._payload),Ut(Ue,_e,Fe)}if(Pl(_e)||s(_e))return _e=Bl(_e,Ue.mode,Fe,null),_e.return=Ue,_e;if(typeof _e.then=="function")return Ut(Ue,rn(_e),Fe);if(_e.$$typeof===Nl)return Ut(Ue,qf(Ue,_e),Fe);St(Ue,_e)}return null}function ft(Ue,_e,Fe,ct){var jt=_e!==null?_e.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return jt!==null?null:fe(Ue,_e,""+Fe,ct);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case Dl:return Fe.key===jt?Ee(Ue,_e,Fe,ct):null;case to:return Fe.key===jt?Ze(Ue,_e,Fe,ct):null;case Go:return jt=Fe._init,Fe=jt(Fe._payload),ft(Ue,_e,Fe,ct)}if(Pl(Fe)||s(Fe))return jt!==null?null:gt(Ue,_e,Fe,ct,null);if(typeof Fe.then=="function")return ft(Ue,_e,rn(Fe),ct);if(Fe.$$typeof===Nl)return ft(Ue,_e,qf(Ue,Fe),ct);St(Ue,Fe)}return null}function pn(Ue,_e,Fe,ct,jt){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Ue=Ue.get(Fe)||null,fe(_e,Ue,""+ct,jt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case Dl:return Ue=Ue.get(ct.key===null?Fe:ct.key)||null,Ee(_e,Ue,ct,jt);case to:return Ue=Ue.get(ct.key===null?Fe:ct.key)||null,Ze(_e,Ue,ct,jt);case Go:var fi=ct._init;return ct=fi(ct._payload),pn(Ue,_e,Fe,ct,jt)}if(Pl(ct)||s(ct))return Ue=Ue.get(Fe)||null,gt(_e,Ue,ct,jt,null);if(typeof ct.then=="function")return pn(Ue,_e,Fe,rn(ct),jt);if(ct.$$typeof===Nl)return pn(Ue,_e,Fe,qf(_e,ct),jt);St(_e,ct)}return null}function ur(Ue,_e,Fe,ct){for(var jt=null,fi=null,cn=_e,wn=_e=0,mi=null;cn!==null&&wn<Fe.length;wn++){cn.index>wn?(mi=cn,cn=null):mi=cn.sibling;var In=ft(Ue,cn,Fe[wn],ct);if(In===null){cn===null&&(cn=mi);break}u&&cn&&In.alternate===null&&f(Ue,cn),_e=O(In,_e,wn),fi===null?jt=In:fi.sibling=In,fi=In,cn=mi}if(wn===Fe.length)return v(Ue,cn),kn&&P(Ue,wn),jt;if(cn===null){for(;wn<Fe.length;wn++)cn=Ut(Ue,Fe[wn],ct),cn!==null&&(_e=O(cn,_e,wn),fi===null?jt=cn:fi.sibling=cn,fi=cn);return kn&&P(Ue,wn),jt}for(cn=S(cn);wn<Fe.length;wn++)mi=pn(cn,Ue,wn,Fe[wn],ct),mi!==null&&(u&&mi.alternate!==null&&cn.delete(mi.key===null?wn:mi.key),_e=O(mi,_e,wn),fi===null?jt=mi:fi.sibling=mi,fi=mi);return u&&cn.forEach(function(Ql){return f(Ue,Ql)}),kn&&P(Ue,wn),jt}function Wu(Ue,_e,Fe,ct){if(Fe==null)throw Error(i(151));for(var jt=null,fi=null,cn=_e,wn=_e=0,mi=null,In=Fe.next();cn!==null&&!In.done;wn++,In=Fe.next()){cn.index>wn?(mi=cn,cn=null):mi=cn.sibling;var Ql=ft(Ue,cn,In.value,ct);if(Ql===null){cn===null&&(cn=mi);break}u&&cn&&Ql.alternate===null&&f(Ue,cn),_e=O(Ql,_e,wn),fi===null?jt=Ql:fi.sibling=Ql,fi=Ql,cn=mi}if(In.done)return v(Ue,cn),kn&&P(Ue,wn),jt;if(cn===null){for(;!In.done;wn++,In=Fe.next())In=Ut(Ue,In.value,ct),In!==null&&(_e=O(In,_e,wn),fi===null?jt=In:fi.sibling=In,fi=In);return kn&&P(Ue,wn),jt}for(cn=S(cn);!In.done;wn++,In=Fe.next())In=pn(cn,Ue,wn,In.value,ct),In!==null&&(u&&In.alternate!==null&&cn.delete(In.key===null?wn:In.key),_e=O(In,_e,wn),fi===null?jt=In:fi.sibling=In,fi=In);return u&&cn.forEach(function(q_){return f(Ue,q_)}),kn&&P(Ue,wn),jt}function Vc(Ue,_e,Fe,ct){if(typeof Fe=="object"&&Fe!==null&&Fe.type===Ul&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case Dl:e:{for(var jt=Fe.key;_e!==null;){if(_e.key===jt){if(jt=Fe.type,jt===Ul){if(_e.tag===7){v(Ue,_e.sibling),ct=R(_e,Fe.props.children),ct.return=Ue,Ue=ct;break e}}else if(_e.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===Go&&Dt(jt)===_e.type){v(Ue,_e.sibling),ct=R(_e,Fe.props),Bn(ct,Fe),ct.return=Ue,Ue=ct;break e}v(Ue,_e);break}else f(Ue,_e);_e=_e.sibling}Fe.type===Ul?(ct=Bl(Fe.props.children,Ue.mode,ct,Fe.key),ct.return=Ue,Ue=ct):(ct=Cc(Fe.type,Fe.key,Fe.props,null,Ue.mode,ct),Bn(ct,Fe),ct.return=Ue,Ue=ct)}return J(Ue);case to:e:{for(jt=Fe.key;_e!==null;){if(_e.key===jt)if(_e.tag===4&&_e.stateNode.containerInfo===Fe.containerInfo&&_e.stateNode.implementation===Fe.implementation){v(Ue,_e.sibling),ct=R(_e,Fe.children||[]),ct.return=Ue,Ue=ct;break e}else{v(Ue,_e);break}else f(Ue,_e);_e=_e.sibling}ct=ps(Fe,Ue.mode,ct),ct.return=Ue,Ue=ct}return J(Ue);case Go:return jt=Fe._init,Fe=jt(Fe._payload),Vc(Ue,_e,Fe,ct)}if(Pl(Fe))return ur(Ue,_e,Fe,ct);if(s(Fe)){if(jt=s(Fe),typeof jt!="function")throw Error(i(150));return Fe=jt.call(Fe),Wu(Ue,_e,Fe,ct)}if(typeof Fe.then=="function")return Vc(Ue,_e,rn(Fe),ct);if(Fe.$$typeof===Nl)return Vc(Ue,_e,qf(Ue,Fe),ct);St(Ue,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint"?(Fe=""+Fe,_e!==null&&_e.tag===6?(v(Ue,_e.sibling),ct=R(_e,Fe),ct.return=Ue,Ue=ct):(v(Ue,_e),ct=lh(Fe,Ue.mode,ct),ct.return=Ue,Ue=ct),J(Ue)):v(Ue,_e)}return function(Ue,_e,Fe,ct){try{Pa=0;var jt=Vc(Ue,_e,Fe,ct);return Ic=null,jt}catch(cn){if(cn===vh)throw cn;var fi=t(29,cn,null,Ue.mode);return fi.lanes=ct,fi.return=Ue,fi}finally{}}}function bt(u,f){u=Nr,w(Ur,u),w(Dr,f),Nr=u|f.baseLanes}function en(){w(Ur,Nr),w(Dr,Dr.current)}function It(){Nr=Ur.current,E(Dr),E(Ur)}function qt(u){var f=u.alternate;w(yi,yi.current&1),w(_s,u),ir===null&&(f===null||Dr.current!==null||f.memoizedState!==null)&&(ir=u)}function Zn(u){if(u.tag===22){if(w(yi,yi.current),w(_s,u),ir===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(ir=u)}}else tn()}function tn(){w(yi,yi.current),w(_s,_s.current)}function Rt(u){E(_s),ir===u&&(ir=null),E(yi)}function gn(u){for(var f=u;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||Dc(v)||hh(v)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function Ht(){throw Error(i(321))}function G(u,f){if(f===null)return!1;for(var v=0;v<f.length&&v<u.length;v++)if(!Za(u[v],f[v]))return!1;return!0}function X(u,f,v,S,R,O){return Wo=O,hn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,un.H=u===null||u.memoizedState===null?Zo:$a,Yl=!1,O=v(S,R),Yl=!1,Pc&&(O=ye(f,v,S,R)),ce(u),O}function ce(u){un.H=Xi;var f=Wn!==null&&Wn.next!==null;if(Wo=0,Ri=Wn=hn=null,jo=!1,ku=0,Ko=null,f)throw Error(i(300));u===null||ea||(u=u.dependencies,u!==null&&Yf(u)&&(ea=!0))}function ye(u,f,v,S){hn=u;var R=0;do{if(Pc&&(Ko=null),ku=0,Pc=!1,25<=R)throw Error(i(301));if(R+=1,Ri=Wn=null,u.updateQueue!=null){var O=u.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}un.H=Jl,O=f(v,S)}while(Pc);return O}function Ie(){var u=un.H,f=u.useState()[0];return f=typeof f.then=="function"?se(f):f,u=u.useState()[0],(Wn!==null?Wn.memoizedState:null)!==u&&(hn.flags|=1024),f}function Le(){var u=ql!==0;return ql=0,u}function nt(u,f,v){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~v}function qe(u){if(jo){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}jo=!1}Wo=0,Ri=Wn=hn=null,Pc=!1,ku=ql=0,Ko=null}function V(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ri===null?hn.memoizedState=Ri=u:Ri=Ri.next=u,Ri}function K(){if(Wn===null){var u=hn.alternate;u=u!==null?u.memoizedState:null}else u=Wn.next;var f=Ri===null?hn.memoizedState:Ri.next;if(f!==null)Ri=f,Wn=u;else{if(u===null)throw hn.alternate===null?Error(i(467)):Error(i(310));Wn=u,u={memoizedState:Wn.memoizedState,baseState:Wn.baseState,baseQueue:Wn.baseQueue,queue:Wn.queue,next:null},Ri===null?hn.memoizedState=Ri=u:Ri=Ri.next=u}return Ri}function se(u){var f=ku;return ku+=1,Ko===null&&(Ko=[]),u=xt(Ko,u,f),f=hn,(Ri===null?f.memoizedState:Ri.next)===null&&(f=f.alternate,un.H=f===null||f.memoizedState===null?Zo:$a),u}function te(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return se(u);if(u.$$typeof===Nl)return Ma(u)}throw Error(i(438,String(u)))}function de(u){var f=null,v=hn.updateQueue;if(v!==null&&(f=v.memoCache),f==null){var S=hn.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(f={data:S.data.map(function(R){return R.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),v===null&&(v=Lg(),hn.updateQueue=v),v.memoCache=f,v=f.data[f.index],v===void 0)for(v=f.data[f.index]=Array(u),S=0;S<u;S++)v[S]=En;return f.index++,v}function Ae(u,f){return typeof f=="function"?f(u):f}function He(u){var f=K();return je(f,Wn,u)}function je(u,f,v){var S=u.queue;if(S===null)throw Error(i(311));S.lastRenderedReducer=v;var R=u.baseQueue,O=S.pending;if(O!==null){if(R!==null){var J=R.next;R.next=O.next,O.next=J}f.baseQueue=R=O,S.pending=null}if(O=u.baseState,R===null)u.memoizedState=O;else{f=R.next;var fe=J=null,Ee=null,Ze=f,gt=!1;do{var Ut=Ze.lane&-536870913;if(Ut!==Ze.lane?(Nn&Ut)===Ut:(Wo&Ut)===Ut){var ft=Ze.revertLane;if(ft===0)Ee!==null&&(Ee=Ee.next={lane:0,revertLane:0,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null}),Ut===Si&&(gt=!0);else if((Wo&ft)===ft){Ze=Ze.next,ft===Si&&(gt=!0);continue}else Ut={lane:0,revertLane:Ze.revertLane,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},Ee===null?(fe=Ee=Ut,J=O):Ee=Ee.next=Ut,hn.lanes|=ft,lr|=ft;Ut=Ze.action,Yl&&v(O,Ut),O=Ze.hasEagerState?Ze.eagerState:v(O,Ut)}else ft={lane:Ut,revertLane:Ze.revertLane,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},Ee===null?(fe=Ee=ft,J=O):Ee=Ee.next=ft,hn.lanes|=Ut,lr|=Ut;Ze=Ze.next}while(Ze!==null&&Ze!==f);if(Ee===null?J=O:Ee.next=fe,!Za(O,u.memoizedState)&&(ea=!0,gt&&(v=va,v!==null)))throw v;u.memoizedState=O,u.baseState=J,u.baseQueue=Ee,S.lastRenderedState=O}return R===null&&(S.lanes=0),[u.memoizedState,S.dispatch]}function Ke(u){var f=K(),v=f.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=u;var S=v.dispatch,R=v.pending,O=f.memoizedState;if(R!==null){v.pending=null;var J=R=R.next;do O=u(O,J.action),J=J.next;while(J!==R);Za(O,f.memoizedState)||(ea=!0),f.memoizedState=O,f.baseQueue===null&&(f.baseState=O),v.lastRenderedState=O}return[O,S]}function At(u,f,v){var S=hn,R=K(),O=kn;if(O){if(v===void 0)throw Error(i(407));v=v()}else v=f();var J=!Za((Wn||R).memoizedState,v);if(J&&(R.memoizedState=v,ea=!0),R=R.queue,If(Wt.bind(null,S,R,u),[u]),R.getSnapshot!==f||J||Ri!==null&&Ri.memoizedState.tag&1){if(S.flags|=2048,Mr(9,Ct.bind(null,S,R,v,f),{destroy:void 0},null),ui===null)throw Error(i(349));O||(Wo&60)!==0||Tt(S,f,v)}return v}function Tt(u,f,v){u.flags|=16384,u={getSnapshot:f,value:v},f=hn.updateQueue,f===null?(f=Lg(),hn.updateQueue=f,f.stores=[u]):(v=f.stores,v===null?f.stores=[u]:v.push(u))}function Ct(u,f,v,S){f.value=v,f.getSnapshot=S,Vt(f)&&Dn(u)}function Wt(u,f,v){return v(function(){Vt(f)&&Dn(u)})}function Vt(u){var f=u.getSnapshot;u=u.value;try{var v=f();return!Za(u,v)}catch{return!0}}function Dn(u){var f=pe(u,2);f!==null&&_i(f,u,2)}function Yt(u){var f=V();if(typeof u=="function"){var v=u;if(u=v(),Yl){he(!0);try{v()}finally{he(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ae,lastRenderedState:u},f}function zt(u,f,v,S){return u.baseState=v,je(u,Wn,typeof S=="function"?S:Ae)}function Gt(u,f,v,S,R){if(Hf(u))throw Error(i(485));if(u=f.action,u!==null){var O={payload:R,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(J){O.listeners.push(J)}};un.T!==null?v(!0):O.isTransition=!1,S(O),v=f.pending,v===null?(O.next=f.pending=O,vi(f,O)):(O.next=v.next,f.pending=v.next=O)}}function vi(u,f){var v=f.action,S=f.payload,R=u.state;if(f.isTransition){var O=un.T,J={};un.T=J;try{var fe=v(R,S),Ee=un.S;Ee!==null&&Ee(J,fe),on(u,f,fe)}catch(Ze){ni(u,f,Ze)}finally{un.T=O}}else try{O=v(R,S),on(u,f,O)}catch(Ze){ni(u,f,Ze)}}function on(u,f,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(S){mn(u,f,S)},function(S){return ni(u,f,S)}):mn(u,f,v)}function mn(u,f,v){f.status="fulfilled",f.value=v,xn(f),u.state=v,f=u.pending,f!==null&&(v=f.next,v===f?u.pending=null:(v=v.next,f.next=v,vi(u,v)))}function ni(u,f,v){var S=u.pending;if(u.pending=null,S!==null){S=S.next;do f.status="rejected",f.reason=v,xn(f),f=f.next;while(f!==S)}u.action=null}function xn(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function ln(u,f){return f}function vn(u,f){if(kn){var v=ui.formState;if(v!==null){e:{var S=hn;if(kn){if(li){var R=U_(li,wr);if(R){li=zl(R),S=io(R);break e}}tt(S)}S=!1}S&&(f=v[0])}}v=V(),v.memoizedState=v.baseState=f,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:f},v.queue=S,v=Vm.bind(null,hn,S),S.dispatch=v,S=Yt(!1);var O=gu.bind(null,hn,!1,S.queue);return S=V(),R={state:f,dispatch:null,action:u,pending:null},S.queue=R,v=Gt.bind(null,hn,R,O,v),R.dispatch=v,S.memoizedState=u,[f,v,!1]}function bi(u){var f=K();return Qn(f,Wn,u)}function Qn(u,f,v){f=je(u,f,ln)[0],u=He(Ae)[0],f=typeof f=="object"&&f!==null&&typeof f.then=="function"?se(f):f;var S=K(),R=S.queue,O=R.dispatch;return v!==S.memoizedState&&(hn.flags|=2048,Mr(9,$n.bind(null,R,v),{destroy:void 0},null)),[f,O,u]}function $n(u,f){u.action=f}function pa(u){var f=K(),v=Wn;if(v!==null)return Qn(f,v,u);K(),f=f.memoizedState,v=K();var S=v.queue.dispatch;return v.memoizedState=u,[f,S,!1]}function Mr(u,f,v,S){return u={tag:u,create:f,inst:v,deps:S,next:null},f=hn.updateQueue,f===null&&(f=Lg(),hn.updateQueue=f),v=f.lastEffect,v===null?f.lastEffect=u.next=u:(S=v.next,v.next=u,u.next=S,f.lastEffect=u),u}function Ja(){return K().memoizedState}function Od(u,f,v,S){var R=V();hn.flags|=u,R.memoizedState=Mr(1|f,v,{destroy:void 0},S===void 0?null:S)}function Lf(u,f,v,S){var R=K();S=S===void 0?null:S;var O=R.memoizedState.inst;Wn!==null&&S!==null&&G(S,Wn.memoizedState.deps)?R.memoizedState=Mr(f,v,O,S):(hn.flags|=u,R.memoizedState=Mr(1|f,v,O,S))}function zm(u,f){Od(8390656,8,u,f)}function If(u,f){Lf(2048,8,u,f)}function Nv(u,f){return Lf(4,2,u,f)}function Lv(u,f){return Lf(4,4,u,f)}function Pf(u,f){if(typeof f=="function"){u=u();var v=f(u);return function(){typeof v=="function"?v():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function Nd(u,f,v){v=v!=null?v.concat([u]):null,Lf(4,4,Pf.bind(null,f,u),v)}function Ff(){}function vc(u,f){var v=K();f=f===void 0?null:f;var S=v.memoizedState;return f!==null&&G(f,S[1])?S[0]:(v.memoizedState=[u,f],u)}function _c(u,f){var v=K();f=f===void 0?null:f;var S=v.memoizedState;if(f!==null&&G(f,S[1]))return S[0];if(S=u(),Yl){he(!0);try{u()}finally{he(!1)}}return v.memoizedState=[S,f],S}function Ld(u,f,v){return v===void 0||(Wo&1073741824)!==0?u.memoizedState=f:(u.memoizedState=v,u=th(),hn.lanes|=u,lr|=u,v)}function Id(u,f,v,S){return Za(v,f)?v:Dr.current!==null?(u=Ld(u,v,S),Za(u,f)||(ea=!0),u):(Wo&42)===0?(ea=!0,u.memoizedState=v):(u=th(),hn.lanes|=u,lr|=u,f)}function Hm(u,f,v,S,R){var O=Fl();Ka(O!==0&&8>O?O:8);var J=un.T,fe={};un.T=fe,gu(u,!1,f,v);try{var Ee=R(),Ze=un.S;if(Ze!==null&&Ze(fe,Ee),Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var gt=$t(Ee,S);vl(u,f,gt,Da(u))}else vl(u,f,S,Da(u))}catch(Ut){vl(u,f,{then:function(){},status:"rejected",reason:Ut},Da())}finally{Ka(O),un.T=J}}function pu(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:Bc,baseState:Bc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ae,lastRenderedState:Bc},next:null};var v={};return f.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ae,lastRenderedState:v},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function zf(){return Ma(ko)}function mu(){return K().memoizedState}function bo(){return K().memoizedState}function Gm(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var v=Da();u=Nt(v);var S=mt(f,u,v);S!==null&&(_i(S,f,v),Et(S,f,v)),f={cache:Al()},u.payload=f;return}f=f.return}}function Pd(u,f,v){var S=Da();v={lane:S,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},Hf(u)?Wa(f,v):(v=$e(u,f,v,S),v!==null&&(_i(v,u,S),_l(v,f,S)))}function Vm(u,f,v){var S=Da();vl(u,f,v,S)}function vl(u,f,v,S){var R={lane:S,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(Hf(u))Wa(f,R);else{var O=u.alternate;if(u.lanes===0&&(O===null||O.lanes===0)&&(O=f.lastRenderedReducer,O!==null))try{var J=f.lastRenderedState,fe=O(J,v);if(R.hasEagerState=!0,R.eagerState=fe,Za(fe,J))return Mt(u,f,R,0),ui===null&&j(),!1}catch{}finally{}if(v=$e(u,f,R,S),v!==null)return _i(v,u,S),_l(v,f,S),!0}return!1}function gu(u,f,v,S){if(S={lane:2,revertLane:_t(),action:S,hasEagerState:!1,eagerState:null,next:null},Hf(u)){if(f)throw Error(i(479))}else f=$e(u,v,S,2),f!==null&&_i(f,u,2)}function Hf(u){var f=u.alternate;return u===hn||f!==null&&f===hn}function Wa(u,f){Pc=jo=!0;var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}function _l(u,f,v){if((v&4194176)!==0){var S=f.lanes;S&=u.pendingLanes,v|=S,f.lanes=v,ae(u,v)}}function vu(u,f,v,S){f=u.memoizedState,v=v(S,f),v=v==null?f:Fi({},f,v),u.memoizedState=v,u.lanes===0&&(u.updateQueue.baseState=v)}function _u(u,f,v,S,R,O,J){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,O,J):f.prototype&&f.prototype.isPureReactComponent?!Te(v,S)||!Te(R,O):!0}function Iv(u,f,v,S){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,S),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,S),f.state!==u&&Xu.enqueueReplaceState(f,f.state,null)}function To(u,f){var v=f;if("ref"in f){v={};for(var S in f)S!=="ref"&&(v[S]=f[S])}if(u=u.defaultProps){v===f&&(v=Fi({},v));for(var R in u)v[R]===void 0&&(v[R]=u[R])}return v}function yu(u,f){try{var v=u.onUncaughtError;v(f.value,{componentStack:f.stack})}catch(S){setTimeout(function(){throw S})}}function xu(u,f,v){try{var S=u.onCaughtError;S(v.value,{componentStack:v.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function Au(u,f,v){return v=Nt(v),v.tag=3,v.payload={element:null},v.callback=function(){yu(u,f)},v}function km(u){return u=Nt(u),u.tag=3,u}function Pv(u,f,v,S){var R=v.type.getDerivedStateFromError;if(typeof R=="function"){var O=S.value;u.payload=function(){return R(O)},u.callback=function(){xu(f,v,S)}}var J=v.stateNode;J!==null&&typeof J.componentDidCatch=="function"&&(u.callback=function(){xu(f,v,S),typeof R!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var fe=S.stack;this.componentDidCatch(S.value,{componentStack:fe!==null?fe:""})})}function bS(u,f,v,S,R){if(v.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(f=v.alternate,f!==null&&Xf(f,v,R,!0),v=_s.current,v!==null){switch(v.tag){case 13:return ir===null?er():v.alternate===null&&wi===0&&(wi=3),v.flags&=-257,v.flags|=65536,v.lanes=R,S===Qa?v.flags|=16384:(f=v.updateQueue,f===null?v.updateQueue=new Set([S]):f.add(S),wl(u,S,R)),!1;case 22:return v.flags|=65536,S===Qa?v.flags|=16384:(f=v.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([S])},v.updateQueue=f):(v=f.retryQueue,v===null?f.retryQueue=new Set([S]):v.add(S)),wl(u,S,R)),!1}throw Error(i(435,v.tag))}return wl(u,S,R),er(),!1}if(kn)return f=_s.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=R,S!==gh&&(u=Error(i(422),{cause:S}),De(be(u,v)))):(S!==gh&&(f=Error(i(423),{cause:S}),De(be(f,v))),u=u.current.alternate,u.flags|=65536,R&=-R,u.lanes|=R,S=be(S,v),R=Au(u.stateNode,S,R),le(u,R),wi!==4&&(wi=2)),!1;var O=Error(i(520),{cause:S});if(O=be(O,v),qu===null?qu=[O]:qu.push(O),wi!==4&&(wi=2),f===null)return!0;S=be(S,v),v=f;do{switch(v.tag){case 3:return v.flags|=65536,u=R&-R,v.lanes|=u,u=Au(v.stateNode,S,u),le(v,u),!1;case 1:if(f=v.type,O=v.stateNode,(v.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(uo===null||!uo.has(O))))return v.flags|=65536,R&=-R,v.lanes|=R,R=km(R),Pv(R,u,v,S),le(v,R),!1}v=v.return}while(v!==null);return!1}function Sa(u,f,v,S){f.child=u===null?oo(f,null,v,S):Xl(f,u.child,v,S)}function Fd(u,f,v,S,R){v=v.render;var O=f.ref;if("ref"in S){var J={};for(var fe in S)fe!=="ref"&&(J[fe]=S[fe])}else J=S;return xl(f),S=X(u,f,v,J,O,R),fe=Le(),u!==null&&!ea?(nt(u,f,R),Co(u,f,R)):(kn&&fe&&Ce(f),f.flags|=1,Sa(u,f,S,R),f.child)}function Fv(u,f,v,S,R){if(u===null){var O=v.type;return typeof O=="function"&&!Io(O)&&O.defaultProps===void 0&&v.compare===null?(f.tag=15,f.type=O,zv(u,f,O,S,R)):(u=Cc(v.type,null,S,f,f.mode,R),u.ref=f.ref,u.return=f,f.child=u)}if(O=u.child,!Wm(u,R)){var J=O.memoizedProps;if(v=v.compare,v=v!==null?v:Te,v(J,S)&&u.ref===f.ref)return Co(u,f,R)}return f.flags|=1,u=Po(O,S),u.ref=f.ref,u.return=f,f.child=u}function zv(u,f,v,S,R){if(u!==null){var O=u.memoizedProps;if(Te(O,S)&&u.ref===f.ref)if(ea=!1,f.pendingProps=S=O,Wm(u,R))(u.flags&131072)!==0&&(ea=!0);else return f.lanes=u.lanes,Co(u,f,R)}return zd(u,f,v,S,R)}function Hv(u,f,v){var S=f.pendingProps,R=S.children,O=(f.stateNode._pendingVisibility&2)!==0,J=u!==null?u.memoizedState:null;if(Gf(u,f),S.mode==="hidden"||O){if((f.flags&128)!==0){if(S=J!==null?J.baseLanes|v:v,u!==null){for(R=f.child=u.child,O=0;R!==null;)O=O|R.lanes|R.childLanes,R=R.sibling;f.childLanes=O&~S}else f.childLanes=0,f.child=null;return Gv(u,f,S,v)}if((v&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&Gd(f,J!==null?J.cachePool:null),J!==null?bt(f,J):en(),Zn(f);else return f.lanes=f.childLanes=536870912,Gv(u,f,J!==null?J.baseLanes|v:v,v)}else J!==null?(Gd(f,J.cachePool),bt(f,J),tn(),f.memoizedState=null):(u!==null&&Gd(f,null),en(),tn());return Sa(u,f,R,v),f.child}function Gv(u,f,v,S){var R=Km();return R=R===null?null:{parent:br?Ni._currentValue:Ni._currentValue2,pool:R},f.memoizedState={baseLanes:v,cachePool:R},u!==null&&Gd(f,null),en(),Zn(f),u!==null&&Xf(u,f,S,!0),null}function Gf(u,f){var v=f.ref;if(v===null)u!==null&&u.ref!==null&&(f.flags|=2097664);else{if(typeof v!="function"&&typeof v!="object")throw Error(i(284));(u===null||u.ref!==v)&&(f.flags|=2097664)}}function zd(u,f,v,S,R){return xl(f),v=X(u,f,v,S,void 0,R),S=Le(),u!==null&&!ea?(nt(u,f,R),Co(u,f,R)):(kn&&S&&Ce(f),f.flags|=1,Sa(u,f,v,R),f.child)}function Vv(u,f,v,S,R,O){return xl(f),f.updateQueue=null,v=ye(f,S,v,R),ce(u),S=Le(),u!==null&&!ea?(nt(u,f,O),Co(u,f,O)):(kn&&S&&Ce(f),f.flags|=1,Sa(u,f,v,O),f.child)}function kv(u,f,v,S,R){if(xl(f),f.stateNode===null){var O=Nc,J=v.contextType;typeof J=="object"&&J!==null&&(O=Ma(J)),O=new v(S,O),f.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=Xu,f.stateNode=O,O._reactInternals=f,O=f.stateNode,O.props=S,O.state=f.memoizedState,O.refs={},st(f),J=v.contextType,O.context=typeof J=="object"&&J!==null?Ma(J):Nc,O.state=f.memoizedState,J=v.getDerivedStateFromProps,typeof J=="function"&&(vu(f,v,J,S),O.state=f.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(J=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),J!==O.state&&Xu.enqueueReplaceState(O,O.state,null),rt(f,S,O,R),Re(),O.state=f.memoizedState),typeof O.componentDidMount=="function"&&(f.flags|=4194308),S=!0}else if(u===null){O=f.stateNode;var fe=f.memoizedProps,Ee=To(v,fe);O.props=Ee;var Ze=O.context,gt=v.contextType;J=Nc,typeof gt=="object"&&gt!==null&&(J=Ma(gt));var Ut=v.getDerivedStateFromProps;gt=typeof Ut=="function"||typeof O.getSnapshotBeforeUpdate=="function",fe=f.pendingProps!==fe,gt||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(fe||Ze!==J)&&Iv(f,O,S,J),La=!1;var ft=f.memoizedState;O.state=ft,rt(f,S,O,R),Re(),Ze=f.memoizedState,fe||ft!==Ze||La?(typeof Ut=="function"&&(vu(f,v,Ut,S),Ze=f.memoizedState),(Ee=La||_u(f,v,Ee,S,ft,Ze,J))?(gt||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(f.flags|=4194308)):(typeof O.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=S,f.memoizedState=Ze),O.props=S,O.state=Ze,O.context=J,S=Ee):(typeof O.componentDidMount=="function"&&(f.flags|=4194308),S=!1)}else{O=f.stateNode,vt(u,f),J=f.memoizedProps,gt=To(v,J),O.props=gt,Ut=f.pendingProps,ft=O.context,Ze=v.contextType,Ee=Nc,typeof Ze=="object"&&Ze!==null&&(Ee=Ma(Ze)),fe=v.getDerivedStateFromProps,(Ze=typeof fe=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(J!==Ut||ft!==Ee)&&Iv(f,O,S,Ee),La=!1,ft=f.memoizedState,O.state=ft,rt(f,S,O,R),Re();var pn=f.memoizedState;J!==Ut||ft!==pn||La||u!==null&&u.dependencies!==null&&Yf(u.dependencies)?(typeof fe=="function"&&(vu(f,v,fe,S),pn=f.memoizedState),(gt=La||_u(f,v,gt,S,ft,pn,Ee)||u!==null&&u.dependencies!==null&&Yf(u.dependencies))?(Ze||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(S,pn,Ee),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(S,pn,Ee)),typeof O.componentDidUpdate=="function"&&(f.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof O.componentDidUpdate!="function"||J===u.memoizedProps&&ft===u.memoizedState||(f.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&ft===u.memoizedState||(f.flags|=1024),f.memoizedProps=S,f.memoizedState=pn),O.props=S,O.state=pn,O.context=Ee,S=gt):(typeof O.componentDidUpdate!="function"||J===u.memoizedProps&&ft===u.memoizedState||(f.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&ft===u.memoizedState||(f.flags|=1024),S=!1)}return O=S,Gf(u,f),S=(f.flags&128)!==0,O||S?(O=f.stateNode,v=S&&typeof v.getDerivedStateFromError!="function"?null:O.render(),f.flags|=1,u!==null&&S?(f.child=Xl(f,u.child,null,R),f.child=Xl(f,null,v,R)):Sa(u,f,v,R),f.memoizedState=O.state,u=f.child):u=Co(u,f,R),u}function Xv(u,f,v,S){return Je(),f.flags|=256,Sa(u,f,v,S),f.child}function Xm(u){return{baseLanes:u,cachePool:Zm()}}function Vf(u,f,v){return u=u!==null?u.childLanes&~v:0,f&&(u|=Ps),u}function Yv(u,f,v){var S=f.pendingProps,R=!1,O=(f.flags&128)!==0,J;if((J=O)||(J=u!==null&&u.memoizedState===null?!1:(yi.current&2)!==0),J&&(R=!0,f.flags&=-129),J=(f.flags&32)!==0,f.flags&=-33,u===null){if(kn){if(R?qt(f):tn(),kn){var fe=li,Ee;(Ee=fe)&&(fe=N_(fe,wr),fe!==null?(f.memoizedState={dehydrated:fe,treeContext:Rr!==null?{id:so,overflow:ro}:null,retryLane:536870912},Ee=t(18,null,null,0),Ee.stateNode=fe,Ee.return=f,f.child=Ee,Vi=f,li=null,Ee=!0):Ee=!1),Ee||tt(f)}if(fe=f.memoizedState,fe!==null&&(fe=fe.dehydrated,fe!==null))return hh(fe)?f.lanes=16:f.lanes=536870912,null;Rt(f)}return fe=S.children,S=S.fallback,R?(tn(),R=f.mode,fe=qm({mode:"hidden",children:fe},R),S=Bl(S,R,v,null),fe.return=f,S.return=f,fe.sibling=S,f.child=fe,R=f.child,R.memoizedState=Xm(v),R.childLanes=Vf(u,J,v),f.memoizedState=yh,S):(qt(f),Ym(f,fe))}if(Ee=u.memoizedState,Ee!==null&&(fe=Ee.dehydrated,fe!==null)){if(O)f.flags&256?(qt(f),f.flags&=-257,f=Hd(u,f,v)):f.memoizedState!==null?(tn(),f.child=u.child,f.flags|=128,f=null):(tn(),R=S.fallback,fe=f.mode,S=qm({mode:"visible",children:S.children},fe),R=Bl(R,fe,v,null),R.flags|=2,S.return=f,R.return=f,S.sibling=R,f.child=S,Xl(f,u.child,null,v),S=f.child,S.memoizedState=Xm(v),S.childLanes=Vf(u,J,v),f.memoizedState=yh,f=R);else if(qt(f),hh(fe))J=lp(fe).digest,S=Error(i(419)),S.stack="",S.digest=J,De({value:S,source:null,stack:null}),f=Hd(u,f,v);else if(ea||Xf(u,f,v,!1),J=(v&u.childLanes)!==0,ea||J){if(J=ui,J!==null){if(S=v&-v,(S&42)!==0)S=1;else switch(S){case 2:S=1;break;case 8:S=4;break;case 32:S=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:S=64;break;case 268435456:S=134217728;break;default:S=0}if(S=(S&(J.suspendedLanes|v))!==0?0:S,S!==0&&S!==Ee.retryLane)throw Ee.retryLane=S,pe(u,S),_i(J,u,S),Ig}Dc(fe)||er(),f=Hd(u,f,v)}else Dc(fe)?(f.flags|=128,f.child=u.child,f=oh.bind(null,u),D_(fe,f),f=null):(u=Ee.treeContext,ms&&(li=Ag(fe),Vi=f,kn=!0,nr=null,wr=!1,u!==null&&(gs[Na++]=so,gs[Na++]=ro,gs[Na++]=Rr,so=u.id,ro=u.overflow,Rr=f)),f=Ym(f,S.children),f.flags|=4096);return f}return R?(tn(),R=S.fallback,fe=f.mode,Ee=u.child,O=Ee.sibling,S=Po(Ee,{mode:"hidden",children:S.children}),S.subtreeFlags=Ee.subtreeFlags&31457280,O!==null?R=Po(O,R):(R=Bl(R,fe,v,null),R.flags|=2),R.return=f,S.return=f,S.sibling=R,f.child=S,S=R,R=f.child,fe=u.child.memoizedState,fe===null?fe=Xm(v):(Ee=fe.cachePool,Ee!==null?(O=br?Ni._currentValue:Ni._currentValue2,Ee=Ee.parent!==O?{parent:O,pool:O}:Ee):Ee=Zm(),fe={baseLanes:fe.baseLanes|v,cachePool:Ee}),R.memoizedState=fe,R.childLanes=Vf(u,J,v),f.memoizedState=yh,S):(qt(f),v=u.child,u=v.sibling,v=Po(v,{mode:"visible",children:S.children}),v.return=f,v.sibling=null,u!==null&&(J=f.deletions,J===null?(f.deletions=[u],f.flags|=16):J.push(u)),f.child=v,f.memoizedState=null,v)}function Ym(u,f){return f=qm({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function qm(u,f){return $d(u,f,0,null)}function Hd(u,f,v){return Xl(f,u.child,null,v),u=Ym(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function qv(u,f,v){u.lanes|=f;var S=u.alternate;S!==null&&(S.lanes|=f),kf(u.return,f,v)}function Jm(u,f,v,S,R){var O=u.memoizedState;O===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:S,tail:v,tailMode:R}:(O.isBackwards=f,O.rendering=null,O.renderingStartTime=0,O.last=S,O.tail=v,O.tailMode=R)}function Jv(u,f,v){var S=f.pendingProps,R=S.revealOrder,O=S.tail;if(Sa(u,f,S.children,v),S=yi.current,(S&2)!==0)S=S&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&qv(u,v,f);else if(u.tag===19)qv(u,v,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}S&=1}switch(w(yi,S),R){case"forwards":for(v=f.child,R=null;v!==null;)u=v.alternate,u!==null&&gn(u)===null&&(R=v),v=v.sibling;v=R,v===null?(R=f.child,f.child=null):(R=v.sibling,v.sibling=null),Jm(f,!1,R,v,O);break;case"backwards":for(v=null,R=f.child,f.child=null;R!==null;){if(u=R.alternate,u!==null&&gn(u)===null){f.child=R;break}u=R.sibling,R.sibling=v,v=R,R=u}Jm(f,!0,v,null,O);break;case"together":Jm(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Co(u,f,v){if(u!==null&&(f.dependencies=u.dependencies),lr|=f.lanes,(v&f.childLanes)===0)if(u!==null){if(Xf(u,f,v,!1),(v&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(i(153));if(f.child!==null){for(u=f.child,v=Po(u,u.pendingProps),f.child=v,v.return=f;u.sibling!==null;)u=u.sibling,v=v.sibling=Po(u,u.pendingProps),v.return=f;v.sibling=null}return f.child}function Wm(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&Yf(u)))}function TS(u,f,v){switch(f.tag){case 3:re(f,f.stateNode.containerInfo),yl(f,Ni,u.memoizedState.cache),Je();break;case 27:case 5:Be(f);break;case 4:re(f,f.stateNode.containerInfo);break;case 10:yl(f,f.type,f.memoizedProps.value);break;case 13:var S=f.memoizedState;if(S!==null)return S.dehydrated!==null?(qt(f),f.flags|=128,null):(v&f.child.childLanes)!==0?Yv(u,f,v):(qt(f),u=Co(u,f,v),u!==null?u.sibling:null);qt(f);break;case 19:var R=(u.flags&128)!==0;if(S=(v&f.childLanes)!==0,S||(Xf(u,f,v,!1),S=(v&f.childLanes)!==0),R){if(S)return Jv(u,f,v);f.flags|=128}if(R=f.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),w(yi,yi.current),S)break;return null;case 22:case 23:return f.lanes=0,Hv(u,f,v);case 24:yl(f,Ni,u.memoizedState.cache)}return Co(u,f,v)}function Wv(u,f,v){if(u!==null)if(u.memoizedProps!==f.pendingProps)ea=!0;else{if(!Wm(u,v)&&(f.flags&128)===0)return ea=!1,TS(u,f,v);ea=(u.flags&131072)!==0}else ea=!1,kn&&(f.flags&1048576)!==0&&ue(f,Hu,f.index);switch(f.lanes=0,f.tag){case 16:e:{u=f.pendingProps;var S=f.elementType,R=S._init;if(S=R(S._payload),f.type=S,typeof S=="function")Io(S)?(u=To(S,u),f.tag=1,f=kv(null,f,S,u,v)):(f.tag=0,f=zd(null,f,S,u,v));else{if(S!=null){if(R=S.$$typeof,R===ep){f.tag=11,f=Fd(null,f,S,u,v);break e}else if(R===Du){f.tag=14,f=Fv(null,f,S,u,v);break e}}throw f=l(S)||S,Error(i(306,f,""))}}return f;case 0:return zd(u,f,f.type,f.pendingProps,v);case 1:return S=f.type,R=To(S,f.pendingProps),kv(u,f,S,R,v);case 3:e:{if(re(f,f.stateNode.containerInfo),u===null)throw Error(i(387));var O=f.pendingProps;R=f.memoizedState,S=R.element,vt(u,f),rt(f,O,null,v);var J=f.memoizedState;if(O=J.cache,yl(f,Ni,O),O!==R.cache&&yc(f,[Ni],v,!0),Re(),O=J.element,ms&&R.isDehydrated)if(R={element:O,isDehydrated:!1,cache:J.cache},f.updateQueue.baseState=R,f.memoizedState=R,f.flags&256){f=Xv(u,f,O,v);break e}else if(O!==S){S=be(Error(i(424)),f),De(S),f=Xv(u,f,O,v);break e}else for(ms&&(li=Uc(f.stateNode.containerInfo),Vi=f,kn=!0,nr=null,wr=!0),v=oo(f,null,O,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Je(),O===S){f=Co(u,f,v);break e}Sa(u,f,O,v)}f=f.child}return f;case 26:if(Os)return Gf(u,f),u===null?(v=bg(f.type,null,f.pendingProps,null))?f.memoizedState=v:kn||(f.stateNode=wg(f.type,f.pendingProps,qo.current,f)):f.memoizedState=bg(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:if(ga)return Be(f),u===null&&ga&&kn&&(S=f.stateNode=fp(f.type,f.pendingProps,qo.current,Gi.current,!1),Vi=f,wr=!0,li=Xo(S)),S=f.pendingProps.children,u!==null||kn?Sa(u,f,S,v):f.child=Xl(f,null,S,v),Gf(u,f),f.child;case 5:return u===null&&kn&&(z_(f.type,f.pendingProps,Gi.current),(R=S=li)&&(S=Sg(S,f.type,f.pendingProps,wr),S!==null?(f.stateNode=S,Vi=f,li=Xo(S),wr=!1,R=!0):R=!1),R||tt(f)),Be(f),R=f.type,O=f.pendingProps,J=u!==null?u.memoizedProps:null,S=O.children,ba(R,O)?S=null:J!==null&&ba(R,J)&&(f.flags|=32),f.memoizedState!==null&&(R=X(u,f,Ie,null,null,v),br?ko._currentValue=R:ko._currentValue2=R),Gf(u,f),Sa(u,f,S,v),f.child;case 6:return u===null&&kn&&(LS(f.pendingProps,Gi.current),(u=v=li)&&(v=O_(v,f.pendingProps,wr),v!==null?(f.stateNode=v,Vi=f,li=null,u=!0):u=!1),u||tt(f)),null;case 13:return Yv(u,f,v);case 4:return re(f,f.stateNode.containerInfo),S=f.pendingProps,u===null?f.child=Xl(f,null,S,v):Sa(u,f,S,v),f.child;case 11:return Fd(u,f,f.type,f.pendingProps,v);case 7:return Sa(u,f,f.pendingProps,v),f.child;case 8:return Sa(u,f,f.pendingProps.children,v),f.child;case 12:return Sa(u,f,f.pendingProps.children,v),f.child;case 10:return S=f.pendingProps,yl(f,f.type,S.value),Sa(u,f,S.children,v),f.child;case 9:return R=f.type._context,S=f.pendingProps.children,xl(f),R=Ma(R),S=S(R),f.flags|=1,Sa(u,f,S,v),f.child;case 14:return Fv(u,f,f.type,f.pendingProps,v);case 15:return zv(u,f,f.type,f.pendingProps,v);case 19:return Jv(u,f,v);case 22:return Hv(u,f,v);case 24:return xl(f),S=Ma(Ni),u===null?(R=Km(),R===null&&(R=ui,O=Al(),R.pooledCache=O,O.refCount++,O!==null&&(R.pooledCacheLanes|=v),R=O),f.memoizedState={parent:S,cache:R},st(f),yl(f,Ni,R)):((u.lanes&v)!==0&&(vt(u,f),rt(f,null,null,v),Re()),R=u.memoizedState,O=f.memoizedState,R.parent!==S?(R={parent:S,cache:S},f.memoizedState=R,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=R),yl(f,Ni,S)):(S=O.cache,yl(f,Ni,S),S!==R.cache&&yc(f,[Ni],v,!0))),Sa(u,f,f.pendingProps.children,v),f.child;case 29:throw f.pendingProps}throw Error(i(156,f.tag))}function yl(u,f,v){br?(w(ar,f._currentValue),f._currentValue=v):(w(ar,f._currentValue2),f._currentValue2=v)}function Ro(u){var f=ar.current;br?u._currentValue=f:u._currentValue2=f,E(ar)}function kf(u,f,v){for(;u!==null;){var S=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,S!==null&&(S.childLanes|=f)):S!==null&&(S.childLanes&f)!==f&&(S.childLanes|=f),u===v)break;u=u.return}}function yc(u,f,v,S){var R=u.child;for(R!==null&&(R.return=u);R!==null;){var O=R.dependencies;if(O!==null){var J=R.child;O=O.firstContext;e:for(;O!==null;){var fe=O;O=R;for(var Ee=0;Ee<f.length;Ee++)if(fe.context===f[Ee]){O.lanes|=v,fe=O.alternate,fe!==null&&(fe.lanes|=v),kf(O.return,v,u),S||(J=null);break e}O=fe.next}}else if(R.tag===18){if(J=R.return,J===null)throw Error(i(341));J.lanes|=v,O=J.alternate,O!==null&&(O.lanes|=v),kf(J,v,u),J=null}else J=R.child;if(J!==null)J.return=R;else for(J=R;J!==null;){if(J===u){J=null;break}if(R=J.sibling,R!==null){R.return=J.return,J=R;break}J=J.return}R=J}}function Xf(u,f,v,S){u=null;for(var R=f,O=!1;R!==null;){if(!O){if((R.flags&524288)!==0)O=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var J=R.alternate;if(J===null)throw Error(i(387));if(J=J.memoizedProps,J!==null){var fe=R.type;Za(R.pendingProps.value,J.value)||(u!==null?u.push(fe):u=[fe])}}else if(R===mh.current){if(J=R.alternate,J===null)throw Error(i(387));J.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(u!==null?u.push(ko):u=[ko])}R=R.return}u!==null&&yc(f,u,v,S),f.flags|=262144}function Yf(u){for(u=u.firstContext;u!==null;){var f=u.context;if(!Za(br?f._currentValue:f._currentValue2,u.memoizedValue))return!0;u=u.next}return!1}function xl(u){jl=u,sr=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Ma(u){return jm(jl,u)}function qf(u,f){return jl===null&&xl(u),jm(u,f)}function jm(u,f){var v=br?f._currentValue:f._currentValue2;if(f={context:f,memoizedValue:v,next:null},sr===null){if(u===null)throw Error(i(308));sr=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else sr=sr.next=f;return v}function Al(){return{controller:new xh,data:new Map,refCount:0}}function Jf(u){u.refCount--,u.refCount===0&&Di(PS,function(){u.controller.abort()})}function Km(){var u=Fc.current;return u!==null?u:ui.pooledCache}function Gd(u,f){f===null?w(Fc,Fc.current):w(Fc,f.pool)}function Zm(){var u=Km();return u===null?null:{parent:br?Ni._currentValue:Ni._currentValue2,pool:u}}function cs(u){u.flags|=4}function Su(u,f){if(u!==null&&u.child===f.child)return!1;if((f.flags&16)!==0)return!0;for(u=f.child;u!==null;){if((u.flags&13878)!==0||(u.subtreeFlags&13878)!==0)return!0;u=u.sibling}return!1}function xc(u,f,v,S){if(Ci)for(v=f.child;v!==null;){if(v.tag===5||v.tag===6)uh(u,v.stateNode);else if(!(v.tag===4||ga&&v.tag===27)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===f)break;for(;v.sibling===null;){if(v.return===null||v.return===f)return;v=v.return}v.sibling.return=v.return,v=v.sibling}else if(Tr)for(var R=f.child;R!==null;){if(R.tag===5){var O=R.stateNode;v&&S&&(O=B_(O,R.type,R.memoizedProps)),uh(u,O)}else if(R.tag===6)O=R.stateNode,v&&S&&(O=xg(O,R.memoizedProps)),uh(u,O);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)O=R.child,O!==null&&(O.return=R),xc(u,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===f)break;for(;R.sibling===null;){if(R.return===null||R.return===f)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function jv(u,f,v,S){if(Tr)for(var R=f.child;R!==null;){if(R.tag===5){var O=R.stateNode;v&&S&&(O=B_(O,R.type,R.memoizedProps)),yg(u,O)}else if(R.tag===6)O=R.stateNode,v&&S&&(O=xg(O,R.memoizedProps)),yg(u,O);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)O=R.child,O!==null&&(O.return=R),jv(u,R,!(R.memoizedProps!==null&&R.memoizedProps.mode==="manual"),!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===f)break;for(;R.sibling===null;){if(R.return===null||R.return===f)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function Wf(u,f){if(Tr&&Su(u,f)){u=f.stateNode;var v=u.containerInfo,S=op();jv(S,f,!1,!1),u.pendingChildren=S,cs(f),R_(v,S)}}function Vd(u,f,v,S){if(Ci)u.memoizedProps!==S&&cs(f);else if(Tr){var R=u.stateNode,O=u.memoizedProps;if((u=Su(u,f))||O!==S){var J=Gi.current;O=C_(R,v,O,S,!u,null),O===R?f.stateNode=R:(tp(O,v,S,J)&&cs(f),f.stateNode=O,u?xc(O,f,!1,!1):cs(f))}else f.stateNode=R}}function kd(u,f,v){if(dg(f,v)){if(u.flags|=16777216,!pg(f,v))if(ma())u.flags|=8192;else throw Ia=Qa,_h}else u.flags&=-16777217}function Xd(u,f){if(V_(f)){if(u.flags|=16777216,!Bg(f))if(ma())u.flags|=8192;else throw Ia=Qa,_h}else u.flags&=-16777217}function Mu(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?U():536870912,u.lanes|=f,na|=f)}function Eu(u,f){if(!kn)switch(u.tailMode){case"hidden":f=u.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?u.tail=null:v.sibling=null;break;case"collapsed":v=u.tail;for(var S=null;v!==null;)v.alternate!==null&&(S=v),v=v.sibling;S===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function Ti(u){var f=u.alternate!==null&&u.alternate.child===u.child,v=0,S=0;if(f)for(var R=u.child;R!==null;)v|=R.lanes|R.childLanes,S|=R.subtreeFlags&31457280,S|=R.flags&31457280,R.return=u,R=R.sibling;else for(R=u.child;R!==null;)v|=R.lanes|R.childLanes,S|=R.subtreeFlags,S|=R.flags,R.return=u,R=R.sibling;return u.subtreeFlags|=S,u.childLanes=v,f}function Kv(u,f,v){var S=f.pendingProps;switch(Xe(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(f),null;case 1:return Ti(f),null;case 3:return v=f.stateNode,S=null,u!==null&&(S=u.memoizedState.cache),f.memoizedState.cache!==S&&(f.flags|=2048),Ro(Ni),Ne(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(u===null||u.child===null)&&(Pt(f)?cs(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,nr!==null&&(No(nr),nr=null))),Wf(u,f),Ti(f),null;case 26:if(Os){v=f.type;var R=f.memoizedState;return u===null?(cs(f),R!==null?(Ti(f),Xd(f,R)):(Ti(f),kd(f,v,S))):R?R!==u.memoizedState?(cs(f),Ti(f),Xd(f,R)):(Ti(f),f.flags&=-16777217):(Ci?u.memoizedProps!==S&&cs(f):Vd(u,f,v,S),Ti(f),kd(f,v,S)),null}case 27:if(ga){if(Ve(f),v=qo.current,R=f.type,u!==null&&f.stateNode!=null)Ci?u.memoizedProps!==S&&cs(f):Vd(u,f,R,S);else{if(!S){if(f.stateNode===null)throw Error(i(166));return Ti(f),null}u=Gi.current,Pt(f)?wt(f,u):(u=fp(R,S,v,u,!0),f.stateNode=u,cs(f))}return Ti(f),null}case 5:if(Ve(f),v=f.type,u!==null&&f.stateNode!=null)Vd(u,f,v,S);else{if(!S){if(f.stateNode===null)throw Error(i(166));return Ti(f),null}u=Gi.current,Pt(f)?wt(f,u):(R=hg(v,S,qo.current,u,f),xc(R,f,!1,!1),f.stateNode=R,tp(R,v,S,u)&&cs(f))}return Ti(f),kd(f,f.type,f.pendingProps),null;case 6:if(u&&f.stateNode!=null)v=u.memoizedProps,Ci?v!==S&&cs(f):Tr&&(v!==S?(f.stateNode=zi(S,qo.current,Gi.current,f),cs(f)):f.stateNode=u.stateNode);else{if(typeof S!="string"&&f.stateNode===null)throw Error(i(166));if(u=qo.current,v=Gi.current,Pt(f)){if(!ms)throw Error(i(176));if(u=f.stateNode,v=f.memoizedProps,S=null,R=Vi,R!==null)switch(R.tag){case 27:case 5:S=R.memoizedProps}cp(u,v,f,S)||tt(f)}else f.stateNode=zi(S,u,v,f)}return Ti(f),null;case 13:if(S=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(R=Pt(f),S!==null&&S.dehydrated!==null){if(u===null){if(!R)throw Error(i(318));if(!ms)throw Error(i(344));if(R=f.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(i(317));L_(R,f)}else Je(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ti(f),R=!1}else nr!==null&&(No(nr),nr=null),R=!0;if(!R)return f.flags&256?(Rt(f),f):(Rt(f),null)}if(Rt(f),(f.flags&128)!==0)return f.lanes=v,f;if(v=S!==null,u=u!==null&&u.memoizedState!==null,v){S=f.child,R=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(R=S.alternate.memoizedState.cachePool.pool);var O=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(O=S.memoizedState.cachePool.pool),O!==R&&(S.flags|=2048)}return v!==u&&v&&(f.child.flags|=8192),Mu(f,f.updateQueue),Ti(f),null;case 4:return Ne(),Wf(u,f),u===null&&r_(f.stateNode.containerInfo),Ti(f),null;case 10:return Ro(f.type),Ti(f),null;case 19:if(E(yi),R=f.memoizedState,R===null)return Ti(f),null;if(S=(f.flags&128)!==0,O=R.rendering,O===null)if(S)Eu(R,!1);else{if(wi!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(O=gn(u),O!==null){for(f.flags|=128,Eu(R,!1),u=O.updateQueue,f.updateQueue=u,Mu(f,u),f.subtreeFlags=0,u=v,v=f.child;v!==null;)Tc(v,u),v=v.sibling;return w(yi,yi.current&1|2),f.child}u=u.sibling}R.tail!==null&&Ns()>Fs&&(f.flags|=128,S=!0,Eu(R,!1),f.lanes=4194304)}else{if(!S)if(u=gn(O),u!==null){if(f.flags|=128,S=!0,u=u.updateQueue,f.updateQueue=u,Mu(f,u),Eu(R,!0),R.tail===null&&R.tailMode==="hidden"&&!O.alternate&&!kn)return Ti(f),null}else 2*Ns()-R.renderingStartTime>Fs&&v!==536870912&&(f.flags|=128,S=!0,Eu(R,!1),f.lanes=4194304);R.isBackwards?(O.sibling=f.child,f.child=O):(u=R.last,u!==null?u.sibling=O:f.child=O,R.last=O)}return R.tail!==null?(f=R.tail,R.rendering=f,R.tail=f.sibling,R.renderingStartTime=Ns(),f.sibling=null,u=yi.current,w(yi,S?u&1|2:u&1),f):(Ti(f),null);case 22:case 23:return Rt(f),It(),S=f.memoizedState!==null,u!==null?u.memoizedState!==null!==S&&(f.flags|=8192):S&&(f.flags|=8192),S?(v&536870912)!==0&&(f.flags&128)===0&&(Ti(f),f.subtreeFlags&6&&(f.flags|=8192)):Ti(f),v=f.updateQueue,v!==null&&Mu(f,v.retryQueue),v=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),S=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==v&&(f.flags|=2048),u!==null&&E(Fc),null;case 24:return v=null,u!==null&&(v=u.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),Ro(Ni),Ti(f),null;case 25:return null}throw Error(i(156,f.tag))}function CS(u,f){switch(Xe(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return Ro(Ni),Ne(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return Ve(f),null;case 13:if(Rt(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(i(340));Je()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return E(yi),null;case 4:return Ne(),null;case 10:return Ro(f.type),null;case 22:case 23:return Rt(f),It(),u!==null&&E(Fc),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return Ro(Ni),null;case 25:return null;default:return null}}function Zv(u,f){switch(Xe(f),f.tag){case 3:Ro(Ni),Ne();break;case 26:case 27:case 5:Ve(f);break;case 4:Ne();break;case 13:Rt(f);break;case 19:E(yi);break;case 10:Ro(f.type);break;case 22:case 23:Rt(f),It(),u!==null&&E(Fc);break;case 24:Ro(Ni)}}function jf(u,f){try{var v=f.updateQueue,S=v!==null?v.lastEffect:null;if(S!==null){var R=S.next;v=R;do{if((v.tag&u)===u){S=void 0;var O=v.create,J=v.inst;S=O(),J.destroy=S}v=v.next}while(v!==R)}}catch(fe){ii(f,f.return,fe)}}function Sl(u,f,v){try{var S=f.updateQueue,R=S!==null?S.lastEffect:null;if(R!==null){var O=R.next;S=O;do{if((S.tag&u)===u){var J=S.inst,fe=J.destroy;if(fe!==void 0){J.destroy=void 0,R=f;var Ee=v;try{fe()}catch(Ze){ii(R,Ee,Ze)}}}S=S.next}while(S!==O)}}catch(Ze){ii(f,f.return,Ze)}}function Qv(u){var f=u.updateQueue;if(f!==null){var v=u.stateNode;try{Me(f,v)}catch(S){ii(u,u.return,S)}}}function us(u,f,v){v.props=To(u.type,u.memoizedProps),v.state=u.memoizedState;try{v.componentWillUnmount()}catch(S){ii(u,f,S)}}function Er(u,f){try{var v=u.ref;if(v!==null){var S=u.stateNode;switch(u.tag){case 26:case 27:case 5:var R=wc(S);break;default:R=S}typeof v=="function"?u.refCleanup=v(R):v.current=R}}catch(O){ii(u,f,O)}}function fs(u,f){var v=u.ref,S=u.refCleanup;if(v!==null)if(typeof S=="function")try{S()}catch(R){ii(u,f,R)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(R){ii(u,f,R)}else v.current=null}function Qm(u){var f=u.type,v=u.memoizedProps,S=u.stateNode;try{y_(S,f,v,u)}catch(R){ii(u,u.return,R)}}function $m(u,f,v){try{x_(u.stateNode,u.type,v,f,u)}catch(S){ii(u,u.return,S)}}function eg(u){return u.tag===5||u.tag===3||(Os?u.tag===26:!1)||(ga?u.tag===27:!1)||u.tag===4}function Kf(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||eg(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&(!ga||u.tag!==27)&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function tg(u,f,v){var S=u.tag;if(S===5||S===6)u=u.stateNode,f?vg(v,u,f):gg(v,u);else if(!(S===4||ga&&S===27)&&(u=u.child,u!==null))for(tg(u,f,v),u=u.sibling;u!==null;)tg(u,f,v),u=u.sibling}function Yd(u,f,v){var S=u.tag;if(S===5||S===6)u=u.stateNode,f?A_(v,u,f):v_(v,u);else if(!(S===4||ga&&S===27)&&(u=u.child,u!==null))for(Yd(u,f,v),u=u.sibling;u!==null;)Yd(u,f,v),u=u.sibling}function Ac(u,f,v){u=u.containerInfo;try{w_(u,v)}catch(S){ii(f,f.return,S)}}function ng(u,f){for(s_(u.containerInfo),nn=f;nn!==null;)if(u=nn,f=u.child,(u.subtreeFlags&1028)!==0&&f!==null)f.return=u,nn=f;else for(;nn!==null;){u=nn;var v=u.alternate;switch(f=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&v!==null){f=void 0;var S=u,R=v.memoizedProps;v=v.memoizedState;var O=S.stateNode;try{var J=To(S.type,R,S.elementType===S.type);f=O.getSnapshotBeforeUpdate(J,v),O.__reactInternalSnapshotBeforeUpdate=f}catch(fe){ii(S,S.return,fe)}}break;case 3:(f&1024)!==0&&Ci&&T_(u.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(i(163))}if(f=u.sibling,f!==null){f.return=u.return,nn=f;break}nn=u.return}return J=pi,pi=!1,J}function bu(u,f,v){var S=v.flags;switch(v.tag){case 0:case 11:case 15:Bo(u,v),S&4&&jf(5,v);break;case 1:if(Bo(u,v),S&4)if(u=v.stateNode,f===null)try{u.componentDidMount()}catch(fe){ii(v,v.return,fe)}else{var R=To(v.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(R,f,u.__reactInternalSnapshotBeforeUpdate)}catch(fe){ii(v,v.return,fe)}}S&64&&Qv(v),S&512&&Er(v,v.return);break;case 3:if(Bo(u,v),S&64&&(S=v.updateQueue,S!==null)){if(u=null,v.child!==null)switch(v.child.tag){case 27:case 5:u=wc(v.child.stateNode);break;case 1:u=v.child.stateNode}try{Me(S,u)}catch(fe){ii(v,v.return,fe)}}break;case 26:if(Os){Bo(u,v),S&512&&Er(v,v.return);break}case 27:case 5:Bo(u,v),f===null&&S&4&&Qm(v),S&512&&Er(v,v.return);break;case 12:Bo(u,v);break;case 13:Bo(u,v),S&4&&Sc(u,v);break;case 22:if(R=v.memoizedState!==null||Qo,!R){f=f!==null&&f.memoizedState!==null||dn;var O=Qo,J=dn;Qo=R,(dn=f)&&!J?Ml(u,v,(v.subtreeFlags&8772)!==0):Bo(u,v),Qo=O,dn=J}S&512&&(v.memoizedProps.mode==="manual"?Er(v,v.return):fs(v,v.return));break;default:Bo(u,v)}}function qd(u){var f=u.alternate;f!==null&&(u.alternate=null,qd(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&c_(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function Zs(u,f,v){for(v=v.child;v!==null;)wo(u,f,v),v=v.sibling}function wo(u,f,v){if($i&&typeof $i.onCommitFiberUnmount=="function")try{$i.onCommitFiberUnmount(zu,v)}catch{}switch(v.tag){case 26:if(Os){dn||fs(v,f),Zs(u,f,v),v.memoizedState?Cg(v.memoizedState):v.stateNode&&Iu(v.stateNode);break}case 27:if(ga){dn||fs(v,f);var S=jn,R=Yi;jn=v.stateNode,Zs(u,f,v),Og(v.stateNode),jn=S,Yi=R;break}case 5:dn||fs(v,f);case 6:if(Ci){if(S=jn,R=Yi,jn=null,Zs(u,f,v),jn=S,Yi=R,jn!==null)if(Yi)try{M_(jn,v.stateNode)}catch(O){ii(v,f,O)}else try{S_(jn,v.stateNode)}catch(O){ii(v,f,O)}}else Zs(u,f,v);break;case 18:Ci&&jn!==null&&(Yi?Mg(jn,v.stateNode):F_(jn,v.stateNode));break;case 4:Ci?(S=jn,R=Yi,jn=v.stateNode.containerInfo,Yi=!0,Zs(u,f,v),jn=S,Yi=R):(Tr&&Ac(v.stateNode,v,op()),Zs(u,f,v));break;case 0:case 11:case 14:case 15:dn||Sl(2,v,f),dn||Sl(4,v,f),Zs(u,f,v);break;case 1:dn||(fs(v,f),S=v.stateNode,typeof S.componentWillUnmount=="function"&&us(v,f,S)),Zs(u,f,v);break;case 21:Zs(u,f,v);break;case 22:dn||fs(v,f),dn=(S=dn)||v.memoizedState!==null,Zs(u,f,v),dn=S;break;default:Zs(u,f,v)}}function Sc(u,f){if(ms&&f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{up(u)}catch(v){ii(f,f.return,v)}}function ig(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new Rn),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new Rn),f;default:throw Error(i(435,u.tag))}}function Jd(u,f){var v=ig(u);f.forEach(function(S){var R=Qd.bind(null,u,S);v.has(S)||(v.add(S),S.then(R,R))})}function Ki(u,f){var v=f.deletions;if(v!==null)for(var S=0;S<v.length;S++){var R=v[S],O=u,J=f;if(Ci){var fe=J;e:for(;fe!==null;){switch(fe.tag){case 27:case 5:jn=fe.stateNode,Yi=!1;break e;case 3:jn=fe.stateNode.containerInfo,Yi=!0;break e;case 4:jn=fe.stateNode.containerInfo,Yi=!0;break e}fe=fe.return}if(jn===null)throw Error(i(160));wo(O,J,R),jn=null,Yi=!1}else wo(O,J,R);O=R.alternate,O!==null&&(O.return=null),R.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)ag(f,u),f=f.sibling}function ag(u,f){var v=u.alternate,S=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Ki(f,u),hs(u),S&4&&(Sl(3,u,u.return),jf(3,u),Sl(5,u,u.return));break;case 1:Ki(f,u),hs(u),S&512&&(dn||v===null||fs(v,v.return)),S&64&&Qo&&(u=u.updateQueue,u!==null&&(S=u.callbacks,S!==null&&(v=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=v===null?S:v.concat(S))));break;case 26:if(Os){var R=Fa;Ki(f,u),hs(u),S&512&&(dn||v===null||fs(v,v.return)),S&4&&(S=v!==null?v.memoizedState:null,f=u.memoizedState,v===null?f===null?u.stateNode===null?u.stateNode=H_(R,u.type,u.memoizedProps,u):Rg(R,u.type,u.stateNode):u.stateNode=Tg(R,f,u.memoizedProps):S!==f?(S===null?v.stateNode!==null&&Iu(v.stateNode):Cg(S),f===null?Rg(R,u.type,u.stateNode):Tg(R,f,u.memoizedProps)):f===null&&u.stateNode!==null&&$m(u,u.memoizedProps,v.memoizedProps));break}case 27:if(ga&&S&4&&u.alternate===null){R=u.stateNode;var O=u.memoizedProps;try{k_(R),Ug(u.type,O,R,u)}catch(gt){ii(u,u.return,gt)}}case 5:if(Ki(f,u),hs(u),S&512&&(dn||v===null||fs(v,v.return)),Ci){if(u.flags&32){f=u.stateNode;try{rp(f)}catch(gt){ii(u,u.return,gt)}}S&4&&u.stateNode!=null&&(f=u.memoizedProps,$m(u,f,v!==null?v.memoizedProps:f)),S&1024&&(ci=!0)}break;case 6:if(Ki(f,u),hs(u),S&4&&Ci){if(u.stateNode===null)throw Error(i(162));S=u.memoizedProps,v=v!==null?v.memoizedProps:S,f=u.stateNode;try{__(f,v,S)}catch(gt){ii(u,u.return,gt)}}break;case 3:if(Os?(G_(),R=Fa,Fa=la(f.containerInfo),Ki(f,u),Fa=R):Ki(f,u),hs(u),S&4){if(Ci&&ms&&v!==null&&v.memoizedState.isDehydrated)try{P_(f.containerInfo)}catch(gt){ii(u,u.return,gt)}if(Tr){S=f.containerInfo,v=f.pendingChildren;try{w_(S,v)}catch(gt){ii(u,u.return,gt)}}}ci&&(ci=!1,sg(u));break;case 4:Os?(v=Fa,Fa=la(u.stateNode.containerInfo),Ki(f,u),hs(u),Fa=v):(Ki(f,u),hs(u)),S&4&&Tr&&Ac(u.stateNode,u,u.stateNode.pendingChildren);break;case 12:Ki(f,u),hs(u);break;case 13:Ki(f,u),hs(u),u.child.flags&8192&&u.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(Fg=Ns()),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,Jd(u,S)));break;case 22:S&512&&(dn||v===null||fs(v,v.return)),R=u.memoizedState!==null;var J=v!==null&&v.memoizedState!==null,fe=Qo,Ee=dn;if(Qo=fe||R,dn=Ee||J,Ki(f,u),dn=Ee,Qo=fe,hs(u),f=u.stateNode,f._current=u,f._visibility&=-3,f._visibility|=f._pendingVisibility&2,S&8192&&(f._visibility=R?f._visibility&-2:f._visibility|1,R&&(f=Qo||dn,v===null||J||f||Tu(u)),Ci&&(u.memoizedProps===null||u.memoizedProps.mode!=="manual"))){e:if(v=null,Ci)for(f=u;;){if(f.tag===5||Os&&f.tag===26||ga&&f.tag===27){if(v===null){J=v=f;try{O=J.stateNode,R?E_(O):NS(J.stateNode,J.memoizedProps)}catch(gt){ii(J,J.return,gt)}}}else if(f.tag===6){if(v===null){J=f;try{var Ze=J.stateNode;R?b_(Ze):_g(Ze,J.memoizedProps)}catch(gt){ii(J,J.return,gt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;v===f&&(v=null),f=f.return}v===f&&(v=null),f.sibling.return=f.return,f=f.sibling}}S&4&&(S=u.updateQueue,S!==null&&(v=S.retryQueue,v!==null&&(S.retryQueue=null,Jd(u,v))));break;case 19:Ki(f,u),hs(u),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,Jd(u,S)));break;case 21:break;default:Ki(f,u),hs(u)}}function hs(u){var f=u.flags;if(f&2){try{if(Ci&&(!ga||u.tag!==27)){e:{for(var v=u.return;v!==null;){if(eg(v)){var S=v;break e}v=v.return}throw Error(i(160))}switch(S.tag){case 27:if(ga){var R=S.stateNode,O=Kf(u);Yd(u,O,R);break}case 5:var J=S.stateNode;S.flags&32&&(rp(J),S.flags&=-33);var fe=Kf(u);Yd(u,fe,J);break;case 3:case 4:var Ee=S.stateNode.containerInfo,Ze=Kf(u);tg(u,Ze,Ee);break;default:throw Error(i(161))}}}catch(gt){ii(u,u.return,gt)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function sg(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;sg(f),f.tag===5&&f.flags&1024&&f_(f.stateNode),u=u.sibling}}function Bo(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)bu(u,f.alternate,f),f=f.sibling}function Tu(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:Sl(4,f,f.return),Tu(f);break;case 1:fs(f,f.return);var v=f.stateNode;typeof v.componentWillUnmount=="function"&&us(f,f.return,v),Tu(f);break;case 26:case 27:case 5:fs(f,f.return),Tu(f);break;case 22:fs(f,f.return),f.memoizedState===null&&Tu(f);break;default:Tu(f)}u=u.sibling}}function Ml(u,f,v){for(v=v&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var S=f.alternate,R=u,O=f,J=O.flags;switch(O.tag){case 0:case 11:case 15:Ml(R,O,v),jf(4,O);break;case 1:if(Ml(R,O,v),S=O,R=S.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(Ze){ii(S,S.return,Ze)}if(S=O,R=S.updateQueue,R!==null){var fe=S.stateNode;try{var Ee=R.shared.hiddenCallbacks;if(Ee!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Ee.length;R++)ne(Ee[R],fe)}catch(Ze){ii(S,S.return,Ze)}}v&&J&64&&Qv(O),Er(O,O.return);break;case 26:case 27:case 5:Ml(R,O,v),v&&S===null&&J&4&&Qm(O),Er(O,O.return);break;case 12:Ml(R,O,v);break;case 13:Ml(R,O,v),v&&J&4&&Sc(R,O);break;case 22:O.memoizedState===null&&Ml(R,O,v),Er(O,O.return);break;default:Ml(R,O,v)}f=f.sibling}}function Wd(u,f){var v=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==v&&(u!=null&&u.refCount++,v!=null&&Jf(v))}function jd(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Jf(u))}function Do(u,f,v,S){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Qs(u,f,v,S),f=f.sibling}function Qs(u,f,v,S){var R=f.flags;switch(f.tag){case 0:case 11:case 15:Do(u,f,v,S),R&2048&&jf(9,f);break;case 3:Do(u,f,v,S),R&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Jf(u)));break;case 12:if(R&2048){Do(u,f,v,S),u=f.stateNode;try{var O=f.memoizedProps,J=O.id,fe=O.onPostCommit;typeof fe=="function"&&fe(J,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Ee){ii(f,f.return,Ee)}}else Do(u,f,v,S);break;case 23:break;case 22:O=f.stateNode,f.memoizedState!==null?O._visibility&4?Do(u,f,v,S):Kr(u,f):O._visibility&4?Do(u,f,v,S):(O._visibility|=4,Ea(u,f,v,S,(f.subtreeFlags&10256)!==0)),R&2048&&Wd(f.alternate,f);break;case 24:Do(u,f,v,S),R&2048&&jd(f.alternate,f);break;default:Do(u,f,v,S)}}function Ea(u,f,v,S,R){for(R=R&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var O=u,J=f,fe=v,Ee=S,Ze=J.flags;switch(J.tag){case 0:case 11:case 15:Ea(O,J,fe,Ee,R),jf(8,J);break;case 23:break;case 22:var gt=J.stateNode;J.memoizedState!==null?gt._visibility&4?Ea(O,J,fe,Ee,R):Kr(O,J):(gt._visibility|=4,Ea(O,J,fe,Ee,R)),R&&Ze&2048&&Wd(J.alternate,J);break;case 24:Ea(O,J,fe,Ee,R),R&&Ze&2048&&jd(J.alternate,J);break;default:Ea(O,J,fe,Ee,R)}f=f.sibling}}function Kr(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var v=u,S=f,R=S.flags;switch(S.tag){case 22:Kr(v,S),R&2048&&Wd(S.alternate,S);break;case 24:Kr(v,S),R&2048&&jd(S.alternate,S);break;default:Kr(v,S)}f=f.sibling}}function Uo(u){if(u.subtreeFlags&Kl)for(u=u.child;u!==null;)Zf(u),u=u.sibling}function Zf(u){switch(u.tag){case 26:Uo(u),u.flags&Kl&&(u.memoizedState!==null?Dg(Fa,u.memoizedState,u.memoizedProps):mg(u.type,u.memoizedProps));break;case 5:Uo(u),u.flags&Kl&&mg(u.type,u.memoizedProps);break;case 3:case 4:if(Os){var f=Fa;Fa=la(u.stateNode.containerInfo),Uo(u),Fa=f}else Uo(u);break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=Kl,Kl=16777216,Uo(u),Kl=f):Uo(u));break;default:Uo(u)}}function Qf(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function Mc(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var S=f[v];nn=S,eh(S,u)}Qf(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Oo(u),u=u.sibling}function Oo(u){switch(u.tag){case 0:case 11:case 15:Mc(u),u.flags&2048&&Sl(9,u,u.return);break;case 3:Mc(u);break;case 12:Mc(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&4&&(u.return===null||u.return.tag!==13)?(f._visibility&=-5,$f(u)):Mc(u);break;default:Mc(u)}}function $f(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var S=f[v];nn=S,eh(S,u)}Qf(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:Sl(8,f,f.return),$f(f);break;case 22:v=f.stateNode,v._visibility&4&&(v._visibility&=-5,$f(f));break;default:$f(f)}u=u.sibling}}function eh(u,f){for(;nn!==null;){var v=nn;switch(v.tag){case 0:case 11:case 15:Sl(8,v,f);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var S=v.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Jf(v.memoizedState.cache)}if(S=v.child,S!==null)S.return=v,nn=S;else e:for(v=u;nn!==null;){S=nn;var R=S.sibling,O=S.return;if(qd(S),S===v){nn=null;break e}if(R!==null){R.return=O,nn=R;break e}nn=O}}}function El(u){var f=ip(u);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(i(364));return f}if(u=p_(u),u===null)throw Error(i(362));return u.stateNode.current}function Kd(u,f){var v=u.tag;switch(f.$$typeof){case Mi:if(u.type===f.value)return!0;break;case Or:e:{for(f=f.value,u=[u,0],v=0;v<u.length;){var S=u[v++],R=S.tag,O=u[v++],J=f[O];if(R!==5&&R!==26&&R!==27||!no(S)){for(;J!=null&&Kd(S,J);)O++,J=f[O];if(O===f.length){f=!0;break e}else for(S=S.child;S!==null;)u.push(S,O),S=S.sibling}}f=!1}return f;case lo:if((v===5||v===26||v===27)&&g_(u.stateNode,f.value))return!0;break;case es:if((v===5||v===6||v===26||v===27)&&(u=m_(u),u!==null&&0<=u.indexOf(f.value)))return!0;break;case Yu:if((v===5||v===26||v===27)&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function ds(u){switch(u.$$typeof){case Mi:return"<"+(l(u.value)||"Unknown")+">";case Or:return":has("+(ds(u)||"")+")";case lo:return'[role="'+u.value+'"]';case es:return'"'+u.value+'"';case Yu:return'[data-testname="'+u.value+'"]';default:throw Error(i(365))}}function Ec(u,f){var v=[];u=[u,0];for(var S=0;S<u.length;){var R=u[S++],O=R.tag,J=u[S++],fe=f[J];if(O!==5&&O!==26&&O!==27||!no(R)){for(;fe!=null&&Kd(R,fe);)J++,fe=f[J];if(J===f.length)v.push(R);else for(R=R.child;R!==null;)u.push(R,J),R=R.sibling}}return v}function bl(u,f){if(!Lu)throw Error(i(363));u=El(u),u=Ec(u,f),f=[],u=Array.from(u);for(var v=0;v<u.length;){var S=u[v++],R=S.tag;if(R===5||R===26||R===27)no(S)||f.push(S.stateNode);else for(S=S.child;S!==null;)u.push(S),S=S.sibling}return f}function Da(){if((On&2)!==0&&Nn!==0)return Nn&-Nn;if(un.T!==null){var u=Si;return u!==0?u:_t()}return o_()}function th(){Ps===0&&(Ps=(Nn&536870912)===0||kn?H():536870912);var u=_s.current;return u!==null&&(u.flags|=32),Ps}function _i(u,f,v){(u===ui&&ri===2||u.cancelPendingCommit!==null)&&(Tl(u,0),ja(u,Nn,Ps,!1)),Y(u,v),((On&2)===0||u!==ui)&&(u===ui&&((On&2)===0&&(el|=v),wi===4&&ja(u,Nn,Ps,!1)),ut(u))}function Ds(u,f,v){if((On&6)!==0)throw Error(i(327));var S=!v&&(f&60)===0&&(f&u.expiredLanes)===0||L(u,f),R=S?$v(u,f):ih(u,f,!0),O=S;do{if(R===0){or&&!S&&ja(u,f,0,!1);break}else if(R===6)ja(u,f,0,!rr);else{if(v=u.current.alternate,O&&!Lo(v)){R=ih(u,f,!1),O=!1;continue}if(R===2){if(O=f,u.errorRecoveryDisabledLanes&O)var J=0;else J=u.pendingLanes&-536870913,J=J!==0?J:J&536870912?536870912:0;if(J!==0){f=J;e:{var fe=u;R=qu;var Ee=ms&&fe.current.memoizedState.isDehydrated;if(Ee&&(Tl(fe,J).flags|=256),J=ih(fe,J,!1),J!==2){if(zc&&!Ee){fe.errorRecoveryDisabledLanes|=O,el|=O,R=4;break e}O=cr,cr=R,O!==null&&No(O)}R=J}if(O=!1,R!==2)continue}}if(R===1){Tl(u,0),ja(u,f,0,!0);break}e:{switch(S=u,R){case 0:case 1:throw Error(i(345));case 4:if((f&4194176)===f){ja(S,f,Ps,!rr);break e}break;case 2:cr=null;break;case 3:case 5:break;default:throw Error(i(329))}if(S.finishedWork=v,S.finishedLanes=f,(f&62914560)===f&&(O=Fg+300-Ns(),10<O)){if(ja(S,f,Ps,!rr),I(S,0)!==0)break e;S.timeoutHandle=np(Zr.bind(null,S,v,cr,Hc,Ap,f,Ps,el,na,rr,2,-0,0),O);break e}Zr(S,v,cr,Hc,Ap,f,Ps,el,na,rr,0,-0,0)}}break}while(!0);ut(u)}function No(u){cr===null?cr=u:cr.push.apply(cr,u)}function Zr(u,f,v,S,R,O,J,fe,Ee,Ze,gt,Ut,ft){var pn=f.subtreeFlags;if((pn&8192||(pn&16785408)===16785408)&&(US(),Zf(f),f=u_(),f!==null)){u.cancelPendingCommit=f(Zd.bind(null,u,v,S,R,J,fe,Ee,1,Ut,ft)),ja(u,O,J,!Ze);return}Zd(u,v,S,R,J,fe,Ee,gt,Ut,ft)}function Lo(u){for(var f=u;;){var v=f.tag;if((v===0||v===11||v===15)&&f.flags&16384&&(v=f.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var S=0;S<v.length;S++){var R=v[S],O=R.getSnapshot;R=R.value;try{if(!Za(O(),R))return!1}catch{return!1}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function ja(u,f,v,S){f&=~ts,f&=~el,u.suspendedLanes|=f,u.pingedLanes&=~f,S&&(u.warmLanes|=f),S=u.expirationTimes;for(var R=f;0<R;){var O=31-Hi(R),J=1<<O;S[O]=-1,R&=~J}v!==0&&$(u,v,f)}function rg(){return(On&6)===0?(W(0),!1):!0}function nh(){if(bn!==null){if(ri===0)var u=bn.return;else u=bn,sr=jl=null,qe(u),Ic=null,Pa=0,u=bn;for(;u!==null;)Zv(u.alternate,u),u=u.return;bn=null}}function Tl(u,f){u.finishedWork=null,u.finishedLanes=0;var v=u.timeoutHandle;v!==Nu&&(u.timeoutHandle=Nu,fh(v)),v=u.cancelPendingCommit,v!==null&&(u.cancelPendingCommit=null,v()),nh(),ui=u,bn=v=Po(u.current,null),Nn=f,ri=0,ta=null,rr=!1,or=L(u,f),zc=!1,na=Ps=ts=el=lr=wi=0,cr=qu=null,Ap=!1,(f&8)!==0&&(f|=f&32);var S=u.entangledLanes;if(S!==0)for(u=u.entanglements,S&=f;0<S;){var R=31-Hi(S),O=1<<R;f|=u[R],S&=~O}return Nr=f,j(),v}function Ua(u,f){hn=null,un.H=Xi,f===vh?(f=Ft(),ri=3):f===_h?(f=Ft(),ri=4):ri=f===Ig?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,ta=f,bn===null&&(wi=1,yu(u,be(f,u.current)))}function ma(){var u=_s.current;return u===null?!0:(Nn&4194176)===Nn?ir===null:(Nn&62914560)===Nn||(Nn&536870912)!==0?u===ir:!1}function Vn(){var u=un.H;return un.H=Xi,u===null?Xi:u}function $s(){var u=un.A;return un.A=$o,u}function er(){wi=4,rr||(Nn&4194176)!==Nn&&_s.current!==null||(or=!0),(lr&134217727)===0&&(el&134217727)===0||ui===null||ja(ui,Nn,Ps,!1)}function ih(u,f,v){var S=On;On|=2;var R=Vn(),O=$s();(ui!==u||Nn!==f)&&(Hc=null,Tl(u,f)),f=!1;var J=wi;e:do try{if(ri!==0&&bn!==null){var fe=bn,Ee=ta;switch(ri){case 8:nh(),J=6;break e;case 3:case 2:case 6:_s.current===null&&(f=!0);var Ze=ri;if(ri=0,ta=null,Qr(u,fe,Ee,Ze),v&&or){J=0;break e}break;default:Ze=ri,ri=0,ta=null,Qr(u,fe,Ee,Ze)}}bc(),J=wi;break}catch(gt){Ua(u,gt)}while(!0);return f&&u.shellSuspendCounter++,sr=jl=null,On=S,un.H=R,un.A=O,bn===null&&(ui=null,Nn=0,j()),J}function bc(){for(;bn!==null;)Cu(bn)}function $v(u,f){var v=On;On|=2;var S=Vn(),R=$s();ui!==u||Nn!==f?(Hc=null,Fs=Ns()+500,Tl(u,f)):or=L(u,f);e:do try{if(ri!==0&&bn!==null){f=bn;var O=ta;t:switch(ri){case 1:ri=0,ta=null,Qr(u,f,O,1);break;case 2:if(Ge(O)){ri=0,ta=null,Ru(f);break}f=function(){ri===2&&ui===u&&(ri=7),ut(u)},O.then(f,f);break e;case 3:ri=7;break e;case 4:ri=5;break e;case 7:Ge(O)?(ri=0,ta=null,Ru(f)):(ri=0,ta=null,Qr(u,f,O,7));break;case 5:var J=null;switch(bn.tag){case 26:J=bn.memoizedState;case 5:case 27:var fe=bn,Ee=fe.type,Ze=fe.pendingProps;if(J?Bg(J):pg(Ee,Ze)){ri=0,ta=null;var gt=fe.sibling;if(gt!==null)bn=gt;else{var Ut=fe.return;Ut!==null?(bn=Ut,Cl(Ut)):bn=null}break t}}ri=0,ta=null,Qr(u,f,O,5);break;case 6:ri=0,ta=null,Qr(u,f,O,6);break;case 8:nh(),wi=6;break e;default:throw Error(i(462))}}e_();break}catch(ft){Ua(u,ft)}while(!0);return sr=jl=null,un.H=S,un.A=R,On=v,bn!==null?0:(ui=null,Nn=0,j(),wi)}function e_(){for(;bn!==null&&!Gl();)Cu(bn)}function Cu(u){var f=Wv(u.alternate,u,Nr);u.memoizedProps=u.pendingProps,f===null?Cl(u):bn=f}function Ru(u){var f=u,v=f.alternate;switch(f.tag){case 15:case 0:f=Vv(v,f,f.pendingProps,f.type,void 0,Nn);break;case 11:f=Vv(v,f,f.pendingProps,f.type.render,f.ref,Nn);break;case 5:qe(f);default:Zv(v,f),f=bn=Tc(f,Nr),f=Wv(v,f,Nr)}u.memoizedProps=u.pendingProps,f===null?Cl(u):bn=f}function Qr(u,f,v,S){sr=jl=null,qe(f),Ic=null,Pa=0;var R=f.return;try{if(bS(u,R,f,v,Nn)){wi=1,yu(u,be(v,u.current)),bn=null;return}}catch(O){if(R!==null)throw bn=R,O;wi=1,yu(u,be(v,u.current)),bn=null;return}f.flags&32768?(kn||S===1?u=!0:or||(Nn&536870912)!==0?u=!1:(rr=u=!0,(S===2||S===3||S===6)&&(S=_s.current,S!==null&&S.tag===13&&(S.flags|=16384))),og(f,u)):Cl(f)}function Cl(u){var f=u;do{if((f.flags&32768)!==0){og(f,rr);return}u=f.return;var v=Kv(f.alternate,f,Nr);if(v!==null){bn=v;return}if(f=f.sibling,f!==null){bn=f;return}bn=f=u}while(f!==null);wi===0&&(wi=5)}function og(u,f){do{var v=CS(u.alternate,u);if(v!==null){v.flags&=32767,bn=v;return}if(v=u.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!f&&(u=u.sibling,u!==null)){bn=u;return}bn=u=v}while(u!==null);wi=6,bn=null}function Zd(u,f,v,S,R,O,J,fe,Ee,Ze){var gt=un.T,Ut=Fl();try{Ka(2),un.T=null,t_(u,f,v,S,Ut,R,O,J,fe,Ee,Ze)}finally{un.T=gt,Ka(Ut)}}function t_(u,f,v,S,R,O,J,fe){do Rl();while(Zl!==null);if((On&6)!==0)throw Error(i(327));var Ee=u.finishedWork;if(S=u.finishedLanes,Ee===null)return null;if(u.finishedWork=null,u.finishedLanes=0,Ee===u.current)throw Error(i(177));u.callbackNode=null,u.callbackPriority=0,u.cancelPendingCommit=null;var Ze=Ee.lanes|Ee.childLanes;if(Ze|=Br,ee(u,S,Ze,O,J,fe),u===ui&&(bn=ui=null,Nn=0),(Ee.subtreeFlags&10256)===0&&(Ee.flags&10256)===0||tl||(tl=!0,Sp=Ze,Sh=v,n_(Fu,function(){return Rl(),null})),v=(Ee.flags&15990)!==0,(Ee.subtreeFlags&15990)!==0||v?(v=un.T,un.T=null,O=Fl(),Ka(2),J=On,On|=4,ng(u,Ee),ag(Ee,u),DS(u.containerInfo),u.current=Ee,bu(u,Ee.alternate,Ee),Yo(),On=J,Ka(O),un.T=v):u.current=Ee,tl?(tl=!1,Zl=u,Ju=S):ah(u,Ze),Ze=u.pendingLanes,Ze===0&&(uo=null),Q(Ee.stateNode),ut(u),f!==null)for(R=u.onRecoverableError,Ee=0;Ee<f.length;Ee++)Ze=f[Ee],R(Ze.value,{componentStack:Ze.stack});return(Ju&3)!==0&&Rl(),Ze=u.pendingLanes,(S&4194218)!==0&&(Ze&42)!==0?u===zg?Gc++:(Gc=0,zg=u):Gc=0,W(0),null}function ah(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,Jf(f)))}function Rl(){if(Zl!==null){var u=Zl,f=Sp;Sp=0;var v=me(Ju),S=32>v?32:v;v=un.T;var R=Fl();try{if(Ka(S),un.T=null,Zl===null)var O=!1;else{S=Sh,Sh=null;var J=Zl,fe=Ju;if(Zl=null,Ju=0,(On&6)!==0)throw Error(i(331));var Ee=On;if(On|=4,Oo(J.current),Qs(J,J.current,fe,S),On=Ee,W(0,!1),$i&&typeof $i.onPostCommitFiberRoot=="function")try{$i.onPostCommitFiberRoot(zu,J)}catch{}O=!0}return O}finally{Ka(R),un.T=v,ah(u,f)}}return!1}function wu(u,f,v){f=be(v,f),f=Au(u.stateNode,f,2),u=mt(u,f,2),u!==null&&(Y(u,2),ut(u))}function ii(u,f,v){if(u.tag===3)wu(u,u,v);else for(;f!==null;){if(f.tag===3){wu(f,u,v);break}else if(f.tag===1){var S=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(uo===null||!uo.has(S))){u=be(v,u),v=km(2),S=mt(f,v,2),S!==null&&(Pv(v,S,f,u),Y(S,2),ut(S));break}}f=f.return}}function wl(u,f,v){var S=u.pingCache;if(S===null){S=u.pingCache=new Ah;var R=new Set;S.set(f,R)}else R=S.get(f),R===void 0&&(R=new Set,S.set(f,R));R.has(v)||(zc=!0,R.add(v),u=sh.bind(null,u,f,v),f.then(u,u))}function sh(u,f,v){var S=u.pingCache;S!==null&&S.delete(f),u.pingedLanes|=u.suspendedLanes&v,u.warmLanes&=~v,ui===u&&(Nn&v)===v&&(wi===4||wi===3&&(Nn&62914560)===Nn&&300>Ns()-Fg?(On&2)===0&&Tl(u,0):ts|=v,na===Nn&&(na=0)),ut(u)}function rh(u,f){f===0&&(f=U()),u=pe(u,f),u!==null&&(Y(u,f),ut(u))}function oh(u){var f=u.memoizedState,v=0;f!==null&&(v=f.retryLane),rh(u,v)}function Qd(u,f){var v=0;switch(u.tag){case 13:var S=u.stateNode,R=u.memoizedState;R!==null&&(v=R.retryLane);break;case 19:S=u.stateNode;break;case 22:S=u.stateNode._retryCache;break;default:throw Error(i(314))}S!==null&&S.delete(f),rh(u,v)}function n_(u,f){return ao(u,f)}function i_(u,f,v,S){this.tag=u,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Io(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Po(u,f){var v=u.alternate;return v===null?(v=t(u.tag,f,u.key,u.mode),v.elementType=u.elementType,v.type=u.type,v.stateNode=u.stateNode,v.alternate=u,u.alternate=v):(v.pendingProps=f,v.type=u.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=u.flags&31457280,v.childLanes=u.childLanes,v.lanes=u.lanes,v.child=u.child,v.memoizedProps=u.memoizedProps,v.memoizedState=u.memoizedState,v.updateQueue=u.updateQueue,f=u.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=u.sibling,v.index=u.index,v.ref=u.ref,v.refCleanup=u.refCleanup,v}function Tc(u,f){u.flags&=31457282;var v=u.alternate;return v===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=v.childLanes,u.lanes=v.lanes,u.child=v.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=v.memoizedProps,u.memoizedState=v.memoizedState,u.updateQueue=v.updateQueue,u.type=v.type,f=v.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function Cc(u,f,v,S,R,O){var J=0;if(S=u,typeof u=="function")Io(u)&&(J=1);else if(typeof u=="string")J=Os&&ga?oa(u,v,Gi.current)?26:hp(u)?27:5:Os?oa(u,v,Gi.current)?26:5:ga&&hp(u)?27:5;else e:switch(u){case Ul:return Bl(v.children,R,O,f);case Rc:J=8,R|=24;break;case Ol:return u=t(12,v,f,R|2),u.elementType=Ol,u.lanes=O,u;case Ho:return u=t(13,v,f,R),u.elementType=Ho,u.lanes=O,u;case ch:return u=t(19,v,f,R),u.elementType=ch,u.lanes=O,u;case Vo:return $d(v,R,O,f);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case wS:case Nl:J=10;break e;case ug:J=9;break e;case ep:J=11;break e;case Du:J=14;break e;case Go:J=16,S=null;break e}J=29,v=Error(i(130,u===null?"null":typeof u,"")),S=null}return f=t(J,v,f,R),f.elementType=u,f.type=S,f.lanes=O,f}function Bl(u,f,v,S){return u=t(7,u,S,f),u.lanes=v,u}function $d(u,f,v,S){u=t(22,u,S,f),u.elementType=Vo,u.lanes=v;var R={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var O=R._current;if(O===null)throw Error(i(456));if((R._pendingVisibility&2)===0){var J=pe(O,2);J!==null&&(R._pendingVisibility|=2,_i(J,O,2))}},attach:function(){var O=R._current;if(O===null)throw Error(i(456));if((R._pendingVisibility&2)!==0){var J=pe(O,2);J!==null&&(R._pendingVisibility&=-3,_i(J,O,2))}}};return u.stateNode=R,u}function lh(u,f,v){return u=t(6,u,null,f),u.lanes=v,u}function ps(u,f,v){return f=t(4,u.children!==null?u.children:[],u.key,f),f.lanes=v,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}function $r(u,f,v,S,R,O,J,fe){this.tag=1,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Nu,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=N(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=N(0),this.hiddenUpdates=N(null),this.identifierPrefix=S,this.onUncaughtError=R,this.onCaughtError=O,this.onRecoverableError=J,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=fe,this.incompleteTransitions=new Map}function Fo(u,f,v,S,R,O,J,fe,Ee,Ze,gt,Ut){return u=new $r(u,f,v,J,fe,Ee,Ze,Ut),f=1,O===!0&&(f|=24),O=t(3,null,null,f),u.current=O,O.stateNode=u,f=Al(),f.refCount++,u.pooledCache=f,f.refCount++,O.memoizedState={element:S,isDehydrated:v,cache:f},st(O),u}function lg(u){return u?(u=Nc,u):Nc}function zo(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=x(f),u=u!==null?M(u):null,u===null?null:wc(u.stateNode)}function eo(u,f,v,S,R,O){R=lg(R),S.context===null?S.context=R:S.pendingContext=R,S=Nt(f),S.payload={element:v},O=O===void 0?null:O,O!==null&&(S.callback=O),v=mt(u,S,f),v!==null&&(_i(v,u,f),Et(v,u,f))}function Zi(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var v=u.retryLane;u.retryLane=v!==0&&v<f?v:f}}function Bu(u,f){Zi(u,f),(u=u.alternate)&&Zi(u,f)}var Un={},RS=Um(),Us=OE(),Fi=Object.assign,cg=Symbol.for("react.element"),Dl=Symbol.for("react.transitional.element"),to=Symbol.for("react.portal"),Ul=Symbol.for("react.fragment"),Rc=Symbol.for("react.strict_mode"),Ol=Symbol.for("react.profiler"),wS=Symbol.for("react.provider"),ug=Symbol.for("react.consumer"),Nl=Symbol.for("react.context"),ep=Symbol.for("react.forward_ref"),Ho=Symbol.for("react.suspense"),ch=Symbol.for("react.suspense_list"),Du=Symbol.for("react.memo"),Go=Symbol.for("react.lazy"),Vo=Symbol.for("react.offscreen"),En=Symbol.for("react.memo_cache_sentinel"),si=Symbol.iterator,Qi=Symbol.for("react.client.reference"),un=RS.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ll,Il,Uu=!1,Pl=Array.isArray,Ou=e.rendererVersion,BS=e.rendererPackageName,Oi=e.extraDevToolsConfig,wc=e.getPublicInstance,fg=e.getRootHostContext,a_=e.getChildHostContext,s_=e.prepareForCommit,DS=e.resetAfterCommit,hg=e.createInstance,uh=e.appendInitialChild,tp=e.finalizeInitialChildren,ba=e.shouldSetTextContent,zi=e.createTextInstance,np=e.scheduleTimeout,fh=e.cancelTimeout,Nu=e.noTimeout,br=e.isPrimaryRenderer;e.warnsIfNotActing;var Ci=e.supportsMutation,Tr=e.supportsPersistence,ms=e.supportsHydration,ip=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var r_=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Ka=e.setCurrentUpdatePriority,Fl=e.getCurrentUpdatePriority,o_=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var l_=e.shouldAttemptEagerTransition,c_=e.detachDeletedInstance;e.requestPostPaintCallback;var dg=e.maySuspendCommit,pg=e.preloadInstance,US=e.startSuspendingCommit,mg=e.suspendInstance,u_=e.waitForCommitToBeReady,Bc=e.NotPendingTransition,ko=e.HostTransitionContext,f_=e.resetFormInstance;e.bindToConsole;var h_=e.supportsMicrotasks,d_=e.scheduleMicrotask,Lu=e.supportsTestSelectors,p_=e.findFiberRoot,OS=e.getBoundingRect,m_=e.getTextContent,no=e.isHiddenSubtree,g_=e.matchAccessibilityRole,ap=e.setFocusIfFocusable,sp=e.setupIntersectionObserver,v_=e.appendChild,gg=e.appendChildToContainer,__=e.commitTextUpdate,y_=e.commitMount,x_=e.commitUpdate,A_=e.insertBefore,vg=e.insertInContainerBefore,S_=e.removeChild,M_=e.removeChildFromContainer,rp=e.resetTextContent,E_=e.hideInstance,b_=e.hideTextInstance,NS=e.unhideInstance,_g=e.unhideTextInstance,T_=e.clearContainer,C_=e.cloneInstance,op=e.createContainerChildSet,yg=e.appendChildToContainerChildSet,R_=e.finalizeContainerChildren,w_=e.replaceContainerChildren,B_=e.cloneHiddenInstance,xg=e.cloneHiddenTextInstance,Dc=e.isSuspenseInstancePending,hh=e.isSuspenseInstanceFallback,lp=e.getSuspenseInstanceFallbackErrorDetails,D_=e.registerSuspenseInstanceRetry,U_=e.canHydrateFormStateMarker,io=e.isFormStateMarkerMatching,zl=e.getNextHydratableSibling,Xo=e.getFirstHydratableChild,Uc=e.getFirstHydratableChildWithinContainer,Ag=e.getFirstHydratableChildWithinSuspenseInstance,Sg=e.canHydrateInstance,O_=e.canHydrateTextInstance,N_=e.canHydrateSuspenseInstance,Oc=e.hydrateInstance,cp=e.hydrateTextInstance,L_=e.hydrateSuspenseInstance,I_=e.getNextHydratableInstanceAfterSuspenseInstance,P_=e.commitHydratedContainer,up=e.commitHydratedSuspenseInstance,F_=e.clearSuspenseBoundary,Mg=e.clearSuspenseBoundaryFromContainer,Eg=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var z_=e.validateHydratableInstance,LS=e.validateHydratableTextInstance,Os=e.supportsResources,oa=e.isHostHoistableType,la=e.getHoistableRoot,bg=e.getResource,Tg=e.acquireResource,Cg=e.releaseResource,H_=e.hydrateHoistable,Rg=e.mountHoistable,Iu=e.unmountHoistable,wg=e.createHoistableInstance,G_=e.prepareToCommitHoistables,V_=e.mayResourceSuspendCommit,Bg=e.preloadResource,Dg=e.suspendResource,ga=e.supportsSingletons,fp=e.resolveSingletonInstance,k_=e.clearSingleton,Ug=e.acquireSingletonInstance,Og=e.releaseSingletonInstance,hp=e.isHostSingletonType,dp=[],Hl=-1,Nc={},Hi=Math.clz32?Math.clz32:D,Ng=Math.log,IS=Math.LN2,dh=128,Pu=4194304,ao=Us.unstable_scheduleCallback,Cr=Us.unstable_cancelCallback,Gl=Us.unstable_shouldYield,Yo=Us.unstable_requestPaint,Ns=Us.unstable_now,pp=Us.unstable_ImmediatePriority,ph=Us.unstable_UserBlockingPriority,Fu=Us.unstable_NormalPriority,Lc=Us.unstable_IdlePriority,Oa=Us.log,mp=Us.unstable_setDisableYieldValue,zu=null,$i=null,Za=typeof Object.is=="function"?Object.is:oe,gp=new WeakMap,Ls=[],Is=0,Vl=null,Hu=0,gs=[],Na=0,Rr=null,so=1,ro="",Gi=b(null),tr=b(null),qo=b(null),mh=b(null),Vi=null,li=null,kn=!1,nr=null,wr=!1,gh=Error(i(519)),vs=[],Jo=0,Br=0,Ai=null,kl=null,vp=!1,ki=!1,_p=!1,Gu=0,Vu=null,yp=0,Si=0,va=null,La=!1,xp=!1,X_=Object.prototype.hasOwnProperty,vh=Error(i(460)),_h=Error(i(474)),Qa={then:function(){}},Ia=null,Ic=null,Pa=0,Xl=Zt(!0),oo=Zt(!1),Dr=b(null),Ur=b(0),_s=b(null),ir=null,yi=b(0),Wo=0,hn=null,Wn=null,Ri=null,jo=!1,Pc=!1,Yl=!1,ql=0,ku=0,Ko=null,Y_=0,Lg=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Xi={readContext:Ma,use:te,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht};Xi.useCacheRefresh=Ht,Xi.useMemoCache=Ht,Xi.useHostTransitionStatus=Ht,Xi.useFormState=Ht,Xi.useActionState=Ht,Xi.useOptimistic=Ht;var Zo={readContext:Ma,use:te,useCallback:function(u,f){return V().memoizedState=[u,f===void 0?null:f],u},useContext:Ma,useEffect:zm,useImperativeHandle:function(u,f,v){v=v!=null?v.concat([u]):null,Od(4194308,4,Pf.bind(null,f,u),v)},useLayoutEffect:function(u,f){return Od(4194308,4,u,f)},useInsertionEffect:function(u,f){Od(4,2,u,f)},useMemo:function(u,f){var v=V();f=f===void 0?null:f;var S=u();if(Yl){he(!0);try{u()}finally{he(!1)}}return v.memoizedState=[S,f],S},useReducer:function(u,f,v){var S=V();if(v!==void 0){var R=v(f);if(Yl){he(!0);try{v(f)}finally{he(!1)}}}else R=f;return S.memoizedState=S.baseState=R,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:R},S.queue=u,u=u.dispatch=Pd.bind(null,hn,u),[S.memoizedState,u]},useRef:function(u){var f=V();return u={current:u},f.memoizedState=u},useState:function(u){u=Yt(u);var f=u.queue,v=Vm.bind(null,hn,f);return f.dispatch=v,[u.memoizedState,v]},useDebugValue:Ff,useDeferredValue:function(u,f){var v=V();return Ld(v,u,f)},useTransition:function(){var u=Yt(!1);return u=Hm.bind(null,hn,u.queue,!0,!1),V().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,v){var S=hn,R=V();if(kn){if(v===void 0)throw Error(i(407));v=v()}else{if(v=f(),ui===null)throw Error(i(349));(Nn&60)!==0||Tt(S,f,v)}R.memoizedState=v;var O={value:v,getSnapshot:f};return R.queue=O,zm(Wt.bind(null,S,O,u),[u]),S.flags|=2048,Mr(9,Ct.bind(null,S,O,v,f),{destroy:void 0},null),v},useId:function(){var u=V(),f=ui.identifierPrefix;if(kn){var v=ro,S=so;v=(S&~(1<<32-Hi(S)-1)).toString(32)+v,f=":"+f+"R"+v,v=ql++,0<v&&(f+="H"+v.toString(32)),f+=":"}else v=Y_++,f=":"+f+"r"+v.toString(32)+":";return u.memoizedState=f},useCacheRefresh:function(){return V().memoizedState=Gm.bind(null,hn)}};Zo.useMemoCache=de,Zo.useHostTransitionStatus=zf,Zo.useFormState=vn,Zo.useActionState=vn,Zo.useOptimistic=function(u){var f=V();f.memoizedState=f.baseState=u;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=v,f=gu.bind(null,hn,!0,v),v.dispatch=f,[u,f]};var $a={readContext:Ma,use:te,useCallback:vc,useContext:Ma,useEffect:If,useImperativeHandle:Nd,useInsertionEffect:Nv,useLayoutEffect:Lv,useMemo:_c,useReducer:He,useRef:Ja,useState:function(){return He(Ae)},useDebugValue:Ff,useDeferredValue:function(u,f){var v=K();return Id(v,Wn.memoizedState,u,f)},useTransition:function(){var u=He(Ae)[0],f=K().memoizedState;return[typeof u=="boolean"?u:se(u),f]},useSyncExternalStore:At,useId:mu};$a.useCacheRefresh=bo,$a.useMemoCache=de,$a.useHostTransitionStatus=zf,$a.useFormState=bi,$a.useActionState=bi,$a.useOptimistic=function(u,f){var v=K();return zt(v,Wn,u,f)};var Jl={readContext:Ma,use:te,useCallback:vc,useContext:Ma,useEffect:If,useImperativeHandle:Nd,useInsertionEffect:Nv,useLayoutEffect:Lv,useMemo:_c,useReducer:Ke,useRef:Ja,useState:function(){return Ke(Ae)},useDebugValue:Ff,useDeferredValue:function(u,f){var v=K();return Wn===null?Ld(v,u,f):Id(v,Wn.memoizedState,u,f)},useTransition:function(){var u=Ke(Ae)[0],f=K().memoizedState;return[typeof u=="boolean"?u:se(u),f]},useSyncExternalStore:At,useId:mu};Jl.useCacheRefresh=bo,Jl.useMemoCache=de,Jl.useHostTransitionStatus=zf,Jl.useFormState=pa,Jl.useActionState=pa,Jl.useOptimistic=function(u,f){var v=K();return Wn!==null?zt(v,Wn,u,f):(v.baseState=u,[u,v.queue.dispatch])};var Xu={isMounted:function(u){return(u=u._reactInternals)?_(u)===u:!1},enqueueSetState:function(u,f,v){u=u._reactInternals;var S=Da(),R=Nt(S);R.payload=f,v!=null&&(R.callback=v),f=mt(u,R,S),f!==null&&(_i(f,u,S),Et(f,u,S))},enqueueReplaceState:function(u,f,v){u=u._reactInternals;var S=Da(),R=Nt(S);R.tag=1,R.payload=f,v!=null&&(R.callback=v),f=mt(u,R,S),f!==null&&(_i(f,u,S),Et(f,u,S))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var v=Da(),S=Nt(v);S.tag=2,f!=null&&(S.callback=f),f=mt(u,S,v),f!==null&&(_i(f,u,v),Et(f,u,v))}},Wl=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Ig=Error(i(461)),ea=!1,yh={dehydrated:null,treeContext:null,retryLane:0},ar=b(null),jl=null,sr=null,xh=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(v,S){u.push(S)}};this.abort=function(){f.aborted=!0,u.forEach(function(v){return v()})}},Di=Us.unstable_scheduleCallback,PS=Us.unstable_NormalPriority,Ni={$$typeof:Nl,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Pg=un.S;un.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&lt(u,f),Pg!==null&&Pg(u,f)};var Fc=b(null),Qo=!1,dn=!1,ci=!1,Rn=typeof WeakSet=="function"?WeakSet:Set,nn=null,pi=!1,jn=null,Yi=!1,Fa=null,Kl=8192,$o={getCacheForType:function(u){var f=Ma(Ni),v=f.data.get(u);return v===void 0&&(v=u(),f.data.set(u,v)),v}},Mi=0,Or=1,lo=2,Yu=3,es=4;if(typeof Symbol=="function"&&Symbol.for){var co=Symbol.for;Mi=co("selector.component"),Or=co("selector.has_pseudo_class"),lo=co("selector.role"),Yu=co("selector.test_id"),es=co("selector.text")}var Ah=typeof WeakMap=="function"?WeakMap:Map,On=0,ui=null,bn=null,Nn=0,ri=0,ta=null,rr=!1,or=!1,zc=!1,Nr=0,wi=0,lr=0,el=0,ts=0,Ps=0,na=0,qu=null,cr=null,Ap=!1,Fg=0,Fs=1/0,Hc=null,uo=null,tl=!1,Zl=null,Ju=0,Sp=0,Sh=null,Gc=0,zg=null;return Un.attemptContinuousHydration=function(u){if(u.tag===13){var f=pe(u,67108864);f!==null&&_i(f,u,67108864),Bu(u,67108864)}},Un.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var f=Da(),v=pe(u,f);v!==null&&_i(v,u,f),Bu(u,f)}},Un.attemptSynchronousHydration=function(u){switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var f=B(u.pendingLanes);if(f!==0){for(u.pendingLanes|=2,u.entangledLanes|=2;f;){var v=1<<31-Hi(f);u.entanglements[1]|=v,f&=~v}ut(u),(On&6)===0&&(Fs=Ns()+500,W(0))}}break;case 13:f=pe(u,2),f!==null&&_i(f,u,2),rg(),Bu(u,2)}},Un.batchedUpdates=function(u,f){return u(f)},Un.createComponentSelector=function(u){return{$$typeof:Mi,value:u}},Un.createContainer=function(u,f,v,S,R,O,J,fe,Ee,Ze){return Fo(u,f,!1,null,v,S,O,J,fe,Ee,Ze,null)},Un.createHasPseudoClassSelector=function(u){return{$$typeof:Or,value:u}},Un.createHydrationContainer=function(u,f,v,S,R,O,J,fe,Ee,Ze,gt,Ut,ft){return u=Fo(v,S,!0,u,R,O,fe,Ee,Ze,gt,Ut,ft),u.context=lg(null),v=u.current,S=Da(),R=Nt(S),R.callback=f??null,mt(v,R,S),u.current.lanes=S,Y(u,S),ut(u),u},Un.createPortal=function(u,f,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:to,key:S==null?null:""+S,children:u,containerInfo:f,implementation:v}},Un.createRoleSelector=function(u){return{$$typeof:lo,value:u}},Un.createTestNameSelector=function(u){return{$$typeof:Yu,value:u}},Un.createTextSelector=function(u){return{$$typeof:es,value:u}},Un.defaultOnCaughtError=function(u){console.error(u)},Un.defaultOnRecoverableError=function(u){Wl(u)},Un.defaultOnUncaughtError=function(u){Wl(u)},Un.deferredUpdates=function(u){var f=un.T,v=Fl();try{return Ka(32),un.T=null,u()}finally{Ka(v),un.T=f}},Un.discreteUpdates=function(u,f,v,S,R){var O=un.T,J=Fl();try{return Ka(2),un.T=null,u(f,v,S,R)}finally{Ka(J),un.T=O,On===0&&(Fs=Ns()+500)}},Un.findAllNodes=bl,Un.findBoundingRects=function(u,f){if(!Lu)throw Error(i(363));f=bl(u,f),u=[];for(var v=0;v<f.length;v++)u.push(OS(f[v]));for(f=u.length-1;0<f;f--){v=u[f];for(var S=v.x,R=S+v.width,O=v.y,J=O+v.height,fe=f-1;0<=fe;fe--)if(f!==fe){var Ee=u[fe],Ze=Ee.x,gt=Ze+Ee.width,Ut=Ee.y,ft=Ut+Ee.height;if(S>=Ze&&O>=Ut&&R<=gt&&J<=ft){u.splice(f,1);break}else if(S!==Ze||v.width!==Ee.width||ft<O||Ut>J){if(!(O!==Ut||v.height!==Ee.height||gt<S||Ze>R)){Ze>S&&(Ee.width+=Ze-S,Ee.x=S),gt<R&&(Ee.width=R-Ze),u.splice(f,1);break}}else{Ut>O&&(Ee.height+=Ut-O,Ee.y=O),ft<J&&(Ee.height=J-Ut),u.splice(f,1);break}}}return u},Un.findHostInstance=zo,Un.findHostInstanceWithNoPortals=function(u){return u=x(u),u=u!==null?T(u):null,u===null?null:wc(u.stateNode)},Un.findHostInstanceWithWarning=function(u){return zo(u)},Un.flushPassiveEffects=Rl,Un.flushSyncFromReconciler=function(u){var f=On;On|=1;var v=un.T,S=Fl();try{if(Ka(2),un.T=null,u)return u()}finally{Ka(S),un.T=v,On=f,(On&6)===0&&W(0)}},Un.flushSyncWork=rg,Un.focusWithin=function(u,f){if(!Lu)throw Error(i(363));for(u=El(u),f=Ec(u,f),f=Array.from(f),u=0;u<f.length;){var v=f[u++],S=v.tag;if(!no(v)){if((S===5||S===26||S===27)&&ap(v.stateNode))return!0;for(v=v.child;v!==null;)f.push(v),v=v.sibling}}return!1},Un.getFindAllNodesFailureDescription=function(u,f){if(!Lu)throw Error(i(363));var v=0,S=[];u=[El(u),0];for(var R=0;R<u.length;){var O=u[R++],J=O.tag,fe=u[R++],Ee=f[fe];if((J!==5&&J!==26&&J!==27||!no(O))&&(Kd(O,Ee)&&(S.push(ds(Ee)),fe++,fe>v&&(v=fe)),fe<f.length))for(O=O.child;O!==null;)u.push(O,fe),O=O.sibling}if(v<f.length){for(u=[];v<f.length;v++)u.push(ds(f[v]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},Un.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 27:case 5:return wc(u.child.stateNode);default:return u.child.stateNode}},Un.injectIntoDevTools=function(){var u={bundleType:0,version:Ou,rendererPackageName:BS,currentDispatcherRef:un,findFiberByHostInstance:ip,reconcilerVersion:"19.0.0"};if(Oi!==null&&(u.rendererConfig=Oi),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)u=!0;else{try{zu=f.inject(u),$i=f}catch{}u=!!f.checkDCE}}return u},Un.isAlreadyRendering=function(){return!1},Un.observeVisibleRects=function(u,f,v,S){if(!Lu)throw Error(i(363));u=bl(u,f);var R=sp(u,v,S).disconnect;return{disconnect:function(){R()}}},Un.shouldError=function(){return null},Un.shouldSuspend=function(){return!1},Un.startHostTransition=function(u,f,v,S){if(u.tag!==5)throw Error(i(476));var R=pu(u).queue;Hm(u,R,f,Bc,v===null?n:function(){var O=pu(u).next.queue;return vl(u,O,{},Da()),v(S)})},Un.updateContainer=function(u,f,v,S){var R=f.current,O=Da();return eo(R,O,u,f,v,S),O},Un.updateContainerSync=function(u,f,v,S){return f.tag===0&&Rl(),eo(f.current,2,u,f,v,S),2},Un},r.exports.default=r.exports,Object.defineProperty(r.exports,"__esModule",{value:!0})}(s1)),s1.exports}var YR;function dG(){return YR||(YR=1,a1.exports=hG()),a1.exports}var pG=dG();const mG=UE(pG);var qR=OE();const gG=r=>typeof r=="object"&&typeof r.then=="function",$h=[];function VB(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e)return!1;const n=r.length;if(e.length!==n)return!1;for(let i=0;i<n;i++)if(!t(r[i],e[i]))return!1;return!0}function kB(r,e=null,t=!1,n={}){e===null&&(e=[r]);for(const s of $h)if(VB(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:n.equal,remove:()=>{const s=$h.indexOf(i);s!==-1&&$h.splice(s,1)},promise:(gG(r)?r:r(...e)).then(s=>{i.response=s,n.lifespan&&n.lifespan>0&&(i.timeout=setTimeout(i.remove,n.lifespan))}).catch(s=>i.error=s)};if($h.push(i),!t)throw i.promise}const vG=(r,e,t)=>kB(r,e,!1,t),_G=(r,e,t)=>void kB(r,e,!0,t),yG=r=>{if(r===void 0||r.length===0)$h.splice(0,$h.length);else{const e=$h.find(t=>VB(r,t.keys,t.equal));e&&e.remove()}};function Rb(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=e?r.return:r.child;for(;n;){const i=Rb(n,e,t);if(i)return i;n=e?null:n.sibling}}function XB(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const wb=XB(pt.createContext(null));class YB extends pt.Component{render(){return pt.createElement(wb.Provider,{value:this._reactInternals},this.props.children)}}function qB(){const r=pt.useContext(wb);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=pt.useId();return pt.useMemo(()=>{for(const t of[r,r==null?void 0:r.alternate]){if(!t)continue;const n=Rb(t,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(n)return n}},[r,e])}const xG=Symbol.for("react.context"),AG=r=>r!==null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===xG;function SG(){const r=qB(),[e]=pt.useState(()=>new Map);e.clear();let t=r;for(;t;){const n=t.type;AG(n)&&n!==wb&&!e.has(n)&&e.set(n,pt.use(XB(n))),t=t.return}return e}function MG(){const r=SG();return pt.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>pt.createElement(e,null,pt.createElement(t.Provider,{...n,value:r.get(t)})),e=>pt.createElement(YB,{...e})),[r])}function JB(r){let e=r.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const WB=r=>r&&r.isOrthographicCamera,EG=r=>r&&r.hasOwnProperty("current"),bG=r=>r!=null&&(typeof r=="string"||typeof r=="number"||r.isColor),Dv=((r,e)=>typeof window<"u"&&(((r=window.document)==null?void 0:r.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?pt.useLayoutEffect:pt.useEffect;function Bb(r){const e=pt.useRef(r);return Dv(()=>void(e.current=r),[r]),e}function TG(){const r=qB(),e=MG();return pt.useMemo(()=>({children:t})=>{const i=!!Rb(r,!0,s=>s.type===pt.StrictMode)?pt.StrictMode:pt.Fragment;return Oe.jsx(i,{children:Oe.jsx(e,{children:t})})},[r,e])}function CG({set:r}){return Dv(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}const RG=(r=>(r=class extends pt.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},r.getDerivedStateFromError=()=>({error:!0}),r))();function jB(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}function Yp(r){var e;return(e=r.__r3f)==null?void 0:e.root.getState()}const Li={obj:r=>r===Object(r)&&!Li.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,nul:r=>r===null,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(Li.str(r)||Li.num(r)||Li.boo(r))return r===e;const s=Li.obj(r);if(s&&n==="reference")return r===e;const l=Li.arr(r);if(l&&t==="reference")return r===e;if((l||s)&&r===e)return!0;let c;for(c in r)if(!(c in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(c in i?e:r)if(!Li.equ(r[c],e[c],{strict:i,objects:"reference"}))return!1}else for(c in i?e:r)if(r[c]!==e[c])return!1;if(Li.und(c)){if(l&&r.length===0&&e.length===0||s&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function wG(r){const e={nodes:{},materials:{},meshes:{}};return r&&r.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function BG(r){r.type!=="Scene"&&(r.dispose==null||r.dispose());for(const e in r){const t=r[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const KB=["children","key","ref"];function DG(r){const e={};for(const t in r)KB.includes(t)||(e[t]=r[t]);return e}function AA(r,e,t,n){const i=r;let s=i==null?void 0:i.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:DG(n),object:i,eventCount:0,handlers:{},isHidden:!1},i&&(i.__r3f=s)),s}function sv(r,e){let t=r[e];if(!e.includes("-"))return{root:r,key:e,target:t};t=r;for(const i of e.split("-")){var n;e=i,r=t,t=(n=t)==null?void 0:n[e]}return{root:r,key:e,target:t}}const JR=/-\d+$/;function SA(r,e){if(Li.str(e.props.attach)){if(JR.test(e.props.attach)){const i=e.props.attach.replace(JR,""),{root:s,key:l}=sv(r.object,i);Array.isArray(s[l])||(s[l]=[])}const{root:t,key:n}=sv(r.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else Li.fun(e.props.attach)&&(e.previousAttach=e.props.attach(r.object,e.object))}function MA(r,e){if(Li.str(e.props.attach)){const{root:t,key:n}=sv(r.object,e.props.attach),i=e.previousAttach;i===void 0?delete t[n]:t[n]=i}else e.previousAttach==null||e.previousAttach(r.object,e.object);delete e.previousAttach}const Q1=[...KB,"args","dispose","attach","object","onUpdate","dispose"],WR=new Map;function UG(r){let e=WR.get(r.constructor);try{e||(e=new r.constructor,WR.set(r.constructor,e))}catch{}return e}function OG(r,e){const t={};for(const n in e)if(!Q1.includes(n)&&!Li.equ(e[n],r.props[n])){t[n]=e[n];for(const i in e)i.startsWith(`${n}-`)&&(t[i]=e[i])}for(const n in r.props){if(Q1.includes(n)||e.hasOwnProperty(n))continue;const{root:i,key:s}=sv(r.object,n);if(i.constructor&&i.constructor.length===0){const l=UG(i);Li.und(l)||(t[s]=l[s])}else t[s]=0}return t}const NG=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],LG=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function tc(r,e){var t;const n=r.__r3f,i=n&&JB(n).getState(),s=n==null?void 0:n.eventCount;for(const c in e){let h=e[c];if(Q1.includes(c))continue;if(n&&LG.test(c)){typeof h=="function"?n.handlers[c]=h:delete n.handlers[c],n.eventCount=Object.keys(n.handlers).length;continue}if(h===void 0)continue;let{root:p,key:g,target:_}=sv(r,c);if(_ instanceof Am&&h instanceof Am)_.mask=h.mask;else if(_ instanceof Bt&&bG(h))_.set(h);else if(_!==null&&typeof _=="object"&&typeof _.set=="function"&&typeof _.copy=="function"&&h!=null&&h.constructor&&_.constructor===h.constructor)_.copy(h);else if(_!==null&&typeof _=="object"&&typeof _.set=="function"&&Array.isArray(h))typeof _.fromArray=="function"?_.fromArray(h):_.set(...h);else if(_!==null&&typeof _=="object"&&typeof _.set=="function"&&typeof h=="number")typeof _.setScalar=="function"?_.setScalar(h):_.set(h);else{var l;p[g]=h,i&&!i.linear&&NG.includes(g)&&(l=p[g])!=null&&l.isTexture&&p[g].format===ha&&p[g].type===xr&&(p[g].colorSpace=is)}}if(n!=null&&n.parent&&i!=null&&i.internal&&(t=n.object)!=null&&t.isObject3D&&s!==n.eventCount){const c=n.object,h=i.internal.interaction.indexOf(c);h>-1&&i.internal.interaction.splice(h,1),n.eventCount&&c.raycast!==null&&i.internal.interaction.push(c)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Pm(n),r}function Pm(r){var e;if(!r.parent)return;r.props.onUpdate==null||r.props.onUpdate(r.object);const t=(e=r.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function ZB(r,e){r.manual||(WB(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix())}const qs=r=>r==null?void 0:r.isObject3D;function ex(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function QB(r,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(n),i.target.releasePointerCapture(n)))}function IG(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{QB(t.capturedMap,e,n,i)})}function PG(r){function e(h){const{internal:p}=r.getState(),g=h.offsetX-p.initialClick[0],_=h.offsetY-p.initialClick[1];return Math.round(Math.sqrt(g*g+_*_))}function t(h){return h.filter(p=>["Move","Over","Enter","Out","Leave"].some(g=>{var _;return(_=p.__r3f)==null?void 0:_.handlers["onPointer"+g]}))}function n(h,p){const g=r.getState(),_=new Set,y=[],x=p?p(g.internal.interaction):g.internal.interaction;for(let E=0;E<x.length;E++){const w=Yp(x[E]);w&&(w.raycaster.camera=void 0)}g.previousRoot||g.events.compute==null||g.events.compute(h,g);function M(E){const w=Yp(E);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var D;w.events.compute==null||w.events.compute(h,w,(D=w.previousRoot)==null?void 0:D.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(E,!0):[]}let T=x.flatMap(M).sort((E,w)=>{const D=Yp(E.object),B=Yp(w.object);return!D||!B?E.distance-w.distance:B.events.priority-D.events.priority||E.distance-w.distance}).filter(E=>{const w=ex(E);return _.has(w)?!1:(_.add(w),!0)});g.events.filter&&(T=g.events.filter(T,g));for(const E of T){let w=E.object;for(;w;){var b;(b=w.__r3f)!=null&&b.eventCount&&y.push({...E,eventObject:w}),w=w.parent}}if("pointerId"in h&&g.internal.capturedMap.has(h.pointerId))for(let E of g.internal.capturedMap.get(h.pointerId).values())_.has(ex(E.intersection))||y.push(E.intersection);return y}function i(h,p,g,_){if(h.length){const y={stopped:!1};for(const x of h){let M=Yp(x.object);if(M||x.object.traverseAncestors(T=>{const b=Yp(T);if(b)return M=b,!1}),M){const{raycaster:T,pointer:b,camera:E,internal:w}=M,D=new Z(b.x,b.y,0).unproject(E),B=U=>{var N,Y;return(N=(Y=w.capturedMap.get(U))==null?void 0:Y.has(x.eventObject))!=null?N:!1},I=U=>{const N={intersection:x,target:p.target};w.capturedMap.has(U)?w.capturedMap.get(U).set(x.eventObject,N):w.capturedMap.set(U,new Map([[x.eventObject,N]])),p.target.setPointerCapture(U)},L=U=>{const N=w.capturedMap.get(U);N&&QB(w.capturedMap,x.eventObject,N,U)};let F={};for(let U in p){let N=p[U];typeof N!="function"&&(F[U]=N)}let H={...x,...F,pointer:b,intersections:h,stopped:y.stopped,delta:g,unprojectedPoint:D,ray:T.ray,camera:E,stopPropagation(){const U="pointerId"in p&&w.capturedMap.get(p.pointerId);if((!U||U.has(x.eventObject))&&(H.stopped=y.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(N=>N.eventObject===x.eventObject))){const N=h.slice(0,h.indexOf(x));s([...N,x])}},target:{hasPointerCapture:B,setPointerCapture:I,releasePointerCapture:L},currentTarget:{hasPointerCapture:B,setPointerCapture:I,releasePointerCapture:L},nativeEvent:p};if(_(H),y.stopped===!0)break}}}return h}function s(h){const{internal:p}=r.getState();for(const g of p.hovered.values())if(!h.length||!h.find(_=>_.object===g.object&&_.index===g.index&&_.instanceId===g.instanceId)){const y=g.eventObject.__r3f;if(p.hovered.delete(ex(g)),y!=null&&y.eventCount){const x=y.handlers,M={...g,intersections:h};x.onPointerOut==null||x.onPointerOut(M),x.onPointerLeave==null||x.onPointerLeave(M)}}}function l(h,p){for(let g=0;g<p.length;g++){const _=p[g].__r3f;_==null||_.handlers.onPointerMissed==null||_.handlers.onPointerMissed(h)}}function c(h){switch(h){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return p=>{const{internal:g}=r.getState();"pointerId"in p&&g.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{g.capturedMap.has(p.pointerId)&&(g.capturedMap.delete(p.pointerId),s([]))})}}return function(g){const{onPointerMissed:_,internal:y}=r.getState();y.lastEvent.current=g;const x=h==="onPointerMove",M=h==="onClick"||h==="onContextMenu"||h==="onDoubleClick",b=n(g,x?t:void 0),E=M?e(g):0;h==="onPointerDown"&&(y.initialClick=[g.offsetX,g.offsetY],y.initialHits=b.map(D=>D.eventObject)),M&&!b.length&&E<=2&&(l(g,y.interaction),_&&_(g)),x&&s(b);function w(D){const B=D.eventObject,I=B.__r3f;if(!(I!=null&&I.eventCount))return;const L=I.handlers;if(x){if(L.onPointerOver||L.onPointerEnter||L.onPointerOut||L.onPointerLeave){const F=ex(D),H=y.hovered.get(F);H?H.stopped&&D.stopPropagation():(y.hovered.set(F,D),L.onPointerOver==null||L.onPointerOver(D),L.onPointerEnter==null||L.onPointerEnter(D))}L.onPointerMove==null||L.onPointerMove(D)}else{const F=L[h];F?(!M||y.initialHits.includes(B))&&(l(g,y.interaction.filter(H=>!y.initialHits.includes(H))),F(D)):M&&y.initialHits.includes(B)&&l(g,y.interaction.filter(H=>!y.initialHits.includes(H)))}}i(b,g,E,w)}}return{handlePointer:c}}const jR=r=>!!(r!=null&&r.render),Db=pt.createContext(null),FG=(r,e)=>{const t=GB((c,h)=>{const p=new Z,g=new Z,_=new Z;function y(E=h().camera,w=g,D=h().size){const{width:B,height:I,top:L,left:F}=D,H=B/I;w.isVector3?_.copy(w):_.set(...w);const U=E.getWorldPosition(p).distanceTo(_);if(WB(E))return{width:B/E.zoom,height:I/E.zoom,top:L,left:F,factor:1,distance:U,aspect:H};{const N=E.fov*Math.PI/180,Y=2*Math.tan(N/2)*U,ee=Y*(B/I);return{width:ee,height:Y,top:L,left:F,factor:B/ee,distance:U,aspect:H}}}let x;const M=E=>c(w=>({performance:{...w.performance,current:E}})),T=new et;return{set:c,get:h,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(E=1)=>r(h(),E),advance:(E,w)=>e(E,w,h()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new xb,pointer:T,mouse:T,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const E=h();x&&clearTimeout(x),E.performance.current!==E.performance.min&&M(E.performance.min),x=setTimeout(()=>M(h().performance.max),E.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:E=>c(w=>({...w,events:{...w.events,...E}})),setSize:(E,w,D=0,B=0)=>{const I=h().camera,L={width:E,height:w,top:D,left:B};c(F=>({size:L,viewport:{...F.viewport,...y(I,g,L)}}))},setDpr:E=>c(w=>{const D=jB(E);return{viewport:{...w.viewport,dpr:D,initialDpr:w.viewport.initialDpr||D}}}),setFrameloop:(E="always")=>{const w=h().clock;w.stop(),w.elapsedTime=0,E!=="never"&&(w.start(),w.elapsedTime=0),c(()=>({frameloop:E}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:pt.createRef(),active:!1,frames:0,priority:0,subscribe:(E,w,D)=>{const B=h().internal;return B.priority=B.priority+(w>0?1:0),B.subscribers.push({ref:E,priority:w,store:D}),B.subscribers=B.subscribers.sort((I,L)=>I.priority-L.priority),()=>{const I=h().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(w>0?1:0),I.subscribers=I.subscribers.filter(L=>L.ref!==E))}}}}}),n=t.getState();let i=n.size,s=n.viewport.dpr,l=n.camera;return t.subscribe(()=>{const{camera:c,size:h,viewport:p,gl:g,set:_}=t.getState();if(h.width!==i.width||h.height!==i.height||p.dpr!==s){i=h,s=p.dpr,ZB(c,h),p.dpr>0&&g.setPixelRatio(p.dpr);const y=typeof HTMLCanvasElement<"u"&&g.domElement instanceof HTMLCanvasElement;g.setSize(h.width,h.height,y)}c!==l&&(l=c,_(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(c)}})))}),t.subscribe(c=>r(c)),t};function Ub(){const r=pt.useContext(Db);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Fr(r=t=>t,e){return Ub()(r,e)}function Ob(r,e=0){const t=Ub(),n=t.getState().internal.subscribe,i=Bb(r);return Dv(()=>n(i,e,t),[e,n,t]),null}const KR=new WeakMap,zG=r=>{var e;return typeof r=="function"&&(r==null||(e=r.prototype)==null?void 0:e.constructor)===r};function $B(r,e){return function(t,...n){let i;return zG(t)?(i=KR.get(t),i||(i=new t,KR.set(t,i))):i=t,r&&r(i),Promise.all(n.map(s=>new Promise((l,c)=>i.load(s,h=>{qs(h==null?void 0:h.scene)&&Object.assign(h,wG(h.scene)),l(h)},e,h=>c(new Error(`Could not load ${s}: ${h==null?void 0:h.message}`))))))}}function fu(r,e,t,n){const i=Array.isArray(e)?e:[e],s=vG($B(t,n),[r,...i],{equal:Li.equ});return Array.isArray(e)?s:s[0]}fu.preload=function(r,e,t){const n=Array.isArray(e)?e:[e];return _G($B(t),[r,...n])};fu.clear=function(r,e){const t=Array.isArray(e)?e:[e];return yG([r,...t])};function HG(r){const e=mG(r);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:pt.version}),e}const eD=0,Em={},GG=/^three(?=[A-Z])/,_S=r=>`${r[0].toUpperCase()}${r.slice(1)}`;let VG=0;const kG=r=>typeof r=="function";function tD(r){if(kG(r)){const e=`${VG++}`;return Em[e]=r,e}else Object.assign(Em,r)}function nD(r,e){const t=_S(r),n=Em[t];if(r!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(r==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function XG(r,e,t){var n;return r=_S(r)in Em?r:r.replace(GG,""),nD(r,e),r==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,AA(e.object,t,r,e)}function YG(r){if(!r.isHidden){var e;r.props.attach&&(e=r.parent)!=null&&e.object?MA(r.parent,r):qs(r.object)&&(r.object.visible=!1),r.isHidden=!0,Pm(r)}}function iD(r){if(r.isHidden){var e;r.props.attach&&(e=r.parent)!=null&&e.object?SA(r.parent,r):qs(r.object)&&r.props.visible!==!1&&(r.object.visible=!0),r.isHidden=!1,Pm(r)}}function Nb(r,e,t){const n=e.root.getState();if(!(!r.parent&&r.object!==n.scene)){if(!e.object){var i,s;const l=Em[_S(e.type)];e.object=(i=e.props.object)!=null?i:new l(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(tc(e.object,e.props),e.props.attach)SA(r,e);else if(qs(e.object)&&qs(r.object)){const l=r.object.children.indexOf(t==null?void 0:t.object);if(t&&l!==-1){const c=r.object.children.indexOf(e.object);if(c!==-1){r.object.children.splice(c,1);const h=c<l?l-1:l;r.object.children.splice(h,0,e.object)}else e.object.parent=r.object,r.object.children.splice(l,0,e.object),e.object.dispatchEvent({type:"added"}),r.object.dispatchEvent({type:"childadded",child:e.object})}else r.object.add(e.object)}for(const l of e.children)Nb(e,l);Pm(e)}}function r1(r,e){e&&(e.parent=r,r.children.push(e),Nb(r,e))}function ZR(r,e,t){if(!e||!t)return;e.parent=r;const n=r.children.indexOf(t);n!==-1?r.children.splice(n,0,e):r.children.push(e),Nb(r,e,t)}function aD(r){if(typeof r.dispose=="function"){const e=()=>{try{r.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():qR.unstable_scheduleCallback(qR.unstable_IdlePriority,e)}}function $1(r,e,t){if(!e)return;e.parent=null;const n=r.children.indexOf(e);n!==-1&&r.children.splice(n,1),e.props.attach?MA(r,e):qs(e.object)&&qs(r.object)&&(r.object.remove(e.object),IG(JB(e),e.object));const i=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const l=e.children[s];$1(e,l,i)}e.children.length=0,delete e.object.__r3f,i&&e.type!=="primitive"&&e.object.type!=="Scene"&&aD(e.object),t===void 0&&Pm(e)}function qG(r,e){for(const t of[r,r.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const bx=[];function JG(){for(const[t]of bx){const n=t.parent;if(n){t.props.attach?MA(n,t):qs(t.object)&&qs(n.object)&&n.object.remove(t.object);for(const i of t.children)i.props.attach?MA(t,i):qs(i.object)&&qs(t.object)&&t.object.remove(i.object)}t.isHidden&&iD(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&aD(t.object)}for(const[t,n,i]of bx){t.props=n;const s=t.parent;if(s){var r,e;const l=Em[_S(t.type)];t.object=(r=t.props.object)!=null?r:new l(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,qG(i,t.object),tc(t.object,t.props),t.props.attach?SA(s,t):qs(t.object)&&qs(s.object)&&s.object.add(t.object);for(const c of t.children)c.props.attach?SA(t,c):qs(c.object)&&qs(t.object)&&t.object.add(c.object);Pm(t)}}bx.length=0}const o1=()=>{},QR={};let tx=eD;const WG=0,jG=4,EA=HG({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:XG,removeChild:$1,appendChild:r1,appendInitialChild:r1,insertBefore:ZR,appendChildToContainer(r,e){const t=r.getState().scene.__r3f;!e||!t||r1(t,e)},removeChildFromContainer(r,e){const t=r.getState().scene.__r3f;!e||!t||$1(t,e)},insertInContainerBefore(r,e,t){const n=r.getState().scene.__r3f;!e||!t||!n||ZR(n,e,t)},getRootHostContext:()=>QR,getChildHostContext:()=>QR,commitUpdate(r,e,t,n,i){var s,l,c;nD(e,n);let h=!1;if((r.type==="primitive"&&t.object!==n.object||((s=n.args)==null?void 0:s.length)!==((l=t.args)==null?void 0:l.length)||(c=n.args)!=null&&c.some((g,_)=>{var y;return g!==((y=t.args)==null?void 0:y[_])}))&&(h=!0),h)bx.push([r,{...n},i]);else{const g=OG(r,n);Object.keys(g).length&&(Object.assign(r.props,g),tc(r.object,g))}(i.sibling===null||(i.flags&jG)===WG)&&JG()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:r=>r==null?void 0:r.object,prepareForCommit:()=>null,preparePortalMount:r=>AA(r.getState().scene,r,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:YG,unhideInstance:iD,createTextInstance:o1,hideTextInstance:o1,unhideTextInstance:o1,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:pt.createContext(null),setCurrentUpdatePriority(r){tx=r},getCurrentUpdatePriority(){return tx},resolveUpdatePriority(){var r;if(tx!==eD)return tx;switch(typeof window<"u"&&((r=window.event)==null?void 0:r.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ex.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ex.ContinuousEventPriority;default:return Ex.DefaultEventPriority}},resetFormInstance(){}}),Md=new Map,qp={objects:"shallow",strict:!1};function KG(r,e){if(!e&&typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:t,height:n,top:i,left:s}=r.parentElement.getBoundingClientRect();return{width:t,height:n,top:i,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function ZG(r){const e=Md.get(r),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=n||FG(nE,ew),l=t||EA.createContainer(s,Ex.ConcurrentRoot,null,!1,null,"",i,i,i,null);e||Md.set(r,{fiber:l,store:s});let c,h,p=!1,g=null;return{async configure(_={}){let y;g=new Promise(ue=>y=ue);let{gl:x,size:M,scene:T,events:b,onCreated:E,shadows:w=!1,linear:D=!1,flat:B=!1,legacy:I=!1,orthographic:L=!1,frameloop:F="always",dpr:H=[1,2],performance:U,raycaster:N,camera:Y,onPointerMissed:ee}=_,$=s.getState(),ae=$.gl;if(!$.gl){const ue={canvas:r,powerPreference:"high-performance",antialias:!0,alpha:!0},Ce=typeof x=="function"?await x(ue):x;jR(Ce)?ae=Ce:ae=new Cb({...ue,...x}),$.set({gl:ae})}let me=$.raycaster;me||$.set({raycaster:me=new Eb});const{params:Q,...he}=N||{};if(Li.equ(he,me,qp)||tc(me,{...he}),Li.equ(Q,me.params,qp)||tc(me,{params:{...me.params,...Q}}),!$.camera||$.camera===h&&!Li.equ(h,Y,qp)){h=Y;const ue=Y==null?void 0:Y.isCamera,Ce=ue?Y:L?new lc(0,0,0,0,.1,1e3):new sa(75,0,.1,1e3);ue||(Ce.position.z=5,Y&&(tc(Ce,Y),Ce.manual||("aspect"in Y||"left"in Y||"right"in Y||"bottom"in Y||"top"in Y)&&(Ce.manual=!0,Ce.updateProjectionMatrix())),!$.camera&&!(Y!=null&&Y.rotation)&&Ce.lookAt(0,0,0)),$.set({camera:Ce}),me.camera=Ce}if(!$.scene){let ue;T!=null&&T.isScene?(ue=T,AA(ue,s,"",{})):(ue=new Mv,AA(ue,s,"",{}),T&&tc(ue,T)),$.set({scene:ue})}b&&!$.events.handlers&&$.set({events:b(s)});const oe=KG(r,M);if(Li.equ(oe,$.size,qp)||$.setSize(oe.width,oe.height,oe.top,oe.left),H&&$.viewport.dpr!==jB(H)&&$.setDpr(H),$.frameloop!==F&&$.setFrameloop(F),$.onPointerMissed||$.set({onPointerMissed:ee}),U&&!Li.equ(U,$.performance,qp)&&$.set(ue=>({performance:{...ue.performance,...U}})),!$.xr){var be;const ue=(re,Ne)=>{const Be=s.getState();Be.frameloop!=="never"&&ew(re,!0,Be,Ne)},Ce=()=>{const re=s.getState();re.gl.xr.enabled=re.gl.xr.isPresenting,re.gl.xr.setAnimationLoop(re.gl.xr.isPresenting?ue:null),re.gl.xr.isPresenting||nE(re)},Xe={connect(){const re=s.getState().gl;re.xr.addEventListener("sessionstart",Ce),re.xr.addEventListener("sessionend",Ce)},disconnect(){const re=s.getState().gl;re.xr.removeEventListener("sessionstart",Ce),re.xr.removeEventListener("sessionend",Ce)}};typeof((be=ae.xr)==null?void 0:be.addEventListener)=="function"&&Xe.connect(),$.set({xr:Xe})}if(ae.shadowMap){const ue=ae.shadowMap.enabled,Ce=ae.shadowMap.type;if(ae.shadowMap.enabled=!!w,Li.boo(w))ae.shadowMap.type=b0;else if(Li.str(w)){var P;const Xe={basic:Kw,percentage:zA,soft:b0,variance:ll};ae.shadowMap.type=(P=Xe[w])!=null?P:b0}else Li.obj(w)&&Object.assign(ae.shadowMap,w);(ue!==ae.shadowMap.enabled||Ce!==ae.shadowMap.type)&&(ae.shadowMap.needsUpdate=!0)}return Yn.enabled=!I,p||(ae.outputColorSpace=D?dl:is,ae.toneMapping=B?rc:LE),$.legacy!==I&&$.set(()=>({legacy:I})),$.linear!==D&&$.set(()=>({linear:D})),$.flat!==B&&$.set(()=>({flat:B})),x&&!Li.fun(x)&&!jR(x)&&!Li.equ(x,ae,qp)&&tc(ae,x),c=E,p=!0,y(),this},render(_){return!p&&!g&&this.configure(),g.then(()=>{EA.updateContainer(Oe.jsx(QG,{store:s,children:_,onCreated:c,rootElement:r}),l,null,()=>{})}),s},unmount(){sD(r)}}}function QG({store:r,children:e,onCreated:t,rootElement:n}){return Dv(()=>{const i=r.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),r.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),Oe.jsx(Db.Provider,{value:r,children:e})}function sD(r,e){const t=Md.get(r),n=t==null?void 0:t.fiber;if(n){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),EA.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var s,l,c,h;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(l=s.renderLists)==null||l.dispose==null||l.dispose(),(c=i.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(h=i.gl)!=null&&h.xr&&i.xr.disconnect(),BG(i.scene),Md.delete(r)}catch{}},500)})}}function $G(r,e,t){return Oe.jsx(e4,{children:r,container:e,state:t})}function e4({state:r={},children:e,container:t}){const{events:n,size:i,...s}=r,l=Ub(),[c]=pt.useState(()=>new Eb),[h]=pt.useState(()=>new et),p=Bb((_,y)=>{let x;if(y.camera&&i){const M=y.camera;x=_.viewport.getCurrentViewport(M,new Z,i),M!==_.camera&&ZB(M,i)}return{..._,...y,scene:t,raycaster:c,pointer:h,mouse:h,previousRoot:l,events:{..._.events,...y.events,...n},size:{..._.size,...i},viewport:{..._.viewport,...x},setEvents:M=>y.set(T=>({...T,events:{...T.events,...M}}))}}),g=pt.useMemo(()=>{const _=GB((x,M)=>({...s,set:x,get:M})),y=x=>_.setState(M=>p.current(x,M));return y(l.getState()),l.subscribe(y),_},[l,t]);return Oe.jsx(Oe.Fragment,{children:EA.createPortal(Oe.jsx(Db.Provider,{value:g,children:e}),g,null)})}const t4=new Set,n4=new Set,i4=new Set;function l1(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function N0(r,e){switch(r){case"before":return l1(t4,e);case"after":return l1(n4,e);case"tail":return l1(i4,e)}}let c1,u1;function eE(r,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),c1=e.internal.subscribers;for(let i=0;i<c1.length;i++)u1=c1[i],u1.ref.current(u1.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let bA=!1,tE=!1,f1,$R,Jp;function rD(r){$R=requestAnimationFrame(rD),bA=!0,f1=0,N0("before",r),tE=!0;for(const t of Md.values()){var e;Jp=t.store.getState(),Jp.internal.active&&(Jp.frameloop==="always"||Jp.internal.frames>0)&&!((e=Jp.gl.xr)!=null&&e.isPresenting)&&(f1+=eE(r,Jp))}if(tE=!1,N0("after",r),f1===0)return N0("tail",r),bA=!1,cancelAnimationFrame($R)}function nE(r,e=1){var t;if(!r)return Md.forEach(n=>nE(n.store.getState(),e));(t=r.gl.xr)!=null&&t.isPresenting||!r.internal.active||r.frameloop==="never"||(e>1?r.internal.frames=Math.min(60,r.internal.frames+e):tE?r.internal.frames=2:r.internal.frames=1,bA||(bA=!0,requestAnimationFrame(rD)))}function ew(r,e=!0,t,n){if(e&&N0("before",r),t)eE(r,t,n);else for(const i of Md.values())eE(r,i.store.getState());e&&N0("after",r)}const h1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function a4(r){const{handlePointer:e}=PG(r);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(h1).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=r.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{const{set:n,events:i}=r.getState();if(i.disconnect==null||i.disconnect(),n(s=>({events:{...s.events,connected:t}})),i.handlers)for(const s in i.handlers){const l=i.handlers[s],[c,h]=h1[s];t.addEventListener(c,l,{passive:h})}},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){if(n.handlers)for(const i in n.handlers){const s=n.handlers[i],[l]=h1[i];n.connected.removeEventListener(l,s)}t(i=>({events:{...i.events,connected:void 0}}))}}}}function tw(r,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>r(...n),e)}}function s4({debounce:r,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,l]=pt.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=pt.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),h=r?typeof r=="number"?r:r.scroll:null,p=r?typeof r=="number"?r:r.resize:null,g=pt.useRef(!1);pt.useEffect(()=>(g.current=!0,()=>void(g.current=!1)));const[_,y,x]=pt.useMemo(()=>{const E=()=>{if(!c.current.element)return;const{left:w,top:D,width:B,height:I,bottom:L,right:F,x:H,y:U}=c.current.element.getBoundingClientRect(),N={left:w,top:D,width:B,height:I,bottom:L,right:F,x:H,y:U};c.current.element instanceof HTMLElement&&n&&(N.height=c.current.element.offsetHeight,N.width=c.current.element.offsetWidth),Object.freeze(N),g.current&&!c4(c.current.lastBounds,N)&&l(c.current.lastBounds=N)};return[E,p?tw(E,p):E,h?tw(E,h):E]},[l,n,h,p]);function M(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(E=>E.removeEventListener("scroll",x,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function T(){c.current.element&&(c.current.resizeObserver=new i(x),c.current.resizeObserver.observe(c.current.element),e&&c.current.scrollContainers&&c.current.scrollContainers.forEach(E=>E.addEventListener("scroll",x,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const b=E=>{!E||E===c.current.element||(M(),c.current.element=E,c.current.scrollContainers=oD(E),T())};return o4(x,!!e),r4(y),pt.useEffect(()=>{M(),T()},[e,x,y]),pt.useEffect(()=>M,[]),[b,s,_]}function r4(r){pt.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function o4(r,e){pt.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function oD(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(r);return[t,n,i].some(s=>s==="auto"||s==="scroll")&&e.push(r),[...e,...oD(r.parentElement)]}const l4=["x","y","top","bottom","left","right","width","height"],c4=(r,e)=>l4.every(t=>r[t]===e[t]);function u4({ref:r,children:e,fallback:t,resize:n,style:i,gl:s,events:l=a4,eventSource:c,eventPrefix:h,shadows:p,linear:g,flat:_,legacy:y,orthographic:x,frameloop:M,dpr:T,performance:b,raycaster:E,camera:w,scene:D,onPointerMissed:B,onCreated:I,...L}){pt.useMemo(()=>tD($H),[]);const F=TG(),[H,U]=s4({scroll:!0,debounce:{scroll:50,resize:0},...n}),N=pt.useRef(null),Y=pt.useRef(null);pt.useImperativeHandle(r,()=>N.current);const ee=Bb(B),[$,ae]=pt.useState(!1),[me,Q]=pt.useState(!1);if($)throw $;if(me)throw me;const he=pt.useRef(null);Dv(()=>{const be=N.current;if(U.width>0&&U.height>0&&be){he.current||(he.current=ZG(be));async function P(){await he.current.configure({gl:s,scene:D,events:l,shadows:p,linear:g,flat:_,legacy:y,orthographic:x,frameloop:M,dpr:T,performance:b,raycaster:E,camera:w,size:U,onPointerMissed:(...ue)=>ee.current==null?void 0:ee.current(...ue),onCreated:ue=>{ue.events.connect==null||ue.events.connect(c?EG(c)?c.current:c:Y.current),h&&ue.setEvents({compute:(Ce,Xe)=>{const re=Ce[h+"X"],Ne=Ce[h+"Y"];Xe.pointer.set(re/Xe.size.width*2-1,-(Ne/Xe.size.height)*2+1),Xe.raycaster.setFromCamera(Xe.pointer,Xe.camera)}}),I==null||I(ue)}}),he.current.render(Oe.jsx(F,{children:Oe.jsx(RG,{set:Q,children:Oe.jsx(pt.Suspense,{fallback:Oe.jsx(CG,{set:ae}),children:e??null})})}))}P()}}),pt.useEffect(()=>{const be=N.current;if(be)return()=>sD(be)},[]);const oe=c?"none":"auto";return Oe.jsx("div",{ref:Y,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:oe,...i},...L,children:Oe.jsx("div",{ref:H,style:{width:"100%",height:"100%"},children:Oe.jsx("canvas",{ref:N,style:{display:"block"},children:t})})})}function lD(r){return Oe.jsx(YB,{children:Oe.jsx(u4,{...r})})}const Lb=parseInt(gv.replace(/\D+/g,""));function nw(r,e){if(e===C2)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),r;if(e===vA||e===XE){let t=r.getIndex();if(t===null){const l=[],c=r.getAttribute("position");if(c!==void 0){for(let h=0;h<c.count;h++)l.push(h);r.setIndex(l),t=r.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const n=t.count-2,i=[];if(t)if(e===vA)for(let l=1;l<=n;l++)i.push(t.getX(0)),i.push(t.getX(l)),i.push(t.getX(l+1));else for(let l=0;l<n;l++)l%2===0?(i.push(t.getX(l)),i.push(t.getX(l+1)),i.push(t.getX(l+2))):(i.push(t.getX(l+2)),i.push(t.getX(l+1)),i.push(t.getX(l)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=r.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),r}var yo=Uint8Array,df=Uint16Array,iE=Uint32Array,cD=new yo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),uD=new yo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),f4=new yo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),fD=function(r,e){for(var t=new df(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new iE(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return[t,i]},hD=fD(cD,2),dD=hD[0],h4=hD[1];dD[28]=258,h4[258]=28;var d4=fD(uD,0),p4=d4[0],aE=new df(32768);for(var Ui=0;Ui<32768;++Ui){var lf=(Ui&43690)>>>1|(Ui&21845)<<1;lf=(lf&52428)>>>2|(lf&13107)<<2,lf=(lf&61680)>>>4|(lf&3855)<<4,aE[Ui]=((lf&65280)>>>8|(lf&255)<<8)>>>1}var L0=function(r,e,t){for(var n=r.length,i=0,s=new df(e);i<n;++i)++s[r[i]-1];var l=new df(e);for(i=0;i<e;++i)l[i]=l[i-1]+s[i-1]<<1;var c;if(t){c=new df(1<<e);var h=15-e;for(i=0;i<n;++i)if(r[i])for(var p=i<<4|r[i],g=e-r[i],_=l[r[i]-1]++<<g,y=_|(1<<g)-1;_<=y;++_)c[aE[_]>>>h]=p}else for(c=new df(n),i=0;i<n;++i)r[i]&&(c[i]=aE[l[r[i]-1]++]>>>15-r[i]);return c},Uv=new yo(288);for(var Ui=0;Ui<144;++Ui)Uv[Ui]=8;for(var Ui=144;Ui<256;++Ui)Uv[Ui]=9;for(var Ui=256;Ui<280;++Ui)Uv[Ui]=7;for(var Ui=280;Ui<288;++Ui)Uv[Ui]=8;var pD=new yo(32);for(var Ui=0;Ui<32;++Ui)pD[Ui]=5;var m4=L0(Uv,9,1),g4=L0(pD,5,1),d1=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},rl=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},p1=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},v4=function(r){return(r/8|0)+(r&7&&1)},_4=function(r,e,t){(t==null||t>r.length)&&(t=r.length);var n=new(r instanceof df?df:r instanceof iE?iE:yo)(t-e);return n.set(r.subarray(e,t)),n},y4=function(r,e,t){var n=r.length;if(!n||t&&!t.l&&n<5)return e||new yo(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new yo(n*3));var l=function(Be){var Ve=e.length;if(Be>Ve){var tt=new yo(Math.max(Ve*2,Be));tt.set(e),e=tt}},c=t.f||0,h=t.p||0,p=t.b||0,g=t.l,_=t.d,y=t.m,x=t.n,M=n*8;do{if(!g){t.f=c=rl(r,h,1);var T=rl(r,h+1,3);if(h+=3,T)if(T==1)g=m4,_=g4,y=9,x=5;else if(T==2){var D=rl(r,h,31)+257,B=rl(r,h+10,15)+4,I=D+rl(r,h+5,31)+1;h+=14;for(var L=new yo(I),F=new yo(19),H=0;H<B;++H)F[f4[H]]=rl(r,h+H*3,7);h+=B*3;for(var U=d1(F),N=(1<<U)-1,Y=L0(F,U,1),H=0;H<I;){var ee=Y[rl(r,h,N)];h+=ee&15;var b=ee>>>4;if(b<16)L[H++]=b;else{var $=0,ae=0;for(b==16?(ae=3+rl(r,h,3),h+=2,$=L[H-1]):b==17?(ae=3+rl(r,h,7),h+=3):b==18&&(ae=11+rl(r,h,127),h+=7);ae--;)L[H++]=$}}var me=L.subarray(0,D),Q=L.subarray(D);y=d1(me),x=d1(Q),g=L0(me,y,1),_=L0(Q,x,1)}else throw"invalid block type";else{var b=v4(h)+4,E=r[b-4]|r[b-3]<<8,w=b+E;if(w>n){if(s)throw"unexpected EOF";break}i&&l(p+E),e.set(r.subarray(b,w),p),t.b=p+=E,t.p=h=w*8;continue}if(h>M){if(s)throw"unexpected EOF";break}}i&&l(p+131072);for(var he=(1<<y)-1,oe=(1<<x)-1,be=h;;be=h){var $=g[p1(r,h)&he],P=$>>>4;if(h+=$&15,h>M){if(s)throw"unexpected EOF";break}if(!$)throw"invalid length/literal";if(P<256)e[p++]=P;else if(P==256){be=h,g=null;break}else{var ue=P-254;if(P>264){var H=P-257,Ce=cD[H];ue=rl(r,h,(1<<Ce)-1)+dD[H],h+=Ce}var Xe=_[p1(r,h)&oe],re=Xe>>>4;if(!Xe)throw"invalid distance";h+=Xe&15;var Q=p4[re];if(re>3){var Ce=uD[re];Q+=p1(r,h)&(1<<Ce)-1,h+=Ce}if(h>M){if(s)throw"unexpected EOF";break}i&&l(p+131072);for(var Ne=p+ue;p<Ne;p+=4)e[p]=e[p-Q],e[p+1]=e[p+1-Q],e[p+2]=e[p+2-Q],e[p+3]=e[p+3-Q];p=Ne}}t.l=g,t.p=be,t.b=p,g&&(c=1,t.m=y,t.d=_,t.n=x)}while(!c);return p==e.length?e:_4(e,0,p)},x4=new yo(0),A4=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function nx(r,e){return y4((A4(r),r.subarray(2,-4)),e)}var S4=typeof TextDecoder<"u"&&new TextDecoder,M4=0;try{S4.decode(x4,{stream:!0}),M4=1}catch{}const E4=r=>r&&r.isCubeTexture;class b4 extends Pi{constructor(e,t){var n,i;const s=E4(e),c=((i=s?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?i:1024)/4,h=Math.floor(Math.log2(c)),p=Math.pow(2,h),g=3*Math.max(p,16*7),_=4*p,y=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/g}`,`#define CUBEUV_TEXEL_HEIGHT ${1/_}`,`#define CUBEUV_MAX_MIP ${h}.0`],x=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,M=y.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${Lb>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,T={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},b=new Rv(1,16),E=new Ar({uniforms:T,fragmentShader:M,vertexShader:x,side:_o});super(b,E)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var T4=Object.defineProperty,C4=(r,e,t)=>e in r?T4(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,R4=(r,e,t)=>(C4(r,e+"",t),t);class w4{constructor(){R4(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,l=i.length;s<l;s++)i[s].call(this,e);e.target=null}}}var B4=Object.defineProperty,D4=(r,e,t)=>e in r?B4(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,an=(r,e,t)=>(D4(r,typeof e!="symbol"?e+"":e,t),t);const ix=new Rd,iw=new $c,U4=Math.cos(70*(Math.PI/180)),aw=(r,e)=>(r%e+e)%e;let O4=class extends w4{constructor(e,t){super(),an(this,"object"),an(this,"domElement"),an(this,"enabled",!0),an(this,"target",new Z),an(this,"minDistance",0),an(this,"maxDistance",1/0),an(this,"minZoom",0),an(this,"maxZoom",1/0),an(this,"minPolarAngle",0),an(this,"maxPolarAngle",Math.PI),an(this,"minAzimuthAngle",-1/0),an(this,"maxAzimuthAngle",1/0),an(this,"enableDamping",!1),an(this,"dampingFactor",.05),an(this,"enableZoom",!0),an(this,"zoomSpeed",1),an(this,"enableRotate",!0),an(this,"rotateSpeed",1),an(this,"enablePan",!0),an(this,"panSpeed",1),an(this,"screenSpacePanning",!0),an(this,"keyPanSpeed",7),an(this,"zoomToCursor",!1),an(this,"autoRotate",!1),an(this,"autoRotateSpeed",2),an(this,"reverseOrbit",!1),an(this,"reverseHorizontalOrbit",!1),an(this,"reverseVerticalOrbit",!1),an(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),an(this,"mouseButtons",{LEFT:zh.ROTATE,MIDDLE:zh.DOLLY,RIGHT:zh.PAN}),an(this,"touches",{ONE:Hh.ROTATE,TWO:Hh.DOLLY_PAN}),an(this,"target0"),an(this,"position0"),an(this,"zoom0"),an(this,"_domElementKeyEvents",null),an(this,"getPolarAngle"),an(this,"getAzimuthalAngle"),an(this,"setPolarAngle"),an(this,"setAzimuthalAngle"),an(this,"getDistance"),an(this,"getZoomScale"),an(this,"listenToKeyEvents"),an(this,"stopListenToKeyEvents"),an(this,"saveState"),an(this,"reset"),an(this,"update"),an(this,"connect"),an(this,"dispose"),an(this,"dollyIn"),an(this,"dollyOut"),an(this,"getScale"),an(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>g.phi,this.getAzimuthalAngle=()=>g.theta,this.setPolarAngle=le=>{let Re=aw(le,2*Math.PI),rt=g.phi;rt<0&&(rt+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let ne=Math.abs(Re-rt);2*Math.PI-ne<ne&&(Re<rt?Re+=2*Math.PI:rt+=2*Math.PI),_.phi=Re-rt,n.update()},this.setAzimuthalAngle=le=>{let Re=aw(le,2*Math.PI),rt=g.theta;rt<0&&(rt+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let ne=Math.abs(Re-rt);2*Math.PI-ne<ne&&(Re<rt?Re+=2*Math.PI:rt+=2*Math.PI),_.theta=Re-rt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=le=>{le.addEventListener("keydown",lt),this._domElementKeyEvents=le},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",lt),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),h=c.NONE},this.update=(()=>{const le=new Z,Re=new Z(0,1,0),rt=new Ya().setFromUnitVectors(e.up,Re),ne=rt.clone().invert(),Me=new Z,Te=new Ya,Ge=2*Math.PI;return function(){const xt=n.object.position;rt.setFromUnitVectors(e.up,Re),ne.copy(rt).invert(),le.copy(xt).sub(n.target),le.applyQuaternion(rt),g.setFromVector3(le),n.autoRotate&&h===c.NONE&&ae(ee()),n.enableDamping?(g.theta+=_.theta*n.dampingFactor,g.phi+=_.phi*n.dampingFactor):(g.theta+=_.theta,g.phi+=_.phi);let Ft=n.minAzimuthAngle,rn=n.maxAzimuthAngle;isFinite(Ft)&&isFinite(rn)&&(Ft<-Math.PI?Ft+=Ge:Ft>Math.PI&&(Ft-=Ge),rn<-Math.PI?rn+=Ge:rn>Math.PI&&(rn-=Ge),Ft<=rn?g.theta=Math.max(Ft,Math.min(rn,g.theta)):g.theta=g.theta>(Ft+rn)/2?Math.max(Ft,g.theta):Math.min(rn,g.theta)),g.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,g.phi)),g.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(x,n.dampingFactor):n.target.add(x),n.zoomToCursor&&U||n.object.isOrthographicCamera?g.radius=Xe(g.radius):g.radius=Xe(g.radius*y),le.setFromSpherical(g),le.applyQuaternion(ne),xt.copy(n.target).add(le),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(_.theta*=1-n.dampingFactor,_.phi*=1-n.dampingFactor,x.multiplyScalar(1-n.dampingFactor)):(_.set(0,0,0),x.set(0,0,0));let Bn=!1;if(n.zoomToCursor&&U){let St=null;if(n.object instanceof sa&&n.object.isPerspectiveCamera){const Dt=le.length();St=Xe(Dt*y);const Zt=Dt-St;n.object.position.addScaledVector(F,Zt),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Dt=new Z(H.x,H.y,0);Dt.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/y)),n.object.updateProjectionMatrix(),Bn=!0;const Zt=new Z(H.x,H.y,0);Zt.unproject(n.object),n.object.position.sub(Zt).add(Dt),n.object.updateMatrixWorld(),St=le.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;St!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(St).add(n.object.position):(ix.origin.copy(n.object.position),ix.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(ix.direction))<U4?e.lookAt(n.target):(iw.setFromNormalAndCoplanarPoint(n.object.up,n.target),ix.intersectPlane(iw,n.target))))}else n.object instanceof lc&&n.object.isOrthographicCamera&&(Bn=y!==1,Bn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/y)),n.object.updateProjectionMatrix()));return y=1,U=!1,Bn||Me.distanceToSquared(n.object.position)>p||8*(1-Te.dot(n.object.quaternion))>p?(n.dispatchEvent(i),Me.copy(n.object.position),Te.copy(n.object.quaternion),Bn=!1,!0):!1}})(),this.connect=le=>{n.domElement=le,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",st),n.domElement.addEventListener("pointerdown",k),n.domElement.addEventListener("pointercancel",ze),n.domElement.addEventListener("wheel",_t)},this.dispose=()=>{var le,Re,rt,ne,Me,Te;n.domElement&&(n.domElement.style.touchAction="auto"),(le=n.domElement)==null||le.removeEventListener("contextmenu",st),(Re=n.domElement)==null||Re.removeEventListener("pointerdown",k),(rt=n.domElement)==null||rt.removeEventListener("pointercancel",ze),(ne=n.domElement)==null||ne.removeEventListener("wheel",_t),(Me=n.domElement)==null||Me.ownerDocument.removeEventListener("pointermove",xe),(Te=n.domElement)==null||Te.ownerDocument.removeEventListener("pointerup",ze),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",lt)};const n=this,i={type:"change"},s={type:"start"},l={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=c.NONE;const p=1e-6,g=new W1,_=new W1;let y=1;const x=new Z,M=new et,T=new et,b=new et,E=new et,w=new et,D=new et,B=new et,I=new et,L=new et,F=new Z,H=new et;let U=!1;const N=[],Y={};function ee(){return 2*Math.PI/60/60*n.autoRotateSpeed}function $(){return Math.pow(.95,n.zoomSpeed)}function ae(le){n.reverseOrbit||n.reverseHorizontalOrbit?_.theta+=le:_.theta-=le}function me(le){n.reverseOrbit||n.reverseVerticalOrbit?_.phi+=le:_.phi-=le}const Q=(()=>{const le=new Z;return function(rt,ne){le.setFromMatrixColumn(ne,0),le.multiplyScalar(-rt),x.add(le)}})(),he=(()=>{const le=new Z;return function(rt,ne){n.screenSpacePanning===!0?le.setFromMatrixColumn(ne,1):(le.setFromMatrixColumn(ne,0),le.crossVectors(n.object.up,le)),le.multiplyScalar(rt),x.add(le)}})(),oe=(()=>{const le=new Z;return function(rt,ne){const Me=n.domElement;if(Me&&n.object instanceof sa&&n.object.isPerspectiveCamera){const Te=n.object.position;le.copy(Te).sub(n.target);let Ge=le.length();Ge*=Math.tan(n.object.fov/2*Math.PI/180),Q(2*rt*Ge/Me.clientHeight,n.object.matrix),he(2*ne*Ge/Me.clientHeight,n.object.matrix)}else Me&&n.object instanceof lc&&n.object.isOrthographicCamera?(Q(rt*(n.object.right-n.object.left)/n.object.zoom/Me.clientWidth,n.object.matrix),he(ne*(n.object.top-n.object.bottom)/n.object.zoom/Me.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function be(le){n.object instanceof sa&&n.object.isPerspectiveCamera||n.object instanceof lc&&n.object.isOrthographicCamera?y=le:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function P(le){be(y/le)}function ue(le){be(y*le)}function Ce(le){if(!n.zoomToCursor||!n.domElement)return;U=!0;const Re=n.domElement.getBoundingClientRect(),rt=le.clientX-Re.left,ne=le.clientY-Re.top,Me=Re.width,Te=Re.height;H.x=rt/Me*2-1,H.y=-(ne/Te)*2+1,F.set(H.x,H.y,1).unproject(n.object).sub(n.object.position).normalize()}function Xe(le){return Math.max(n.minDistance,Math.min(n.maxDistance,le))}function re(le){M.set(le.clientX,le.clientY)}function Ne(le){Ce(le),B.set(le.clientX,le.clientY)}function Be(le){E.set(le.clientX,le.clientY)}function Ve(le){T.set(le.clientX,le.clientY),b.subVectors(T,M).multiplyScalar(n.rotateSpeed);const Re=n.domElement;Re&&(ae(2*Math.PI*b.x/Re.clientHeight),me(2*Math.PI*b.y/Re.clientHeight)),M.copy(T),n.update()}function tt(le){I.set(le.clientX,le.clientY),L.subVectors(I,B),L.y>0?P($()):L.y<0&&ue($()),B.copy(I),n.update()}function wt(le){w.set(le.clientX,le.clientY),D.subVectors(w,E).multiplyScalar(n.panSpeed),oe(D.x,D.y),E.copy(w),n.update()}function ht(le){Ce(le),le.deltaY<0?ue($()):le.deltaY>0&&P($()),n.update()}function Pt(le){let Re=!1;switch(le.code){case n.keys.UP:oe(0,n.keyPanSpeed),Re=!0;break;case n.keys.BOTTOM:oe(0,-n.keyPanSpeed),Re=!0;break;case n.keys.LEFT:oe(n.keyPanSpeed,0),Re=!0;break;case n.keys.RIGHT:oe(-n.keyPanSpeed,0),Re=!0;break}Re&&(le.preventDefault(),n.update())}function Je(){if(N.length==1)M.set(N[0].pageX,N[0].pageY);else{const le=.5*(N[0].pageX+N[1].pageX),Re=.5*(N[0].pageY+N[1].pageY);M.set(le,Re)}}function De(){if(N.length==1)E.set(N[0].pageX,N[0].pageY);else{const le=.5*(N[0].pageX+N[1].pageX),Re=.5*(N[0].pageY+N[1].pageY);E.set(le,Re)}}function j(){const le=N[0].pageX-N[1].pageX,Re=N[0].pageY-N[1].pageY,rt=Math.sqrt(le*le+Re*Re);B.set(0,rt)}function Mt(){n.enableZoom&&j(),n.enablePan&&De()}function $e(){n.enableZoom&&j(),n.enableRotate&&Je()}function pe(le){if(N.length==1)T.set(le.pageX,le.pageY);else{const rt=Et(le),ne=.5*(le.pageX+rt.x),Me=.5*(le.pageY+rt.y);T.set(ne,Me)}b.subVectors(T,M).multiplyScalar(n.rotateSpeed);const Re=n.domElement;Re&&(ae(2*Math.PI*b.x/Re.clientHeight),me(2*Math.PI*b.y/Re.clientHeight)),M.copy(T)}function at(le){if(N.length==1)w.set(le.pageX,le.pageY);else{const Re=Et(le),rt=.5*(le.pageX+Re.x),ne=.5*(le.pageY+Re.y);w.set(rt,ne)}D.subVectors(w,E).multiplyScalar(n.panSpeed),oe(D.x,D.y),E.copy(w)}function Lt(le){const Re=Et(le),rt=le.pageX-Re.x,ne=le.pageY-Re.y,Me=Math.sqrt(rt*rt+ne*ne);I.set(0,Me),L.set(0,Math.pow(I.y/B.y,n.zoomSpeed)),P(L.y),B.copy(I)}function ut(le){n.enableZoom&&Lt(le),n.enablePan&&at(le)}function W(le){n.enableZoom&&Lt(le),n.enableRotate&&pe(le)}function k(le){var Re,rt;n.enabled!==!1&&(N.length===0&&((Re=n.domElement)==null||Re.ownerDocument.addEventListener("pointermove",xe),(rt=n.domElement)==null||rt.ownerDocument.addEventListener("pointerup",ze)),vt(le),le.pointerType==="touch"?yt(le):Ye(le))}function xe(le){n.enabled!==!1&&(le.pointerType==="touch"?$t(le):ke(le))}function ze(le){var Re,rt,ne;Nt(le),N.length===0&&((Re=n.domElement)==null||Re.releasePointerCapture(le.pointerId),(rt=n.domElement)==null||rt.ownerDocument.removeEventListener("pointermove",xe),(ne=n.domElement)==null||ne.ownerDocument.removeEventListener("pointerup",ze)),n.dispatchEvent(l),h=c.NONE}function Ye(le){let Re;switch(le.button){case 0:Re=n.mouseButtons.LEFT;break;case 1:Re=n.mouseButtons.MIDDLE;break;case 2:Re=n.mouseButtons.RIGHT;break;default:Re=-1}switch(Re){case zh.DOLLY:if(n.enableZoom===!1)return;Ne(le),h=c.DOLLY;break;case zh.ROTATE:if(le.ctrlKey||le.metaKey||le.shiftKey){if(n.enablePan===!1)return;Be(le),h=c.PAN}else{if(n.enableRotate===!1)return;re(le),h=c.ROTATE}break;case zh.PAN:if(le.ctrlKey||le.metaKey||le.shiftKey){if(n.enableRotate===!1)return;re(le),h=c.ROTATE}else{if(n.enablePan===!1)return;Be(le),h=c.PAN}break;default:h=c.NONE}h!==c.NONE&&n.dispatchEvent(s)}function ke(le){if(n.enabled!==!1)switch(h){case c.ROTATE:if(n.enableRotate===!1)return;Ve(le);break;case c.DOLLY:if(n.enableZoom===!1)return;tt(le);break;case c.PAN:if(n.enablePan===!1)return;wt(le);break}}function _t(le){n.enabled===!1||n.enableZoom===!1||h!==c.NONE&&h!==c.ROTATE||(le.preventDefault(),n.dispatchEvent(s),ht(le),n.dispatchEvent(l))}function lt(le){n.enabled===!1||n.enablePan===!1||Pt(le)}function yt(le){switch(mt(le),N.length){case 1:switch(n.touches.ONE){case Hh.ROTATE:if(n.enableRotate===!1)return;Je(),h=c.TOUCH_ROTATE;break;case Hh.PAN:if(n.enablePan===!1)return;De(),h=c.TOUCH_PAN;break;default:h=c.NONE}break;case 2:switch(n.touches.TWO){case Hh.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Mt(),h=c.TOUCH_DOLLY_PAN;break;case Hh.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;$e(),h=c.TOUCH_DOLLY_ROTATE;break;default:h=c.NONE}break;default:h=c.NONE}h!==c.NONE&&n.dispatchEvent(s)}function $t(le){switch(mt(le),h){case c.TOUCH_ROTATE:if(n.enableRotate===!1)return;pe(le),n.update();break;case c.TOUCH_PAN:if(n.enablePan===!1)return;at(le),n.update();break;case c.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ut(le),n.update();break;case c.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;W(le),n.update();break;default:h=c.NONE}}function st(le){n.enabled!==!1&&le.preventDefault()}function vt(le){N.push(le)}function Nt(le){delete Y[le.pointerId];for(let Re=0;Re<N.length;Re++)if(N[Re].pointerId==le.pointerId){N.splice(Re,1);return}}function mt(le){let Re=Y[le.pointerId];Re===void 0&&(Re=new et,Y[le.pointerId]=Re),Re.set(le.pageX,le.pageY)}function Et(le){const Re=le.pointerId===N[0].pointerId?N[1]:N[0];return Y[Re.pointerId]}this.dollyIn=(le=$())=>{ue(le),n.update()},this.dollyOut=(le=$())=>{P(le),n.update()},this.getScale=()=>y,this.setScale=le=>{be(le),n.update()},this.getZoomScale=()=>$(),t!==void 0&&this.connect(t),this.update()}};function TA(r){if(typeof TextDecoder<"u")return new TextDecoder().decode(r);let e="";for(let t=0,n=r.length;t<n;t++)e+=String.fromCharCode(r[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const ed="srgb",lu="srgb-linear",sw=3001,N4=3e3;class Ib extends ls{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new z4(t)}),this.register(function(t){return new H4(t)}),this.register(function(t){return new j4(t)}),this.register(function(t){return new K4(t)}),this.register(function(t){return new Z4(t)}),this.register(function(t){return new V4(t)}),this.register(function(t){return new k4(t)}),this.register(function(t){return new X4(t)}),this.register(function(t){return new Y4(t)}),this.register(function(t){return new F4(t)}),this.register(function(t){return new q4(t)}),this.register(function(t){return new G4(t)}),this.register(function(t){return new W4(t)}),this.register(function(t){return new J4(t)}),this.register(function(t){return new I4(t)}),this.register(function(t){return new Q4(t)}),this.register(function(t){return new $4(t)})}load(e,t,n,i){const s=this;let l;if(this.resourcePath!=="")l=this.resourcePath;else if(this.path!==""){const p=yf.extractUrlBase(e);l=yf.resolveURL(p,this.path)}else l=yf.extractUrlBase(e);this.manager.itemStart(e);const c=function(p){i?i(p):console.error(p),s.manager.itemError(e),s.manager.itemEnd(e)},h=new rs(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(p){try{s.parse(p,l,function(g){t(g),s.manager.itemEnd(e)},c)}catch(g){c(g)}},n,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let s;const l={},c={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(TA(new Uint8Array(e.slice(0,4)))===mD){try{l[Gn.KHR_BINARY_GLTF]=new e5(e)}catch(g){i&&i(g);return}s=JSON.parse(l[Gn.KHR_BINARY_GLTF].content)}else s=JSON.parse(TA(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new d5(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const g=this.pluginCallbacks[p](h);g.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),c[g.name]=g,l[g.name]=!0}if(s.extensionsUsed)for(let p=0;p<s.extensionsUsed.length;++p){const g=s.extensionsUsed[p],_=s.extensionsRequired||[];switch(g){case Gn.KHR_MATERIALS_UNLIT:l[g]=new P4;break;case Gn.KHR_DRACO_MESH_COMPRESSION:l[g]=new t5(s,this.dracoLoader);break;case Gn.KHR_TEXTURE_TRANSFORM:l[g]=new n5;break;case Gn.KHR_MESH_QUANTIZATION:l[g]=new i5;break;default:_.indexOf(g)>=0&&c[g]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}h.setExtensions(l),h.setPlugins(c),h.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,s){n.parse(e,t,i,s)})}}function L4(){let r={};return{get:function(e){return r[e]},add:function(e,t){r[e]=t},remove:function(e){delete r[e]},removeAll:function(){r={}}}}const Gn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class I4{constructor(e){this.parser=e,this.name=Gn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const s=t.json,h=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let p;const g=new Bt(16777215);h.color!==void 0&&g.setRGB(h.color[0],h.color[1],h.color[2],lu);const _=h.range!==void 0?h.range:0;switch(h.type){case"directional":p=new _b(g),p.target.position.set(0,0,-1),p.add(p.target);break;case"point":p=new vb(g),p.distance=_;break;case"spot":p=new gb(g),p.distance=_,h.spot=h.spot||{},h.spot.innerConeAngle=h.spot.innerConeAngle!==void 0?h.spot.innerConeAngle:0,h.spot.outerConeAngle=h.spot.outerConeAngle!==void 0?h.spot.outerConeAngle:Math.PI/4,p.angle=h.spot.outerConeAngle,p.penumbra=1-h.spot.innerConeAngle/h.spot.outerConeAngle,p.target.position.set(0,0,-1),p.add(p.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+h.type)}return p.position.set(0,0,0),p.decay=2,Zc(p,h),h.intensity!==void 0&&(p.intensity=h.intensity),p.name=t.createUniqueName(h.name||"light_"+e),i=Promise.resolve(p),t.cache.add(n,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],c=(s.extensions&&s.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(h){return n._getNodeRef(t.cache,c,h)})}}class P4{constructor(){this.name=Gn.KHR_MATERIALS_UNLIT}getMaterialType(){return mr}extendParams(e,t,n){const i=[];e.color=new Bt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const l=s.baseColorFactor;e.color.setRGB(l[0],l[1],l[2],lu),e.opacity=l[3]}s.baseColorTexture!==void 0&&i.push(n.assignTexture(e,"map",s.baseColorTexture,ed))}return Promise.all(i)}}class F4{constructor(e){this.parser=e,this.name=Gn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class z4{constructor(e){this.parser=e,this.name=Gn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],l=i.extensions[this.name];if(l.clearcoatFactor!==void 0&&(t.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){const c=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new et(c,c)}return Promise.all(s)}}class H4{constructor(e){this.parser=e,this.name=Gn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class G4{constructor(e){this.parser=e,this.name=Gn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],l=i.extensions[this.name];return l.iridescenceFactor!==void 0&&(t.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(t.iridescenceIOR=l.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(s)}}class V4{constructor(e){this.parser=e,this.name=Gn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Bt(0,0,0),t.sheenRoughness=0,t.sheen=1;const l=i.extensions[this.name];if(l.sheenColorFactor!==void 0){const c=l.sheenColorFactor;t.sheenColor.setRGB(c[0],c[1],c[2],lu)}return l.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",l.sheenColorTexture,ed)),l.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(s)}}class k4{constructor(e){this.parser=e,this.name=Gn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],l=i.extensions[this.name];return l.transmissionFactor!==void 0&&(t.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(s)}}class X4{constructor(e){this.parser=e,this.name=Gn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],l=i.extensions[this.name];t.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||1/0;const c=l.attenuationColor||[1,1,1];return t.attenuationColor=new Bt().setRGB(c[0],c[1],c[2],lu),Promise.all(s)}}class Y4{constructor(e){this.parser=e,this.name=Gn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class q4{constructor(e){this.parser=e,this.name=Gn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],l=i.extensions[this.name];t.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",l.specularTexture));const c=l.specularColorFactor||[1,1,1];return t.specularColor=new Bt().setRGB(c[0],c[1],c[2],lu),l.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",l.specularColorTexture,ed)),Promise.all(s)}}class J4{constructor(e){this.parser=e,this.name=Gn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],l=i.extensions[this.name];return t.bumpScale=l.bumpFactor!==void 0?l.bumpFactor:1,l.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",l.bumpTexture)),Promise.all(s)}}class W4{constructor(e){this.parser=e,this.name=Gn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],l=i.extensions[this.name];return l.anisotropyStrength!==void 0&&(t.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(t.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",l.anisotropyTexture)),Promise.all(s)}}class j4{constructor(e){this.parser=e,this.name=Gn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,l)}}class K4{constructor(e){this.parser=e,this.name=Gn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const l=s.extensions[t],c=i.images[l.source];let h=n.textureLoader;if(c.uri){const p=n.options.manager.getHandler(c.uri);p!==null&&(h=p)}return this.detectSupport().then(function(p){if(p)return n.loadTextureImage(e,l.source,h);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Z4{constructor(e){this.parser=e,this.name=Gn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const l=s.extensions[t],c=i.images[l.source];let h=n.textureLoader;if(c.uri){const p=n.options.manager.getHandler(c.uri);p!==null&&(h=p)}return this.detectSupport().then(function(p){if(p)return n.loadTextureImage(e,l.source,h);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Q4{constructor(e){this.name=Gn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(c){const h=i.byteOffset||0,p=i.byteLength||0,g=i.count,_=i.byteStride,y=new Uint8Array(c,h,p);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(g,_,y,i.mode,i.filter).then(function(x){return x.buffer}):l.ready.then(function(){const x=new ArrayBuffer(g*_);return l.decodeGltfBuffer(new Uint8Array(x),g,_,y,i.mode,i.filter),x})})}else return null}}class $4{constructor(e){this.name=Gn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const i=t.meshes[n.mesh];for(const p of i.primitives)if(p.mode!==mo.TRIANGLES&&p.mode!==mo.TRIANGLE_STRIP&&p.mode!==mo.TRIANGLE_FAN&&p.mode!==void 0)return null;const l=n.extensions[this.name].attributes,c=[],h={};for(const p in l)c.push(this.parser.getDependency("accessor",l[p]).then(g=>(h[p]=g,h[p])));return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then(p=>{const g=p.pop(),_=g.isGroup?g.children:[g],y=p[0].count,x=[];for(const M of _){const T=new sn,b=new Z,E=new Ya,w=new Z(1,1,1),D=new $E(M.geometry,M.material,y);for(let B=0;B<y;B++)h.TRANSLATION&&b.fromBufferAttribute(h.TRANSLATION,B),h.ROTATION&&E.fromBufferAttribute(h.ROTATION,B),h.SCALE&&w.fromBufferAttribute(h.SCALE,B),D.setMatrixAt(B,T.compose(b,E,w));for(const B in h)if(B==="_COLOR_0"){const I=h[B];D.instanceColor=new vd(I.array,I.itemSize,I.normalized)}else B!=="TRANSLATION"&&B!=="ROTATION"&&B!=="SCALE"&&M.geometry.setAttribute(B,h[B]);Jn.prototype.copy.call(D,M),this.parser.assignFinalMaterial(D),x.push(D)}return g.isGroup?(g.clear(),g.add(...x),g):x[0]}))}}const mD="glTF",u0=12,rw={JSON:1313821514,BIN:5130562};class e5{constructor(e){this.name=Gn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,u0);if(this.header={magic:TA(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==mD)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-u0,i=new DataView(e,u0);let s=0;for(;s<n;){const l=i.getUint32(s,!0);s+=4;const c=i.getUint32(s,!0);if(s+=4,c===rw.JSON){const h=new Uint8Array(e,u0+s,l);this.content=TA(h)}else if(c===rw.BIN){const h=u0+s;this.body=e.slice(h,h+l)}s+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class t5{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Gn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,c={},h={},p={};for(const g in l){const _=sE[g]||g.toLowerCase();c[_]=l[g]}for(const g in e.attributes){const _=sE[g]||g.toLowerCase();if(l[g]!==void 0){const y=n.accessors[e.attributes[g]],x=om[y.componentType];p[_]=x.name,h[_]=y.normalized===!0}}return t.getDependency("bufferView",s).then(function(g){return new Promise(function(_,y){i.decodeDracoFile(g,function(x){for(const M in x.attributes){const T=x.attributes[M],b=h[M];b!==void 0&&(T.normalized=b)}_(x)},c,p,lu,y)})})}}class n5{constructor(){this.name=Gn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class i5{constructor(){this.name=Gn.KHR_MESH_QUANTIZATION}}class gD extends Lm{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let l=0;l!==i;l++)t[l]=n[s+l];return t}interpolate_(e,t,n,i){const s=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=c*2,p=c*3,g=i-t,_=(n-t)/g,y=_*_,x=y*_,M=e*p,T=M-p,b=-2*x+3*y,E=x-y,w=1-b,D=E-y+_;for(let B=0;B!==c;B++){const I=l[T+B+c],L=l[T+B+h]*g,F=l[M+B+c],H=l[M+B]*g;s[B]=w*I+D*L+b*F+E*H}return s}}const a5=new Ya;class s5 extends gD{interpolate_(e,t,n,i){const s=super.interpolate_(e,t,n,i);return a5.fromArray(s).normalize().toArray(s),s}}const mo={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},om={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ow={9728:Xa,9729:oi,9984:HA,9985:sm,9986:Wh,9987:xo},lw={33071:fa,33648:gm,10497:bf},m1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},sE={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Lb>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},cf={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},r5={CUBICSPLINE:void 0,LINEAR:ym,STEP:_m},g1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function o5(r){return r.DefaultMaterial===void 0&&(r.DefaultMaterial=new yd({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:hc})),r.DefaultMaterial}function Ih(r,e,t){for(const n in t.extensions)r[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Zc(r,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(r.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function l5(r,e,t){let n=!1,i=!1,s=!1;for(let p=0,g=e.length;p<g;p++){const _=e[p];if(_.POSITION!==void 0&&(n=!0),_.NORMAL!==void 0&&(i=!0),_.COLOR_0!==void 0&&(s=!0),n&&i&&s)break}if(!n&&!i&&!s)return Promise.resolve(r);const l=[],c=[],h=[];for(let p=0,g=e.length;p<g;p++){const _=e[p];if(n){const y=_.POSITION!==void 0?t.getDependency("accessor",_.POSITION):r.attributes.position;l.push(y)}if(i){const y=_.NORMAL!==void 0?t.getDependency("accessor",_.NORMAL):r.attributes.normal;c.push(y)}if(s){const y=_.COLOR_0!==void 0?t.getDependency("accessor",_.COLOR_0):r.attributes.color;h.push(y)}}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(h)]).then(function(p){const g=p[0],_=p[1],y=p[2];return n&&(r.morphAttributes.position=g),i&&(r.morphAttributes.normal=_),s&&(r.morphAttributes.color=y),r.morphTargetsRelative=!0,r})}function c5(r,e){if(r.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)r.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(r.morphTargetInfluences.length===t.length){r.morphTargetDictionary={};for(let n=0,i=t.length;n<i;n++)r.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function u5(r){let e;const t=r.extensions&&r.extensions[Gn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+v1(t.attributes):e=r.indices+":"+v1(r.attributes)+":"+r.mode,r.targets!==void 0)for(let n=0,i=r.targets.length;n<i;n++)e+=":"+v1(r.targets[n]);return e}function v1(r){let e="";const t=Object.keys(r).sort();for(let n=0,i=t.length;n<i;n++)e+=t[n]+":"+r[t[n]]+";";return e}function rE(r){switch(r){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function f5(r){return r.search(/\.jpe?g($|\?)/i)>0||r.search(/^data\:image\/jpeg/)===0?"image/jpeg":r.search(/\.webp($|\?)/i)>0||r.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const h5=new sn;class d5{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new L4,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||i&&s<98?this.textureLoader=new AB(this.options.manager):this.textureLoader=new wB(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new rs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(l){const c={scene:l[0][i.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:i.asset,parser:n,userData:{}};return Ih(s,c,i),Zc(c,i),Promise.all(n._invokeAll(function(h){return h.afterRoot&&h.afterRoot(c)})).then(function(){for(const h of c.scenes)h.updateMatrixWorld();e(c)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const l=t[i].joints;for(let c=0,h=l.length;c<h;c++)e[l[c]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const l=e[i];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(n[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),s=(l,c)=>{const h=this.associations.get(l);h!=null&&this.associations.set(c,h);for(const[p,g]of l.children.entries())s(g,c.children[p])};return s(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,l){return n.getDependency(e,l)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Gn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,l){n.load(yf.resolveURL(t.uri,i.path),s,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const i=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+i)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const l=m1[i.type],c=om[i.componentType],h=i.normalized===!0,p=new c(i.count*l);return Promise.resolve(new ti(p,l,h))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(l){const c=l[0],h=m1[i.type],p=om[i.componentType],g=p.BYTES_PER_ELEMENT,_=g*h,y=i.byteOffset||0,x=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,M=i.normalized===!0;let T,b;if(x&&x!==_){const E=Math.floor(y/x),w="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+E+":"+i.count;let D=t.cache.get(w);D||(T=new p(c,E*x,i.count*x/g),D=new Ev(T,x/g),t.cache.add(w,D)),b=new Tf(D,h,y%x/g,M)}else c===null?T=new p(i.count*h):T=new p(c,y,i.count*h),b=new ti(T,h,M);if(i.sparse!==void 0){const E=m1.SCALAR,w=om[i.sparse.indices.componentType],D=i.sparse.indices.byteOffset||0,B=i.sparse.values.byteOffset||0,I=new w(l[1],D,i.sparse.count*E),L=new p(l[2],B,i.sparse.count*h);c!==null&&(b=new ti(b.array.slice(),b.itemSize,b.normalized));for(let F=0,H=I.length;F<H;F++){const U=I[F];if(b.setX(U,L[F*h]),h>=2&&b.setY(U,L[F*h+1]),h>=3&&b.setZ(U,L[F*h+2]),h>=4&&b.setW(U,L[F*h+3]),h>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return b})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,l=t.images[s];let c=this.textureLoader;if(l.uri){const h=n.manager.getHandler(l.uri);h!==null&&(c=h)}return this.loadTextureImage(e,s,c)}loadTextureImage(e,t,n){const i=this,s=this.json,l=s.textures[e],c=s.images[t],h=(c.uri||c.bufferView)+":"+l.sampler;if(this.textureCache[h])return this.textureCache[h];const p=this.loadImageSource(t,n).then(function(g){g.flipY=!1,g.name=l.name||c.name||"",g.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(g.name=c.uri);const y=(s.samplers||{})[l.sampler]||{};return g.magFilter=ow[y.magFilter]||oi,g.minFilter=ow[y.minFilter]||xo,g.wrapS=lw[y.wrapS]||bf,g.wrapT=lw[y.wrapT]||bf,i.associations.set(g,{textures:e}),g}).catch(function(){return null});return this.textureCache[h]=p,p}loadImageSource(e,t){const n=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(_=>_.clone());const l=i.images[e],c=self.URL||self.webkitURL;let h=l.uri||"",p=!1;if(l.bufferView!==void 0)h=n.getDependency("bufferView",l.bufferView).then(function(_){p=!0;const y=new Blob([_],{type:l.mimeType});return h=c.createObjectURL(y),h});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const g=Promise.resolve(h).then(function(_){return new Promise(function(y,x){let M=y;t.isImageBitmapLoader===!0&&(M=function(T){const b=new di(T);b.needsUpdate=!0,y(b)}),t.load(yf.resolveURL(_,s.path),M,void 0,x)})}).then(function(_){return p===!0&&c.revokeObjectURL(h),Zc(_,l),_.userData.mimeType=l.mimeType||f5(l.uri),_}).catch(function(_){throw console.error("THREE.GLTFLoader: Couldn't load texture",h),_});return this.sourceCache[e]=g,g}assignTexture(e,t,n,i){const s=this;return this.getDependency("texture",n.index).then(function(l){if(!l)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(l=l.clone(),l.channel=n.texCoord),s.extensions[Gn.KHR_TEXTURE_TRANSFORM]){const c=n.extensions!==void 0?n.extensions[Gn.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const h=s.associations.get(l);l=s.extensions[Gn.KHR_TEXTURE_TRANSFORM].extendTexture(l,c),s.associations.set(l,h)}}return i!==void 0&&(typeof i=="number"&&(i=i===sw?ed:lu),"colorSpace"in l?l.colorSpace=i:l.encoding=i===ed?sw:N4),e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,l=t.attributes.normal===void 0;if(e.isPoints){const c="PointsMaterial:"+n.uuid;let h=this.cache.get(c);h||(h=new eS,Ra.prototype.copy.call(h,n),h.color.copy(n.color),h.map=n.map,h.sizeAttenuation=!1,this.cache.add(c,h)),n=h}else if(e.isLine){const c="LineBasicMaterial:"+n.uuid;let h=this.cache.get(c);h||(h=new Bs,Ra.prototype.copy.call(h,n),h.color.copy(n.color),h.map=n.map,this.cache.add(c,h)),n=h}if(i||s||l){let c="ClonedMaterial:"+n.uuid+":";i&&(c+="derivative-tangents:"),s&&(c+="vertex-colors:"),l&&(c+="flat-shading:");let h=this.cache.get(c);h||(h=n.clone(),s&&(h.vertexColors=!0),l&&(h.flatShading=!0),i&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(c,h),this.associations.set(h,this.associations.get(n))),n=h}e.material=n}getMaterialType(){return yd}loadMaterial(e){const t=this,n=this.json,i=this.extensions,s=n.materials[e];let l;const c={},h=s.extensions||{},p=[];if(h[Gn.KHR_MATERIALS_UNLIT]){const _=i[Gn.KHR_MATERIALS_UNLIT];l=_.getMaterialType(),p.push(_.extendParams(c,s,t))}else{const _=s.pbrMetallicRoughness||{};if(c.color=new Bt(1,1,1),c.opacity=1,Array.isArray(_.baseColorFactor)){const y=_.baseColorFactor;c.color.setRGB(y[0],y[1],y[2],lu),c.opacity=y[3]}_.baseColorTexture!==void 0&&p.push(t.assignTexture(c,"map",_.baseColorTexture,ed)),c.metalness=_.metallicFactor!==void 0?_.metallicFactor:1,c.roughness=_.roughnessFactor!==void 0?_.roughnessFactor:1,_.metallicRoughnessTexture!==void 0&&(p.push(t.assignTexture(c,"metalnessMap",_.metallicRoughnessTexture)),p.push(t.assignTexture(c,"roughnessMap",_.metallicRoughnessTexture))),l=this._invokeOne(function(y){return y.getMaterialType&&y.getMaterialType(e)}),p.push(Promise.all(this._invokeAll(function(y){return y.extendMaterialParams&&y.extendMaterialParams(e,c)})))}s.doubleSided===!0&&(c.side=_o);const g=s.alphaMode||g1.OPAQUE;if(g===g1.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,g===g1.MASK&&(c.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&l!==mr&&(p.push(t.assignTexture(c,"normalMap",s.normalTexture)),c.normalScale=new et(1,1),s.normalTexture.scale!==void 0)){const _=s.normalTexture.scale;c.normalScale.set(_,_)}if(s.occlusionTexture!==void 0&&l!==mr&&(p.push(t.assignTexture(c,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&l!==mr){const _=s.emissiveFactor;c.emissive=new Bt().setRGB(_[0],_[1],_[2],lu)}return s.emissiveTexture!==void 0&&l!==mr&&p.push(t.assignTexture(c,"emissiveMap",s.emissiveTexture,ed)),Promise.all(p).then(function(){const _=new l(c);return s.name&&(_.name=s.name),Zc(_,s),t.associations.set(_,{materials:e}),s.extensions&&Ih(i,_,s),_})}createUniqueName(e){const t=Kn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function s(c){return n[Gn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,t).then(function(h){return cw(h,c,t)})}const l=[];for(let c=0,h=e.length;c<h;c++){const p=e[c],g=u5(p),_=i[g];if(_)l.push(_.promise);else{let y;p.extensions&&p.extensions[Gn.KHR_DRACO_MESH_COMPRESSION]?y=s(p):y=cw(new Sn,p,t),i[g]={primitive:p,promise:y},l.push(y)}}return Promise.all(l)}loadMesh(e){const t=this,n=this.json,i=this.extensions,s=n.meshes[e],l=s.primitives,c=[];for(let h=0,p=l.length;h<p;h++){const g=l[h].material===void 0?o5(this.cache):this.getDependency("material",l[h].material);c.push(g)}return c.push(t.loadGeometries(l)),Promise.all(c).then(function(h){const p=h.slice(0,h.length-1),g=h[h.length-1],_=[];for(let x=0,M=g.length;x<M;x++){const T=g[x],b=l[x];let E;const w=p[x];if(b.mode===mo.TRIANGLES||b.mode===mo.TRIANGLE_STRIP||b.mode===mo.TRIANGLE_FAN||b.mode===void 0)E=s.isSkinnedMesh===!0?new QE(T,w):new Pi(T,w),E.isSkinnedMesh===!0&&E.normalizeSkinWeights(),b.mode===mo.TRIANGLE_STRIP?E.geometry=nw(E.geometry,XE):b.mode===mo.TRIANGLE_FAN&&(E.geometry=nw(E.geometry,vA));else if(b.mode===mo.LINES)E=new pl(T,w);else if(b.mode===mo.LINE_STRIP)E=new uu(T,w);else if(b.mode===mo.LINE_LOOP)E=new eb(T,w);else if(b.mode===mo.POINTS)E=new tb(T,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(E.geometry.morphAttributes).length>0&&c5(E,s),E.name=t.createUniqueName(s.name||"mesh_"+e),Zc(E,s),b.extensions&&Ih(i,E,b),t.assignFinalMaterial(E),_.push(E)}for(let x=0,M=_.length;x<M;x++)t.associations.set(_[x],{meshes:e,primitives:x});if(_.length===1)return s.extensions&&Ih(i,_[0],s),_[0];const y=new au;s.extensions&&Ih(i,y,s),t.associations.set(y,{meshes:e});for(let x=0,M=_.length;x<M;x++)y.add(_[x]);return y})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new sa(JE.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(t=new lc(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Zc(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,s=t.joints.length;i<s;i++)n.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const s=i.pop(),l=i,c=[],h=[];for(let p=0,g=l.length;p<g;p++){const _=l[p];if(_){c.push(_);const y=new sn;s!==null&&y.fromArray(s.array,p*16),h.push(y)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[p])}return new bv(c,h)})}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,l=[],c=[],h=[],p=[],g=[];for(let _=0,y=i.channels.length;_<y;_++){const x=i.channels[_],M=i.samplers[x.sampler],T=x.target,b=T.node,E=i.parameters!==void 0?i.parameters[M.input]:M.input,w=i.parameters!==void 0?i.parameters[M.output]:M.output;T.node!==void 0&&(l.push(this.getDependency("node",b)),c.push(this.getDependency("accessor",E)),h.push(this.getDependency("accessor",w)),p.push(M),g.push(T))}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(h),Promise.all(p),Promise.all(g)]).then(function(_){const y=_[0],x=_[1],M=_[2],T=_[3],b=_[4],E=[];for(let w=0,D=y.length;w<D;w++){const B=y[w],I=x[w],L=M[w],F=T[w],H=b[w];if(B===void 0)continue;B.updateMatrix&&B.updateMatrix();const U=n._createAnimationTracks(B,I,L,F,H);if(U)for(let N=0;N<U.length;N++)E.push(U[N])}return new Mm(s,void 0,E)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(s){const l=n._getNodeRef(n.meshCache,i.mesh,s);return i.weights!==void 0&&l.traverse(function(c){if(c.isMesh)for(let h=0,p=i.weights.length;h<p;h++)c.morphTargetInfluences[h]=i.weights[h]}),l})}loadNode(e){const t=this.json,n=this,i=t.nodes[e],s=n._loadNodeShallow(e),l=[],c=i.children||[];for(let p=0,g=c.length;p<g;p++)l.push(n.getDependency("node",c[p]));const h=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([s,Promise.all(l),h]).then(function(p){const g=p[0],_=p[1],y=p[2];y!==null&&g.traverse(function(x){x.isSkinnedMesh&&x.bind(y,h5)});for(let x=0,M=_.length;x<M;x++)g.add(_[x]);return g})}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],l=s.name?i.createUniqueName(s.name):"",c=[],h=i._invokeOne(function(p){return p.createNodeMesh&&p.createNodeMesh(e)});return h&&c.push(h),s.camera!==void 0&&c.push(i.getDependency("camera",s.camera).then(function(p){return i._getNodeRef(i.cameraCache,s.camera,p)})),i._invokeAll(function(p){return p.createNodeAttachment&&p.createNodeAttachment(e)}).forEach(function(p){c.push(p)}),this.nodeCache[e]=Promise.all(c).then(function(p){let g;if(s.isBone===!0?g=new $A:p.length>1?g=new au:p.length===1?g=p[0]:g=new Jn,g!==p[0])for(let _=0,y=p.length;_<y;_++)g.add(p[_]);if(s.name&&(g.userData.name=s.name,g.name=l),Zc(g,s),s.extensions&&Ih(n,g,s),s.matrix!==void 0){const _=new sn;_.fromArray(s.matrix),g.applyMatrix4(_)}else s.translation!==void 0&&g.position.fromArray(s.translation),s.rotation!==void 0&&g.quaternion.fromArray(s.rotation),s.scale!==void 0&&g.scale.fromArray(s.scale);return i.associations.has(g)||i.associations.set(g,{}),i.associations.get(g).nodes=e,g}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,s=new au;n.name&&(s.name=i.createUniqueName(n.name)),Zc(s,n),n.extensions&&Ih(t,s,n);const l=n.nodes||[],c=[];for(let h=0,p=l.length;h<p;h++)c.push(i.getDependency("node",l[h]));return Promise.all(c).then(function(h){for(let g=0,_=h.length;g<_;g++)s.add(h[g]);const p=g=>{const _=new Map;for(const[y,x]of i.associations)(y instanceof Ra||y instanceof di)&&_.set(y,x);return g.traverse(y=>{const x=i.associations.get(y);x!=null&&_.set(y,x)}),_};return i.associations=p(s),s})}_createAnimationTracks(e,t,n,i,s){const l=[],c=e.name?e.name:e.uuid,h=[];cf[s.path]===cf.weights?e.traverse(function(y){y.morphTargetInfluences&&h.push(y.name?y.name:y.uuid)}):h.push(c);let p;switch(cf[s.path]){case cf.weights:p=xd;break;case cf.rotation:p=Ad;break;case cf.position:case cf.scale:p=Sd;break;default:switch(n.itemSize){case 1:p=xd;break;case 2:case 3:default:p=Sd;break}break}const g=i.interpolation!==void 0?r5[i.interpolation]:ym,_=this._getArrayFromAccessor(n);for(let y=0,x=h.length;y<x;y++){const M=new p(h[y]+"."+cf[s.path],t.array,_,g);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(M),l.push(M)}return l}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=rE(t.constructor),i=new Float32Array(t.length);for(let s=0,l=t.length;s<l;s++)i[s]=t[s]*n;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const i=this instanceof Ad?s5:gD;return new i(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function p5(r,e,t){const n=e.attributes,i=new Rs;if(n.POSITION!==void 0){const c=t.json.accessors[n.POSITION],h=c.min,p=c.max;if(h!==void 0&&p!==void 0){if(i.set(new Z(h[0],h[1],h[2]),new Z(p[0],p[1],p[2])),c.normalized){const g=rE(om[c.componentType]);i.min.multiplyScalar(g),i.max.multiplyScalar(g)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const c=new Z,h=new Z;for(let p=0,g=s.length;p<g;p++){const _=s[p];if(_.POSITION!==void 0){const y=t.json.accessors[_.POSITION],x=y.min,M=y.max;if(x!==void 0&&M!==void 0){if(h.setX(Math.max(Math.abs(x[0]),Math.abs(M[0]))),h.setY(Math.max(Math.abs(x[1]),Math.abs(M[1]))),h.setZ(Math.max(Math.abs(x[2]),Math.abs(M[2]))),y.normalized){const T=rE(om[y.componentType]);h.multiplyScalar(T)}c.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(c)}r.boundingBox=i;const l=new ss;i.getCenter(l.center),l.radius=i.min.distanceTo(i.max)/2,r.boundingSphere=l}function cw(r,e,t){const n=e.attributes,i=[];function s(l,c){return t.getDependency("accessor",l).then(function(h){r.setAttribute(c,h)})}for(const l in n){const c=sE[l]||l.toLowerCase();c in r.attributes||i.push(s(n[l],c))}if(e.indices!==void 0&&!r.index){const l=t.getDependency("accessor",e.indices).then(function(c){r.setIndex(c)});i.push(l)}return Zc(r,e),p5(r,e,t),Promise.all(i).then(function(){return e.targets!==void 0?l5(r,e.targets,t):r})}class m5 extends pb{constructor(e){super(e),this.type=ka}parse(e){const l=function(H,U){switch(H){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(U||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(U||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(U||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(U||""))}},g=`
`,_=function(H,U,N){U=U||1024;let ee=H.pos,$=-1,ae=0,me="",Q=String.fromCharCode.apply(null,new Uint16Array(H.subarray(ee,ee+128)));for(;0>($=Q.indexOf(g))&&ae<U&&ee<H.byteLength;)me+=Q,ae+=Q.length,ee+=128,Q+=String.fromCharCode.apply(null,new Uint16Array(H.subarray(ee,ee+128)));return-1<$?(H.pos+=ae+$+1,me+Q.slice(0,$)):!1},y=function(H){const U=/^#\?(\S+)/,N=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Y=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,ee=/^\s*FORMAT=(\S+)\s*$/,$=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,ae={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let me,Q;for((H.pos>=H.byteLength||!(me=_(H)))&&l(1,"no header found"),(Q=me.match(U))||l(3,"bad initial token"),ae.valid|=1,ae.programtype=Q[1],ae.string+=me+`
`;me=_(H),me!==!1;){if(ae.string+=me+`
`,me.charAt(0)==="#"){ae.comments+=me+`
`;continue}if((Q=me.match(N))&&(ae.gamma=parseFloat(Q[1])),(Q=me.match(Y))&&(ae.exposure=parseFloat(Q[1])),(Q=me.match(ee))&&(ae.valid|=2,ae.format=Q[1]),(Q=me.match($))&&(ae.valid|=4,ae.height=parseInt(Q[1],10),ae.width=parseInt(Q[2],10)),ae.valid&2&&ae.valid&4)break}return ae.valid&2||l(3,"missing format specifier"),ae.valid&4||l(3,"missing image size specifier"),ae},x=function(H,U,N){const Y=U;if(Y<8||Y>32767||H[0]!==2||H[1]!==2||H[2]&128)return new Uint8Array(H);Y!==(H[2]<<8|H[3])&&l(3,"wrong scanline width");const ee=new Uint8Array(4*U*N);ee.length||l(4,"unable to allocate buffer space");let $=0,ae=0;const me=4*Y,Q=new Uint8Array(4),he=new Uint8Array(me);let oe=N;for(;oe>0&&ae<H.byteLength;){ae+4>H.byteLength&&l(1),Q[0]=H[ae++],Q[1]=H[ae++],Q[2]=H[ae++],Q[3]=H[ae++],(Q[0]!=2||Q[1]!=2||(Q[2]<<8|Q[3])!=Y)&&l(3,"bad rgbe scanline format");let be=0,P;for(;be<me&&ae<H.byteLength;){P=H[ae++];const Ce=P>128;if(Ce&&(P-=128),(P===0||be+P>me)&&l(3,"bad scanline data"),Ce){const Xe=H[ae++];for(let re=0;re<P;re++)he[be++]=Xe}else he.set(H.subarray(ae,ae+P),be),be+=P,ae+=P}const ue=Y;for(let Ce=0;Ce<ue;Ce++){let Xe=0;ee[$]=he[Ce+Xe],Xe+=Y,ee[$+1]=he[Ce+Xe],Xe+=Y,ee[$+2]=he[Ce+Xe],Xe+=Y,ee[$+3]=he[Ce+Xe],$+=4}oe--}return ee},M=function(H,U,N,Y){const ee=H[U+3],$=Math.pow(2,ee-128)/255;N[Y+0]=H[U+0]*$,N[Y+1]=H[U+1]*$,N[Y+2]=H[U+2]*$,N[Y+3]=1},T=function(H,U,N,Y){const ee=H[U+3],$=Math.pow(2,ee-128)/255;N[Y+0]=Zh.toHalfFloat(Math.min(H[U+0]*$,65504)),N[Y+1]=Zh.toHalfFloat(Math.min(H[U+1]*$,65504)),N[Y+2]=Zh.toHalfFloat(Math.min(H[U+2]*$,65504)),N[Y+3]=Zh.toHalfFloat(1)},b=new Uint8Array(e);b.pos=0;const E=y(b),w=E.width,D=E.height,B=x(b.subarray(b.pos),w,D);let I,L,F;switch(this.type){case ji:F=B.length/4;const H=new Float32Array(F*4);for(let N=0;N<F;N++)M(B,N*4,H,N*4);I=H,L=ji;break;case ka:F=B.length/4;const U=new Uint16Array(F*4);for(let N=0;N<F;N++)T(B,N*4,U,N*4);I=U,L=ka;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:w,height:D,data:I,header:E.string,gamma:E.gamma,exposure:E.exposure,type:L}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(l,c){switch(l.type){case ji:case ka:"colorSpace"in l?l.colorSpace="srgb-linear":l.encoding=3e3,l.minFilter=oi,l.magFilter=oi,l.generateMipmaps=!1,l.flipY=!0;break}t&&t(l,c)}return super.load(e,s,n,i)}}const f0=Lb>=152;class g5 extends pb{constructor(e){super(e),this.type=ka}parse(e){const U=Math.pow(2.7182818,2.2);function N(G,X){for(var ce=0,ye=0;ye<65536;++ye)(ye==0||G[ye>>3]&1<<(ye&7))&&(X[ce++]=ye);for(var Ie=ce-1;ce<65536;)X[ce++]=0;return Ie}function Y(G){for(var X=0;X<16384;X++)G[X]={},G[X].len=0,G[X].lit=0,G[X].p=null}const ee={l:0,c:0,lc:0};function $(G,X,ce,ye,Ie){for(;ce<G;)X=X<<8|Et(ye,Ie),ce+=8;ce-=G,ee.l=X>>ce&(1<<G)-1,ee.c=X,ee.lc=ce}const ae=new Array(59);function me(G){for(var X=0;X<=58;++X)ae[X]=0;for(var X=0;X<65537;++X)ae[G[X]]+=1;for(var ce=0,X=58;X>0;--X){var ye=ce+ae[X]>>1;ae[X]=ce,ce=ye}for(var X=0;X<65537;++X){var Ie=G[X];Ie>0&&(G[X]=Ie|ae[Ie]++<<6)}}function Q(G,X,ce,ye,Ie,Le,nt){for(var qe=ce,V=0,K=0;Ie<=Le;Ie++){if(qe.value-ce.value>ye)return!1;$(6,V,K,G,qe);var se=ee.l;if(V=ee.c,K=ee.lc,nt[Ie]=se,se==63){if(qe.value-ce.value>ye)throw"Something wrong with hufUnpackEncTable";$(8,V,K,G,qe);var te=ee.l+6;if(V=ee.c,K=ee.lc,Ie+te>Le+1)throw"Something wrong with hufUnpackEncTable";for(;te--;)nt[Ie++]=0;Ie--}else if(se>=59){var te=se-59+2;if(Ie+te>Le+1)throw"Something wrong with hufUnpackEncTable";for(;te--;)nt[Ie++]=0;Ie--}}me(nt)}function he(G){return G&63}function oe(G){return G>>6}function be(G,X,ce,ye){for(;X<=ce;X++){var Ie=oe(G[X]),Le=he(G[X]);if(Ie>>Le)throw"Invalid table entry";if(Le>14){var nt=ye[Ie>>Le-14];if(nt.len)throw"Invalid table entry";if(nt.lit++,nt.p){var qe=nt.p;nt.p=new Array(nt.lit);for(var V=0;V<nt.lit-1;++V)nt.p[V]=qe[V]}else nt.p=new Array(1);nt.p[nt.lit-1]=X}else if(Le)for(var K=0,V=1<<14-Le;V>0;V--){var nt=ye[(Ie<<14-Le)+K];if(nt.len||nt.p)throw"Invalid table entry";nt.len=Le,nt.lit=X,K++}}return!0}const P={c:0,lc:0};function ue(G,X,ce,ye){G=G<<8|Et(ce,ye),X+=8,P.c=G,P.lc=X}const Ce={c:0,lc:0};function Xe(G,X,ce,ye,Ie,Le,nt,qe,V,K){if(G==X){ye<8&&(ue(ce,ye,Ie,nt),ce=P.c,ye=P.lc),ye-=8;var se=ce>>ye,se=new Uint8Array([se])[0];if(V.value+se>K)return!1;for(var te=qe[V.value-1];se-- >0;)qe[V.value++]=te}else if(V.value<K)qe[V.value++]=G;else return!1;Ce.c=ce,Ce.lc=ye}function re(G){return G&65535}function Ne(G){var X=re(G);return X>32767?X-65536:X}const Be={a:0,b:0};function Ve(G,X){var ce=Ne(G),ye=Ne(X),Ie=ye,Le=ce+(Ie&1)+(Ie>>1),nt=Le,qe=Le-Ie;Be.a=nt,Be.b=qe}function tt(G,X){var ce=re(G),ye=re(X),Ie=ce-(ye>>1)&65535,Le=ye+Ie-32768&65535;Be.a=Le,Be.b=Ie}function wt(G,X,ce,ye,Ie,Le,nt){for(var qe=nt<16384,V=ce>Ie?Ie:ce,K=1,se;K<=V;)K<<=1;for(K>>=1,se=K,K>>=1;K>=1;){for(var te=0,de=te+Le*(Ie-se),Ae=Le*K,He=Le*se,je=ye*K,Ke=ye*se,At,Tt,Ct,Wt;te<=de;te+=He){for(var Vt=te,Dn=te+ye*(ce-se);Vt<=Dn;Vt+=Ke){var Yt=Vt+je,zt=Vt+Ae,Gt=zt+je;qe?(Ve(G[Vt+X],G[zt+X]),At=Be.a,Ct=Be.b,Ve(G[Yt+X],G[Gt+X]),Tt=Be.a,Wt=Be.b,Ve(At,Tt),G[Vt+X]=Be.a,G[Yt+X]=Be.b,Ve(Ct,Wt),G[zt+X]=Be.a,G[Gt+X]=Be.b):(tt(G[Vt+X],G[zt+X]),At=Be.a,Ct=Be.b,tt(G[Yt+X],G[Gt+X]),Tt=Be.a,Wt=Be.b,tt(At,Tt),G[Vt+X]=Be.a,G[Yt+X]=Be.b,tt(Ct,Wt),G[zt+X]=Be.a,G[Gt+X]=Be.b)}if(ce&K){var zt=Vt+Ae;qe?Ve(G[Vt+X],G[zt+X]):tt(G[Vt+X],G[zt+X]),At=Be.a,G[zt+X]=Be.b,G[Vt+X]=At}}if(Ie&K)for(var Vt=te,Dn=te+ye*(ce-se);Vt<=Dn;Vt+=Ke){var Yt=Vt+je;qe?Ve(G[Vt+X],G[Yt+X]):tt(G[Vt+X],G[Yt+X]),At=Be.a,G[Yt+X]=Be.b,G[Vt+X]=At}se=K,K>>=1}return te}function ht(G,X,ce,ye,Ie,Le,nt,qe,V,K){for(var se=0,te=0,de=qe,Ae=Math.trunc(Ie.value+(Le+7)/8);Ie.value<Ae;)for(ue(se,te,ce,Ie),se=P.c,te=P.lc;te>=14;){var He=se>>te-14&16383,je=X[He];if(je.len)te-=je.len,Xe(je.lit,nt,se,te,ce,ye,Ie,V,K,de),se=Ce.c,te=Ce.lc;else{if(!je.p)throw"hufDecode issues";var Ke;for(Ke=0;Ke<je.lit;Ke++){for(var At=he(G[je.p[Ke]]);te<At&&Ie.value<Ae;)ue(se,te,ce,Ie),se=P.c,te=P.lc;if(te>=At&&oe(G[je.p[Ke]])==(se>>te-At&(1<<At)-1)){te-=At,Xe(je.p[Ke],nt,se,te,ce,ye,Ie,V,K,de),se=Ce.c,te=Ce.lc;break}}if(Ke==je.lit)throw"hufDecode issues"}}var Tt=8-Le&7;for(se>>=Tt,te-=Tt;te>0;){var je=X[se<<14-te&16383];if(je.len)te-=je.len,Xe(je.lit,nt,se,te,ce,ye,Ie,V,K,de),se=Ce.c,te=Ce.lc;else throw"hufDecode issues"}return!0}function Pt(G,X,ce,ye,Ie,Le){var nt={value:0},qe=ce.value,V=mt(X,ce),K=mt(X,ce);ce.value+=4;var se=mt(X,ce);if(ce.value+=4,V<0||V>=65537||K<0||K>=65537)throw"Something wrong with HUF_ENCSIZE";var te=new Array(65537),de=new Array(16384);Y(de);var Ae=ye-(ce.value-qe);if(Q(G,X,ce,Ae,V,K,te),se>8*(ye-(ce.value-qe)))throw"Something wrong with hufUncompress";be(te,V,K,de),ht(te,de,G,X,ce,se,K,Le,Ie,nt)}function Je(G,X,ce){for(var ye=0;ye<ce;++ye)X[ye]=G[X[ye]]}function De(G){for(var X=1;X<G.length;X++){var ce=G[X-1]+G[X]-128;G[X]=ce}}function j(G,X){for(var ce=0,ye=Math.floor((G.length+1)/2),Ie=0,Le=G.length-1;!(Ie>Le||(X[Ie++]=G[ce++],Ie>Le));)X[Ie++]=G[ye++]}function Mt(G){for(var X=G.byteLength,ce=new Array,ye=0,Ie=new DataView(G);X>0;){var Le=Ie.getInt8(ye++);if(Le<0){var nt=-Le;X-=nt+1;for(var qe=0;qe<nt;qe++)ce.push(Ie.getUint8(ye++))}else{var nt=Le;X-=2;for(var V=Ie.getUint8(ye++),qe=0;qe<nt+1;qe++)ce.push(V)}}return ce}function $e(G,X,ce,ye,Ie,Le){var Yt=new DataView(Le.buffer),nt=ce[G.idx[0]].width,qe=ce[G.idx[0]].height,V=3,K=Math.floor(nt/8),se=Math.ceil(nt/8),te=Math.ceil(qe/8),de=nt-(se-1)*8,Ae=qe-(te-1)*8,He={value:0},je=new Array(V),Ke=new Array(V),At=new Array(V),Tt=new Array(V),Ct=new Array(V);for(let mn=0;mn<V;++mn)Ct[mn]=X[G.idx[mn]],je[mn]=mn<1?0:je[mn-1]+se*te,Ke[mn]=new Float32Array(64),At[mn]=new Uint16Array(64),Tt[mn]=new Uint16Array(se*64);for(let mn=0;mn<te;++mn){var Wt=8;mn==te-1&&(Wt=Ae);var Vt=8;for(let xn=0;xn<se;++xn){xn==se-1&&(Vt=de);for(let ln=0;ln<V;++ln)At[ln].fill(0),At[ln][0]=Ie[je[ln]++],pe(He,ye,At[ln]),at(At[ln],Ke[ln]),Lt(Ke[ln]);ut(Ke);for(let ln=0;ln<V;++ln)W(Ke[ln],Tt[ln],xn*64)}let ni=0;for(let xn=0;xn<V;++xn){const ln=ce[G.idx[xn]].type;for(let vn=8*mn;vn<8*mn+Wt;++vn){ni=Ct[xn][vn];for(let bi=0;bi<K;++bi){const Qn=bi*64+(vn&7)*8;Yt.setUint16(ni+0*2*ln,Tt[xn][Qn+0],!0),Yt.setUint16(ni+1*2*ln,Tt[xn][Qn+1],!0),Yt.setUint16(ni+2*2*ln,Tt[xn][Qn+2],!0),Yt.setUint16(ni+3*2*ln,Tt[xn][Qn+3],!0),Yt.setUint16(ni+4*2*ln,Tt[xn][Qn+4],!0),Yt.setUint16(ni+5*2*ln,Tt[xn][Qn+5],!0),Yt.setUint16(ni+6*2*ln,Tt[xn][Qn+6],!0),Yt.setUint16(ni+7*2*ln,Tt[xn][Qn+7],!0),ni+=8*2*ln}}if(K!=se)for(let vn=8*mn;vn<8*mn+Wt;++vn){const bi=Ct[xn][vn]+8*K*2*ln,Qn=K*64+(vn&7)*8;for(let $n=0;$n<Vt;++$n)Yt.setUint16(bi+$n*2*ln,Tt[xn][Qn+$n],!0)}}}for(var Dn=new Uint16Array(nt),Yt=new DataView(Le.buffer),zt=0;zt<V;++zt){ce[G.idx[zt]].decoded=!0;var Gt=ce[G.idx[zt]].type;if(ce[zt].type==2)for(var vi=0;vi<qe;++vi){const mn=Ct[zt][vi];for(var on=0;on<nt;++on)Dn[on]=Yt.getUint16(mn+on*2*Gt,!0);for(var on=0;on<nt;++on)Yt.setFloat32(mn+on*2*Gt,Me(Dn[on]),!0)}}}function pe(G,X,ce){for(var ye,Ie=1;Ie<64;)ye=X[G.value],ye==65280?Ie=64:ye>>8==255?Ie+=ye&255:(ce[Ie]=ye,Ie++),G.value++}function at(G,X){X[0]=Me(G[0]),X[1]=Me(G[1]),X[2]=Me(G[5]),X[3]=Me(G[6]),X[4]=Me(G[14]),X[5]=Me(G[15]),X[6]=Me(G[27]),X[7]=Me(G[28]),X[8]=Me(G[2]),X[9]=Me(G[4]),X[10]=Me(G[7]),X[11]=Me(G[13]),X[12]=Me(G[16]),X[13]=Me(G[26]),X[14]=Me(G[29]),X[15]=Me(G[42]),X[16]=Me(G[3]),X[17]=Me(G[8]),X[18]=Me(G[12]),X[19]=Me(G[17]),X[20]=Me(G[25]),X[21]=Me(G[30]),X[22]=Me(G[41]),X[23]=Me(G[43]),X[24]=Me(G[9]),X[25]=Me(G[11]),X[26]=Me(G[18]),X[27]=Me(G[24]),X[28]=Me(G[31]),X[29]=Me(G[40]),X[30]=Me(G[44]),X[31]=Me(G[53]),X[32]=Me(G[10]),X[33]=Me(G[19]),X[34]=Me(G[23]),X[35]=Me(G[32]),X[36]=Me(G[39]),X[37]=Me(G[45]),X[38]=Me(G[52]),X[39]=Me(G[54]),X[40]=Me(G[20]),X[41]=Me(G[22]),X[42]=Me(G[33]),X[43]=Me(G[38]),X[44]=Me(G[46]),X[45]=Me(G[51]),X[46]=Me(G[55]),X[47]=Me(G[60]),X[48]=Me(G[21]),X[49]=Me(G[34]),X[50]=Me(G[37]),X[51]=Me(G[47]),X[52]=Me(G[50]),X[53]=Me(G[56]),X[54]=Me(G[59]),X[55]=Me(G[61]),X[56]=Me(G[35]),X[57]=Me(G[36]),X[58]=Me(G[48]),X[59]=Me(G[49]),X[60]=Me(G[57]),X[61]=Me(G[58]),X[62]=Me(G[62]),X[63]=Me(G[63])}function Lt(G){const X=.5*Math.cos(.7853975),ce=.5*Math.cos(3.14159/16),ye=.5*Math.cos(3.14159/8),Ie=.5*Math.cos(3*3.14159/16),Le=.5*Math.cos(5*3.14159/16),nt=.5*Math.cos(3*3.14159/8),qe=.5*Math.cos(7*3.14159/16);for(var V=new Array(4),K=new Array(4),se=new Array(4),te=new Array(4),de=0;de<8;++de){var Ae=de*8;V[0]=ye*G[Ae+2],V[1]=nt*G[Ae+2],V[2]=ye*G[Ae+6],V[3]=nt*G[Ae+6],K[0]=ce*G[Ae+1]+Ie*G[Ae+3]+Le*G[Ae+5]+qe*G[Ae+7],K[1]=Ie*G[Ae+1]-qe*G[Ae+3]-ce*G[Ae+5]-Le*G[Ae+7],K[2]=Le*G[Ae+1]-ce*G[Ae+3]+qe*G[Ae+5]+Ie*G[Ae+7],K[3]=qe*G[Ae+1]-Le*G[Ae+3]+Ie*G[Ae+5]-ce*G[Ae+7],se[0]=X*(G[Ae+0]+G[Ae+4]),se[3]=X*(G[Ae+0]-G[Ae+4]),se[1]=V[0]+V[3],se[2]=V[1]-V[2],te[0]=se[0]+se[1],te[1]=se[3]+se[2],te[2]=se[3]-se[2],te[3]=se[0]-se[1],G[Ae+0]=te[0]+K[0],G[Ae+1]=te[1]+K[1],G[Ae+2]=te[2]+K[2],G[Ae+3]=te[3]+K[3],G[Ae+4]=te[3]-K[3],G[Ae+5]=te[2]-K[2],G[Ae+6]=te[1]-K[1],G[Ae+7]=te[0]-K[0]}for(var He=0;He<8;++He)V[0]=ye*G[16+He],V[1]=nt*G[16+He],V[2]=ye*G[48+He],V[3]=nt*G[48+He],K[0]=ce*G[8+He]+Ie*G[24+He]+Le*G[40+He]+qe*G[56+He],K[1]=Ie*G[8+He]-qe*G[24+He]-ce*G[40+He]-Le*G[56+He],K[2]=Le*G[8+He]-ce*G[24+He]+qe*G[40+He]+Ie*G[56+He],K[3]=qe*G[8+He]-Le*G[24+He]+Ie*G[40+He]-ce*G[56+He],se[0]=X*(G[He]+G[32+He]),se[3]=X*(G[He]-G[32+He]),se[1]=V[0]+V[3],se[2]=V[1]-V[2],te[0]=se[0]+se[1],te[1]=se[3]+se[2],te[2]=se[3]-se[2],te[3]=se[0]-se[1],G[0+He]=te[0]+K[0],G[8+He]=te[1]+K[1],G[16+He]=te[2]+K[2],G[24+He]=te[3]+K[3],G[32+He]=te[3]-K[3],G[40+He]=te[2]-K[2],G[48+He]=te[1]-K[1],G[56+He]=te[0]-K[0]}function ut(G){for(var X=0;X<64;++X){var ce=G[0][X],ye=G[1][X],Ie=G[2][X];G[0][X]=ce+1.5747*Ie,G[1][X]=ce-.1873*ye-.4682*Ie,G[2][X]=ce+1.8556*ye}}function W(G,X,ce){for(var ye=0;ye<64;++ye)X[ce+ye]=Zh.toHalfFloat(k(G[ye]))}function k(G){return G<=1?Math.sign(G)*Math.pow(Math.abs(G),2.2):Math.sign(G)*Math.pow(U,Math.abs(G)-1)}function xe(G){return new DataView(G.array.buffer,G.offset.value,G.size)}function ze(G){var X=G.viewer.buffer.slice(G.offset.value,G.offset.value+G.size),ce=new Uint8Array(Mt(X)),ye=new Uint8Array(ce.length);return De(ce),j(ce,ye),new DataView(ye.buffer)}function Ye(G){var X=G.array.slice(G.offset.value,G.offset.value+G.size),ce=nx(X),ye=new Uint8Array(ce.length);return De(ce),j(ce,ye),new DataView(ye.buffer)}function ke(G){for(var X=G.viewer,ce={value:G.offset.value},ye=new Uint16Array(G.width*G.scanlineBlockSize*(G.channels*G.type)),Ie=new Uint8Array(8192),Le=0,nt=new Array(G.channels),qe=0;qe<G.channels;qe++)nt[qe]={},nt[qe].start=Le,nt[qe].end=nt[qe].start,nt[qe].nx=G.width,nt[qe].ny=G.lines,nt[qe].size=G.type,Le+=nt[qe].nx*nt[qe].ny*nt[qe].size;var V=Te(X,ce),K=Te(X,ce);if(K>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(V<=K)for(var qe=0;qe<K-V+1;qe++)Ie[qe+V]=le(X,ce);var se=new Uint16Array(65536),te=N(Ie,se),de=mt(X,ce);Pt(G.array,X,ce,de,ye,Le);for(var qe=0;qe<G.channels;++qe)for(var Ae=nt[qe],He=0;He<nt[qe].size;++He)wt(ye,Ae.start+He,Ae.nx,Ae.size,Ae.ny,Ae.nx*Ae.size,te);Je(se,ye,Le);for(var je=0,Ke=new Uint8Array(ye.buffer.byteLength),At=0;At<G.lines;At++)for(var Tt=0;Tt<G.channels;Tt++){var Ae=nt[Tt],Ct=Ae.nx*Ae.size,Wt=new Uint8Array(ye.buffer,Ae.end*2,Ct*2);Ke.set(Wt,je),je+=Ct*2,Ae.end+=Ct}return new DataView(Ke.buffer)}function _t(G){var X=G.array.slice(G.offset.value,G.offset.value+G.size),ce=nx(X);const ye=G.lines*G.channels*G.width,Ie=G.type==1?new Uint16Array(ye):new Uint32Array(ye);let Le=0,nt=0;const qe=new Array(4);for(let V=0;V<G.lines;V++)for(let K=0;K<G.channels;K++){let se=0;switch(G.type){case 1:qe[0]=Le,qe[1]=qe[0]+G.width,Le=qe[1]+G.width;for(let te=0;te<G.width;++te){const de=ce[qe[0]++]<<8|ce[qe[1]++];se+=de,Ie[nt]=se,nt++}break;case 2:qe[0]=Le,qe[1]=qe[0]+G.width,qe[2]=qe[1]+G.width,Le=qe[2]+G.width;for(let te=0;te<G.width;++te){const de=ce[qe[0]++]<<24|ce[qe[1]++]<<16|ce[qe[2]++]<<8;se+=de,Ie[nt]=se,nt++}break}}return new DataView(Ie.buffer)}function lt(G){var X=G.viewer,ce={value:G.offset.value},ye=new Uint8Array(G.width*G.lines*(G.channels*G.type*2)),Ie={version:Re(X,ce),unknownUncompressedSize:Re(X,ce),unknownCompressedSize:Re(X,ce),acCompressedSize:Re(X,ce),dcCompressedSize:Re(X,ce),rleCompressedSize:Re(X,ce),rleUncompressedSize:Re(X,ce),rleRawSize:Re(X,ce),totalAcUncompressedCount:Re(X,ce),totalDcUncompressedCount:Re(X,ce),acCompression:Re(X,ce)};if(Ie.version<2)throw"EXRLoader.parse: "+tn.compression+" version "+Ie.version+" is unsupported";for(var Le=new Array,nt=Te(X,ce)-2;nt>0;){var qe=yt(X.buffer,ce),V=le(X,ce),K=V>>2&3,se=(V>>4)-1,te=new Int8Array([se])[0],de=le(X,ce);Le.push({name:qe,index:te,type:de,compression:K}),nt-=qe.length+3}for(var Ae=tn.channels,He=new Array(G.channels),je=0;je<G.channels;++je){var Ke=He[je]={},At=Ae[je];Ke.name=At.name,Ke.compression=0,Ke.decoded=!1,Ke.type=At.pixelType,Ke.pLinear=At.pLinear,Ke.width=G.width,Ke.height=G.lines}for(var Tt={idx:new Array(3)},Ct=0;Ct<G.channels;++Ct)for(var Ke=He[Ct],je=0;je<Le.length;++je){var Wt=Le[je];Ke.name==Wt.name&&(Ke.compression=Wt.compression,Wt.index>=0&&(Tt.idx[Wt.index]=Ct),Ke.offset=Ct)}if(Ie.acCompressedSize>0)switch(Ie.acCompression){case 0:var Yt=new Uint16Array(Ie.totalAcUncompressedCount);Pt(G.array,X,ce,Ie.acCompressedSize,Yt,Ie.totalAcUncompressedCount);break;case 1:var Vt=G.array.slice(ce.value,ce.value+Ie.totalAcUncompressedCount),Dn=nx(Vt),Yt=new Uint16Array(Dn.buffer);ce.value+=Ie.totalAcUncompressedCount;break}if(Ie.dcCompressedSize>0){var zt={array:G.array,offset:ce,size:Ie.dcCompressedSize},Gt=new Uint16Array(Ye(zt).buffer);ce.value+=Ie.dcCompressedSize}if(Ie.rleRawSize>0){var Vt=G.array.slice(ce.value,ce.value+Ie.rleCompressedSize),Dn=nx(Vt),vi=Mt(Dn.buffer);ce.value+=Ie.rleCompressedSize}for(var on=0,mn=new Array(He.length),je=0;je<mn.length;++je)mn[je]=new Array;for(var ni=0;ni<G.lines;++ni)for(var xn=0;xn<He.length;++xn)mn[xn].push(on),on+=He[xn].width*G.type*2;$e(Tt,mn,He,Yt,Gt,ye);for(var je=0;je<He.length;++je){var Ke=He[je];if(!Ke.decoded)switch(Ke.compression){case 2:for(var ln=0,vn=0,ni=0;ni<G.lines;++ni){for(var bi=mn[je][ln],Qn=0;Qn<Ke.width;++Qn){for(var $n=0;$n<2*Ke.type;++$n)ye[bi++]=vi[vn+$n*Ke.width*Ke.height];vn++}ln++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(ye.buffer)}function yt(G,X){for(var ce=new Uint8Array(G),ye=0;ce[X.value+ye]!=0;)ye+=1;var Ie=new TextDecoder().decode(ce.slice(X.value,X.value+ye));return X.value=X.value+ye+1,Ie}function $t(G,X,ce){var ye=new TextDecoder().decode(new Uint8Array(G).slice(X.value,X.value+ce));return X.value=X.value+ce,ye}function st(G,X){var ce=Nt(G,X),ye=mt(G,X);return[ce,ye]}function vt(G,X){var ce=mt(G,X),ye=mt(G,X);return[ce,ye]}function Nt(G,X){var ce=G.getInt32(X.value,!0);return X.value=X.value+4,ce}function mt(G,X){var ce=G.getUint32(X.value,!0);return X.value=X.value+4,ce}function Et(G,X){var ce=G[X.value];return X.value=X.value+1,ce}function le(G,X){var ce=G.getUint8(X.value);return X.value=X.value+1,ce}const Re=function(G,X){let ce;return"getBigInt64"in DataView.prototype?ce=Number(G.getBigInt64(X.value,!0)):ce=G.getUint32(X.value+4,!0)+Number(G.getUint32(X.value,!0)<<32),X.value+=8,ce};function rt(G,X){var ce=G.getFloat32(X.value,!0);return X.value+=4,ce}function ne(G,X){return Zh.toHalfFloat(rt(G,X))}function Me(G){var X=(G&31744)>>10,ce=G&1023;return(G>>15?-1:1)*(X?X===31?ce?NaN:1/0:Math.pow(2,X-15)*(1+ce/1024):6103515625e-14*(ce/1024))}function Te(G,X){var ce=G.getUint16(X.value,!0);return X.value+=2,ce}function Ge(G,X){return Me(Te(G,X))}function dt(G,X,ce,ye){for(var Ie=ce.value,Le=[];ce.value<Ie+ye-1;){var nt=yt(X,ce),qe=Nt(G,ce),V=le(G,ce);ce.value+=3;var K=Nt(G,ce),se=Nt(G,ce);Le.push({name:nt,pixelType:qe,pLinear:V,xSampling:K,ySampling:se})}return ce.value+=1,Le}function xt(G,X){var ce=rt(G,X),ye=rt(G,X),Ie=rt(G,X),Le=rt(G,X),nt=rt(G,X),qe=rt(G,X),V=rt(G,X),K=rt(G,X);return{redX:ce,redY:ye,greenX:Ie,greenY:Le,blueX:nt,blueY:qe,whiteX:V,whiteY:K}}function Ft(G,X){var ce=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],ye=le(G,X);return ce[ye]}function rn(G,X){var ce=mt(G,X),ye=mt(G,X),Ie=mt(G,X),Le=mt(G,X);return{xMin:ce,yMin:ye,xMax:Ie,yMax:Le}}function Bn(G,X){var ce=["INCREASING_Y"],ye=le(G,X);return ce[ye]}function St(G,X){var ce=rt(G,X),ye=rt(G,X);return[ce,ye]}function Dt(G,X){var ce=rt(G,X),ye=rt(G,X),Ie=rt(G,X);return[ce,ye,Ie]}function Zt(G,X,ce,ye,Ie){if(ye==="string"||ye==="stringvector"||ye==="iccProfile")return $t(X,ce,Ie);if(ye==="chlist")return dt(G,X,ce,Ie);if(ye==="chromaticities")return xt(G,ce);if(ye==="compression")return Ft(G,ce);if(ye==="box2i")return rn(G,ce);if(ye==="lineOrder")return Bn(G,ce);if(ye==="float")return rt(G,ce);if(ye==="v2f")return St(G,ce);if(ye==="v3f")return Dt(G,ce);if(ye==="int")return Nt(G,ce);if(ye==="rational")return st(G,ce);if(ye==="timecode")return vt(G,ce);if(ye==="preview")return ce.value+=Ie,"skipped";ce.value+=Ie}function bt(G,X,ce){const ye={};if(G.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";ye.version=G.getUint8(4);const Ie=G.getUint8(5);ye.spec={singleTile:!!(Ie&2),longName:!!(Ie&4),deepFormat:!!(Ie&8),multiPart:!!(Ie&16)},ce.value=8;for(var Le=!0;Le;){var nt=yt(X,ce);if(nt==0)Le=!1;else{var qe=yt(X,ce),V=mt(G,ce),K=Zt(G,X,ce,qe,V);K===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${qe}'.`):ye[nt]=K}}if((Ie&-5)!=0)throw console.error("EXRHeader:",ye),"THREE.EXRLoader: provided file is currently unsupported.";return ye}function en(G,X,ce,ye,Ie){const Le={size:0,viewer:X,array:ce,offset:ye,width:G.dataWindow.xMax-G.dataWindow.xMin+1,height:G.dataWindow.yMax-G.dataWindow.yMin+1,channels:G.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:G.channels[0].pixelType,uncompress:null,getter:null,format:null,[f0?"colorSpace":"encoding"]:null};switch(G.compression){case"NO_COMPRESSION":Le.lines=1,Le.uncompress=xe;break;case"RLE_COMPRESSION":Le.lines=1,Le.uncompress=ze;break;case"ZIPS_COMPRESSION":Le.lines=1,Le.uncompress=Ye;break;case"ZIP_COMPRESSION":Le.lines=16,Le.uncompress=Ye;break;case"PIZ_COMPRESSION":Le.lines=32,Le.uncompress=ke;break;case"PXR24_COMPRESSION":Le.lines=16,Le.uncompress=_t;break;case"DWAA_COMPRESSION":Le.lines=32,Le.uncompress=lt;break;case"DWAB_COMPRESSION":Le.lines=256,Le.uncompress=lt;break;default:throw"EXRLoader.parse: "+G.compression+" is unsupported"}if(Le.scanlineBlockSize=Le.lines,Le.type==1)switch(Ie){case ji:Le.getter=Ge,Le.inputSize=2;break;case ka:Le.getter=Te,Le.inputSize=2;break}else if(Le.type==2)switch(Ie){case ji:Le.getter=rt,Le.inputSize=4;break;case ka:Le.getter=ne,Le.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Le.type+" for "+G.compression+".";Le.blockCount=(G.dataWindow.yMax+1)/Le.scanlineBlockSize;for(var nt=0;nt<Le.blockCount;nt++)Re(X,ye);Le.outputChannels=Le.channels==3?4:Le.channels;const qe=Le.width*Le.height*Le.outputChannels;switch(Ie){case ji:Le.byteArray=new Float32Array(qe),Le.channels<Le.outputChannels&&Le.byteArray.fill(1,0,qe);break;case ka:Le.byteArray=new Uint16Array(qe),Le.channels<Le.outputChannels&&Le.byteArray.fill(15360,0,qe);break;default:console.error("THREE.EXRLoader: unsupported type: ",Ie);break}return Le.bytesPerLine=Le.width*Le.inputSize*Le.channels,Le.outputChannels==4?Le.format=ha:Le.format=yv,f0?Le.colorSpace="srgb-linear":Le.encoding=3e3,Le}const It=new DataView(e),qt=new Uint8Array(e),Zn={value:0},tn=bt(It,e,Zn),Rt=en(tn,It,qt,Zn,this.type),gn={value:0},Ht={R:0,G:1,B:2,A:3,Y:0};for(let G=0;G<Rt.height/Rt.scanlineBlockSize;G++){const X=mt(It,Zn);Rt.size=mt(It,Zn),Rt.lines=X+Rt.scanlineBlockSize>Rt.height?Rt.height-X:Rt.scanlineBlockSize;const ye=Rt.size<Rt.lines*Rt.bytesPerLine?Rt.uncompress(Rt):xe(Rt);Zn.value+=Rt.size;for(let Ie=0;Ie<Rt.scanlineBlockSize;Ie++){const Le=Ie+G*Rt.scanlineBlockSize;if(Le>=Rt.height)break;for(let nt=0;nt<Rt.channels;nt++){const qe=Ht[tn.channels[nt].name];for(let V=0;V<Rt.width;V++){gn.value=(Ie*(Rt.channels*Rt.width)+nt*Rt.width+V)*Rt.inputSize;const K=(Rt.height-1-Le)*(Rt.width*Rt.outputChannels)+V*Rt.outputChannels+qe;Rt.byteArray[K]=Rt.getter(ye,gn)}}}}return{header:tn,width:Rt.width,height:Rt.height,data:Rt.byteArray,format:Rt.format,[f0?"colorSpace":"encoding"]:Rt[f0?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(l,c){f0?l.colorSpace=c.colorSpace:l.encoding=c.encoding,l.minFilter=oi,l.magFilter=oi,l.generateMipmaps=!1,l.flipY=!1,t&&t(l,c)}return super.load(e,s,n,i)}}const _1=new WeakMap;class v5 extends ls{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const s=new rs(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,l=>{const c={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(l,c).then(t).catch(i)},n,i)}decodeDracoFile(e,t,n,i){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const h in t.attributeTypes){const p=t.attributeTypes[h];p.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[h]=p.name)}const n=JSON.stringify(t);if(_1.has(e)){const h=_1.get(e);if(h.key===n)return h.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,l=e.byteLength,c=this._getWorker(s,l).then(h=>(i=h,new Promise((p,g)=>{i._callbacks[s]={resolve:p,reject:g},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(h=>this._createGeometry(h.geometry));return c.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),_1.set(e,{key:n,promise:c}),c}_createGeometry(e){const t=new Sn;e.index&&t.setIndex(new ti(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],s=i.name,l=i.array,c=i.itemSize;t.setAttribute(s,new ti(l,c))}return t}_loadLibrary(e,t){const n=new rs(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((i,s)=>{n.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const i=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=_5.toString(),l=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const l=s.data;switch(l.type){case"decode":i._callbacks[l.id].resolve(l);break;case"error":i._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function _5(){let r,e;onmessage=function(l){const c=l.data;switch(c.type){case"init":r=c.decoderConfig,e=new Promise(function(g){r.onModuleLoaded=function(_){g({draco:_})},DracoDecoderModule(r)});break;case"decode":const h=c.buffer,p=c.taskConfig;e.then(g=>{const _=g.draco,y=new _.Decoder,x=new _.DecoderBuffer;x.Init(new Int8Array(h),h.byteLength);try{const M=t(_,y,x,p),T=M.attributes.map(b=>b.array.buffer);M.index&&T.push(M.index.array.buffer),self.postMessage({type:"decode",id:c.id,geometry:M},T)}catch(M){console.error(M),self.postMessage({type:"error",id:c.id,error:M.message})}finally{_.destroy(x),_.destroy(y)}});break}};function t(l,c,h,p){const g=p.attributeIDs,_=p.attributeTypes;let y,x;const M=c.GetEncodedGeometryType(h);if(M===l.TRIANGULAR_MESH)y=new l.Mesh,x=c.DecodeBufferToMesh(h,y);else if(M===l.POINT_CLOUD)y=new l.PointCloud,x=c.DecodeBufferToPointCloud(h,y);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!x.ok()||y.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+x.error_msg());const T={index:null,attributes:[]};for(const b in g){const E=self[_[b]];let w,D;if(p.useUniqueIDs)D=g[b],w=c.GetAttributeByUniqueId(y,D);else{if(D=c.GetAttributeId(y,l[g[b]]),D===-1)continue;w=c.GetAttribute(y,D)}T.attributes.push(i(l,c,y,b,E,w))}return M===l.TRIANGULAR_MESH&&(T.index=n(l,c,y)),l.destroy(y),T}function n(l,c,h){const g=h.num_faces()*3,_=g*4,y=l._malloc(_);c.GetTrianglesUInt32Array(h,_,y);const x=new Uint32Array(l.HEAPF32.buffer,y,g).slice();return l._free(y),{array:x,itemSize:1}}function i(l,c,h,p,g,_){const y=_.num_components(),M=h.num_points()*y,T=M*g.BYTES_PER_ELEMENT,b=s(l,g),E=l._malloc(T);c.GetAttributeDataArrayForAllPoints(h,_,b,T,E);const w=new g(l.HEAPF32.buffer,E,M).slice();return l._free(E),{name:p,array:w,itemSize:y}}function s(l,c){switch(c){case Float32Array:return l.DT_FLOAT32;case Int8Array:return l.DT_INT8;case Int16Array:return l.DT_INT16;case Int32Array:return l.DT_INT32;case Uint8Array:return l.DT_UINT8;case Uint16Array:return l.DT_UINT16;case Uint32Array:return l.DT_UINT32}}}let ax;const y1=()=>{if(ax)return ax;const r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=r;WebAssembly.validate(t)&&(i=e);let s;const l=WebAssembly.instantiate(c(i),{}).then(_=>{s=_.instance,s.exports.__wasm_call_ctors()});function c(_){const y=new Uint8Array(_.length);for(let M=0;M<_.length;++M){const T=_.charCodeAt(M);y[M]=T>96?T-71:T>64?T-65:T>47?T+4:T>46?63:62}let x=0;for(let M=0;M<_.length;++M)y[x++]=y[M]<60?n[y[M]]:(y[M]-60)*64+y[++M];return y.buffer.slice(0,x)}function h(_,y,x,M,T,b){const E=s.exports.sbrk,w=x+3&-4,D=E(w*M),B=E(T.length),I=new Uint8Array(s.exports.memory.buffer);I.set(T,B);const L=_(D,x,M,B,T.length);if(L===0&&b&&b(D,w,M),y.set(I.subarray(D,D+x*M)),E(D-E(0)),L!==0)throw new Error(`Malformed buffer data: ${L}`)}const p={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},g={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return ax={ready:l,supported:!0,decodeVertexBuffer(_,y,x,M,T){h(s.exports.meshopt_decodeVertexBuffer,_,y,x,M,s.exports[p[T]])},decodeIndexBuffer(_,y,x,M){h(s.exports.meshopt_decodeIndexBuffer,_,y,x,M)},decodeIndexSequence(_,y,x,M){h(s.exports.meshopt_decodeIndexSequence,_,y,x,M)},decodeGltfBuffer(_,y,x,M,T,b){h(s.exports[g[T]],_,y,x,M,s.exports[p[b]])}},ax};let sx=null,vD="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function _D(r=!0,e=!0,t){return n=>{t&&t(n),r&&(sx||(sx=new v5),sx.setDecoderPath(typeof r=="string"?r:vD),n.setDRACOLoader(sx)),e&&n.setMeshoptDecoder(typeof y1=="function"?y1():y1)}}const Fm=(r,e,t,n)=>fu(Ib,r,_D(e,t,n));Fm.preload=(r,e,t,n)=>fu.preload(Ib,r,_D(e,t,n));Fm.clear=r=>fu.clear(Ib,r);Fm.setDecoderPath=r=>{vD=r};const yD=pt.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:s=!1,onChange:l,onStart:c,onEnd:h,...p},g)=>{const _=Fr(L=>L.invalidate),y=Fr(L=>L.camera),x=Fr(L=>L.gl),M=Fr(L=>L.events),T=Fr(L=>L.setEvents),b=Fr(L=>L.set),E=Fr(L=>L.get),w=Fr(L=>L.performance),D=e||y,B=n||M.connected||x.domElement,I=pt.useMemo(()=>new O4(D),[D]);return Ob(()=>{I.enabled&&I.update()},-1),pt.useEffect(()=>(s&&I.connect(s===!0?B:s),I.connect(B),()=>void I.dispose()),[s,B,t,I,_]),pt.useEffect(()=>{const L=U=>{_(),t&&w.regress(),l&&l(U)},F=U=>{c&&c(U)},H=U=>{h&&h(U)};return I.addEventListener("change",L),I.addEventListener("start",F),I.addEventListener("end",H),()=>{I.removeEventListener("start",F),I.removeEventListener("end",H),I.removeEventListener("change",L)}},[l,c,h,I,_,T]),pt.useEffect(()=>{if(r){const L=E().controls;return b({controls:I}),()=>b({controls:L})}},[r,I]),pt.createElement("primitive",Lx({ref:g,object:I,enableDamping:i},p))}),y5=pt.forwardRef(({children:r,enabled:e=!0,speed:t=1,rotationIntensity:n=1,floatIntensity:i=1,floatingRange:s=[-.1,.1],autoInvalidate:l=!1,...c},h)=>{const p=pt.useRef(null);pt.useImperativeHandle(h,()=>p.current,[]);const g=pt.useRef(Math.random()*1e4);return Ob(_=>{var y,x;if(!e||t===0)return;l&&_.invalidate();const M=g.current+_.clock.elapsedTime;p.current.rotation.x=Math.cos(M/4*t)/8*n,p.current.rotation.y=Math.sin(M/4*t)/8*n,p.current.rotation.z=Math.sin(M/4*t)/20*n;let T=Math.sin(M/4*t)/10;T=JE.mapLinear(T,-.1,.1,(y=s==null?void 0:s[0])!==null&&y!==void 0?y:-.1,(x=s==null?void 0:s[1])!==null&&x!==void 0?x:.1),p.current.position.y=T*i,p.current.updateMatrix()}),pt.createElement("group",c,pt.createElement("group",{ref:p,matrixAutoUpdate:!1},r))}),xD=(r,e,t)=>{let n;switch(r){case xr:n=new Uint8ClampedArray(e*t*4);break;case ka:n=new Uint16Array(e*t*4);break;case pc:n=new Uint32Array(e*t*4);break;case GA:n=new Int8Array(e*t*4);break;case VA:n=new Int16Array(e*t*4);break;case _v:n=new Int32Array(e*t*4);break;case ji:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let rx;const x5=(r,e,t,n)=>{if(rx!==void 0)return rx;const i=new Mo(1,1,n);e.setRenderTarget(i);const s=new Pi(new Uf,new mr({color:16777215}));e.render(s,t),e.setRenderTarget(null);const l=xD(r,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,l),i.dispose(),s.geometry.dispose(),s.material.dispose(),rx=l[0]!==0,rx};class Pb{constructor(e){var t,n,i,s,l,c,h,p,g,_,y,x,M,T,b,E;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(D){throw this._renderer.setRenderTarget(null),D}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const w={format:ha,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy:1,generateMipmaps:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.magFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.magFilter:oi,minFilter:((h=e.renderTargetOptions)===null||h===void 0?void 0:h.minFilter)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.minFilter:oi,samples:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.samples)!==void 0?(_=e.renderTargetOptions)===null||_===void 0?void 0:_.samples:void 0,wrapS:((y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapS)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.wrapS:fa,wrapT:((M=e.renderTargetOptions)===null||M===void 0?void 0:M.wrapT)!==void 0?(T=e.renderTargetOptions)===null||T===void 0?void 0:T.wrapT:fa};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Pb.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Mv,this._camera=new lc,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!x5(this._type,this._renderer,this._camera,w)){let D;switch(this._type){case ka:D=this._renderer.extensions.has("EXT_color_buffer_float")?ji:void 0;break}D!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ji}`),this._type=D):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Pi(new Uf,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Mo(this.width,this.height,w),this._renderTarget.texture.mapping=((b=e.renderTargetOptions)===null||b===void 0?void 0:b.mapping)!==void 0?(E=e.renderTargetOptions)===null||E===void 0?void 0:E.mapping:Mf}static instantiateRenderer(){const e=new Cb;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=xD(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new hl(this.toArray(),this.width,this.height,ha,this._type,(e==null?void 0:e.mapping)||Mf,(e==null?void 0:e.wrapS)||fa,(e==null?void 0:e.wrapT)||fa,(e==null?void 0:e.magFilter)||oi,(e==null?void 0:e.minFilter)||oi,(e==null?void 0:e.anisotropy)||1,dl);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Ar&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof di&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof di&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const A5=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,S5=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class M5 extends Ar{constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:i,gainMapMax:s,maxDisplayBoost:l,hdrCapacityMin:c,hdrCapacityMax:h,sdr:p,gainMap:g}){super({name:"GainMapDecoderMaterial",vertexShader:A5,fragmentShader:S5,uniforms:{sdr:{value:p},gainMap:{value:g},gamma:{value:new Z(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new Z().fromArray(t)},offsetSdr:{value:new Z().fromArray(n)},gainMapMin:{value:new Z().fromArray(i)},gainMapMax:{value:new Z().fromArray(s)},weightFactor:{value:(Math.log2(l)-c)/(h-c)}},blending:sc,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=l,this._hdrCapacityMin=c,this._hdrCapacityMax=h,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class AD extends Error{}class SD extends Error{}const h0=(r,e,t)=>{const n=new RegExp(`${e}="([^"]*)"`,"i").exec(r);if(n)return n[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(r);if(i){const s=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(l=>l.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},E5=r=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(r):e=r.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const n=e.indexOf("x:xmpmeta>",t),i=e.slice(t,n+10);try{const s=h0(i,"hdrgm:GainMapMin","0"),l=h0(i,"hdrgm:GainMapMax"),c=h0(i,"hdrgm:Gamma","1"),h=h0(i,"hdrgm:OffsetSDR","0.015625"),p=h0(i,"hdrgm:OffsetHDR","0.015625"),g=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),_=g?g[1]:"0",y=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!y)throw new Error("Incomplete gainmap metadata");const x=y[1];return{gainMapMin:Array.isArray(s)?s.map(M=>parseFloat(M)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(l)?l.map(M=>parseFloat(M)):[parseFloat(l),parseFloat(l),parseFloat(l)],gamma:Array.isArray(c)?c.map(M=>parseFloat(M)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetSdr:Array.isArray(h)?h.map(M=>parseFloat(M)):[parseFloat(h),parseFloat(h),parseFloat(h)],offsetHdr:Array.isArray(p)?p.map(M=>parseFloat(M)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(_),hdrCapacityMax:parseFloat(x)}}catch{}t=e.indexOf("<x:xmpmeta",n)}};class b5{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const l=s.byteLength;let c=2,h=0,p;for(;c<l;){if(++h>250){n(new Error(`Found no marker after ${h} loops `));return}if(s.getUint8(c)!==255){n(new Error(`Not a valid marker at offset 0x${c.toString(16)}, found: 0x${s.getUint8(c).toString(16)}`));return}if(p=s.getUint8(c+1),i&&console.log(`Marker: ${p.toString(16)}`),p===226){i&&console.log("Found APP2 marker (0xffe2)");const g=c+4;if(s.getUint32(g)===1297106432){const _=g+4;let y;if(s.getUint16(_)===18761)y=!1;else if(s.getUint16(_)===19789)y=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(_+2,!y)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const x=s.getUint32(_+4,!y);if(x<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const M=_+x,T=s.getUint16(M,!y),b=M+2;let E=0;for(let I=b;I<b+12*T;I+=12)s.getUint16(I,!y)===45057&&(E=s.getUint32(I+8,!y));const D=M+2+T*12+4,B=[];for(let I=D;I<D+E*16;I+=16){const L={MPType:s.getUint32(I,!y),size:s.getUint32(I+4,!y),dataOffset:s.getUint32(I+8,!y),dependantImages:s.getUint32(I+12,!y),start:-1,end:-1,isFII:!1};L.dataOffset?(L.start=_+L.dataOffset,L.isFII=!1):(L.start=0,L.isFII=!0),L.end=L.start+L.size,B.push(L)}if(this.options.extractNonFII&&B.length){const I=new Blob([s]),L=[];for(const F of B){if(F.isFII&&!this.options.extractFII)continue;const H=I.slice(F.start,F.end+1,"image/jpeg");L.push(H)}t(L)}}}c+=2+s.getUint16(c+2)}})}}const T5=async r=>{const e=E5(r);if(!e)throw new SD("Gain map XMP metadata not found");const n=await new b5({extractFII:!0,extractNonFII:!0}).extract(r);if(n.length!==2)throw new AD("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},uw=r=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=i=>{t(i)},n.src=URL.createObjectURL(r)});class MD extends ls{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new mS}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new M5({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new di,sdr:new di});return new Pb({width:16,height:16,type:ka,colorSpace:dl,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,i){const s=i?new Blob([i],{type:"image/jpeg"}):void 0,l=new Blob([n],{type:"image/jpeg"});let c,h,p=!1;if(typeof createImageBitmap>"u"){const y=await Promise.all([s?uw(s):Promise.resolve(void 0),uw(l)]);h=y[0],c=y[1],p=!0}else{const y=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(l,{imageOrientation:"flipY"})]);h=y[0],c=y[1]}const g=new di(h||new ImageData(2,2),Mf,fa,fa,oi,H1,ha,xr,1,dl);g.flipY=p,g.needsUpdate=!0;const _=new di(c,Mf,fa,fa,oi,H1,ha,xr,1,is);_.flipY=p,_.needsUpdate=!0,e.width=c.width,e.height=c.height,e.material.gainMap=g,e.material.sdr=_,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class C5 extends MD{load([e,t,n],i,s,l){const c=this.prepareQuadRenderer();let h,p,g;const _=async()=>{if(h&&p&&g){try{await this.render(c,g,h,p)}catch(U){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof l=="function"&&l(U),c.disposeOnDemandRenderer();return}typeof i=="function"&&i(c),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),c.disposeOnDemandRenderer()}};let y=!0,x=0,M=0,T=!0,b=0,E=0,w=!0,D=0,B=0;const I=()=>{if(typeof s=="function"){const U=x+b+D,N=M+E+B,Y=y&&T&&w;s(new ProgressEvent("progress",{lengthComputable:Y,loaded:N,total:U}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const L=new rs(this._internalLoadingManager);L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(e,async U=>{if(typeof U=="string")throw new Error("Invalid sdr buffer");h=U,await _()},U=>{y=U.lengthComputable,M=U.loaded,x=U.total,I()},U=>{this.manager.itemError(e),typeof l=="function"&&l(U)});const F=new rs(this._internalLoadingManager);F.setResponseType("arraybuffer"),F.setRequestHeader(this.requestHeader),F.setPath(this.path),F.setWithCredentials(this.withCredentials),F.load(t,async U=>{if(typeof U=="string")throw new Error("Invalid gainmap buffer");p=U,await _()},U=>{T=U.lengthComputable,E=U.loaded,b=U.total,I()},U=>{this.manager.itemError(t),typeof l=="function"&&l(U)});const H=new rs(this._internalLoadingManager);return H.setRequestHeader(this.requestHeader),H.setPath(this.path),H.setWithCredentials(this.withCredentials),H.load(n,async U=>{if(typeof U!="string")throw new Error("Invalid metadata string");g=JSON.parse(U),await _()},U=>{w=U.lengthComputable,B=U.loaded,D=U.total,I()},U=>{this.manager.itemError(n),typeof l=="function"&&l(U)}),c}}class R5 extends MD{load(e,t,n,i){const s=this.prepareQuadRenderer(),l=new rs(this._internalLoadingManager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(this.withCredentials),this.manager.itemStart(e),l.load(e,async c=>{if(typeof c=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const h=new Uint8Array(c);let p,g,_;try{const y=await T5(h);p=y.sdr,g=y.gainMap,_=y.metadata}catch(y){if(y instanceof SD||y instanceof AD)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),_={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},p=h;else throw y}try{await this.render(s,_,p,g)}catch(y){this.manager.itemError(e),typeof i=="function"&&i(y),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},n,c=>{this.manager.itemError(e),typeof i=="function"&&i(c)}),s}}const rv={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},ED="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",lm=r=>Array.isArray(r),Fb=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function yS({files:r=Fb,path:e="",preset:t=void 0,colorSpace:n=void 0,extensions:i}={}){t&&(zb(t),r=rv[t],e=ED);const s=lm(r),{extension:l,isCubemap:c}=Hb(r),h=Gb(l);if(!h)throw new Error("useEnvironment: Unrecognized file extension: "+r);const p=Fr(x=>x.gl);pt.useLayoutEffect(()=>{if(l!=="webp"&&l!=="jpg"&&l!=="jpeg")return;function x(){fu.clear(h,s?[r]:r)}p.domElement.addEventListener("webglcontextlost",x,{once:!0})},[r,p.domElement]);const g=fu(h,s?[r]:r,x=>{(l==="webp"||l==="jpg"||l==="jpeg")&&x.setRenderer(p),x.setPath==null||x.setPath(e),i&&i(x)});let _=s?g[0]:g;if(l==="jpg"||l==="jpeg"||l==="webp"){var y;_=(y=_.renderTarget)==null?void 0:y.texture}return _.mapping=c?dc:mm,_.colorSpace=n??(c?"srgb":"srgb-linear"),_}const w5={files:Fb,path:"",preset:void 0,extensions:void 0};yS.preload=r=>{const e={...w5,...r};let{files:t,path:n=""}=e;const{preset:i,extensions:s}=e;i&&(zb(i),t=rv[i],n=ED);const{extension:l}=Hb(t);if(l==="webp"||l==="jpg"||l==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const c=Gb(l);if(!c)throw new Error("useEnvironment: Unrecognized file extension: "+t);fu.preload(c,lm(t)?[t]:t,h=>{h.setPath==null||h.setPath(n),s&&s(h)})};const B5={files:Fb,preset:void 0};yS.clear=r=>{const e={...B5,...r};let{files:t}=e;const{preset:n}=e;n&&(zb(n),t=rv[n]);const{extension:i}=Hb(t),s=Gb(i);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);fu.clear(s,lm(t)?[t]:t)};function zb(r){if(!(r in rv))throw new Error("Preset must be one of: "+Object.keys(rv).join(", "))}function Hb(r){var e;const t=lm(r)&&r.length===6,n=lm(r)&&r.length===3&&r.some(l=>l.endsWith("json")),i=lm(r)?r[0]:r;return{extension:t?"cube":n?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function Gb(r){return r==="cube"?xB:r==="hdr"?m5:r==="exr"?g5:r==="jpg"||r==="jpeg"?R5:r==="webp"?C5:null}const D5=r=>r.current&&r.current.isScene,U5=r=>D5(r)?r.current:r;function Vb(r,e,t,n,i={}){var s,l,c,h;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const p=U5(e||t),g=p.background,_=p.environment,y={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:(s=(l=p.backgroundRotation)==null||l.clone==null?void 0:l.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:(c=(h=p.environmentRotation)==null||h.clone==null?void 0:h.clone())!==null&&c!==void 0?c:[0,0,0]};return r!=="only"&&(p.environment=n),r&&(p.background=n),tc(p,i),()=>{r!=="only"&&(p.environment=_),r&&(p.background=g),tc(p,y)}}function kb({scene:r,background:e=!1,map:t,...n}){const i=Fr(s=>s.scene);return pt.useLayoutEffect(()=>{if(t)return Vb(e,r,i,t,n)}),null}function bD({background:r=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:l,environmentRotation:c,...h}){const p=yS(h),g=Fr(_=>_.scene);return pt.useLayoutEffect(()=>Vb(r,e,g,p,{backgroundBlurriness:t??n,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:l,environmentRotation:c})),pt.useEffect(()=>()=>{p.dispose()},[p]),null}function O5({children:r,near:e=.1,far:t=1e3,resolution:n=256,frames:i=1,map:s,background:l=!1,blur:c,backgroundBlurriness:h,backgroundIntensity:p,backgroundRotation:g,environmentIntensity:_,environmentRotation:y,scene:x,files:M,path:T,preset:b=void 0,extensions:E}){const w=Fr(H=>H.gl),D=Fr(H=>H.scene),B=pt.useRef(null),[I]=pt.useState(()=>new Mv),L=pt.useMemo(()=>{const H=new KE(n);return H.texture.type=ka,H},[n]);pt.useEffect(()=>()=>{L.dispose()},[L]),pt.useLayoutEffect(()=>{if(i===1){const H=w.autoClear;w.autoClear=!0,B.current.update(w,I),w.autoClear=H}return Vb(l,x,D,L.texture,{backgroundBlurriness:c??h,backgroundIntensity:p,backgroundRotation:g,environmentIntensity:_,environmentRotation:y})},[r,I,L.texture,x,D,l,i,w]);let F=1;return Ob(()=>{if(i===1/0||F<i){const H=w.autoClear;w.autoClear=!0,B.current.update(w,I),w.autoClear=H,F++}}),pt.createElement(pt.Fragment,null,$G(pt.createElement(pt.Fragment,null,r,pt.createElement("cubeCamera",{ref:B,args:[e,t,L]}),M||b?pt.createElement(bD,{background:!0,files:M,preset:b,path:T,extensions:E}):s?pt.createElement(kb,{background:!0,map:s,extensions:E}):null),I))}function N5(r){var e,t,n,i;const s=yS(r),l=r.map||s;pt.useMemo(()=>tD({GroundProjectedEnvImpl:b4}),[]),pt.useEffect(()=>()=>{s.dispose()},[s]);const c=pt.useMemo(()=>[l],[l]),h=(e=r.ground)==null?void 0:e.height,p=(t=r.ground)==null?void 0:t.radius,g=(n=(i=r.ground)==null?void 0:i.scale)!==null&&n!==void 0?n:1e3;return pt.createElement(pt.Fragment,null,pt.createElement(kb,Lx({},r,{map:l})),pt.createElement("groundProjectedEnvImpl",{args:c,scale:g,height:h,radius:p}))}function L5(r){return r.ground?pt.createElement(N5,r):r.map?pt.createElement(kb,r):r.children?pt.createElement(O5,r):pt.createElement(bD,r)}function I5(r){const{nodes:e,materials:t}=Fm("/3d-portfolio/models/computer-optimized-transformed.glb");return Oe.jsx("group",{...r,dispose:null,children:Oe.jsxs("group",{position:[-4.005,67.549,58.539],children:[Oe.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Cube000_ComputerDesk_0001_1.geometry,material:t["ComputerDesk.001"]}),Oe.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Cube000_ComputerDesk_0001_2.geometry,material:t["FloppyDisk.001"]})]})})}Fm.preload("/3d-portfolio/models/computer-optimized-transformed.glb");const P5=()=>Oe.jsxs(lD,{shadows:!0,camera:{position:[0,3,7],fov:45},children:[Oe.jsx("ambientLight",{intensity:.5,color:"#fff4e6"}),Oe.jsx("directionalLight",{position:[5,5,3],intensity:2.5,color:"#ffd9b3"}),Oe.jsx("directionalLight",{position:[5,9,1],castShadow:!0,intensity:2.5,color:"#ffd9b3"}),Oe.jsx(yD,{enableZoom:!1,minPolarAngle:Math.PI/5,maxPolarAngle:Math.PI/2}),Oe.jsx("group",{scale:[1,1,1],children:Oe.jsxs("mesh",{receiveShadow:!0,position:[0,-1.5,0],rotation:[-Math.PI/2,0,0],children:[Oe.jsx("planeGeometry",{args:[30,30]}),Oe.jsx("meshStandardMaterial",{color:"grey"})]})}),Oe.jsx("group",{scale:.03,position:[0,-1.49,-2],castShadow:!0,children:Oe.jsx(I5,{})})]}),F5=({text:r,className:e,id:t})=>Oe.jsx("a",{onClick:n=>{n.preventDefault();const i=document.getElementById("counter");if(i&&t){const s=window.innerHeight*.15,l=i.getBoundingClientRect().top+window.pageYOffset-s;window.scrollTo({top:l,behavior:"smooth"})}},className:`${e??""} cta-wrapper`,children:Oe.jsxs("div",{className:"cta-button group",children:[Oe.jsx("div",{className:"bg-circle"}),Oe.jsx("p",{className:"text",children:r}),Oe.jsx("div",{className:"arrow-wrapper",children:Oe.jsx("img",{src:"/3d-portfolio/images/arrow-down.svg",alt:"arrow"})})]})}),z5=()=>Oe.jsx("section",{id:"contact",className:"flex-center section-padding",children:Oe.jsx("div",{className:"w-full h-full md:px-10 px-5",children:Oe.jsxs("div",{className:"grid-12-cols",children:[Oe.jsx("div",{className:"xl:col-span-5",children:Oe.jsx("header",{className:"flex flex-col justify-center md:w-full md:px-20 px-5",children:Oe.jsxs("div",{className:"flex flex-col gap-7",children:[Oe.jsxs("div",{className:"hero-text mt-4 md:mt-0",children:[Oe.jsxs("h1",{children:["Let's",Oe.jsx("span",{className:"slide",children:Oe.jsx("span",{className:"wrapper",children:XU.map((r,e)=>Oe.jsxs("span",{className:"flex items-center md:gap-2 gap-1 pb-2",children:[Oe.jsx("img",{src:r.imgPath,alt:"person",className:"md:size-10 size-7 md:p-2 p-1 rounded-full bg-white-50"}),Oe.jsx("span",{children:r.text})]},e))})})]}),Oe.jsx("h1",{children:"Projects That"}),Oe.jsx("h1",{children:"Shape Our Future"})]}),Oe.jsx("p",{className:"text-white-50 md:text-xl relative z-10 pointer-events-none",children:"Hi, I'm Joe, a full-stack developer looking for local DFW developers to team up with "}),Oe.jsx(F5,{text:"See My Work",className:"md:w-80 md:h-16 w-60 h-12",id:"counter"})]})})}),Oe.jsx("div",{className:"xl:col-span-7 min-h-96 ",children:Oe.jsx("div",{className:"bg-teal-800 w-full h-full hover:cursor-grab rounded-3xl overflow-hidden ",children:Oe.jsx(P5,{})})})]})})});function Qc(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function TD(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var qr={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},bm={duration:.5,overwrite:!1,delay:0},Xb,os,Ii,cc=1e8,Cs=1/cc,oE=Math.PI*2,H5=oE/4,G5=0,CD=Math.sqrt,V5=Math.cos,k5=Math.sin,qa=function(e){return typeof e=="string"},ra=function(e){return typeof e=="function"},hu=function(e){return typeof e=="number"},Yb=function(e){return typeof e>"u"},mc=function(e){return typeof e=="object"},gr=function(e){return e!==!1},qb=function(){return typeof window<"u"},ox=function(e){return ra(e)||qa(e)},RD=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ws=Array.isArray,lE=/(?:-?\.?\d|\.)+/gi,wD=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,nm=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,x1=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,BD=/[+-]=-?[.\d]+/,DD=/[^,'"\[\]\s]+/gi,X5=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,qi,$l,cE,Jb,Wr={},CA={},UD,OD=function(e){return(CA=Tm(e,Wr))&&Sr},Wb=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},ov=function(e,t){return!t&&console.warn(e)},ND=function(e,t){return e&&(Wr[e]=t)&&CA&&(CA[e]=t)||Wr},lv=function(){return 0},Y5={suppressEvents:!0,isStart:!0,kill:!1},Tx={suppressEvents:!0,kill:!1},q5={suppressEvents:!0},jb={},xf=[],uE={},LD,Hr={},A1={},fw=30,Cx=[],Kb="",Zb=function(e){var t=e[0],n,i;if(mc(t)||ra(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(i=Cx.length;i--&&!Cx[i].targetTest(t););n=Cx[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new s3(e[i],n)))||e.splice(i,1);return e},od=function(e){return e._gsap||Zb(Ao(e))[0]._gsap},ID=function(e,t,n){return(n=e[t])&&ra(n)?e[t]():Yb(n)&&e.getAttribute&&e.getAttribute(t)||n},vr=function(e,t){return(e=e.split(",")).forEach(t)||e},ua=function(e){return Math.round(e*1e5)/1e5||0},Aa=function(e){return Math.round(e*1e7)/1e7||0},cm=function(e,t){var n=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+i:n==="-"?e-i:n==="*"?e*i:e/i},J5=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},RA=function(){var e=xf.length,t=xf.slice(0),n,i;for(uE={},xf.length=0,n=0;n<e;n++)i=t[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},PD=function(e,t,n,i){xf.length&&!os&&RA(),e.render(t,n,os&&t<0&&(e._initted||e._startAt)),xf.length&&!os&&RA()},FD=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(DD).length<2?t:qa(e)?e.trim():e},zD=function(e){return e},jr=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},W5=function(e){return function(t,n){for(var i in n)i in t||i==="duration"&&e||i==="ease"||(t[i]=n[i])}},Tm=function(e,t){for(var n in t)e[n]=t[n];return e},hw=function r(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=mc(t[n])?r(e[n]||(e[n]={}),t[n]):t[n]);return e},wA=function(e,t){var n={},i;for(i in e)i in t||(n[i]=e[i]);return n},I0=function(e){var t=e.parent||qi,n=e.keyframes?W5(ws(e.keyframes)):jr;if(gr(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},j5=function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0},HD=function(e,t,n,i,s){var l=e[i],c;if(s)for(c=t[s];l&&l[s]>c;)l=l._prev;return l?(t._next=l._next,l._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=l,t.parent=t._dp=e,t},xS=function(e,t,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var s=t._prev,l=t._next;s?s._next=l:e[n]===t&&(e[n]=l),l?l._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},Cf=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},ld=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},K5=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},fE=function(e,t,n,i){return e._startAt&&(os?e._startAt.revert(Tx):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},Z5=function r(e){return!e||e._ts&&r(e.parent)},dw=function(e){return e._repeat?Cm(e._tTime,e=e.duration()+e._rDelay)*e:0},Cm=function(e,t){var n=Math.floor(e=Aa(e/t));return e&&n===e?n-1:n},BA=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},AS=function(e){return e._end=Aa(e._start+(e._tDur/Math.abs(e._ts||e._rts||Cs)||0))},SS=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Aa(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),AS(e),n._dirty||ld(n,e)),e},GD=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=BA(e.rawTime(),t),(!t._dur||Ov(0,t.totalDuration(),n)-t._tTime>Cs)&&t.render(n,!0)),ld(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},nc=function(e,t,n,i){return t.parent&&Cf(t),t._start=Aa((hu(n)?n:n||e!==qi?po(e,n,t):e._time)+t._delay),t._end=Aa(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),HD(e,t,"_first","_last",e._sort?"_start":0),hE(t)||(e._recent=t),i||GD(e,t),e._ts<0&&SS(e,e._tTime),e},VD=function(e,t){return(Wr.ScrollTrigger||Wb("scrollTrigger",t))&&Wr.ScrollTrigger.create(t,e)},kD=function(e,t,n,i,s){if($b(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!os&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&LD!==Vr.frame)return xf.push(e),e._lazy=[s,i],1},Q5=function r(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||r(t))},hE=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},$5=function(e,t,n,i){var s=e.ratio,l=t<0||!t&&(!e._start&&Q5(e)&&!(!e._initted&&hE(e))||(e._ts<0||e._dp._ts<0)&&!hE(e))?0:1,c=e._rDelay,h=0,p,g,_;if(c&&e._repeat&&(h=Ov(0,e._tDur,t),g=Cm(h,c),e._yoyo&&g&1&&(l=1-l),g!==Cm(e._tTime,c)&&(s=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==s||os||i||e._zTime===Cs||!t&&e._zTime){if(!e._initted&&kD(e,t,i,n,h))return;for(_=e._zTime,e._zTime=t||(n?Cs:0),n||(n=t&&!_),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=h,p=e._pt;p;)p.r(l,p.d),p=p._next;t<0&&fE(e,t,n,!0),e._onUpdate&&!n&&Xr(e,"onUpdate"),h&&e._repeat&&!n&&e.parent&&Xr(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&Cf(e,1),!n&&!os&&(Xr(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},e8=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},Rm=function(e,t,n,i){var s=e._repeat,l=Aa(t)||0,c=e._tTime/e._tDur;return c&&!i&&(e._time*=l/e._dur),e._dur=l,e._tDur=s?s<0?1e10:Aa(l*(s+1)+e._rDelay*s):l,c>0&&!i&&SS(e,e._tTime=e._tDur*c),e.parent&&AS(e),n||ld(e.parent,e),e},pw=function(e){return e instanceof Ws?ld(e):Rm(e,e._dur)},t8={_start:0,endTime:lv,totalDuration:lv},po=function r(e,t,n){var i=e.labels,s=e._recent||t8,l=e.duration()>=cc?s.endTime(!1):e._dur,c,h,p;return qa(t)&&(isNaN(t)||t in i)?(h=t.charAt(0),p=t.substr(-1)==="%",c=t.indexOf("="),h==="<"||h===">"?(c>=0&&(t=t.replace(/=/,"")),(h==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(p?(c<0?s:n).totalDuration()/100:1)):c<0?(t in i||(i[t]=l),i[t]):(h=parseFloat(t.charAt(c-1)+t.substr(c+1)),p&&n&&(h=h/100*(ws(n)?n[0]:n).totalDuration()),c>1?r(e,t.substr(0,c-1),n)+h:l+h)):t==null?l:+t},P0=function(e,t,n){var i=hu(t[1]),s=(i?2:1)+(e<2?0:1),l=t[s],c,h;if(i&&(l.duration=t[1]),l.parent=n,e){for(c=l,h=n;h&&!("immediateRender"in c);)c=h.vars.defaults||{},h=gr(h.vars.inherit)&&h.parent;l.immediateRender=gr(c.immediateRender),e<2?l.runBackwards=1:l.startAt=t[s-1]}return new xa(t[0],l,t[s+1])},Nf=function(e,t){return e||e===0?t(e):t},Ov=function(e,t,n){return n<e?e:n>t?t:n},bs=function(e,t){return!qa(e)||!(t=X5.exec(e))?"":t[1]},n8=function(e,t,n){return Nf(n,function(i){return Ov(e,t,i)})},dE=[].slice,XD=function(e,t){return e&&mc(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&mc(e[0]))&&!e.nodeType&&e!==$l},i8=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(i){var s;return qa(i)&&!t||XD(i,1)?(s=n).push.apply(s,Ao(i)):n.push(i)})||n},Ao=function(e,t,n){return Ii&&!t&&Ii.selector?Ii.selector(e):qa(e)&&!n&&(cE||!wm())?dE.call((t||Jb).querySelectorAll(e),0):ws(e)?i8(e,n):XD(e)?dE.call(e,0):e?[e]:[]},pE=function(e){return e=Ao(e)[0]||ov("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Ao(t,n.querySelectorAll?n:n===e?ov("Invalid scope")||Jb.createElement("div"):e)}},YD=function(e){return e.sort(function(){return .5-Math.random()})},qD=function(e){if(ra(e))return e;var t=mc(e)?e:{each:e},n=cd(t.ease),i=t.from||0,s=parseFloat(t.base)||0,l={},c=i>0&&i<1,h=isNaN(i)||c,p=t.axis,g=i,_=i;return qa(i)?g=_={center:.5,edges:.5,end:1}[i]||0:!c&&h&&(g=i[0],_=i[1]),function(y,x,M){var T=(M||t).length,b=l[T],E,w,D,B,I,L,F,H,U;if(!b){if(U=t.grid==="auto"?0:(t.grid||[1,cc])[1],!U){for(F=-1e8;F<(F=M[U++].getBoundingClientRect().left)&&U<T;);U<T&&U--}for(b=l[T]=[],E=h?Math.min(U,T)*g-.5:i%U,w=U===cc?0:h?T*_/U-.5:i/U|0,F=0,H=cc,L=0;L<T;L++)D=L%U-E,B=w-(L/U|0),b[L]=I=p?Math.abs(p==="y"?B:D):CD(D*D+B*B),I>F&&(F=I),I<H&&(H=I);i==="random"&&YD(b),b.max=F-H,b.min=H,b.v=T=(parseFloat(t.amount)||parseFloat(t.each)*(U>T?T-1:p?p==="y"?T/U:U:Math.max(U,T/U))||0)*(i==="edges"?-1:1),b.b=T<0?s-T:s,b.u=bs(t.amount||t.each)||0,n=n&&T<0?n3(n):n}return T=(b[y]-b.min)/b.max||0,Aa(b.b+(n?n(T):T)*b.v)+b.u}},mE=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=Aa(Math.round(parseFloat(n)/e)*e*t);return(i-i%1)/t+(hu(n)?0:bs(n))}},JD=function(e,t){var n=ws(e),i,s;return!n&&mc(e)&&(i=n=e.radius||cc,e.values?(e=Ao(e.values),(s=!hu(e[0]))&&(i*=i)):e=mE(e.increment)),Nf(t,n?ra(e)?function(l){return s=e(l),Math.abs(s-l)<=i?s:l}:function(l){for(var c=parseFloat(s?l.x:l),h=parseFloat(s?l.y:0),p=cc,g=0,_=e.length,y,x;_--;)s?(y=e[_].x-c,x=e[_].y-h,y=y*y+x*x):y=Math.abs(e[_]-c),y<p&&(p=y,g=_);return g=!i||p<=i?e[g]:l,s||g===l||hu(l)?g:g+bs(l)}:mE(e))},WD=function(e,t,n,i){return Nf(ws(e)?!t:n===!0?!!(n=0):!i,function(){return ws(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*i)/i})},a8=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){return t.reduce(function(s,l){return l(s)},i)}},s8=function(e,t){return function(n){return e(parseFloat(n))+(t||bs(n))}},r8=function(e,t,n){return KD(e,t,0,1,n)},jD=function(e,t,n){return Nf(n,function(i){return e[~~t(i)]})},o8=function r(e,t,n){var i=t-e;return ws(e)?jD(e,r(0,e.length),t):Nf(n,function(s){return(i+(s-e)%i)%i+e})},l8=function r(e,t,n){var i=t-e,s=i*2;return ws(e)?jD(e,r(0,e.length-1),t):Nf(n,function(l){return l=(s+(l-e)%s)%s||0,e+(l>i?s-l:l)})},cv=function(e){for(var t=0,n="",i,s,l,c;~(i=e.indexOf("random(",t));)l=e.indexOf(")",i),c=e.charAt(i+7)==="[",s=e.substr(i+7,l-i-7).match(c?DD:lE),n+=e.substr(t,i-t)+WD(c?s:+s[0],c?0:+s[1],+s[2]||1e-5),t=l+1;return n+e.substr(t,e.length-t)},KD=function(e,t,n,i,s){var l=t-e,c=i-n;return Nf(s,function(h){return n+((h-e)/l*c||0)})},c8=function r(e,t,n,i){var s=isNaN(e+t)?0:function(x){return(1-x)*e+x*t};if(!s){var l=qa(e),c={},h,p,g,_,y;if(n===!0&&(i=1)&&(n=null),l)e={p:e},t={p:t};else if(ws(e)&&!ws(t)){for(g=[],_=e.length,y=_-2,p=1;p<_;p++)g.push(r(e[p-1],e[p]));_--,s=function(M){M*=_;var T=Math.min(y,~~M);return g[T](M-T)},n=t}else i||(e=Tm(ws(e)?[]:{},e));if(!g){for(h in t)Qb.call(c,e,h,"get",t[h]);s=function(M){return nT(M,c)||(l?e.p:e)}}}return Nf(n,s)},mw=function(e,t,n){var i=e.labels,s=cc,l,c,h;for(l in i)c=i[l]-t,c<0==!!n&&c&&s>(c=Math.abs(c))&&(h=l,s=c);return h},Xr=function(e,t,n){var i=e.vars,s=i[t],l=Ii,c=e._ctx,h,p,g;if(s)return h=i[t+"Params"],p=i.callbackScope||e,n&&xf.length&&RA(),c&&(Ii=c),g=h?s.apply(p,h):s.call(p),Ii=l,g},_0=function(e){return Cf(e),e.scrollTrigger&&e.scrollTrigger.kill(!!os),e.progress()<1&&Xr(e,"onInterrupt"),e},im,ZD=[],QD=function(e){if(e)if(e=!e.name&&e.default||e,qb()||e.headless){var t=e.name,n=ra(e),i=t&&!n&&e.init?function(){this._props=[]}:e,s={init:lv,render:nT,add:Qb,kill:b8,modifier:E8,rawVars:0},l={targetTest:0,get:0,getSetter:tT,aliases:{},register:0};if(wm(),e!==i){if(Hr[t])return;jr(i,jr(wA(e,s),l)),Tm(i.prototype,Tm(s,wA(e,l))),Hr[i.prop=t]=i,e.targetTest&&(Cx.push(i),jb[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}ND(t,i),e.register&&e.register(Sr,i,_r)}else ZD.push(e)},Ei=255,y0={aqua:[0,Ei,Ei],lime:[0,Ei,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ei],navy:[0,0,128],white:[Ei,Ei,Ei],olive:[128,128,0],yellow:[Ei,Ei,0],orange:[Ei,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ei,0,0],pink:[Ei,192,203],cyan:[0,Ei,Ei],transparent:[Ei,Ei,Ei,0]},S1=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*Ei+.5|0},$D=function(e,t,n){var i=e?hu(e)?[e>>16,e>>8&Ei,e&Ei]:0:y0.black,s,l,c,h,p,g,_,y,x,M;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),y0[e])i=y0[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),l=e.charAt(2),c=e.charAt(3),e="#"+s+s+l+l+c+c+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Ei,i&Ei,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Ei,e&Ei]}else if(e.substr(0,3)==="hsl"){if(i=M=e.match(lE),!t)h=+i[0]%360/360,p=+i[1]/100,g=+i[2]/100,l=g<=.5?g*(p+1):g+p-g*p,s=g*2-l,i.length>3&&(i[3]*=1),i[0]=S1(h+1/3,s,l),i[1]=S1(h,s,l),i[2]=S1(h-1/3,s,l);else if(~e.indexOf("="))return i=e.match(wD),n&&i.length<4&&(i[3]=1),i}else i=e.match(lE)||y0.transparent;i=i.map(Number)}return t&&!M&&(s=i[0]/Ei,l=i[1]/Ei,c=i[2]/Ei,_=Math.max(s,l,c),y=Math.min(s,l,c),g=(_+y)/2,_===y?h=p=0:(x=_-y,p=g>.5?x/(2-_-y):x/(_+y),h=_===s?(l-c)/x+(l<c?6:0):_===l?(c-s)/x+2:(s-l)/x+4,h*=60),i[0]=~~(h+.5),i[1]=~~(p*100+.5),i[2]=~~(g*100+.5)),n&&i.length<4&&(i[3]=1),i},e3=function(e){var t=[],n=[],i=-1;return e.split(Af).forEach(function(s){var l=s.match(nm)||[];t.push.apply(t,l),n.push(i+=l.length+1)}),t.c=n,t},gw=function(e,t,n){var i="",s=(e+i).match(Af),l=t?"hsla(":"rgba(",c=0,h,p,g,_;if(!s)return e;if(s=s.map(function(y){return(y=$D(y,t,1))&&l+(t?y[0]+","+y[1]+"%,"+y[2]+"%,"+y[3]:y.join(","))+")"}),n&&(g=e3(e),h=n.c,h.join(i)!==g.c.join(i)))for(p=e.replace(Af,"1").split(nm),_=p.length-1;c<_;c++)i+=p[c]+(~h.indexOf(c)?s.shift()||l+"0,0,0,0)":(g.length?g:s.length?s:n).shift());if(!p)for(p=e.split(Af),_=p.length-1;c<_;c++)i+=p[c]+s[c];return i+p[_]},Af=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in y0)r+="|"+e+"\\b";return new RegExp(r+")","gi")}(),u8=/hsl[a]?\(/,t3=function(e){var t=e.join(" "),n;if(Af.lastIndex=0,Af.test(t))return n=u8.test(t),e[1]=gw(e[1],n),e[0]=gw(e[0],n,e3(e[1])),!0},uv,Vr=function(){var r=Date.now,e=500,t=33,n=r(),i=n,s=1e3/240,l=s,c=[],h,p,g,_,y,x,M=function T(b){var E=r()-i,w=b===!0,D,B,I,L;if((E>e||E<0)&&(n+=E-t),i+=E,I=i-n,D=I-l,(D>0||w)&&(L=++_.frame,y=I-_.time*1e3,_.time=I=I/1e3,l+=D+(D>=s?4:s-D),B=1),w||(h=p(T)),B)for(x=0;x<c.length;x++)c[x](I,y,L,b)};return _={time:0,frame:0,tick:function(){M(!0)},deltaRatio:function(b){return y/(1e3/(b||60))},wake:function(){UD&&(!cE&&qb()&&($l=cE=window,Jb=$l.document||{},Wr.gsap=Sr,($l.gsapVersions||($l.gsapVersions=[])).push(Sr.version),OD(CA||$l.GreenSockGlobals||!$l.gsap&&$l||{}),ZD.forEach(QD)),g=typeof requestAnimationFrame<"u"&&requestAnimationFrame,h&&_.sleep(),p=g||function(b){return setTimeout(b,l-_.time*1e3+1|0)},uv=1,M(2))},sleep:function(){(g?cancelAnimationFrame:clearTimeout)(h),uv=0,p=lv},lagSmoothing:function(b,E){e=b||1/0,t=Math.min(E||33,e)},fps:function(b){s=1e3/(b||240),l=_.time*1e3+s},add:function(b,E,w){var D=E?function(B,I,L,F){b(B,I,L,F),_.remove(D)}:b;return _.remove(b),c[w?"unshift":"push"](D),wm(),D},remove:function(b,E){~(E=c.indexOf(b))&&c.splice(E,1)&&x>=E&&x--},_listeners:c},_}(),wm=function(){return!uv&&Vr.wake()},qn={},f8=/^[\d.\-M][\d.\-,\s]/,h8=/["']/g,d8=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),i=n[0],s=1,l=n.length,c,h,p;s<l;s++)h=n[s],c=s!==l-1?h.lastIndexOf(","):h.length,p=h.substr(0,c),t[i]=isNaN(p)?p.replace(h8,"").trim():+p,i=h.substr(c+1).trim();return t},p8=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<n?e.indexOf(")",n+1):n)},m8=function(e){var t=(e+"").split("("),n=qn[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[d8(t[1])]:p8(e).split(",").map(FD)):qn._CE&&f8.test(e)?qn._CE("",e):n},n3=function(e){return function(t){return 1-e(1-t)}},i3=function r(e,t){for(var n=e._first,i;n;)n instanceof Ws?r(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?r(n.timeline,t):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=t)),n=n._next},cd=function(e,t){return e&&(ra(e)?e:qn[e]||m8(e))||t},Ud=function(e,t,n,i){n===void 0&&(n=function(h){return 1-t(1-h)}),i===void 0&&(i=function(h){return h<.5?t(h*2)/2:1-t((1-h)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:i},l;return vr(e,function(c){qn[c]=Wr[c]=s,qn[l=c.toLowerCase()]=n;for(var h in s)qn[l+(h==="easeIn"?".in":h==="easeOut"?".out":".inOut")]=qn[c+"."+h]=s[h]}),s},a3=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},M1=function r(e,t,n){var i=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),l=s/oE*(Math.asin(1/i)||0),c=function(g){return g===1?1:i*Math.pow(2,-10*g)*k5((g-l)*s)+1},h=e==="out"?c:e==="in"?function(p){return 1-c(1-p)}:a3(c);return s=oE/s,h.config=function(p,g){return r(e,p,g)},h},E1=function r(e,t){t===void 0&&(t=1.70158);var n=function(l){return l?--l*l*((t+1)*l+t)+1:0},i=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:a3(n);return i.config=function(s){return r(e,s)},i};vr("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var t=e<5?e+1:e;Ud(r+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});qn.Linear.easeNone=qn.none=qn.Linear.easeIn;Ud("Elastic",M1("in"),M1("out"),M1());(function(r,e){var t=1/e,n=2*t,i=2.5*t,s=function(c){return c<t?r*c*c:c<n?r*Math.pow(c-1.5/e,2)+.75:c<i?r*(c-=2.25/e)*c+.9375:r*Math.pow(c-2.625/e,2)+.984375};Ud("Bounce",function(l){return 1-s(1-l)},s)})(7.5625,2.75);Ud("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});Ud("Circ",function(r){return-(CD(1-r*r)-1)});Ud("Sine",function(r){return r===1?1:-V5(r*H5)+1});Ud("Back",E1("in"),E1("out"),E1());qn.SteppedEase=qn.steps=Wr.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,i=e+(t?0:1),s=t?1:0,l=1-Cs;return function(c){return((i*Ov(0,l,c)|0)+s)*n}}};bm.ease=qn["quad.out"];vr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return Kb+=r+","+r+"Params,"});var s3=function(e,t){this.id=G5++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:ID,this.set=t?t.getSetter:tT},fv=function(){function r(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Rm(this,+t.duration,1,1),this.data=t.data,Ii&&(this._ctx=Ii,Ii.data.push(this)),uv||Vr.wake()}var e=r.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Rm(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,i){if(wm(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(SS(this,n),!s._dp||s.parent||GD(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&nc(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Cs||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),PD(this,n,i)),this},e.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+dw(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},e.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+dw(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,i):this._repeat?Cm(this._tTime,s)+1:1},e.timeScale=function(n,i){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?BA(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-1e-8?0:this._rts,this.totalTime(Ov(-Math.abs(this._delay),this._tDur,s),i!==!1),AS(this),K5(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(wm(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Cs&&(this._tTime-=Cs)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&nc(i,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(gr(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?BA(i.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=q5);var i=os;return os=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),os=i,this},e.globalTime=function(n){for(var i=this,s=arguments.length?n:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,pw(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,pw(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,i){return this.totalTime(po(this,n),gr(i))},e.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,gr(i)),this._dur||(this._zTime=-1e-8),this},e.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},e.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var n=this.parent||this._dp,i=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=i&&s<this.endTime(!0)-Cs)},e.eventCallback=function(n,i,s){var l=this.vars;return arguments.length>1?(i?(l[n]=i,s&&(l[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=i)):delete l[n],this):l[n]},e.then=function(n){var i=this;return new Promise(function(s){var l=ra(n)?n:zD,c=function(){var p=i.then;i.then=null,ra(l)&&(l=l(i))&&(l.then||l===i)&&(i.then=p),s(l),i.then=p};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?c():i._prom=c})},e.kill=function(){_0(this)},r}();jr(fv.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Ws=function(r){TD(e,r);function e(n,i){var s;return n===void 0&&(n={}),s=r.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=gr(n.sortChildren),qi&&nc(n.parent||qi,Qc(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&VD(Qc(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,l){return P0(0,arguments,this),this},t.from=function(i,s,l){return P0(1,arguments,this),this},t.fromTo=function(i,s,l,c){return P0(2,arguments,this),this},t.set=function(i,s,l){return s.duration=0,s.parent=this,I0(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new xa(i,s,po(this,l),1),this},t.call=function(i,s,l){return nc(this,xa.delayedCall(0,i,s),l)},t.staggerTo=function(i,s,l,c,h,p,g){return l.duration=s,l.stagger=l.stagger||c,l.onComplete=p,l.onCompleteParams=g,l.parent=this,new xa(i,l,po(this,h)),this},t.staggerFrom=function(i,s,l,c,h,p,g){return l.runBackwards=1,I0(l).immediateRender=gr(l.immediateRender),this.staggerTo(i,s,l,c,h,p,g)},t.staggerFromTo=function(i,s,l,c,h,p,g,_){return c.startAt=l,I0(c).immediateRender=gr(c.immediateRender),this.staggerTo(i,s,c,h,p,g,_)},t.render=function(i,s,l){var c=this._time,h=this._dirty?this.totalDuration():this._tDur,p=this._dur,g=i<=0?0:Aa(i),_=this._zTime<0!=i<0&&(this._initted||!p),y,x,M,T,b,E,w,D,B,I,L,F;if(this!==qi&&g>h&&i>=0&&(g=h),g!==this._tTime||l||_){if(c!==this._time&&p&&(g+=this._time-c,i+=this._time-c),y=g,B=this._start,D=this._ts,E=!D,_&&(p||(c=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(L=this._yoyo,b=p+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(b*100+i,s,l);if(y=Aa(g%b),g===h?(T=this._repeat,y=p):(I=Aa(g/b),T=~~I,T&&T===I&&(y=p,T--),y>p&&(y=p)),I=Cm(this._tTime,b),!c&&this._tTime&&I!==T&&this._tTime-I*b-this._dur<=0&&(I=T),L&&T&1&&(y=p-y,F=1),T!==I&&!this._lock){var H=L&&I&1,U=H===(L&&T&1);if(T<I&&(H=!H),c=H?0:g%p?p:g,this._lock=1,this.render(c||(F?0:Aa(T*b)),s,!p)._lock=0,this._tTime=g,!s&&this.parent&&Xr(this,"onRepeat"),this.vars.repeatRefresh&&!F&&(this.invalidate()._lock=1),c&&c!==this._time||E!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(p=this._dur,h=this._tDur,U&&(this._lock=2,c=H?p:-1e-4,this.render(c,!0),this.vars.repeatRefresh&&!F&&this.invalidate()),this._lock=0,!this._ts&&!E)return this;i3(this,F)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(w=e8(this,Aa(c),Aa(y)),w&&(g-=y-(y=w._start))),this._tTime=g,this._time=y,this._act=!D,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,c=0),!c&&y&&!s&&!T&&(Xr(this,"onStart"),this._tTime!==g))return this;if(y>=c&&i>=0)for(x=this._first;x;){if(M=x._next,(x._act||y>=x._start)&&x._ts&&w!==x){if(x.parent!==this)return this.render(i,s,l);if(x.render(x._ts>0?(y-x._start)*x._ts:(x._dirty?x.totalDuration():x._tDur)+(y-x._start)*x._ts,s,l),y!==this._time||!this._ts&&!E){w=0,M&&(g+=this._zTime=-1e-8);break}}x=M}else{x=this._last;for(var N=i<0?i:y;x;){if(M=x._prev,(x._act||N<=x._end)&&x._ts&&w!==x){if(x.parent!==this)return this.render(i,s,l);if(x.render(x._ts>0?(N-x._start)*x._ts:(x._dirty?x.totalDuration():x._tDur)+(N-x._start)*x._ts,s,l||os&&(x._initted||x._startAt)),y!==this._time||!this._ts&&!E){w=0,M&&(g+=this._zTime=N?-1e-8:Cs);break}}x=M}}if(w&&!s&&(this.pause(),w.render(y>=c?0:-1e-8)._zTime=y>=c?1:-1,this._ts))return this._start=B,AS(this),this.render(i,s,l);this._onUpdate&&!s&&Xr(this,"onUpdate",!0),(g===h&&this._tTime>=this.totalDuration()||!g&&c)&&(B===this._start||Math.abs(D)!==Math.abs(this._ts))&&(this._lock||((i||!p)&&(g===h&&this._ts>0||!g&&this._ts<0)&&Cf(this,1),!s&&!(i<0&&!c)&&(g||c||!h)&&(Xr(this,g===h&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(g<h&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var l=this;if(hu(s)||(s=po(this,s,i)),!(i instanceof fv)){if(ws(i))return i.forEach(function(c){return l.add(c,s)}),this;if(qa(i))return this.addLabel(i,s);if(ra(i))i=xa.delayedCall(0,i);else return this}return this!==i?nc(this,i,s):this},t.getChildren=function(i,s,l,c){i===void 0&&(i=!0),s===void 0&&(s=!0),l===void 0&&(l=!0),c===void 0&&(c=-1e8);for(var h=[],p=this._first;p;)p._start>=c&&(p instanceof xa?s&&h.push(p):(l&&h.push(p),i&&h.push.apply(h,p.getChildren(!0,s,l)))),p=p._next;return h},t.getById=function(i){for(var s=this.getChildren(1,1,1),l=s.length;l--;)if(s[l].vars.id===i)return s[l]},t.remove=function(i){return qa(i)?this.removeLabel(i):ra(i)?this.killTweensOf(i):(i.parent===this&&xS(this,i),i===this._recent&&(this._recent=this._last),ld(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Aa(Vr.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),r.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=po(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,l){var c=xa.delayedCall(0,s||lv,l);return c.data="isPause",this._hasPause=1,nc(this,c,po(this,i))},t.removePause=function(i){var s=this._first;for(i=po(this,i);s;)s._start===i&&s.data==="isPause"&&Cf(s),s=s._next},t.killTweensOf=function(i,s,l){for(var c=this.getTweensOf(i,l),h=c.length;h--;)pf!==c[h]&&c[h].kill(i,s);return this},t.getTweensOf=function(i,s){for(var l=[],c=Ao(i),h=this._first,p=hu(s),g;h;)h instanceof xa?J5(h._targets,c)&&(p?(!pf||h._initted&&h._ts)&&h.globalTime(0)<=s&&h.globalTime(h.totalDuration())>s:!s||h.isActive())&&l.push(h):(g=h.getTweensOf(c,s)).length&&l.push.apply(l,g),h=h._next;return l},t.tweenTo=function(i,s){s=s||{};var l=this,c=po(l,i),h=s,p=h.startAt,g=h.onStart,_=h.onStartParams,y=h.immediateRender,x,M=xa.to(l,jr({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:c,overwrite:"auto",duration:s.duration||Math.abs((c-(p&&"time"in p?p.time:l._time))/l.timeScale())||Cs,onStart:function(){if(l.pause(),!x){var b=s.duration||Math.abs((c-(p&&"time"in p?p.time:l._time))/l.timeScale());M._dur!==b&&Rm(M,b,0,1).render(M._time,!0,!0),x=1}g&&g.apply(M,_||[])}},s));return y?M.render(0):M},t.tweenFromTo=function(i,s,l){return this.tweenTo(s,jr({startAt:{time:po(this,i)}},l))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),mw(this,po(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),mw(this,po(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Cs)},t.shiftChildren=function(i,s,l){l===void 0&&(l=0);for(var c=this._first,h=this.labels,p;c;)c._start>=l&&(c._start+=i,c._end+=i),c=c._next;if(s)for(p in h)h[p]>=l&&(h[p]+=i);return ld(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return r.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,l;s;)l=s._next,this.remove(s),s=l;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),ld(this)},t.totalDuration=function(i){var s=0,l=this,c=l._last,h=cc,p,g,_;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-i:i));if(l._dirty){for(_=l.parent;c;)p=c._prev,c._dirty&&c.totalDuration(),g=c._start,g>h&&l._sort&&c._ts&&!l._lock?(l._lock=1,nc(l,c,g-c._delay,1)._lock=0):h=g,g<0&&c._ts&&(s-=g,(!_&&!l._dp||_&&_.smoothChildTiming)&&(l._start+=g/l._ts,l._time-=g,l._tTime-=g),l.shiftChildren(-g,!1,-1/0),h=0),c._end>s&&c._ts&&(s=c._end),c=p;Rm(l,l===qi&&l._time>s?l._time:s,1,1),l._dirty=0}return l._tDur},e.updateRoot=function(i){if(qi._ts&&(PD(qi,BA(i,qi)),LD=Vr.frame),Vr.frame>=fw){fw+=qr.autoSleep||120;var s=qi._first;if((!s||!s._ts)&&qr.autoSleep&&Vr._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Vr.sleep()}}},e}(fv);jr(Ws.prototype,{_lock:0,_hasPause:0,_forcing:0});var g8=function(e,t,n,i,s,l,c){var h=new _r(this._pt,e,t,0,1,f3,null,s),p=0,g=0,_,y,x,M,T,b,E,w;for(h.b=n,h.e=i,n+="",i+="",(E=~i.indexOf("random("))&&(i=cv(i)),l&&(w=[n,i],l(w,e,t),n=w[0],i=w[1]),y=n.match(x1)||[];_=x1.exec(i);)M=_[0],T=i.substring(p,_.index),x?x=(x+1)%5:T.substr(-5)==="rgba("&&(x=1),M!==y[g++]&&(b=parseFloat(y[g-1])||0,h._pt={_next:h._pt,p:T||g===1?T:",",s:b,c:M.charAt(1)==="="?cm(b,M)-b:parseFloat(M)-b,m:x&&x<4?Math.round:0},p=x1.lastIndex);return h.c=p<i.length?i.substring(p,i.length):"",h.fp=c,(BD.test(i)||E)&&(h.e=0),this._pt=h,h},Qb=function(e,t,n,i,s,l,c,h,p,g){ra(i)&&(i=i(s||0,e,l));var _=e[t],y=n!=="get"?n:ra(_)?p?e[t.indexOf("set")||!ra(e["get"+t.substr(3)])?t:"get"+t.substr(3)](p):e[t]():_,x=ra(_)?p?A8:c3:eT,M;if(qa(i)&&(~i.indexOf("random(")&&(i=cv(i)),i.charAt(1)==="="&&(M=cm(y,i)+(bs(y)||0),(M||M===0)&&(i=M))),!g||y!==i||gE)return!isNaN(y*i)&&i!==""?(M=new _r(this._pt,e,t,+y||0,i-(y||0),typeof _=="boolean"?M8:u3,0,x),p&&(M.fp=p),c&&M.modifier(c,this,e),this._pt=M):(!_&&!(t in e)&&Wb(t,i),g8.call(this,e,t,y,i,x,h||qr.stringFilter,p))},v8=function(e,t,n,i,s){if(ra(e)&&(e=F0(e,s,t,n,i)),!mc(e)||e.style&&e.nodeType||ws(e)||RD(e))return qa(e)?F0(e,s,t,n,i):e;var l={},c;for(c in e)l[c]=F0(e[c],s,t,n,i);return l},r3=function(e,t,n,i,s,l){var c,h,p,g;if(Hr[e]&&(c=new Hr[e]).init(s,c.rawVars?t[e]:v8(t[e],i,s,l,n),n,i,l)!==!1&&(n._pt=h=new _r(n._pt,s,e,0,1,c.render,c,0,c.priority),n!==im))for(p=n._ptLookup[n._targets.indexOf(s)],g=c._props.length;g--;)p[c._props[g]]=h;return c},pf,gE,$b=function r(e,t,n){var i=e.vars,s=i.ease,l=i.startAt,c=i.immediateRender,h=i.lazy,p=i.onUpdate,g=i.runBackwards,_=i.yoyoEase,y=i.keyframes,x=i.autoRevert,M=e._dur,T=e._startAt,b=e._targets,E=e.parent,w=E&&E.data==="nested"?E.vars.targets:b,D=e._overwrite==="auto"&&!Xb,B=e.timeline,I,L,F,H,U,N,Y,ee,$,ae,me,Q,he;if(B&&(!y||!s)&&(s="none"),e._ease=cd(s,bm.ease),e._yEase=_?n3(cd(_===!0?s:_,bm.ease)):0,_&&e._yoyo&&!e._repeat&&(_=e._yEase,e._yEase=e._ease,e._ease=_),e._from=!B&&!!i.runBackwards,!B||y&&!i.stagger){if(ee=b[0]?od(b[0]).harness:0,Q=ee&&i[ee.prop],I=wA(i,jb),T&&(T._zTime<0&&T.progress(1),t<0&&g&&c&&!x?T.render(-1,!0):T.revert(g&&M?Tx:Y5),T._lazy=0),l){if(Cf(e._startAt=xa.set(b,jr({data:"isStart",overwrite:!1,parent:E,immediateRender:!0,lazy:!T&&gr(h),startAt:null,delay:0,onUpdate:p&&function(){return Xr(e,"onUpdate")},stagger:0},l))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(os||!c&&!x)&&e._startAt.revert(Tx),c&&M&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(g&&M&&!T){if(t&&(c=!1),F=jr({overwrite:!1,data:"isFromStart",lazy:c&&!T&&gr(h),immediateRender:c,stagger:0,parent:E},I),Q&&(F[ee.prop]=Q),Cf(e._startAt=xa.set(b,F)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(os?e._startAt.revert(Tx):e._startAt.render(-1,!0)),e._zTime=t,!c)r(e._startAt,Cs,Cs);else if(!t)return}for(e._pt=e._ptCache=0,h=M&&gr(h)||h&&!M,L=0;L<b.length;L++){if(U=b[L],Y=U._gsap||Zb(b)[L]._gsap,e._ptLookup[L]=ae={},uE[Y.id]&&xf.length&&RA(),me=w===b?L:w.indexOf(U),ee&&($=new ee).init(U,Q||I,e,me,w)!==!1&&(e._pt=H=new _r(e._pt,U,$.name,0,1,$.render,$,0,$.priority),$._props.forEach(function(oe){ae[oe]=H}),$.priority&&(N=1)),!ee||Q)for(F in I)Hr[F]&&($=r3(F,I,e,me,U,w))?$.priority&&(N=1):ae[F]=H=Qb.call(e,U,F,"get",I[F],me,w,0,i.stringFilter);e._op&&e._op[L]&&e.kill(U,e._op[L]),D&&e._pt&&(pf=e,qi.killTweensOf(U,ae,e.globalTime(t)),he=!e.parent,pf=0),e._pt&&h&&(uE[Y.id]=1)}N&&h3(e),e._onInit&&e._onInit(e)}e._onUpdate=p,e._initted=(!e._op||e._pt)&&!he,y&&t<=0&&B.render(cc,!0,!0)},_8=function(e,t,n,i,s,l,c,h){var p=(e._pt&&e._ptCache||(e._ptCache={}))[t],g,_,y,x;if(!p)for(p=e._ptCache[t]=[],y=e._ptLookup,x=e._targets.length;x--;){if(g=y[x][t],g&&g.d&&g.d._pt)for(g=g.d._pt;g&&g.p!==t&&g.fp!==t;)g=g._next;if(!g)return gE=1,e.vars[t]="+=0",$b(e,c),gE=0,h?ov(t+" not eligible for reset"):1;p.push(g)}for(x=p.length;x--;)_=p[x],g=_._pt||_,g.s=(i||i===0)&&!s?i:g.s+(i||0)+l*g.c,g.c=n-g.s,_.e&&(_.e=ua(n)+bs(_.e)),_.b&&(_.b=g.s+bs(_.b))},y8=function(e,t){var n=e[0]?od(e[0]).harness:0,i=n&&n.aliases,s,l,c,h;if(!i)return t;s=Tm({},t);for(l in i)if(l in s)for(h=i[l].split(","),c=h.length;c--;)s[h[c]]=s[l];return s},x8=function(e,t,n,i){var s=t.ease||i||"power1.inOut",l,c;if(ws(t))c=n[e]||(n[e]=[]),t.forEach(function(h,p){return c.push({t:p/(t.length-1)*100,v:h,e:s})});else for(l in t)c=n[l]||(n[l]=[]),l==="ease"||c.push({t:parseFloat(e),v:t[l],e:s})},F0=function(e,t,n,i,s){return ra(e)?e.call(t,n,i,s):qa(e)&&~e.indexOf("random(")?cv(e):e},o3=Kb+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",l3={};vr(o3+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return l3[r]=1});var xa=function(r){TD(e,r);function e(n,i,s,l){var c;typeof i=="number"&&(s.duration=i,i=s,s=null),c=r.call(this,l?i:I0(i))||this;var h=c.vars,p=h.duration,g=h.delay,_=h.immediateRender,y=h.stagger,x=h.overwrite,M=h.keyframes,T=h.defaults,b=h.scrollTrigger,E=h.yoyoEase,w=i.parent||qi,D=(ws(n)||RD(n)?hu(n[0]):"length"in i)?[n]:Ao(n),B,I,L,F,H,U,N,Y;if(c._targets=D.length?Zb(D):ov("GSAP target "+n+" not found. https://gsap.com",!qr.nullTargetWarn)||[],c._ptLookup=[],c._overwrite=x,M||y||ox(p)||ox(g)){if(i=c.vars,B=c.timeline=new Ws({data:"nested",defaults:T||{},targets:w&&w.data==="nested"?w.vars.targets:D}),B.kill(),B.parent=B._dp=Qc(c),B._start=0,y||ox(p)||ox(g)){if(F=D.length,N=y&&qD(y),mc(y))for(H in y)~o3.indexOf(H)&&(Y||(Y={}),Y[H]=y[H]);for(I=0;I<F;I++)L=wA(i,l3),L.stagger=0,E&&(L.yoyoEase=E),Y&&Tm(L,Y),U=D[I],L.duration=+F0(p,Qc(c),I,U,D),L.delay=(+F0(g,Qc(c),I,U,D)||0)-c._delay,!y&&F===1&&L.delay&&(c._delay=g=L.delay,c._start+=g,L.delay=0),B.to(U,L,N?N(I,U,D):0),B._ease=qn.none;B.duration()?p=g=0:c.timeline=0}else if(M){I0(jr(B.vars.defaults,{ease:"none"})),B._ease=cd(M.ease||i.ease||"none");var ee=0,$,ae,me;if(ws(M))M.forEach(function(Q){return B.to(D,Q,">")}),B.duration();else{L={};for(H in M)H==="ease"||H==="easeEach"||x8(H,M[H],L,M.easeEach);for(H in L)for($=L[H].sort(function(Q,he){return Q.t-he.t}),ee=0,I=0;I<$.length;I++)ae=$[I],me={ease:ae.e,duration:(ae.t-(I?$[I-1].t:0))/100*p},me[H]=ae.v,B.to(D,me,ee),ee+=me.duration;B.duration()<p&&B.to({},{duration:p-B.duration()})}}p||c.duration(p=B.duration())}else c.timeline=0;return x===!0&&!Xb&&(pf=Qc(c),qi.killTweensOf(D),pf=0),nc(w,Qc(c),s),i.reversed&&c.reverse(),i.paused&&c.paused(!0),(_||!p&&!M&&c._start===Aa(w._time)&&gr(_)&&Z5(Qc(c))&&w.data!=="nested")&&(c._tTime=-1e-8,c.render(Math.max(0,-g)||0)),b&&VD(Qc(c),b),c}var t=e.prototype;return t.render=function(i,s,l){var c=this._time,h=this._tDur,p=this._dur,g=i<0,_=i>h-Cs&&!g?h:i<Cs?0:i,y,x,M,T,b,E,w,D,B;if(!p)$5(this,i,s,l);else if(_!==this._tTime||!i||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g||this._lazy){if(y=_,D=this.timeline,this._repeat){if(T=p+this._rDelay,this._repeat<-1&&g)return this.totalTime(T*100+i,s,l);if(y=Aa(_%T),_===h?(M=this._repeat,y=p):(b=Aa(_/T),M=~~b,M&&M===b?(y=p,M--):y>p&&(y=p)),E=this._yoyo&&M&1,E&&(B=this._yEase,y=p-y),b=Cm(this._tTime,T),y===c&&!l&&this._initted&&M===b)return this._tTime=_,this;M!==b&&(D&&this._yEase&&i3(D,E),this.vars.repeatRefresh&&!E&&!this._lock&&y!==T&&this._initted&&(this._lock=l=1,this.render(Aa(T*M),!0).invalidate()._lock=0))}if(!this._initted){if(kD(this,g?i:y,l,s,_))return this._tTime=0,this;if(c!==this._time&&!(l&&this.vars.repeatRefresh&&M!==b))return this;if(p!==this._dur)return this.render(i,s,l)}if(this._tTime=_,this._time=y,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=w=(B||this._ease)(y/p),this._from&&(this.ratio=w=1-w),y&&!c&&!s&&!M&&(Xr(this,"onStart"),this._tTime!==_))return this;for(x=this._pt;x;)x.r(w,x.d),x=x._next;D&&D.render(i<0?i:D._dur*D._ease(y/this._dur),s,l)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(g&&fE(this,i,s,l),Xr(this,"onUpdate")),this._repeat&&M!==b&&this.vars.onRepeat&&!s&&this.parent&&Xr(this,"onRepeat"),(_===this._tDur||!_)&&this._tTime===_&&(g&&!this._onUpdate&&fE(this,i,!0,!0),(i||!p)&&(_===this._tDur&&this._ts>0||!_&&this._ts<0)&&Cf(this,1),!s&&!(g&&!c)&&(_||c||E)&&(Xr(this,_===h?"onComplete":"onReverseComplete",!0),this._prom&&!(_<h&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),r.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,l,c,h){uv||Vr.wake(),this._ts||this.play();var p=Math.min(this._dur,(this._dp._time-this._start)*this._ts),g;return this._initted||$b(this,p),g=this._ease(p/this._dur),_8(this,i,s,l,c,g,p,h)?this.resetTo(i,s,l,c,1):(SS(this,0),this.parent||HD(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?_0(this):this.scrollTrigger&&this.scrollTrigger.kill(!!os),this;if(this.timeline){var l=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,pf&&pf.vars.overwrite!==!0)._first||_0(this),this.parent&&l!==this.timeline.totalDuration()&&Rm(this,this._dur*this.timeline._tDur/l,0,1),this}var c=this._targets,h=i?Ao(i):c,p=this._ptLookup,g=this._pt,_,y,x,M,T,b,E;if((!s||s==="all")&&j5(c,h))return s==="all"&&(this._pt=0),_0(this);for(_=this._op=this._op||[],s!=="all"&&(qa(s)&&(T={},vr(s,function(w){return T[w]=1}),s=T),s=y8(c,s)),E=c.length;E--;)if(~h.indexOf(c[E])){y=p[E],s==="all"?(_[E]=s,M=y,x={}):(x=_[E]=_[E]||{},M=s);for(T in M)b=y&&y[T],b&&((!("kill"in b.d)||b.d.kill(T)===!0)&&xS(this,b,"_pt"),delete y[T]),x!=="all"&&(x[T]=1)}return this._initted&&!this._pt&&g&&_0(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return P0(1,arguments)},e.delayedCall=function(i,s,l,c){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:c})},e.fromTo=function(i,s,l){return P0(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,l){return qi.killTweensOf(i,s,l)},e}(fv);jr(xa.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});vr("staggerTo,staggerFrom,staggerFromTo",function(r){xa[r]=function(){var e=new Ws,t=dE.call(arguments,0);return t.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,t)}});var eT=function(e,t,n){return e[t]=n},c3=function(e,t,n){return e[t](n)},A8=function(e,t,n,i){return e[t](i.fp,n)},S8=function(e,t,n){return e.setAttribute(t,n)},tT=function(e,t){return ra(e[t])?c3:Yb(e[t])&&e.setAttribute?S8:eT},u3=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},M8=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},f3=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},nT=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},E8=function(e,t,n,i){for(var s=this._pt,l;s;)l=s._next,s.p===i&&s.modifier(e,t,n),s=l},b8=function(e){for(var t=this._pt,n,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?xS(this,t,"_pt"):t.dep||(n=1),t=i;return!n},T8=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},h3=function(e){for(var t=e._pt,n,i,s,l;t;){for(n=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:l)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:l=t,t=n}e._pt=s},_r=function(){function r(t,n,i,s,l,c,h,p,g){this.t=n,this.s=s,this.c=l,this.p=i,this.r=c||u3,this.d=h||this,this.set=p||eT,this.pr=g||0,this._next=t,t&&(t._prev=this)}var e=r.prototype;return e.modifier=function(n,i,s){this.mSet=this.mSet||this.set,this.set=T8,this.m=n,this.mt=s,this.tween=i},r}();vr(Kb+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return jb[r]=1});Wr.TweenMax=Wr.TweenLite=xa;Wr.TimelineLite=Wr.TimelineMax=Ws;qi=new Ws({sortChildren:!1,defaults:bm,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});qr.stringFilter=t3;var ud=[],Rx={},C8=[],vw=0,R8=0,b1=function(e){return(Rx[e]||C8).map(function(t){return t()})},vE=function(){var e=Date.now(),t=[];e-vw>2&&(b1("matchMediaInit"),ud.forEach(function(n){var i=n.queries,s=n.conditions,l,c,h,p;for(c in i)l=$l.matchMedia(i[c]).matches,l&&(h=1),l!==s[c]&&(s[c]=l,p=1);p&&(n.revert(),h&&t.push(n))}),b1("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(i){return n.add(null,i)})}),vw=e,b1("matchMedia"))},d3=function(){function r(t,n){this.selector=n&&pE(n),this.data=[],this._r=[],this.isReverted=!1,this.id=R8++,t&&this.add(t)}var e=r.prototype;return e.add=function(n,i,s){ra(n)&&(s=i,i=n,n=ra);var l=this,c=function(){var p=Ii,g=l.selector,_;return p&&p!==l&&p.data.push(l),s&&(l.selector=pE(s)),Ii=l,_=i.apply(l,arguments),ra(_)&&l._r.push(_),Ii=p,l.selector=g,l.isReverted=!1,_};return l.last=c,n===ra?c(l,function(h){return l.add(null,h)}):n?l[n]=c:c},e.ignore=function(n){var i=Ii;Ii=null,n(this),Ii=i},e.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof r?n.push.apply(n,i.getTweens()):i instanceof xa&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,i){var s=this;if(n?function(){for(var c=s.getTweens(),h=s.data.length,p;h--;)p=s.data[h],p.data==="isFlip"&&(p.revert(),p.getChildren(!0,!0,!1).forEach(function(g){return c.splice(c.indexOf(g),1)}));for(c.map(function(g){return{g:g._dur||g._delay||g._sat&&!g._sat.vars.immediateRender?g.globalTime(0):-1/0,t:g}}).sort(function(g,_){return _.g-g.g||-1/0}).forEach(function(g){return g.t.revert(n)}),h=s.data.length;h--;)p=s.data[h],p instanceof Ws?p.data!=="nested"&&(p.scrollTrigger&&p.scrollTrigger.revert(),p.kill()):!(p instanceof xa)&&p.revert&&p.revert(n);s._r.forEach(function(g){return g(n,s)}),s.isReverted=!0}():this.data.forEach(function(c){return c.kill&&c.kill()}),this.clear(),i)for(var l=ud.length;l--;)ud[l].id===this.id&&ud.splice(l,1)},e.revert=function(n){this.kill(n||{})},r}(),w8=function(){function r(t){this.contexts=[],this.scope=t,Ii&&Ii.data.push(this)}var e=r.prototype;return e.add=function(n,i,s){mc(n)||(n={matches:n});var l=new d3(0,s||this.scope),c=l.conditions={},h,p,g;Ii&&!l.selector&&(l.selector=Ii.selector),this.contexts.push(l),i=l.add("onMatch",i),l.queries=n;for(p in n)p==="all"?g=1:(h=$l.matchMedia(n[p]),h&&(ud.indexOf(l)<0&&ud.push(l),(c[p]=h.matches)&&(g=1),h.addListener?h.addListener(vE):h.addEventListener("change",vE)));return g&&i(l,function(_){return l.add(null,_)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},r}(),DA={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(i){return QD(i)})},timeline:function(e){return new Ws(e)},getTweensOf:function(e,t){return qi.getTweensOf(e,t)},getProperty:function(e,t,n,i){qa(e)&&(e=Ao(e)[0]);var s=od(e||{}).get,l=n?zD:FD;return n==="native"&&(n=""),e&&(t?l((Hr[t]&&Hr[t].get||s)(e,t,n,i)):function(c,h,p){return l((Hr[c]&&Hr[c].get||s)(e,c,h,p))})},quickSetter:function(e,t,n){if(e=Ao(e),e.length>1){var i=e.map(function(g){return Sr.quickSetter(g,t,n)}),s=i.length;return function(g){for(var _=s;_--;)i[_](g)}}e=e[0]||{};var l=Hr[t],c=od(e),h=c.harness&&(c.harness.aliases||{})[t]||t,p=l?function(g){var _=new l;im._pt=0,_.init(e,n?g+n:g,im,0,[e]),_.render(1,_),im._pt&&nT(1,im)}:c.set(e,h);return l?p:function(g){return p(e,h,n?g+n:g,c,1)}},quickTo:function(e,t,n){var i,s=Sr.to(e,jr((i={},i[t]="+=0.1",i.paused=!0,i.stagger=0,i),n||{})),l=function(h,p,g){return s.resetTo(t,h,p,g)};return l.tween=s,l},isTweening:function(e){return qi.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=cd(e.ease,bm.ease)),hw(bm,e||{})},config:function(e){return hw(qr,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,s=e.defaults,l=e.extendTimeline;(i||"").split(",").forEach(function(c){return c&&!Hr[c]&&!Wr[c]&&ov(t+" effect requires "+c+" plugin.")}),A1[t]=function(c,h,p){return n(Ao(c),jr(h||{},s),p)},l&&(Ws.prototype[t]=function(c,h,p){return this.add(A1[t](c,mc(h)?h:(p=h)&&{},this),p)})},registerEase:function(e,t){qn[e]=cd(t)},parseEase:function(e,t){return arguments.length?cd(e,t):qn},getById:function(e){return qi.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new Ws(e),i,s;for(n.smoothChildTiming=gr(e.smoothChildTiming),qi.remove(n),n._dp=0,n._time=n._tTime=qi._time,i=qi._first;i;)s=i._next,(t||!(!i._dur&&i instanceof xa&&i.vars.onComplete===i._targets[0]))&&nc(n,i,i._start-i._delay),i=s;return nc(qi,n,0),n},context:function(e,t){return e?new d3(e,t):Ii},matchMedia:function(e){return new w8(e)},matchMediaRefresh:function(){return ud.forEach(function(e){var t=e.conditions,n,i;for(i in t)t[i]&&(t[i]=!1,n=1);n&&e.revert()})||vE()},addEventListener:function(e,t){var n=Rx[e]||(Rx[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=Rx[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},utils:{wrap:o8,wrapYoyo:l8,distribute:qD,random:WD,snap:JD,normalize:r8,getUnit:bs,clamp:n8,splitColor:$D,toArray:Ao,selector:pE,mapRange:KD,pipe:a8,unitize:s8,interpolate:c8,shuffle:YD},install:OD,effects:A1,ticker:Vr,updateRoot:Ws.updateRoot,plugins:Hr,globalTimeline:qi,core:{PropTween:_r,globals:ND,Tween:xa,Timeline:Ws,Animation:fv,getCache:od,_removeLinkedListItem:xS,reverting:function(){return os},context:function(e){return e&&Ii&&(Ii.data.push(e),e._ctx=Ii),Ii},suppressOverwrites:function(e){return Xb=e}}};vr("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return DA[r]=xa[r]});Vr.add(Ws.updateRoot);im=DA.to({},{duration:0});var B8=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},D8=function(e,t){var n=e._targets,i,s,l;for(i in t)for(s=n.length;s--;)l=e._ptLookup[s][i],l&&(l=l.d)&&(l._pt&&(l=B8(l,i)),l&&l.modifier&&l.modifier(t[i],e,n[s],i))},T1=function(e,t){return{name:e,rawVars:1,init:function(i,s,l){l._onInit=function(c){var h,p;if(qa(s)&&(h={},vr(s,function(g){return h[g]=1}),s=h),t){h={};for(p in s)h[p]=t(s[p]);s=h}D8(c,s)}}}},Sr=DA.registerPlugin({name:"attr",init:function(e,t,n,i,s){var l,c,h;this.tween=n;for(l in t)h=e.getAttribute(l)||"",c=this.add(e,"setAttribute",(h||0)+"",t[l],i,s,0,0,l),c.op=l,c.b=h,this._props.push(l)},render:function(e,t){for(var n=t._pt;n;)os?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},T1("roundProps",mE),T1("modifiers"),T1("snap",JD))||DA;xa.version=Ws.version=Sr.version="3.12.7";UD=1;qb()&&wm();qn.Power0;qn.Power1;qn.Power2;qn.Power3;qn.Power4;qn.Linear;qn.Quad;qn.Cubic;qn.Quart;qn.Quint;qn.Strong;qn.Elastic;qn.Back;qn.SteppedEase;qn.Bounce;qn.Sine;qn.Expo;qn.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _w,mf,um,iT,td,yw,aT,U8=function(){return typeof window<"u"},du={},Xh=180/Math.PI,fm=Math.PI/180,Wp=Math.atan2,xw=1e8,sT=/([A-Z])/g,O8=/(left|right|width|margin|padding|x)/i,N8=/[\s,\(]\S/,ic={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_E=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},L8=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},I8=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},P8=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},p3=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},m3=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},F8=function(e,t,n){return e.style[t]=n},z8=function(e,t,n){return e.style.setProperty(t,n)},H8=function(e,t,n){return e._gsap[t]=n},G8=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},V8=function(e,t,n,i,s){var l=e._gsap;l.scaleX=l.scaleY=n,l.renderTransform(s,l)},k8=function(e,t,n,i,s){var l=e._gsap;l[t]=n,l.renderTransform(s,l)},Wi="transform",yr=Wi+"Origin",X8=function r(e,t){var n=this,i=this.target,s=i.style,l=i._gsap;if(e in du&&s){if(this.tfm=this.tfm||{},e!=="transform")e=ic[e]||e,~e.indexOf(",")?e.split(",").forEach(function(c){return n.tfm[c]=eu(i,c)}):this.tfm[e]=l.x?l[e]:eu(i,e),e===yr&&(this.tfm.zOrigin=l.zOrigin);else return ic.transform.split(",").forEach(function(c){return r.call(n,c,t)});if(this.props.indexOf(Wi)>=0)return;l.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(yr,t,"")),e=Wi}(s||t)&&this.props.push(e,t,s[e])},g3=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Y8=function(){var e=this.props,t=this.target,n=t.style,i=t._gsap,s,l;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(sT,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)i[l]=this.tfm[l];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=aT(),(!s||!s.isStart)&&!n[Wi]&&(g3(n),i.zOrigin&&n[yr]&&(n[yr]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},v3=function(e,t){var n={target:e,props:[],revert:Y8,save:X8};return e._gsap||Sr.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return n.save(i)}),n},_3,yE=function(e,t){var n=mf.createElementNS?mf.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):mf.createElement(e);return n&&n.style?n:mf.createElement(e)},uc=function r(e,t,n){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(sT,"-$1").toLowerCase())||i.getPropertyValue(t)||!n&&r(e,Bm(t)||t,1)||""},Aw="O,Moz,ms,Ms,Webkit".split(","),Bm=function(e,t,n){var i=t||td,s=i.style,l=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);l--&&!(Aw[l]+e in s););return l<0?null:(l===3?"ms":l>=0?Aw[l]:"")+e},xE=function(){U8()&&window.document&&(_w=window,mf=_w.document,um=mf.documentElement,td=yE("div")||{style:{}},yE("div"),Wi=Bm(Wi),yr=Wi+"Origin",td.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_3=!!Bm("perspective"),aT=Sr.core.reverting,iT=1)},Sw=function(e){var t=e.ownerSVGElement,n=yE("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",n.appendChild(i),um.appendChild(n);try{s=i.getBBox()}catch{}return n.removeChild(i),um.removeChild(n),s},Mw=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},y3=function(e){var t,n;try{t=e.getBBox()}catch{t=Sw(e),n=1}return t&&(t.width||t.height)||n||(t=Sw(e)),t&&!t.width&&!t.x&&!t.y?{x:+Mw(e,["x","cx","x1"])||0,y:+Mw(e,["y","cy","y1"])||0,width:0,height:0}:t},x3=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&y3(e))},Ed=function(e,t){if(t){var n=e.style,i;t in du&&t!==yr&&(t=Wi),n.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(i==="--"?t:t.replace(sT,"-$1").toLowerCase())):n.removeAttribute(t)}},gf=function(e,t,n,i,s,l){var c=new _r(e._pt,t,n,0,1,l?m3:p3);return e._pt=c,c.b=i,c.e=s,e._props.push(n),c},Ew={deg:1,rad:1,turn:1},q8={grid:1,flex:1},Rf=function r(e,t,n,i){var s=parseFloat(n)||0,l=(n+"").trim().substr((s+"").length)||"px",c=td.style,h=O8.test(t),p=e.tagName.toLowerCase()==="svg",g=(p?"client":"offset")+(h?"Width":"Height"),_=100,y=i==="px",x=i==="%",M,T,b,E;if(i===l||!s||Ew[i]||Ew[l])return s;if(l!=="px"&&!y&&(s=r(e,t,n,"px")),E=e.getCTM&&x3(e),(x||l==="%")&&(du[t]||~t.indexOf("adius")))return M=E?e.getBBox()[h?"width":"height"]:e[g],ua(x?s/M*_:s/100*M);if(c[h?"width":"height"]=_+(y?l:i),T=i!=="rem"&&~t.indexOf("adius")||i==="em"&&e.appendChild&&!p?e:e.parentNode,E&&(T=(e.ownerSVGElement||{}).parentNode),(!T||T===mf||!T.appendChild)&&(T=mf.body),b=T._gsap,b&&x&&b.width&&h&&b.time===Vr.time&&!b.uncache)return ua(s/b.width*_);if(x&&(t==="height"||t==="width")){var w=e.style[t];e.style[t]=_+i,M=e[g],w?e.style[t]=w:Ed(e,t)}else(x||l==="%")&&!q8[uc(T,"display")]&&(c.position=uc(e,"position")),T===e&&(c.position="static"),T.appendChild(td),M=td[g],T.removeChild(td),c.position="absolute";return h&&x&&(b=od(T),b.time=Vr.time,b.width=T[g]),ua(y?M*s/_:M&&s?_/M*s:0)},eu=function(e,t,n,i){var s;return iT||xE(),t in ic&&t!=="transform"&&(t=ic[t],~t.indexOf(",")&&(t=t.split(",")[0])),du[t]&&t!=="transform"?(s=dv(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:OA(uc(e,yr))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=UA[t]&&UA[t](e,t,n)||uc(e,t)||ID(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?Rf(e,t,s,n)+n:s},J8=function(e,t,n,i){if(!n||n==="none"){var s=Bm(t,e,1),l=s&&uc(e,s,1);l&&l!==n?(t=s,n=l):t==="borderColor"&&(n=uc(e,"borderTopColor"))}var c=new _r(this._pt,e.style,t,0,1,f3),h=0,p=0,g,_,y,x,M,T,b,E,w,D,B,I;if(c.b=n,c.e=i,n+="",i+="",i==="auto"&&(T=e.style[t],e.style[t]=i,i=uc(e,t)||i,T?e.style[t]=T:Ed(e,t)),g=[n,i],t3(g),n=g[0],i=g[1],y=n.match(nm)||[],I=i.match(nm)||[],I.length){for(;_=nm.exec(i);)b=_[0],w=i.substring(h,_.index),M?M=(M+1)%5:(w.substr(-5)==="rgba("||w.substr(-5)==="hsla(")&&(M=1),b!==(T=y[p++]||"")&&(x=parseFloat(T)||0,B=T.substr((x+"").length),b.charAt(1)==="="&&(b=cm(x,b)+B),E=parseFloat(b),D=b.substr((E+"").length),h=nm.lastIndex-D.length,D||(D=D||qr.units[t]||B,h===i.length&&(i+=D,c.e+=D)),B!==D&&(x=Rf(e,t,T,D)||0),c._pt={_next:c._pt,p:w||p===1?w:",",s:x,c:E-x,m:M&&M<4||t==="zIndex"?Math.round:0});c.c=h<i.length?i.substring(h,i.length):""}else c.r=t==="display"&&i==="none"?m3:p3;return BD.test(i)&&(c.e=0),this._pt=c,c},bw={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},W8=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(e=n,n=i,i=e),t[0]=bw[n]||n,t[1]=bw[i]||i,t.join(" ")},j8=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,i=n.style,s=t.u,l=n._gsap,c,h,p;if(s==="all"||s===!0)i.cssText="",h=1;else for(s=s.split(","),p=s.length;--p>-1;)c=s[p],du[c]&&(h=1,c=c==="transformOrigin"?yr:Wi),Ed(n,c);h&&(Ed(n,Wi),l&&(l.svg&&n.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",dv(n,1),l.uncache=1,g3(i)))}},UA={clearProps:function(e,t,n,i,s){if(s.data!=="isFromStart"){var l=e._pt=new _r(e._pt,t,n,0,0,j8);return l.u=i,l.pr=-10,l.tween=s,e._props.push(n),1}}},hv=[1,0,0,1,0,0],A3={},S3=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Tw=function(e){var t=uc(e,Wi);return S3(t)?hv:t.substr(7).match(wD).map(ua)},rT=function(e,t){var n=e._gsap||od(e),i=e.style,s=Tw(e),l,c,h,p;return n.svg&&e.getAttribute("transform")?(h=e.transform.baseVal.consolidate().matrix,s=[h.a,h.b,h.c,h.d,h.e,h.f],s.join(",")==="1,0,0,1,0,0"?hv:s):(s===hv&&!e.offsetParent&&e!==um&&!n.svg&&(h=i.display,i.display="block",l=e.parentNode,(!l||!e.offsetParent&&!e.getBoundingClientRect().width)&&(p=1,c=e.nextElementSibling,um.appendChild(e)),s=Tw(e),h?i.display=h:Ed(e,"display"),p&&(c?l.insertBefore(e,c):l?l.appendChild(e):um.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},AE=function(e,t,n,i,s,l){var c=e._gsap,h=s||rT(e,!0),p=c.xOrigin||0,g=c.yOrigin||0,_=c.xOffset||0,y=c.yOffset||0,x=h[0],M=h[1],T=h[2],b=h[3],E=h[4],w=h[5],D=t.split(" "),B=parseFloat(D[0])||0,I=parseFloat(D[1])||0,L,F,H,U;n?h!==hv&&(F=x*b-M*T)&&(H=B*(b/F)+I*(-T/F)+(T*w-b*E)/F,U=B*(-M/F)+I*(x/F)-(x*w-M*E)/F,B=H,I=U):(L=y3(e),B=L.x+(~D[0].indexOf("%")?B/100*L.width:B),I=L.y+(~(D[1]||D[0]).indexOf("%")?I/100*L.height:I)),i||i!==!1&&c.smooth?(E=B-p,w=I-g,c.xOffset=_+(E*x+w*T)-E,c.yOffset=y+(E*M+w*b)-w):c.xOffset=c.yOffset=0,c.xOrigin=B,c.yOrigin=I,c.smooth=!!i,c.origin=t,c.originIsAbsolute=!!n,e.style[yr]="0px 0px",l&&(gf(l,c,"xOrigin",p,B),gf(l,c,"yOrigin",g,I),gf(l,c,"xOffset",_,c.xOffset),gf(l,c,"yOffset",y,c.yOffset)),e.setAttribute("data-svg-origin",B+" "+I)},dv=function(e,t){var n=e._gsap||new s3(e);if("x"in n&&!t&&!n.uncache)return n;var i=e.style,s=n.scaleX<0,l="px",c="deg",h=getComputedStyle(e),p=uc(e,yr)||"0",g,_,y,x,M,T,b,E,w,D,B,I,L,F,H,U,N,Y,ee,$,ae,me,Q,he,oe,be,P,ue,Ce,Xe,re,Ne;return g=_=y=T=b=E=w=D=B=0,x=M=1,n.svg=!!(e.getCTM&&x3(e)),h.translate&&((h.translate!=="none"||h.scale!=="none"||h.rotate!=="none")&&(i[Wi]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[Wi]!=="none"?h[Wi]:"")),i.scale=i.rotate=i.translate="none"),F=rT(e,n.svg),n.svg&&(n.uncache?(oe=e.getBBox(),p=n.xOrigin-oe.x+"px "+(n.yOrigin-oe.y)+"px",he=""):he=!t&&e.getAttribute("data-svg-origin"),AE(e,he||p,!!he||n.originIsAbsolute,n.smooth!==!1,F)),I=n.xOrigin||0,L=n.yOrigin||0,F!==hv&&(Y=F[0],ee=F[1],$=F[2],ae=F[3],g=me=F[4],_=Q=F[5],F.length===6?(x=Math.sqrt(Y*Y+ee*ee),M=Math.sqrt(ae*ae+$*$),T=Y||ee?Wp(ee,Y)*Xh:0,w=$||ae?Wp($,ae)*Xh+T:0,w&&(M*=Math.abs(Math.cos(w*fm))),n.svg&&(g-=I-(I*Y+L*$),_-=L-(I*ee+L*ae))):(Ne=F[6],Xe=F[7],P=F[8],ue=F[9],Ce=F[10],re=F[11],g=F[12],_=F[13],y=F[14],H=Wp(Ne,Ce),b=H*Xh,H&&(U=Math.cos(-H),N=Math.sin(-H),he=me*U+P*N,oe=Q*U+ue*N,be=Ne*U+Ce*N,P=me*-N+P*U,ue=Q*-N+ue*U,Ce=Ne*-N+Ce*U,re=Xe*-N+re*U,me=he,Q=oe,Ne=be),H=Wp(-$,Ce),E=H*Xh,H&&(U=Math.cos(-H),N=Math.sin(-H),he=Y*U-P*N,oe=ee*U-ue*N,be=$*U-Ce*N,re=ae*N+re*U,Y=he,ee=oe,$=be),H=Wp(ee,Y),T=H*Xh,H&&(U=Math.cos(H),N=Math.sin(H),he=Y*U+ee*N,oe=me*U+Q*N,ee=ee*U-Y*N,Q=Q*U-me*N,Y=he,me=oe),b&&Math.abs(b)+Math.abs(T)>359.9&&(b=T=0,E=180-E),x=ua(Math.sqrt(Y*Y+ee*ee+$*$)),M=ua(Math.sqrt(Q*Q+Ne*Ne)),H=Wp(me,Q),w=Math.abs(H)>2e-4?H*Xh:0,B=re?1/(re<0?-re:re):0),n.svg&&(he=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!S3(uc(e,Wi)),he&&e.setAttribute("transform",he))),Math.abs(w)>90&&Math.abs(w)<270&&(s?(x*=-1,w+=T<=0?180:-180,T+=T<=0?180:-180):(M*=-1,w+=w<=0?180:-180)),t=t||n.uncache,n.x=g-((n.xPercent=g&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-g)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+l,n.y=_-((n.yPercent=_&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-_)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+l,n.z=y+l,n.scaleX=ua(x),n.scaleY=ua(M),n.rotation=ua(T)+c,n.rotationX=ua(b)+c,n.rotationY=ua(E)+c,n.skewX=w+c,n.skewY=D+c,n.transformPerspective=B+l,(n.zOrigin=parseFloat(p.split(" ")[2])||!t&&n.zOrigin||0)&&(i[yr]=OA(p)),n.xOffset=n.yOffset=0,n.force3D=qr.force3D,n.renderTransform=n.svg?Z8:_3?M3:K8,n.uncache=0,n},OA=function(e){return(e=e.split(" "))[0]+" "+e[1]},C1=function(e,t,n){var i=bs(t);return ua(parseFloat(t)+parseFloat(Rf(e,"x",n+"px",i)))+i},K8=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,M3(e,t)},Ph="0deg",d0="0px",Fh=") ",M3=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,l=n.x,c=n.y,h=n.z,p=n.rotation,g=n.rotationY,_=n.rotationX,y=n.skewX,x=n.skewY,M=n.scaleX,T=n.scaleY,b=n.transformPerspective,E=n.force3D,w=n.target,D=n.zOrigin,B="",I=E==="auto"&&e&&e!==1||E===!0;if(D&&(_!==Ph||g!==Ph)){var L=parseFloat(g)*fm,F=Math.sin(L),H=Math.cos(L),U;L=parseFloat(_)*fm,U=Math.cos(L),l=C1(w,l,F*U*-D),c=C1(w,c,-Math.sin(L)*-D),h=C1(w,h,H*U*-D+D)}b!==d0&&(B+="perspective("+b+Fh),(i||s)&&(B+="translate("+i+"%, "+s+"%) "),(I||l!==d0||c!==d0||h!==d0)&&(B+=h!==d0||I?"translate3d("+l+", "+c+", "+h+") ":"translate("+l+", "+c+Fh),p!==Ph&&(B+="rotate("+p+Fh),g!==Ph&&(B+="rotateY("+g+Fh),_!==Ph&&(B+="rotateX("+_+Fh),(y!==Ph||x!==Ph)&&(B+="skew("+y+", "+x+Fh),(M!==1||T!==1)&&(B+="scale("+M+", "+T+Fh),w.style[Wi]=B||"translate(0, 0)"},Z8=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,l=n.x,c=n.y,h=n.rotation,p=n.skewX,g=n.skewY,_=n.scaleX,y=n.scaleY,x=n.target,M=n.xOrigin,T=n.yOrigin,b=n.xOffset,E=n.yOffset,w=n.forceCSS,D=parseFloat(l),B=parseFloat(c),I,L,F,H,U;h=parseFloat(h),p=parseFloat(p),g=parseFloat(g),g&&(g=parseFloat(g),p+=g,h+=g),h||p?(h*=fm,p*=fm,I=Math.cos(h)*_,L=Math.sin(h)*_,F=Math.sin(h-p)*-y,H=Math.cos(h-p)*y,p&&(g*=fm,U=Math.tan(p-g),U=Math.sqrt(1+U*U),F*=U,H*=U,g&&(U=Math.tan(g),U=Math.sqrt(1+U*U),I*=U,L*=U)),I=ua(I),L=ua(L),F=ua(F),H=ua(H)):(I=_,H=y,L=F=0),(D&&!~(l+"").indexOf("px")||B&&!~(c+"").indexOf("px"))&&(D=Rf(x,"x",l,"px"),B=Rf(x,"y",c,"px")),(M||T||b||E)&&(D=ua(D+M-(M*I+T*F)+b),B=ua(B+T-(M*L+T*H)+E)),(i||s)&&(U=x.getBBox(),D=ua(D+i/100*U.width),B=ua(B+s/100*U.height)),U="matrix("+I+","+L+","+F+","+H+","+D+","+B+")",x.setAttribute("transform",U),w&&(x.style[Wi]=U)},Q8=function(e,t,n,i,s){var l=360,c=qa(s),h=parseFloat(s)*(c&&~s.indexOf("rad")?Xh:1),p=h-i,g=i+p+"deg",_,y;return c&&(_=s.split("_")[1],_==="short"&&(p%=l,p!==p%(l/2)&&(p+=p<0?l:-360)),_==="cw"&&p<0?p=(p+l*xw)%l-~~(p/l)*l:_==="ccw"&&p>0&&(p=(p-l*xw)%l-~~(p/l)*l)),e._pt=y=new _r(e._pt,t,n,i,p,L8),y.e=g,y.u="deg",e._props.push(n),y},Cw=function(e,t){for(var n in t)e[n]=t[n];return e},$8=function(e,t,n){var i=Cw({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",l=n.style,c,h,p,g,_,y,x,M;i.svg?(p=n.getAttribute("transform"),n.setAttribute("transform",""),l[Wi]=t,c=dv(n,1),Ed(n,Wi),n.setAttribute("transform",p)):(p=getComputedStyle(n)[Wi],l[Wi]=t,c=dv(n,1),l[Wi]=p);for(h in du)p=i[h],g=c[h],p!==g&&s.indexOf(h)<0&&(x=bs(p),M=bs(g),_=x!==M?Rf(n,h,p,M):parseFloat(p),y=parseFloat(g),e._pt=new _r(e._pt,c,h,_,y-_,_E),e._pt.u=M||0,e._props.push(h));Cw(c,i)};vr("padding,margin,Width,Radius",function(r,e){var t="Top",n="Right",i="Bottom",s="Left",l=(e<3?[t,n,i,s]:[t+s,t+n,i+n,i+s]).map(function(c){return e<2?r+c:"border"+c+r});UA[e>1?"border"+r:r]=function(c,h,p,g,_){var y,x;if(arguments.length<4)return y=l.map(function(M){return eu(c,M,p)}),x=y.join(" "),x.split(y[0]).length===5?y[0]:x;y=(g+"").split(" "),x={},l.forEach(function(M,T){return x[M]=y[T]=y[T]||y[(T-1)/2|0]}),c.init(h,x,_)}});var E3={name:"css",register:xE,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,s){var l=this._props,c=e.style,h=n.vars.startAt,p,g,_,y,x,M,T,b,E,w,D,B,I,L,F,H;iT||xE(),this.styles=this.styles||v3(e),H=this.styles.props,this.tween=n;for(T in t)if(T!=="autoRound"&&(g=t[T],!(Hr[T]&&r3(T,t,n,i,e,s)))){if(x=typeof g,M=UA[T],x==="function"&&(g=g.call(n,i,e,s),x=typeof g),x==="string"&&~g.indexOf("random(")&&(g=cv(g)),M)M(this,e,T,g,n)&&(F=1);else if(T.substr(0,2)==="--")p=(getComputedStyle(e).getPropertyValue(T)+"").trim(),g+="",Af.lastIndex=0,Af.test(p)||(b=bs(p),E=bs(g)),E?b!==E&&(p=Rf(e,T,p,E)+E):b&&(g+=b),this.add(c,"setProperty",p,g,i,s,0,0,T),l.push(T),H.push(T,0,c[T]);else if(x!=="undefined"){if(h&&T in h?(p=typeof h[T]=="function"?h[T].call(n,i,e,s):h[T],qa(p)&&~p.indexOf("random(")&&(p=cv(p)),bs(p+"")||p==="auto"||(p+=qr.units[T]||bs(eu(e,T))||""),(p+"").charAt(1)==="="&&(p=eu(e,T))):p=eu(e,T),y=parseFloat(p),w=x==="string"&&g.charAt(1)==="="&&g.substr(0,2),w&&(g=g.substr(2)),_=parseFloat(g),T in ic&&(T==="autoAlpha"&&(y===1&&eu(e,"visibility")==="hidden"&&_&&(y=0),H.push("visibility",0,c.visibility),gf(this,c,"visibility",y?"inherit":"hidden",_?"inherit":"hidden",!_)),T!=="scale"&&T!=="transform"&&(T=ic[T],~T.indexOf(",")&&(T=T.split(",")[0]))),D=T in du,D){if(this.styles.save(T),B||(I=e._gsap,I.renderTransform&&!t.parseTransform||dv(e,t.parseTransform),L=t.smoothOrigin!==!1&&I.smooth,B=this._pt=new _r(this._pt,c,Wi,0,1,I.renderTransform,I,0,-1),B.dep=1),T==="scale")this._pt=new _r(this._pt,I,"scaleY",I.scaleY,(w?cm(I.scaleY,w+_):_)-I.scaleY||0,_E),this._pt.u=0,l.push("scaleY",T),T+="X";else if(T==="transformOrigin"){H.push(yr,0,c[yr]),g=W8(g),I.svg?AE(e,g,0,L,0,this):(E=parseFloat(g.split(" ")[2])||0,E!==I.zOrigin&&gf(this,I,"zOrigin",I.zOrigin,E),gf(this,c,T,OA(p),OA(g)));continue}else if(T==="svgOrigin"){AE(e,g,1,L,0,this);continue}else if(T in A3){Q8(this,I,T,y,w?cm(y,w+g):g);continue}else if(T==="smoothOrigin"){gf(this,I,"smooth",I.smooth,g);continue}else if(T==="force3D"){I[T]=g;continue}else if(T==="transform"){$8(this,g,e);continue}}else T in c||(T=Bm(T)||T);if(D||(_||_===0)&&(y||y===0)&&!N8.test(g)&&T in c)b=(p+"").substr((y+"").length),_||(_=0),E=bs(g)||(T in qr.units?qr.units[T]:b),b!==E&&(y=Rf(e,T,p,E)),this._pt=new _r(this._pt,D?I:c,T,y,(w?cm(y,w+_):_)-y,!D&&(E==="px"||T==="zIndex")&&t.autoRound!==!1?P8:_E),this._pt.u=E||0,b!==E&&E!=="%"&&(this._pt.b=p,this._pt.r=I8);else if(T in c)J8.call(this,e,T,p,w?w+g:g);else if(T in e)this.add(e,T,p||e[T],w?w+g:g,i,s);else if(T!=="parseTransform"){Wb(T,g);continue}D||(T in c?H.push(T,0,c[T]):typeof e[T]=="function"?H.push(T,2,e[T]()):H.push(T,1,p||e[T])),l.push(T)}}F&&h3(this)},render:function(e,t){if(t.tween._time||!aT())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:eu,aliases:ic,getSetter:function(e,t,n){var i=ic[t];return i&&i.indexOf(",")<0&&(t=i),t in du&&t!==yr&&(e._gsap.x||eu(e,"x"))?n&&yw===n?t==="scale"?G8:H8:(yw=n||{})&&(t==="scale"?V8:k8):e.style&&!Yb(e.style[t])?F8:~t.indexOf("-")?z8:tT(e,t)},core:{_removeProperty:Ed,_getMatrix:rT}};Sr.utils.checkPrefix=Bm;Sr.core.getStyleSaver=v3;(function(r,e,t,n){var i=vr(r+","+e+","+t,function(s){du[s]=1});vr(e,function(s){qr.units[s]="deg",A3[s]=1}),ic[i[13]]=r+","+e,vr(n,function(s){var l=s.split(":");ic[l[1]]=i[l[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");vr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){qr.units[r]="px"});Sr.registerPlugin(E3);var ul=Sr.registerPlugin(E3)||Sr;ul.core.Tween;/*!
 * @gsap/react 2.1.2
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/let Rw=typeof document<"u"?pt.useLayoutEffect:pt.useEffect,ww=r=>r&&!Array.isArray(r)&&typeof r=="object",lx=[],e6={},b3=ul;const MS=(r,e=lx)=>{let t=e6;ww(r)?(t=r,r=null,e="dependencies"in t?t.dependencies:lx):ww(e)&&(t=e,e="dependencies"in t?t.dependencies:lx),r&&typeof r!="function"&&console.warn("First parameter must be a function or config object");const{scope:n,revertOnUpdate:i}=t,s=pt.useRef(!1),l=pt.useRef(b3.context(()=>{},n)),c=pt.useRef(p=>l.current.add(null,p)),h=e&&e.length&&!i;return h&&Rw(()=>(s.current=!0,()=>l.current.revert()),lx),Rw(()=>{if(r&&l.current.add(r,n),!h||!s.current)return()=>l.current.revert()},e),{context:l.current,contextSafe:c.current}};MS.register=r=>{b3=r};MS.headless=!0;const t6=({model:r})=>{const e=Fm(r.modelPath);return pt.useEffect(()=>{r.name==="Interactive Developer"&&e.scene.traverse(t=>{t.isMesh&&t.name==="Object_5"&&(t.material=new yd({color:"hotpink"}))})},[e]),pt.useEffect(()=>{r.name==="Python Developer"&&e.scene.traverse(t=>{t.isMesh&&t.name==="Object_3"&&(t.material=new yd({color:"hotpink"}))})},[e]),Oe.jsxs(lD,{children:[Oe.jsx("ambientLight",{intensity:.3}),Oe.jsx("directionalLight",{position:[5,5,5],intensity:1}),Oe.jsx("spotLight",{position:[10,15,10],angle:.3,penumbra:1,intensity:2}),Oe.jsx(L5,{preset:"city"}),Oe.jsx(y5,{speed:5.5,rotationIntensity:.5,floatIntensity:.9,children:Oe.jsx("group",{scale:r.scale,rotation:r.rotation,position:r.name==="Ice Hockey"?[1,-1,0]:[0,0,0],children:Oe.jsx("primitive",{object:e.scene})})}),Oe.jsx(yD,{enableZoom:!1})]})},n6=()=>(MS(()=>{ul.fromTo(".tech-card",{y:50,opacity:0},{y:0,opacity:1,duration:1,ease:"power2.inOut",stagger:.2,scrollTrigger:{trigger:"#skills",start:"top center"}})}),Oe.jsx("section",{id:"about",className:"flex-center section-padding",children:Oe.jsxs("div",{className:"w-full h-full md:px-10 px-5",children:[Oe.jsx(NE,{title:"Some of my hobbies",sub:" About Me"}),Oe.jsx("div",{className:"tech-grid",children:YU.map(r=>Oe.jsxs("div",{className:"card-border tech-card overflow-hidden group xl:rounded-full rounded-lg",children:[Oe.jsx("div",{className:"tech-card-animated-bg"}),Oe.jsxs("div",{className:"tech-card-content",children:[Oe.jsx("div",{className:"tech-icon-wrapper",children:Oe.jsx(t6,{model:r})}),Oe.jsx("div",{className:"padding-x w-full",children:Oe.jsx("p",{children:r.name})})]})]},r.name))})]})}));function i6(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function a6(r,e,t){return e&&i6(r.prototype,e),r}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var as,wx,kr,vf,_f,hm,T3,Yh,z0,C3,ru,ol,R3,w3=function(){return as||typeof window<"u"&&(as=window.gsap)&&as.registerPlugin&&as},B3=1,am=[],zn=[],fc=[],H0=Date.now,SE=function(e,t){return t},s6=function(){var e=z0.core,t=e.bridge||{},n=e._scrollers,i=e._proxies;n.push.apply(n,zn),i.push.apply(i,fc),zn=n,fc=i,SE=function(l,c){return t[l](c)}},Sf=function(e,t){return~fc.indexOf(e)&&fc[fc.indexOf(e)+1][t]},G0=function(e){return!!~C3.indexOf(e)},Gs=function(e,t,n,i,s){return e.addEventListener(t,n,{passive:i!==!1,capture:!!s})},Hs=function(e,t,n,i){return e.removeEventListener(t,n,!!i)},cx="scrollLeft",ux="scrollTop",ME=function(){return ru&&ru.isPressed||zn.cache++},NA=function(e,t){var n=function i(s){if(s||s===0){B3&&(kr.history.scrollRestoration="manual");var l=ru&&ru.isPressed;s=i.v=Math.round(s)||(ru&&ru.iOS?1:0),e(s),i.cacheID=zn.cache,l&&SE("ss",s)}else(t||zn.cache!==i.cacheID||SE("ref"))&&(i.cacheID=zn.cache,i.v=e());return i.v+i.offset};return n.offset=0,e&&n},js={s:cx,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:NA(function(r){return arguments.length?kr.scrollTo(r,Ca.sc()):kr.pageXOffset||vf[cx]||_f[cx]||hm[cx]||0})},Ca={s:ux,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:js,sc:NA(function(r){return arguments.length?kr.scrollTo(js.sc(),r):kr.pageYOffset||vf[ux]||_f[ux]||hm[ux]||0})},dr=function(e,t){return(t&&t._ctx&&t._ctx.selector||as.utils.toArray)(e)[0]||(typeof e=="string"&&as.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},wf=function(e,t){var n=t.s,i=t.sc;G0(e)&&(e=vf.scrollingElement||_f);var s=zn.indexOf(e),l=i===Ca.sc?1:2;!~s&&(s=zn.push(e)-1),zn[s+l]||Gs(e,"scroll",ME);var c=zn[s+l],h=c||(zn[s+l]=NA(Sf(e,n),!0)||(G0(e)?i:NA(function(p){return arguments.length?e[n]=p:e[n]})));return h.target=e,c||(h.smooth=as.getProperty(e,"scrollBehavior")==="smooth"),h},EE=function(e,t,n){var i=e,s=e,l=H0(),c=l,h=t||50,p=Math.max(500,h*3),g=function(M,T){var b=H0();T||b-l>h?(s=i,i=M,c=l,l=b):n?i+=M:i=s+(M-s)/(b-c)*(l-c)},_=function(){s=i=n?0:i,c=l=0},y=function(M){var T=c,b=s,E=H0();return(M||M===0)&&M!==i&&g(M),l===c||E-c>p?0:(i+(n?b:-b))/((n?E:l)-T)*1e3};return{update:g,reset:_,getVelocity:y}},p0=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},Bw=function(e){var t=Math.max.apply(Math,e),n=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(n)?t:n},D3=function(){z0=as.core.globals().ScrollTrigger,z0&&z0.core&&s6()},U3=function(e){return as=e||w3(),!wx&&as&&typeof document<"u"&&document.body&&(kr=window,vf=document,_f=vf.documentElement,hm=vf.body,C3=[kr,vf,_f,hm],as.utils.clamp,R3=as.core.context||function(){},Yh="onpointerenter"in hm?"pointer":"mouse",T3=da.isTouch=kr.matchMedia&&kr.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in kr||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,ol=da.eventTypes=("ontouchstart"in _f?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in _f?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return B3=0},500),D3(),wx=1),wx};js.op=Ca;zn.cache=0;var da=function(){function r(t){this.init(t)}var e=r.prototype;return e.init=function(n){wx||U3(as)||console.warn("Please gsap.registerPlugin(Observer)"),z0||D3();var i=n.tolerance,s=n.dragMinimum,l=n.type,c=n.target,h=n.lineHeight,p=n.debounce,g=n.preventDefault,_=n.onStop,y=n.onStopDelay,x=n.ignore,M=n.wheelSpeed,T=n.event,b=n.onDragStart,E=n.onDragEnd,w=n.onDrag,D=n.onPress,B=n.onRelease,I=n.onRight,L=n.onLeft,F=n.onUp,H=n.onDown,U=n.onChangeX,N=n.onChangeY,Y=n.onChange,ee=n.onToggleX,$=n.onToggleY,ae=n.onHover,me=n.onHoverEnd,Q=n.onMove,he=n.ignoreCheck,oe=n.isNormalizer,be=n.onGestureStart,P=n.onGestureEnd,ue=n.onWheel,Ce=n.onEnable,Xe=n.onDisable,re=n.onClick,Ne=n.scrollSpeed,Be=n.capture,Ve=n.allowClicks,tt=n.lockAxis,wt=n.onLockAxis;this.target=c=dr(c)||_f,this.vars=n,x&&(x=as.utils.toArray(x)),i=i||1e-9,s=s||0,M=M||1,Ne=Ne||1,l=l||"wheel,touch,pointer",p=p!==!1,h||(h=parseFloat(kr.getComputedStyle(hm).lineHeight)||22);var ht,Pt,Je,De,j,Mt,$e,pe=this,at=0,Lt=0,ut=n.passive||!g&&n.passive!==!1,W=wf(c,js),k=wf(c,Ca),xe=W(),ze=k(),Ye=~l.indexOf("touch")&&!~l.indexOf("pointer")&&ol[0]==="pointerdown",ke=G0(c),_t=c.ownerDocument||vf,lt=[0,0,0],yt=[0,0,0],$t=0,st=function(){return $t=H0()},vt=function(Dt,Zt){return(pe.event=Dt)&&x&&~x.indexOf(Dt.target)||Zt&&Ye&&Dt.pointerType!=="touch"||he&&he(Dt,Zt)},Nt=function(){pe._vx.reset(),pe._vy.reset(),Pt.pause(),_&&_(pe)},mt=function(){var Dt=pe.deltaX=Bw(lt),Zt=pe.deltaY=Bw(yt),bt=Math.abs(Dt)>=i,en=Math.abs(Zt)>=i;Y&&(bt||en)&&Y(pe,Dt,Zt,lt,yt),bt&&(I&&pe.deltaX>0&&I(pe),L&&pe.deltaX<0&&L(pe),U&&U(pe),ee&&pe.deltaX<0!=at<0&&ee(pe),at=pe.deltaX,lt[0]=lt[1]=lt[2]=0),en&&(H&&pe.deltaY>0&&H(pe),F&&pe.deltaY<0&&F(pe),N&&N(pe),$&&pe.deltaY<0!=Lt<0&&$(pe),Lt=pe.deltaY,yt[0]=yt[1]=yt[2]=0),(De||Je)&&(Q&&Q(pe),Je&&(b&&Je===1&&b(pe),w&&w(pe),Je=0),De=!1),Mt&&!(Mt=!1)&&wt&&wt(pe),j&&(ue(pe),j=!1),ht=0},Et=function(Dt,Zt,bt){lt[bt]+=Dt,yt[bt]+=Zt,pe._vx.update(Dt),pe._vy.update(Zt),p?ht||(ht=requestAnimationFrame(mt)):mt()},le=function(Dt,Zt){tt&&!$e&&(pe.axis=$e=Math.abs(Dt)>Math.abs(Zt)?"x":"y",Mt=!0),$e!=="y"&&(lt[2]+=Dt,pe._vx.update(Dt,!0)),$e!=="x"&&(yt[2]+=Zt,pe._vy.update(Zt,!0)),p?ht||(ht=requestAnimationFrame(mt)):mt()},Re=function(Dt){if(!vt(Dt,1)){Dt=p0(Dt,g);var Zt=Dt.clientX,bt=Dt.clientY,en=Zt-pe.x,It=bt-pe.y,qt=pe.isDragging;pe.x=Zt,pe.y=bt,(qt||(en||It)&&(Math.abs(pe.startX-Zt)>=s||Math.abs(pe.startY-bt)>=s))&&(Je=qt?2:1,qt||(pe.isDragging=!0),le(en,It))}},rt=pe.onPress=function(St){vt(St,1)||St&&St.button||(pe.axis=$e=null,Pt.pause(),pe.isPressed=!0,St=p0(St),at=Lt=0,pe.startX=pe.x=St.clientX,pe.startY=pe.y=St.clientY,pe._vx.reset(),pe._vy.reset(),Gs(oe?c:_t,ol[1],Re,ut,!0),pe.deltaX=pe.deltaY=0,D&&D(pe))},ne=pe.onRelease=function(St){if(!vt(St,1)){Hs(oe?c:_t,ol[1],Re,!0);var Dt=!isNaN(pe.y-pe.startY),Zt=pe.isDragging,bt=Zt&&(Math.abs(pe.x-pe.startX)>3||Math.abs(pe.y-pe.startY)>3),en=p0(St);!bt&&Dt&&(pe._vx.reset(),pe._vy.reset(),g&&Ve&&as.delayedCall(.08,function(){if(H0()-$t>300&&!St.defaultPrevented){if(St.target.click)St.target.click();else if(_t.createEvent){var It=_t.createEvent("MouseEvents");It.initMouseEvent("click",!0,!0,kr,1,en.screenX,en.screenY,en.clientX,en.clientY,!1,!1,!1,!1,0,null),St.target.dispatchEvent(It)}}})),pe.isDragging=pe.isGesturing=pe.isPressed=!1,_&&Zt&&!oe&&Pt.restart(!0),Je&&mt(),E&&Zt&&E(pe),B&&B(pe,bt)}},Me=function(Dt){return Dt.touches&&Dt.touches.length>1&&(pe.isGesturing=!0)&&be(Dt,pe.isDragging)},Te=function(){return(pe.isGesturing=!1)||P(pe)},Ge=function(Dt){if(!vt(Dt)){var Zt=W(),bt=k();Et((Zt-xe)*Ne,(bt-ze)*Ne,1),xe=Zt,ze=bt,_&&Pt.restart(!0)}},dt=function(Dt){if(!vt(Dt)){Dt=p0(Dt,g),ue&&(j=!0);var Zt=(Dt.deltaMode===1?h:Dt.deltaMode===2?kr.innerHeight:1)*M;Et(Dt.deltaX*Zt,Dt.deltaY*Zt,0),_&&!oe&&Pt.restart(!0)}},xt=function(Dt){if(!vt(Dt)){var Zt=Dt.clientX,bt=Dt.clientY,en=Zt-pe.x,It=bt-pe.y;pe.x=Zt,pe.y=bt,De=!0,_&&Pt.restart(!0),(en||It)&&le(en,It)}},Ft=function(Dt){pe.event=Dt,ae(pe)},rn=function(Dt){pe.event=Dt,me(pe)},Bn=function(Dt){return vt(Dt)||p0(Dt,g)&&re(pe)};Pt=pe._dc=as.delayedCall(y||.25,Nt).pause(),pe.deltaX=pe.deltaY=0,pe._vx=EE(0,50,!0),pe._vy=EE(0,50,!0),pe.scrollX=W,pe.scrollY=k,pe.isDragging=pe.isGesturing=pe.isPressed=!1,R3(this),pe.enable=function(St){return pe.isEnabled||(Gs(ke?_t:c,"scroll",ME),l.indexOf("scroll")>=0&&Gs(ke?_t:c,"scroll",Ge,ut,Be),l.indexOf("wheel")>=0&&Gs(c,"wheel",dt,ut,Be),(l.indexOf("touch")>=0&&T3||l.indexOf("pointer")>=0)&&(Gs(c,ol[0],rt,ut,Be),Gs(_t,ol[2],ne),Gs(_t,ol[3],ne),Ve&&Gs(c,"click",st,!0,!0),re&&Gs(c,"click",Bn),be&&Gs(_t,"gesturestart",Me),P&&Gs(_t,"gestureend",Te),ae&&Gs(c,Yh+"enter",Ft),me&&Gs(c,Yh+"leave",rn),Q&&Gs(c,Yh+"move",xt)),pe.isEnabled=!0,pe.isDragging=pe.isGesturing=pe.isPressed=De=Je=!1,pe._vx.reset(),pe._vy.reset(),xe=W(),ze=k(),St&&St.type&&rt(St),Ce&&Ce(pe)),pe},pe.disable=function(){pe.isEnabled&&(am.filter(function(St){return St!==pe&&G0(St.target)}).length||Hs(ke?_t:c,"scroll",ME),pe.isPressed&&(pe._vx.reset(),pe._vy.reset(),Hs(oe?c:_t,ol[1],Re,!0)),Hs(ke?_t:c,"scroll",Ge,Be),Hs(c,"wheel",dt,Be),Hs(c,ol[0],rt,Be),Hs(_t,ol[2],ne),Hs(_t,ol[3],ne),Hs(c,"click",st,!0),Hs(c,"click",Bn),Hs(_t,"gesturestart",Me),Hs(_t,"gestureend",Te),Hs(c,Yh+"enter",Ft),Hs(c,Yh+"leave",rn),Hs(c,Yh+"move",xt),pe.isEnabled=pe.isPressed=pe.isDragging=!1,Xe&&Xe(pe))},pe.kill=pe.revert=function(){pe.disable();var St=am.indexOf(pe);St>=0&&am.splice(St,1),ru===pe&&(ru=0)},am.push(pe),oe&&G0(c)&&(ru=pe),pe.enable(T)},a6(r,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),r}();da.version="3.12.7";da.create=function(r){return new da(r)};da.register=U3;da.getAll=function(){return am.slice()};da.getById=function(r){return am.filter(function(e){return e.vars.id===r})[0]};w3()&&as.registerPlugin(da);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var kt,Zp,Fn,Bi,Gr,hi,oT,LA,pv,V0,x0,fx,Ms,ES,bE,Xs,Dw,Uw,Qp,O3,R1,N3,ks,TE,L3,I3,uf,CE,lT,dm,cT,IA,RE,w1,hx=1,Es=Date.now,B1=Es(),So=0,A0=0,Ow=function(e,t,n){var i=zr(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return n["_"+t+"Clamp"]=i,i?e.substr(6,e.length-7):e},Nw=function(e,t){return t&&(!zr(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},r6=function r(){return A0&&requestAnimationFrame(r)},Lw=function(){return ES=1},Iw=function(){return ES=0},ec=function(e){return e},S0=function(e){return Math.round(e*1e5)/1e5||0},P3=function(){return typeof window<"u"},F3=function(){return kt||P3()&&(kt=window.gsap)&&kt.registerPlugin&&kt},bd=function(e){return!!~oT.indexOf(e)},z3=function(e){return(e==="Height"?cT:Fn["inner"+e])||Gr["client"+e]||hi["client"+e]},H3=function(e){return Sf(e,"getBoundingClientRect")||(bd(e)?function(){return Nx.width=Fn.innerWidth,Nx.height=cT,Nx}:function(){return iu(e)})},o6=function(e,t,n){var i=n.d,s=n.d2,l=n.a;return(l=Sf(e,"getBoundingClientRect"))?function(){return l()[i]}:function(){return(t?z3(s):e["client"+s])||0}},l6=function(e,t){return!t||~fc.indexOf(e)?H3(e):function(){return Nx}},ac=function(e,t){var n=t.s,i=t.d2,s=t.d,l=t.a;return Math.max(0,(n="scroll"+i)&&(l=Sf(e,n))?l()-H3(e)()[s]:bd(e)?(Gr[n]||hi[n])-z3(i):e[n]-e["offset"+i])},dx=function(e,t){for(var n=0;n<Qp.length;n+=3)(!t||~t.indexOf(Qp[n+1]))&&e(Qp[n],Qp[n+1],Qp[n+2])},zr=function(e){return typeof e=="string"},Ts=function(e){return typeof e=="function"},M0=function(e){return typeof e=="number"},qh=function(e){return typeof e=="object"},m0=function(e,t,n){return e&&e.progress(t?0:1)&&n&&e.pause()},D1=function(e,t){if(e.enabled){var n=e._ctx?e._ctx.add(function(){return t(e)}):t(e);n&&n.totalTime&&(e.callbackAnimation=n)}},jp=Math.abs,G3="left",V3="top",uT="right",fT="bottom",fd="width",hd="height",k0="Right",X0="Left",Y0="Top",q0="Bottom",ya="padding",go="margin",Dm="Width",hT="Height",Ta="px",vo=function(e){return Fn.getComputedStyle(e)},c6=function(e){var t=vo(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},Pw=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},iu=function(e,t){var n=t&&vo(e)[bE]!=="matrix(1, 0, 0, 1, 0, 0)"&&kt.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=e.getBoundingClientRect();return n&&n.progress(0).kill(),i},PA=function(e,t){var n=t.d2;return e["offset"+n]||e["client"+n]||0},k3=function(e){var t=[],n=e.labels,i=e.duration(),s;for(s in n)t.push(n[s]/i);return t},u6=function(e){return function(t){return kt.utils.snap(k3(e),t)}},dT=function(e){var t=kt.utils.snap(e),n=Array.isArray(e)&&e.slice(0).sort(function(i,s){return i-s});return n?function(i,s,l){l===void 0&&(l=.001);var c;if(!s)return t(i);if(s>0){for(i-=l,c=0;c<n.length;c++)if(n[c]>=i)return n[c];return n[c-1]}else for(c=n.length,i+=l;c--;)if(n[c]<=i)return n[c];return n[0]}:function(i,s,l){l===void 0&&(l=.001);var c=t(i);return!s||Math.abs(c-i)<l||c-i<0==s<0?c:t(s<0?i-e:i+e)}},f6=function(e){return function(t,n){return dT(k3(e))(t,n.direction)}},px=function(e,t,n,i){return n.split(",").forEach(function(s){return e(t,s,i)})},Va=function(e,t,n,i,s){return e.addEventListener(t,n,{passive:!i,capture:!!s})},Ga=function(e,t,n,i){return e.removeEventListener(t,n,!!i)},mx=function(e,t,n){n=n&&n.wheelHandler,n&&(e(t,"wheel",n),e(t,"touchmove",n))},Fw={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},gx={toggleActions:"play",anticipatePin:0},FA={top:0,left:0,center:.5,bottom:1,right:1},Bx=function(e,t){if(zr(e)){var n=e.indexOf("="),i=~n?+(e.charAt(n-1)+1)*parseFloat(e.substr(n+1)):0;~n&&(e.indexOf("%")>n&&(i*=t/100),e=e.substr(0,n-1)),e=i+(e in FA?FA[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},vx=function(e,t,n,i,s,l,c,h){var p=s.startColor,g=s.endColor,_=s.fontSize,y=s.indent,x=s.fontWeight,M=Bi.createElement("div"),T=bd(n)||Sf(n,"pinType")==="fixed",b=e.indexOf("scroller")!==-1,E=T?hi:n,w=e.indexOf("start")!==-1,D=w?p:g,B="border-color:"+D+";font-size:"+_+";color:"+D+";font-weight:"+x+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return B+="position:"+((b||h)&&T?"fixed;":"absolute;"),(b||h||!T)&&(B+=(i===Ca?uT:fT)+":"+(l+parseFloat(y))+"px;"),c&&(B+="box-sizing:border-box;text-align:left;width:"+c.offsetWidth+"px;"),M._isStart=w,M.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),M.style.cssText=B,M.innerText=t||t===0?e+"-"+t:e,E.children[0]?E.insertBefore(M,E.children[0]):E.appendChild(M),M._offset=M["offset"+i.op.d2],Dx(M,0,i,w),M},Dx=function(e,t,n,i){var s={display:"block"},l=n[i?"os2":"p2"],c=n[i?"p2":"os2"];e._isFlipped=i,s[n.a+"Percent"]=i?-100:0,s[n.a]=i?"1px":0,s["border"+l+Dm]=1,s["border"+c+Dm]=0,s[n.p]=t+"px",kt.set(e,s)},Ln=[],wE={},mv,zw=function(){return Es()-So>34&&(mv||(mv=requestAnimationFrame(cu)))},Kp=function(){(!ks||!ks.isPressed||ks.startX>hi.clientWidth)&&(zn.cache++,ks?mv||(mv=requestAnimationFrame(cu)):cu(),So||Cd("scrollStart"),So=Es())},U1=function(){I3=Fn.innerWidth,L3=Fn.innerHeight},E0=function(e){zn.cache++,(e===!0||!Ms&&!N3&&!Bi.fullscreenElement&&!Bi.webkitFullscreenElement&&(!TE||I3!==Fn.innerWidth||Math.abs(Fn.innerHeight-L3)>Fn.innerHeight*.25))&&LA.restart(!0)},Td={},h6=[],X3=function r(){return Ga(Hn,"scrollEnd",r)||nd(!0)},Cd=function(e){return Td[e]&&Td[e].map(function(t){return t()})||h6},Pr=[],Y3=function(e){for(var t=0;t<Pr.length;t+=5)(!e||Pr[t+4]&&Pr[t+4].query===e)&&(Pr[t].style.cssText=Pr[t+1],Pr[t].getBBox&&Pr[t].setAttribute("transform",Pr[t+2]||""),Pr[t+3].uncache=1)},pT=function(e,t){var n;for(Xs=0;Xs<Ln.length;Xs++)n=Ln[Xs],n&&(!t||n._ctx===t)&&(e?n.kill(1):n.revert(!0,!0));IA=!0,t&&Y3(t),t||Cd("revert")},q3=function(e,t){zn.cache++,(t||!Ys)&&zn.forEach(function(n){return Ts(n)&&n.cacheID++&&(n.rec=0)}),zr(e)&&(Fn.history.scrollRestoration=lT=e)},Ys,dd=0,Hw,d6=function(){if(Hw!==dd){var e=Hw=dd;requestAnimationFrame(function(){return e===dd&&nd(!0)})}},J3=function(){hi.appendChild(dm),cT=!ks&&dm.offsetHeight||Fn.innerHeight,hi.removeChild(dm)},Gw=function(e){return pv(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},nd=function(e,t){if(Gr=Bi.documentElement,hi=Bi.body,oT=[Fn,Bi,Gr,hi],So&&!e&&!IA){Va(Hn,"scrollEnd",X3);return}J3(),Ys=Hn.isRefreshing=!0,zn.forEach(function(i){return Ts(i)&&++i.cacheID&&(i.rec=i())});var n=Cd("refreshInit");O3&&Hn.sort(),t||pT(),zn.forEach(function(i){Ts(i)&&(i.smooth&&(i.target.style.scrollBehavior="auto"),i(0))}),Ln.slice(0).forEach(function(i){return i.refresh()}),IA=!1,Ln.forEach(function(i){if(i._subPinOffset&&i.pin){var s=i.vars.horizontal?"offsetWidth":"offsetHeight",l=i.pin[s];i.revert(!0,1),i.adjustPinSpacing(i.pin[s]-l),i.refresh()}}),RE=1,Gw(!0),Ln.forEach(function(i){var s=ac(i.scroller,i._dir),l=i.vars.end==="max"||i._endClamp&&i.end>s,c=i._startClamp&&i.start>=s;(l||c)&&i.setPositions(c?s-1:i.start,l?Math.max(c?s:i.start+1,s):i.end,!0)}),Gw(!1),RE=0,n.forEach(function(i){return i&&i.render&&i.render(-1)}),zn.forEach(function(i){Ts(i)&&(i.smooth&&requestAnimationFrame(function(){return i.target.style.scrollBehavior="smooth"}),i.rec&&i(i.rec))}),q3(lT,1),LA.pause(),dd++,Ys=2,cu(2),Ln.forEach(function(i){return Ts(i.vars.onRefresh)&&i.vars.onRefresh(i)}),Ys=Hn.isRefreshing=!1,Cd("refresh")},BE=0,Ux=1,J0,cu=function(e){if(e===2||!Ys&&!IA){Hn.isUpdating=!0,J0&&J0.update(0);var t=Ln.length,n=Es(),i=n-B1>=50,s=t&&Ln[0].scroll();if(Ux=BE>s?-1:1,Ys||(BE=s),i&&(So&&!ES&&n-So>200&&(So=0,Cd("scrollEnd")),x0=B1,B1=n),Ux<0){for(Xs=t;Xs-- >0;)Ln[Xs]&&Ln[Xs].update(0,i);Ux=1}else for(Xs=0;Xs<t;Xs++)Ln[Xs]&&Ln[Xs].update(0,i);Hn.isUpdating=!1}mv=0},DE=[G3,V3,fT,uT,go+q0,go+k0,go+Y0,go+X0,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Ox=DE.concat([fd,hd,"boxSizing","max"+Dm,"max"+hT,"position",go,ya,ya+Y0,ya+k0,ya+q0,ya+X0]),p6=function(e,t,n){pm(n);var i=e._gsap;if(i.spacerIsNative)pm(i.spacerState);else if(e._gsap.swappedIn){var s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))}e._gsap.swappedIn=!1},O1=function(e,t,n,i){if(!e._gsap.swappedIn){for(var s=DE.length,l=t.style,c=e.style,h;s--;)h=DE[s],l[h]=n[h];l.position=n.position==="absolute"?"absolute":"relative",n.display==="inline"&&(l.display="inline-block"),c[fT]=c[uT]="auto",l.flexBasis=n.flexBasis||"auto",l.overflow="visible",l.boxSizing="border-box",l[fd]=PA(e,js)+Ta,l[hd]=PA(e,Ca)+Ta,l[ya]=c[go]=c[V3]=c[G3]="0",pm(i),c[fd]=c["max"+Dm]=n[fd],c[hd]=c["max"+hT]=n[hd],c[ya]=n[ya],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},m6=/([A-Z])/g,pm=function(e){if(e){var t=e.t.style,n=e.length,i=0,s,l;for((e.t._gsap||kt.core.getCache(e.t)).uncache=1;i<n;i+=2)l=e[i+1],s=e[i],l?t[s]=l:t[s]&&t.removeProperty(s.replace(m6,"-$1").toLowerCase())}},_x=function(e){for(var t=Ox.length,n=e.style,i=[],s=0;s<t;s++)i.push(Ox[s],n[Ox[s]]);return i.t=e,i},g6=function(e,t,n){for(var i=[],s=e.length,l=n?8:0,c;l<s;l+=2)c=e[l],i.push(c,c in t?t[c]:e[l+1]);return i.t=e.t,i},Nx={left:0,top:0},Vw=function(e,t,n,i,s,l,c,h,p,g,_,y,x,M){Ts(e)&&(e=e(h)),zr(e)&&e.substr(0,3)==="max"&&(e=y+(e.charAt(4)==="="?Bx("0"+e.substr(3),n):0));var T=x?x.time():0,b,E,w;if(x&&x.seek(0),isNaN(e)||(e=+e),M0(e))x&&(e=kt.utils.mapRange(x.scrollTrigger.start,x.scrollTrigger.end,0,y,e)),c&&Dx(c,n,i,!0);else{Ts(t)&&(t=t(h));var D=(e||"0").split(" "),B,I,L,F;w=dr(t,h)||hi,B=iu(w)||{},(!B||!B.left&&!B.top)&&vo(w).display==="none"&&(F=w.style.display,w.style.display="block",B=iu(w),F?w.style.display=F:w.style.removeProperty("display")),I=Bx(D[0],B[i.d]),L=Bx(D[1]||"0",n),e=B[i.p]-p[i.p]-g+I+s-L,c&&Dx(c,L,i,n-L<20||c._isStart&&L>20),n-=n-L}if(M&&(h[M]=e||-.001,e<0&&(e=0)),l){var H=e+n,U=l._isStart;b="scroll"+i.d2,Dx(l,H,i,U&&H>20||!U&&(_?Math.max(hi[b],Gr[b]):l.parentNode[b])<=H+1),_&&(p=iu(c),_&&(l.style[i.op.p]=p[i.op.p]-i.op.m-l._offset+Ta))}return x&&w&&(b=iu(w),x.seek(y),E=iu(w),x._caScrollDist=b[i.p]-E[i.p],e=e/x._caScrollDist*y),x&&x.seek(T),x?e:Math.round(e)},v6=/(webkit|moz|length|cssText|inset)/i,kw=function(e,t,n,i){if(e.parentNode!==t){var s=e.style,l,c;if(t===hi){e._stOrig=s.cssText,c=vo(e);for(l in c)!+l&&!v6.test(l)&&c[l]&&typeof s[l]=="string"&&l!=="0"&&(s[l]=c[l]);s.top=n,s.left=i}else s.cssText=e._stOrig;kt.core.getCache(e).uncache=1,t.appendChild(e)}},W3=function(e,t,n){var i=t,s=i;return function(l){var c=Math.round(e());return c!==i&&c!==s&&Math.abs(c-i)>3&&Math.abs(c-s)>3&&(l=c,n&&n()),s=i,i=Math.round(l),i}},yx=function(e,t,n){var i={};i[t.p]="+="+n,kt.set(e,i)},Xw=function(e,t){var n=wf(e,t),i="_scroll"+t.p2,s=function l(c,h,p,g,_){var y=l.tween,x=h.onComplete,M={};p=p||n();var T=W3(n,p,function(){y.kill(),l.tween=0});return _=g&&_||0,g=g||c-p,y&&y.kill(),h[i]=c,h.inherit=!1,h.modifiers=M,M[i]=function(){return T(p+g*y.ratio+_*y.ratio*y.ratio)},h.onUpdate=function(){zn.cache++,l.tween&&cu()},h.onComplete=function(){l.tween=0,x&&x.call(y)},y=l.tween=kt.to(e,h),y};return e[i]=n,n.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},Va(e,"wheel",n.wheelHandler),Hn.isTouch&&Va(e,"touchmove",n.wheelHandler),s},Hn=function(){function r(t,n){Zp||r.register(kt)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),CE(this),this.init(t,n)}var e=r.prototype;return e.init=function(n,i){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!A0){this.update=this.refresh=this.kill=ec;return}n=Pw(zr(n)||M0(n)||n.nodeType?{trigger:n}:n,gx);var s=n,l=s.onUpdate,c=s.toggleClass,h=s.id,p=s.onToggle,g=s.onRefresh,_=s.scrub,y=s.trigger,x=s.pin,M=s.pinSpacing,T=s.invalidateOnRefresh,b=s.anticipatePin,E=s.onScrubComplete,w=s.onSnapComplete,D=s.once,B=s.snap,I=s.pinReparent,L=s.pinSpacer,F=s.containerAnimation,H=s.fastScrollEnd,U=s.preventOverlaps,N=n.horizontal||n.containerAnimation&&n.horizontal!==!1?js:Ca,Y=!_&&_!==0,ee=dr(n.scroller||Fn),$=kt.core.getCache(ee),ae=bd(ee),me=("pinType"in n?n.pinType:Sf(ee,"pinType")||ae&&"fixed")==="fixed",Q=[n.onEnter,n.onLeave,n.onEnterBack,n.onLeaveBack],he=Y&&n.toggleActions.split(" "),oe="markers"in n?n.markers:gx.markers,be=ae?0:parseFloat(vo(ee)["border"+N.p2+Dm])||0,P=this,ue=n.onRefreshInit&&function(){return n.onRefreshInit(P)},Ce=o6(ee,ae,N),Xe=l6(ee,ae),re=0,Ne=0,Be=0,Ve=wf(ee,N),tt,wt,ht,Pt,Je,De,j,Mt,$e,pe,at,Lt,ut,W,k,xe,ze,Ye,ke,_t,lt,yt,$t,st,vt,Nt,mt,Et,le,Re,rt,ne,Me,Te,Ge,dt,xt,Ft,rn;if(P._startClamp=P._endClamp=!1,P._dir=N,b*=45,P.scroller=ee,P.scroll=F?F.time.bind(F):Ve,Pt=Ve(),P.vars=n,i=i||n.animation,"refreshPriority"in n&&(O3=1,n.refreshPriority===-9999&&(J0=P)),$.tweenScroll=$.tweenScroll||{top:Xw(ee,Ca),left:Xw(ee,js)},P.tweenTo=tt=$.tweenScroll[N.p],P.scrubDuration=function(bt){Me=M0(bt)&&bt,Me?ne?ne.duration(bt):ne=kt.to(i,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:Me,paused:!0,onComplete:function(){return E&&E(P)}}):(ne&&ne.progress(1).kill(),ne=0)},i&&(i.vars.lazy=!1,i._initted&&!P.isReverted||i.vars.immediateRender!==!1&&n.immediateRender!==!1&&i.duration()&&i.render(0,!0,!0),P.animation=i.pause(),i.scrollTrigger=P,P.scrubDuration(_),Re=0,h||(h=i.vars.id)),B&&((!qh(B)||B.push)&&(B={snapTo:B}),"scrollBehavior"in hi.style&&kt.set(ae?[hi,Gr]:ee,{scrollBehavior:"auto"}),zn.forEach(function(bt){return Ts(bt)&&bt.target===(ae?Bi.scrollingElement||Gr:ee)&&(bt.smooth=!1)}),ht=Ts(B.snapTo)?B.snapTo:B.snapTo==="labels"?u6(i):B.snapTo==="labelsDirectional"?f6(i):B.directional!==!1?function(bt,en){return dT(B.snapTo)(bt,Es()-Ne<500?0:en.direction)}:kt.utils.snap(B.snapTo),Te=B.duration||{min:.1,max:2},Te=qh(Te)?V0(Te.min,Te.max):V0(Te,Te),Ge=kt.delayedCall(B.delay||Me/2||.1,function(){var bt=Ve(),en=Es()-Ne<500,It=tt.tween;if((en||Math.abs(P.getVelocity())<10)&&!It&&!ES&&re!==bt){var qt=(bt-De)/W,Zn=i&&!Y?i.totalProgress():qt,tn=en?0:(Zn-rt)/(Es()-x0)*1e3||0,Rt=kt.utils.clamp(-qt,1-qt,jp(tn/2)*tn/.185),gn=qt+(B.inertia===!1?0:Rt),Ht,G,X=B,ce=X.onStart,ye=X.onInterrupt,Ie=X.onComplete;if(Ht=ht(gn,P),M0(Ht)||(Ht=gn),G=Math.max(0,Math.round(De+Ht*W)),bt<=j&&bt>=De&&G!==bt){if(It&&!It._initted&&It.data<=jp(G-bt))return;B.inertia===!1&&(Rt=Ht-qt),tt(G,{duration:Te(jp(Math.max(jp(gn-Zn),jp(Ht-Zn))*.185/tn/.05||0)),ease:B.ease||"power3",data:jp(G-bt),onInterrupt:function(){return Ge.restart(!0)&&ye&&ye(P)},onComplete:function(){P.update(),re=Ve(),i&&!Y&&(ne?ne.resetTo("totalProgress",Ht,i._tTime/i._tDur):i.progress(Ht)),Re=rt=i&&!Y?i.totalProgress():P.progress,w&&w(P),Ie&&Ie(P)}},bt,Rt*W,G-bt-Rt*W),ce&&ce(P,tt.tween)}}else P.isActive&&re!==bt&&Ge.restart(!0)}).pause()),h&&(wE[h]=P),y=P.trigger=dr(y||x!==!0&&x),rn=y&&y._gsap&&y._gsap.stRevert,rn&&(rn=rn(P)),x=x===!0?y:dr(x),zr(c)&&(c={targets:y,className:c}),x&&(M===!1||M===go||(M=!M&&x.parentNode&&x.parentNode.style&&vo(x.parentNode).display==="flex"?!1:ya),P.pin=x,wt=kt.core.getCache(x),wt.spacer?k=wt.pinState:(L&&(L=dr(L),L&&!L.nodeType&&(L=L.current||L.nativeElement),wt.spacerIsNative=!!L,L&&(wt.spacerState=_x(L))),wt.spacer=Ye=L||Bi.createElement("div"),Ye.classList.add("pin-spacer"),h&&Ye.classList.add("pin-spacer-"+h),wt.pinState=k=_x(x)),n.force3D!==!1&&kt.set(x,{force3D:!0}),P.spacer=Ye=wt.spacer,le=vo(x),st=le[M+N.os2],_t=kt.getProperty(x),lt=kt.quickSetter(x,N.a,Ta),O1(x,Ye,le),ze=_x(x)),oe){Lt=qh(oe)?Pw(oe,Fw):Fw,pe=vx("scroller-start",h,ee,N,Lt,0),at=vx("scroller-end",h,ee,N,Lt,0,pe),ke=pe["offset"+N.op.d2];var Bn=dr(Sf(ee,"content")||ee);Mt=this.markerStart=vx("start",h,Bn,N,Lt,ke,0,F),$e=this.markerEnd=vx("end",h,Bn,N,Lt,ke,0,F),F&&(Ft=kt.quickSetter([Mt,$e],N.a,Ta)),!me&&!(fc.length&&Sf(ee,"fixedMarkers")===!0)&&(c6(ae?hi:ee),kt.set([pe,at],{force3D:!0}),Nt=kt.quickSetter(pe,N.a,Ta),Et=kt.quickSetter(at,N.a,Ta))}if(F){var St=F.vars.onUpdate,Dt=F.vars.onUpdateParams;F.eventCallback("onUpdate",function(){P.update(0,0,1),St&&St.apply(F,Dt||[])})}if(P.previous=function(){return Ln[Ln.indexOf(P)-1]},P.next=function(){return Ln[Ln.indexOf(P)+1]},P.revert=function(bt,en){if(!en)return P.kill(!0);var It=bt!==!1||!P.enabled,qt=Ms;It!==P.isReverted&&(It&&(dt=Math.max(Ve(),P.scroll.rec||0),Be=P.progress,xt=i&&i.progress()),Mt&&[Mt,$e,pe,at].forEach(function(Zn){return Zn.style.display=It?"none":"block"}),It&&(Ms=P,P.update(It)),x&&(!I||!P.isActive)&&(It?p6(x,Ye,k):O1(x,Ye,vo(x),vt)),It||P.update(It),Ms=qt,P.isReverted=It)},P.refresh=function(bt,en,It,qt){if(!((Ms||!P.enabled)&&!en)){if(x&&bt&&So){Va(r,"scrollEnd",X3);return}!Ys&&ue&&ue(P),Ms=P,tt.tween&&!It&&(tt.tween.kill(),tt.tween=0),ne&&ne.pause(),T&&i&&i.revert({kill:!1}).invalidate(),P.isReverted||P.revert(!0,!0),P._subPinOffset=!1;var Zn=Ce(),tn=Xe(),Rt=F?F.duration():ac(ee,N),gn=W<=.01,Ht=0,G=qt||0,X=qh(It)?It.end:n.end,ce=n.endTrigger||y,ye=qh(It)?It.start:n.start||(n.start===0||!y?0:x?"0 0":"0 100%"),Ie=P.pinnedContainer=n.pinnedContainer&&dr(n.pinnedContainer,P),Le=y&&Math.max(0,Ln.indexOf(P))||0,nt=Le,qe,V,K,se,te,de,Ae,He,je,Ke,At,Tt,Ct;for(oe&&qh(It)&&(Tt=kt.getProperty(pe,N.p),Ct=kt.getProperty(at,N.p));nt-- >0;)de=Ln[nt],de.end||de.refresh(0,1)||(Ms=P),Ae=de.pin,Ae&&(Ae===y||Ae===x||Ae===Ie)&&!de.isReverted&&(Ke||(Ke=[]),Ke.unshift(de),de.revert(!0,!0)),de!==Ln[nt]&&(Le--,nt--);for(Ts(ye)&&(ye=ye(P)),ye=Ow(ye,"start",P),De=Vw(ye,y,Zn,N,Ve(),Mt,pe,P,tn,be,me,Rt,F,P._startClamp&&"_startClamp")||(x?-.001:0),Ts(X)&&(X=X(P)),zr(X)&&!X.indexOf("+=")&&(~X.indexOf(" ")?X=(zr(ye)?ye.split(" ")[0]:"")+X:(Ht=Bx(X.substr(2),Zn),X=zr(ye)?ye:(F?kt.utils.mapRange(0,F.duration(),F.scrollTrigger.start,F.scrollTrigger.end,De):De)+Ht,ce=y)),X=Ow(X,"end",P),j=Math.max(De,Vw(X||(ce?"100% 0":Rt),ce,Zn,N,Ve()+Ht,$e,at,P,tn,be,me,Rt,F,P._endClamp&&"_endClamp"))||-.001,Ht=0,nt=Le;nt--;)de=Ln[nt],Ae=de.pin,Ae&&de.start-de._pinPush<=De&&!F&&de.end>0&&(qe=de.end-(P._startClamp?Math.max(0,de.start):de.start),(Ae===y&&de.start-de._pinPush<De||Ae===Ie)&&isNaN(ye)&&(Ht+=qe*(1-de.progress)),Ae===x&&(G+=qe));if(De+=Ht,j+=Ht,P._startClamp&&(P._startClamp+=Ht),P._endClamp&&!Ys&&(P._endClamp=j||-.001,j=Math.min(j,ac(ee,N))),W=j-De||(De-=.01)&&.001,gn&&(Be=kt.utils.clamp(0,1,kt.utils.normalize(De,j,dt))),P._pinPush=G,Mt&&Ht&&(qe={},qe[N.a]="+="+Ht,Ie&&(qe[N.p]="-="+Ve()),kt.set([Mt,$e],qe)),x&&!(RE&&P.end>=ac(ee,N)))qe=vo(x),se=N===Ca,K=Ve(),yt=parseFloat(_t(N.a))+G,!Rt&&j>1&&(At=(ae?Bi.scrollingElement||Gr:ee).style,At={style:At,value:At["overflow"+N.a.toUpperCase()]},ae&&vo(hi)["overflow"+N.a.toUpperCase()]!=="scroll"&&(At.style["overflow"+N.a.toUpperCase()]="scroll")),O1(x,Ye,qe),ze=_x(x),V=iu(x,!0),He=me&&wf(ee,se?js:Ca)(),M?(vt=[M+N.os2,W+G+Ta],vt.t=Ye,nt=M===ya?PA(x,N)+W+G:0,nt&&(vt.push(N.d,nt+Ta),Ye.style.flexBasis!=="auto"&&(Ye.style.flexBasis=nt+Ta)),pm(vt),Ie&&Ln.forEach(function(Wt){Wt.pin===Ie&&Wt.vars.pinSpacing!==!1&&(Wt._subPinOffset=!0)}),me&&Ve(dt)):(nt=PA(x,N),nt&&Ye.style.flexBasis!=="auto"&&(Ye.style.flexBasis=nt+Ta)),me&&(te={top:V.top+(se?K-De:He)+Ta,left:V.left+(se?He:K-De)+Ta,boxSizing:"border-box",position:"fixed"},te[fd]=te["max"+Dm]=Math.ceil(V.width)+Ta,te[hd]=te["max"+hT]=Math.ceil(V.height)+Ta,te[go]=te[go+Y0]=te[go+k0]=te[go+q0]=te[go+X0]="0",te[ya]=qe[ya],te[ya+Y0]=qe[ya+Y0],te[ya+k0]=qe[ya+k0],te[ya+q0]=qe[ya+q0],te[ya+X0]=qe[ya+X0],xe=g6(k,te,I),Ys&&Ve(0)),i?(je=i._initted,R1(1),i.render(i.duration(),!0,!0),$t=_t(N.a)-yt+W+G,mt=Math.abs(W-$t)>1,me&&mt&&xe.splice(xe.length-2,2),i.render(0,!0,!0),je||i.invalidate(!0),i.parent||i.totalTime(i.totalTime()),R1(0)):$t=W,At&&(At.value?At.style["overflow"+N.a.toUpperCase()]=At.value:At.style.removeProperty("overflow-"+N.a));else if(y&&Ve()&&!F)for(V=y.parentNode;V&&V!==hi;)V._pinOffset&&(De-=V._pinOffset,j-=V._pinOffset),V=V.parentNode;Ke&&Ke.forEach(function(Wt){return Wt.revert(!1,!0)}),P.start=De,P.end=j,Pt=Je=Ys?dt:Ve(),!F&&!Ys&&(Pt<dt&&Ve(dt),P.scroll.rec=0),P.revert(!1,!0),Ne=Es(),Ge&&(re=-1,Ge.restart(!0)),Ms=0,i&&Y&&(i._initted||xt)&&i.progress()!==xt&&i.progress(xt||0,!0).render(i.time(),!0,!0),(gn||Be!==P.progress||F||T||i&&!i._initted)&&(i&&!Y&&i.totalProgress(F&&De<-.001&&!Be?kt.utils.normalize(De,j,0):Be,!0),P.progress=gn||(Pt-De)/W===Be?0:Be),x&&M&&(Ye._pinOffset=Math.round(P.progress*$t)),ne&&ne.invalidate(),isNaN(Tt)||(Tt-=kt.getProperty(pe,N.p),Ct-=kt.getProperty(at,N.p),yx(pe,N,Tt),yx(Mt,N,Tt-(qt||0)),yx(at,N,Ct),yx($e,N,Ct-(qt||0))),gn&&!Ys&&P.update(),g&&!Ys&&!ut&&(ut=!0,g(P),ut=!1)}},P.getVelocity=function(){return(Ve()-Je)/(Es()-x0)*1e3||0},P.endAnimation=function(){m0(P.callbackAnimation),i&&(ne?ne.progress(1):i.paused()?Y||m0(i,P.direction<0,1):m0(i,i.reversed()))},P.labelToScroll=function(bt){return i&&i.labels&&(De||P.refresh()||De)+i.labels[bt]/i.duration()*W||0},P.getTrailing=function(bt){var en=Ln.indexOf(P),It=P.direction>0?Ln.slice(0,en).reverse():Ln.slice(en+1);return(zr(bt)?It.filter(function(qt){return qt.vars.preventOverlaps===bt}):It).filter(function(qt){return P.direction>0?qt.end<=De:qt.start>=j})},P.update=function(bt,en,It){if(!(F&&!It&&!bt)){var qt=Ys===!0?dt:P.scroll(),Zn=bt?0:(qt-De)/W,tn=Zn<0?0:Zn>1?1:Zn||0,Rt=P.progress,gn,Ht,G,X,ce,ye,Ie,Le;if(en&&(Je=Pt,Pt=F?Ve():qt,B&&(rt=Re,Re=i&&!Y?i.totalProgress():tn)),b&&x&&!Ms&&!hx&&So&&(!tn&&De<qt+(qt-Je)/(Es()-x0)*b?tn=1e-4:tn===1&&j>qt+(qt-Je)/(Es()-x0)*b&&(tn=.9999)),tn!==Rt&&P.enabled){if(gn=P.isActive=!!tn&&tn<1,Ht=!!Rt&&Rt<1,ye=gn!==Ht,ce=ye||!!tn!=!!Rt,P.direction=tn>Rt?1:-1,P.progress=tn,ce&&!Ms&&(G=tn&&!Rt?0:tn===1?1:Rt===1?2:3,Y&&(X=!ye&&he[G+1]!=="none"&&he[G+1]||he[G],Le=i&&(X==="complete"||X==="reset"||X in i))),U&&(ye||Le)&&(Le||_||!i)&&(Ts(U)?U(P):P.getTrailing(U).forEach(function(K){return K.endAnimation()})),Y||(ne&&!Ms&&!hx?(ne._dp._time-ne._start!==ne._time&&ne.render(ne._dp._time-ne._start),ne.resetTo?ne.resetTo("totalProgress",tn,i._tTime/i._tDur):(ne.vars.totalProgress=tn,ne.invalidate().restart())):i&&i.totalProgress(tn,!!(Ms&&(Ne||bt)))),x){if(bt&&M&&(Ye.style[M+N.os2]=st),!me)lt(S0(yt+$t*tn));else if(ce){if(Ie=!bt&&tn>Rt&&j+1>qt&&qt+1>=ac(ee,N),I)if(!bt&&(gn||Ie)){var nt=iu(x,!0),qe=qt-De;kw(x,hi,nt.top+(N===Ca?qe:0)+Ta,nt.left+(N===Ca?0:qe)+Ta)}else kw(x,Ye);pm(gn||Ie?xe:ze),mt&&tn<1&&gn||lt(yt+(tn===1&&!Ie?$t:0))}}B&&!tt.tween&&!Ms&&!hx&&Ge.restart(!0),c&&(ye||D&&tn&&(tn<1||!w1))&&pv(c.targets).forEach(function(K){return K.classList[gn||D?"add":"remove"](c.className)}),l&&!Y&&!bt&&l(P),ce&&!Ms?(Y&&(Le&&(X==="complete"?i.pause().totalProgress(1):X==="reset"?i.restart(!0).pause():X==="restart"?i.restart(!0):i[X]()),l&&l(P)),(ye||!w1)&&(p&&ye&&D1(P,p),Q[G]&&D1(P,Q[G]),D&&(tn===1?P.kill(!1,1):Q[G]=0),ye||(G=tn===1?1:3,Q[G]&&D1(P,Q[G]))),H&&!gn&&Math.abs(P.getVelocity())>(M0(H)?H:2500)&&(m0(P.callbackAnimation),ne?ne.progress(1):m0(i,X==="reverse"?1:!tn,1))):Y&&l&&!Ms&&l(P)}if(Et){var V=F?qt/F.duration()*(F._caScrollDist||0):qt;Nt(V+(pe._isFlipped?1:0)),Et(V)}Ft&&Ft(-qt/F.duration()*(F._caScrollDist||0))}},P.enable=function(bt,en){P.enabled||(P.enabled=!0,Va(ee,"resize",E0),ae||Va(ee,"scroll",Kp),ue&&Va(r,"refreshInit",ue),bt!==!1&&(P.progress=Be=0,Pt=Je=re=Ve()),en!==!1&&P.refresh())},P.getTween=function(bt){return bt&&tt?tt.tween:ne},P.setPositions=function(bt,en,It,qt){if(F){var Zn=F.scrollTrigger,tn=F.duration(),Rt=Zn.end-Zn.start;bt=Zn.start+Rt*bt/tn,en=Zn.start+Rt*en/tn}P.refresh(!1,!1,{start:Nw(bt,It&&!!P._startClamp),end:Nw(en,It&&!!P._endClamp)},qt),P.update()},P.adjustPinSpacing=function(bt){if(vt&&bt){var en=vt.indexOf(N.d)+1;vt[en]=parseFloat(vt[en])+bt+Ta,vt[1]=parseFloat(vt[1])+bt+Ta,pm(vt)}},P.disable=function(bt,en){if(P.enabled&&(bt!==!1&&P.revert(!0,!0),P.enabled=P.isActive=!1,en||ne&&ne.pause(),dt=0,wt&&(wt.uncache=1),ue&&Ga(r,"refreshInit",ue),Ge&&(Ge.pause(),tt.tween&&tt.tween.kill()&&(tt.tween=0)),!ae)){for(var It=Ln.length;It--;)if(Ln[It].scroller===ee&&Ln[It]!==P)return;Ga(ee,"resize",E0),ae||Ga(ee,"scroll",Kp)}},P.kill=function(bt,en){P.disable(bt,en),ne&&!en&&ne.kill(),h&&delete wE[h];var It=Ln.indexOf(P);It>=0&&Ln.splice(It,1),It===Xs&&Ux>0&&Xs--,It=0,Ln.forEach(function(qt){return qt.scroller===P.scroller&&(It=1)}),It||Ys||(P.scroll.rec=0),i&&(i.scrollTrigger=null,bt&&i.revert({kill:!1}),en||i.kill()),Mt&&[Mt,$e,pe,at].forEach(function(qt){return qt.parentNode&&qt.parentNode.removeChild(qt)}),J0===P&&(J0=0),x&&(wt&&(wt.uncache=1),It=0,Ln.forEach(function(qt){return qt.pin===x&&It++}),It||(wt.spacer=0)),n.onKill&&n.onKill(P)},Ln.push(P),P.enable(!1,!1),rn&&rn(P),i&&i.add&&!W){var Zt=P.update;P.update=function(){P.update=Zt,zn.cache++,De||j||P.refresh()},kt.delayedCall(.01,P.update),W=.01,De=j=0}else P.refresh();x&&d6()},r.register=function(n){return Zp||(kt=n||F3(),P3()&&window.document&&r.enable(),Zp=A0),Zp},r.defaults=function(n){if(n)for(var i in n)gx[i]=n[i];return gx},r.disable=function(n,i){A0=0,Ln.forEach(function(l){return l[i?"kill":"disable"](n)}),Ga(Fn,"wheel",Kp),Ga(Bi,"scroll",Kp),clearInterval(fx),Ga(Bi,"touchcancel",ec),Ga(hi,"touchstart",ec),px(Ga,Bi,"pointerdown,touchstart,mousedown",Lw),px(Ga,Bi,"pointerup,touchend,mouseup",Iw),LA.kill(),dx(Ga);for(var s=0;s<zn.length;s+=3)mx(Ga,zn[s],zn[s+1]),mx(Ga,zn[s],zn[s+2])},r.enable=function(){if(Fn=window,Bi=document,Gr=Bi.documentElement,hi=Bi.body,kt&&(pv=kt.utils.toArray,V0=kt.utils.clamp,CE=kt.core.context||ec,R1=kt.core.suppressOverwrites||ec,lT=Fn.history.scrollRestoration||"auto",BE=Fn.pageYOffset||0,kt.core.globals("ScrollTrigger",r),hi)){A0=1,dm=document.createElement("div"),dm.style.height="100vh",dm.style.position="absolute",J3(),r6(),da.register(kt),r.isTouch=da.isTouch,uf=da.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),TE=da.isTouch===1,Va(Fn,"wheel",Kp),oT=[Fn,Bi,Gr,hi],kt.matchMedia?(r.matchMedia=function(p){var g=kt.matchMedia(),_;for(_ in p)g.add(_,p[_]);return g},kt.addEventListener("matchMediaInit",function(){return pT()}),kt.addEventListener("matchMediaRevert",function(){return Y3()}),kt.addEventListener("matchMedia",function(){nd(0,1),Cd("matchMedia")}),kt.matchMedia().add("(orientation: portrait)",function(){return U1(),U1})):console.warn("Requires GSAP 3.11.0 or later"),U1(),Va(Bi,"scroll",Kp);var n=hi.hasAttribute("style"),i=hi.style,s=i.borderTopStyle,l=kt.core.Animation.prototype,c,h;for(l.revert||Object.defineProperty(l,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",c=iu(hi),Ca.m=Math.round(c.top+Ca.sc())||0,js.m=Math.round(c.left+js.sc())||0,s?i.borderTopStyle=s:i.removeProperty("border-top-style"),n||(hi.setAttribute("style",""),hi.removeAttribute("style")),fx=setInterval(zw,250),kt.delayedCall(.5,function(){return hx=0}),Va(Bi,"touchcancel",ec),Va(hi,"touchstart",ec),px(Va,Bi,"pointerdown,touchstart,mousedown",Lw),px(Va,Bi,"pointerup,touchend,mouseup",Iw),bE=kt.utils.checkPrefix("transform"),Ox.push(bE),Zp=Es(),LA=kt.delayedCall(.2,nd).pause(),Qp=[Bi,"visibilitychange",function(){var p=Fn.innerWidth,g=Fn.innerHeight;Bi.hidden?(Dw=p,Uw=g):(Dw!==p||Uw!==g)&&E0()},Bi,"DOMContentLoaded",nd,Fn,"load",nd,Fn,"resize",E0],dx(Va),Ln.forEach(function(p){return p.enable(0,1)}),h=0;h<zn.length;h+=3)mx(Ga,zn[h],zn[h+1]),mx(Ga,zn[h],zn[h+2])}},r.config=function(n){"limitCallbacks"in n&&(w1=!!n.limitCallbacks);var i=n.syncInterval;i&&clearInterval(fx)||(fx=i)&&setInterval(zw,i),"ignoreMobileResize"in n&&(TE=r.isTouch===1&&n.ignoreMobileResize),"autoRefreshEvents"in n&&(dx(Ga)||dx(Va,n.autoRefreshEvents||"none"),N3=(n.autoRefreshEvents+"").indexOf("resize")===-1)},r.scrollerProxy=function(n,i){var s=dr(n),l=zn.indexOf(s),c=bd(s);~l&&zn.splice(l,c?6:2),i&&(c?fc.unshift(Fn,i,hi,i,Gr,i):fc.unshift(s,i))},r.clearMatchMedia=function(n){Ln.forEach(function(i){return i._ctx&&i._ctx.query===n&&i._ctx.kill(!0,!0)})},r.isInViewport=function(n,i,s){var l=(zr(n)?dr(n):n).getBoundingClientRect(),c=l[s?fd:hd]*i||0;return s?l.right-c>0&&l.left+c<Fn.innerWidth:l.bottom-c>0&&l.top+c<Fn.innerHeight},r.positionInViewport=function(n,i,s){zr(n)&&(n=dr(n));var l=n.getBoundingClientRect(),c=l[s?fd:hd],h=i==null?c/2:i in FA?FA[i]*c:~i.indexOf("%")?parseFloat(i)*c/100:parseFloat(i)||0;return s?(l.left+h)/Fn.innerWidth:(l.top+h)/Fn.innerHeight},r.killAll=function(n){if(Ln.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),n!==!0){var i=Td.killAll||[];Td={},i.forEach(function(s){return s()})}},r}();Hn.version="3.12.7";Hn.saveStyles=function(r){return r?pv(r).forEach(function(e){if(e&&e.style){var t=Pr.indexOf(e);t>=0&&Pr.splice(t,5),Pr.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),kt.core.getCache(e),CE())}}):Pr};Hn.revert=function(r,e){return pT(!r,e)};Hn.create=function(r,e){return new Hn(r,e)};Hn.refresh=function(r){return r?E0(!0):(Zp||Hn.register())&&nd(!0)};Hn.update=function(r){return++zn.cache&&cu(r===!0?2:0)};Hn.clearScrollMemory=q3;Hn.maxScroll=function(r,e){return ac(r,e?js:Ca)};Hn.getScrollFunc=function(r,e){return wf(dr(r),e?js:Ca)};Hn.getById=function(r){return wE[r]};Hn.getAll=function(){return Ln.filter(function(r){return r.vars.id!=="ScrollSmoother"})};Hn.isScrolling=function(){return!!So};Hn.snapDirectional=dT;Hn.addEventListener=function(r,e){var t=Td[r]||(Td[r]=[]);~t.indexOf(e)||t.push(e)};Hn.removeEventListener=function(r,e){var t=Td[r],n=t&&t.indexOf(e);n>=0&&t.splice(n,1)};Hn.batch=function(r,e){var t=[],n={},i=e.interval||.016,s=e.batchMax||1e9,l=function(p,g){var _=[],y=[],x=kt.delayedCall(i,function(){g(_,y),_=[],y=[]}).pause();return function(M){_.length||x.restart(!0),_.push(M.trigger),y.push(M),s<=_.length&&x.progress(1)}},c;for(c in e)n[c]=c.substr(0,2)==="on"&&Ts(e[c])&&c!=="onRefreshInit"?l(c,e[c]):e[c];return Ts(s)&&(s=s(),Va(Hn,"refresh",function(){return s=e.batchMax()})),pv(r).forEach(function(h){var p={};for(c in n)p[c]=n[c];p.trigger=h,t.push(Hn.create(p))}),t};var Yw=function(e,t,n,i){return t>i?e(i):t<0&&e(0),n>i?(i-t)/(n-t):n<0?t/(t-n):1},N1=function r(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(da.isTouch?" pinch-zoom":""):"none",e===Gr&&r(hi,t)},xx={auto:1,scroll:1},_6=function(e){var t=e.event,n=e.target,i=e.axis,s=(t.changedTouches?t.changedTouches[0]:t).target,l=s._gsap||kt.core.getCache(s),c=Es(),h;if(!l._isScrollT||c-l._isScrollT>2e3){for(;s&&s!==hi&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(xx[(h=vo(s)).overflowY]||xx[h.overflowX]));)s=s.parentNode;l._isScroll=s&&s!==n&&!bd(s)&&(xx[(h=vo(s)).overflowY]||xx[h.overflowX]),l._isScrollT=c}(l._isScroll||i==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},j3=function(e,t,n,i){return da.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:i=i&&_6,onPress:i,onDrag:i,onScroll:i,onEnable:function(){return n&&Va(Bi,da.eventTypes[0],Jw,!1,!0)},onDisable:function(){return Ga(Bi,da.eventTypes[0],Jw,!0)}})},y6=/(input|label|select|textarea)/i,qw,Jw=function(e){var t=y6.test(e.target.tagName);(t||qw)&&(e._gsapAllow=!0,qw=t)},x6=function(e){qh(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,n=t.normalizeScrollX,i=t.momentum,s=t.allowNestedScroll,l=t.onRelease,c,h,p=dr(e.target)||Gr,g=kt.core.globals().ScrollSmoother,_=g&&g.get(),y=uf&&(e.content&&dr(e.content)||_&&e.content!==!1&&!_.smooth()&&_.content()),x=wf(p,Ca),M=wf(p,js),T=1,b=(da.isTouch&&Fn.visualViewport?Fn.visualViewport.scale*Fn.visualViewport.width:Fn.outerWidth)/Fn.innerWidth,E=0,w=Ts(i)?function(){return i(c)}:function(){return i||2.8},D,B,I=j3(p,e.type,!0,s),L=function(){return B=!1},F=ec,H=ec,U=function(){h=ac(p,Ca),H=V0(uf?1:0,h),n&&(F=V0(0,ac(p,js))),D=dd},N=function(){y._gsap.y=S0(parseFloat(y._gsap.y)+x.offset)+"px",y.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(y._gsap.y)+", 0, 1)",x.offset=x.cacheID=0},Y=function(){if(B){requestAnimationFrame(L);var oe=S0(c.deltaY/2),be=H(x.v-oe);if(y&&be!==x.v+x.offset){x.offset=be-x.v;var P=S0((parseFloat(y&&y._gsap.y)||0)-x.offset);y.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+P+", 0, 1)",y._gsap.y=P+"px",x.cacheID=zn.cache,cu()}return!0}x.offset&&N(),B=!0},ee,$,ae,me,Q=function(){U(),ee.isActive()&&ee.vars.scrollY>h&&(x()>h?ee.progress(1)&&x(h):ee.resetTo("scrollY",h))};return y&&kt.set(y,{y:"+=0"}),e.ignoreCheck=function(he){return uf&&he.type==="touchmove"&&Y()||T>1.05&&he.type!=="touchstart"||c.isGesturing||he.touches&&he.touches.length>1},e.onPress=function(){B=!1;var he=T;T=S0((Fn.visualViewport&&Fn.visualViewport.scale||1)/b),ee.pause(),he!==T&&N1(p,T>1.01?!0:n?!1:"x"),$=M(),ae=x(),U(),D=dd},e.onRelease=e.onGestureStart=function(he,oe){if(x.offset&&N(),!oe)me.restart(!0);else{zn.cache++;var be=w(),P,ue;n&&(P=M(),ue=P+be*.05*-he.velocityX/.227,be*=Yw(M,P,ue,ac(p,js)),ee.vars.scrollX=F(ue)),P=x(),ue=P+be*.05*-he.velocityY/.227,be*=Yw(x,P,ue,ac(p,Ca)),ee.vars.scrollY=H(ue),ee.invalidate().duration(be).play(.01),(uf&&ee.vars.scrollY>=h||P>=h-1)&&kt.to({},{onUpdate:Q,duration:be})}l&&l(he)},e.onWheel=function(){ee._ts&&ee.pause(),Es()-E>1e3&&(D=0,E=Es())},e.onChange=function(he,oe,be,P,ue){if(dd!==D&&U(),oe&&n&&M(F(P[2]===oe?$+(he.startX-he.x):M()+oe-P[1])),be){x.offset&&N();var Ce=ue[2]===be,Xe=Ce?ae+he.startY-he.y:x()+be-ue[1],re=H(Xe);Ce&&Xe!==re&&(ae+=re-Xe),x(re)}(be||oe)&&cu()},e.onEnable=function(){N1(p,n?!1:"x"),Hn.addEventListener("refresh",Q),Va(Fn,"resize",Q),x.smooth&&(x.target.style.scrollBehavior="auto",x.smooth=M.smooth=!1),I.enable()},e.onDisable=function(){N1(p,!0),Ga(Fn,"resize",Q),Hn.removeEventListener("refresh",Q),I.kill()},e.lockAxis=e.lockAxis!==!1,c=new da(e),c.iOS=uf,uf&&!x()&&x(1),uf&&kt.ticker.add(ec),me=c._dc,ee=kt.to(c,{ease:"power4",paused:!0,inherit:!1,scrollX:n?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:W3(x,x(),function(){return ee.pause()})},onUpdate:cu,onComplete:me.vars.onComplete}),c};Hn.sort=function(r){if(Ts(r))return Ln.sort(r);var e=Fn.pageYOffset||0;return Hn.getAll().forEach(function(t){return t._sortY=t.trigger?e+t.trigger.getBoundingClientRect().top:t.start+Fn.innerHeight}),Ln.sort(r||function(t,n){return(t.vars.refreshPriority||0)*-1e6+(t.vars.containerAnimation?1e6:t._sortY)-((n.vars.containerAnimation?1e6:n._sortY)+(n.vars.refreshPriority||0)*-1e6)})};Hn.observe=function(r){return new da(r)};Hn.normalizeScroll=function(r){if(typeof r>"u")return ks;if(r===!0&&ks)return ks.enable();if(r===!1){ks&&ks.kill(),ks=r;return}var e=r instanceof da?r:x6(r);return ks&&ks.target===e.target&&ks.kill(),bd(e.target)&&(ks=e),e};Hn.core={_getVelocityProp:EE,_inputObserver:j3,_scrollers:zn,_proxies:fc,bridge:{ss:function(){So||Cd("scrollStart"),So=Es()},ref:function(){return Ms}}};F3()&&kt.registerPlugin(Hn);ul.registerPlugin(Hn);const A6=()=>(MS(()=>{ul.utils.toArray(".timeline-card").forEach(r=>{ul.from(r,{xPercent:-100,opacity:0,transformOrigin:"left left",duration:1,ease:"power2.inOut",scrollTrigger:{trigger:r,start:"top 80%"}})}),ul.to(".timeline",{transformOrigin:"bottom bottom",ease:"power1.inOut",scrollTrigger:{trigger:".timeline",start:"top center",end:"70% center",onUpdate:r=>{ul.to(".timeline",{scaleY:1-r.progress})}}}),ul.utils.toArray(".expText").forEach(r=>{ul.from(r,{opacity:0,xPercent:0,duration:1,ease:"power2.inOut",scrollTrigger:{trigger:r,start:"top 60%"}})},"<")},[]),Oe.jsx("section",{id:"experience",className:"flex-center md:mt-40 mt-20 section-padding xl:px-0",children:Oe.jsxs("div",{className:"w-full h-full md:px-20 px-5",children:[Oe.jsx(NE,{title:"Career Overview",sub:" Coding Experience"}),Oe.jsx("div",{className:"mt-32 relative",children:Oe.jsx("div",{className:"relative z-50 xl:space-y-32 space-y-10",children:qU.map(r=>Oe.jsxs("div",{className:"exp-card-wrapper",children:[Oe.jsx("div",{className:"xl:w-2/6"}),Oe.jsx("div",{className:"xl:w-4/6",children:Oe.jsxs("div",{className:"flex items-start",children:[Oe.jsxs("div",{className:"timeline-wrapper",children:[Oe.jsx("div",{className:"timeline"}),Oe.jsx("div",{className:"gradient-line w-1 h-full"})]}),Oe.jsxs("div",{className:"expText flex xl:gap-20 md:gap-10 gap-5 relative z-20",children:[Oe.jsx("div",{className:"timeline-logo",children:Oe.jsx("img",{src:r.logoPath,alt:"logo"})}),Oe.jsxs("div",{children:[Oe.jsx("h1",{className:"font-semibold text-3xl",children:r.title}),Oe.jsxs("p",{className:"my-5 text-white-50",children:["",r.date]}),Oe.jsx("p",{className:"text-[#839CB5] italic",children:"Responsibilities"}),Oe.jsx("ul",{className:"list-disc ms-5 mt-5 flex flex-col gap-5 text-white-50",children:r.responsibilities.map((e,t)=>Oe.jsx("li",{className:"text-lg",children:e},t))})]})]})]})})]},r.title))})})]})}));ul.registerPlugin(Hn);const S6=()=>{const[r,e]=pt.useState(!1);return pt.useEffect(()=>{const t=()=>{const n=window.scrollY>10;e(n)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]),Oe.jsx("header",{className:`navbar ${r?"scrolled":"not-scrolled"}`,children:Oe.jsxs("div",{className:"inner",children:[Oe.jsxs("a",{href:"#hero",className:"logo flex gap-2 items-center",children:["JOE AGUADO",Oe.jsx("span",{children:Oe.jsx("img",{src:"/3d-portfolio/images/avatar.png",alt:"",className:"w-12 h-12 border-2 rounded-full "})})]}),Oe.jsx("nav",{className:"desktop",children:Oe.jsx("ul",{children:kU.map(({link:t,name:n})=>Oe.jsx("li",{className:"group",children:Oe.jsxs("a",{href:t,children:[Oe.jsx("span",{children:n}),Oe.jsx("span",{className:"underline"})]})},n))})}),Oe.jsx("a",{href:"#contact",className:"contact-btn group",children:Oe.jsx("div",{className:"inner",children:Oe.jsx("span",{children:"Contact me"})})})]})})},M6=()=>Oe.jsxs(Oe.Fragment,{children:[Oe.jsx(S6,{}),Oe.jsx(z5,{}),Oe.jsx(A6,{}),Oe.jsx(n6,{}),Oe.jsx(KU,{}),Oe.jsx(ZU,{})]});VU.createRoot(document.getElementById("root")).render(Oe.jsx(pt.StrictMode,{children:Oe.jsx(M6,{})}));
